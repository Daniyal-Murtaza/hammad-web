(function(){var __webpack_modules__={349:function(t,e,r){t.exports=function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function i(t,e){return t(e={exports:{}},e.exports),e.exports}var n,s,a=e(i((function(t){t.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},t.exports.__esModule=!0,t.exports.default=t.exports}))),o=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},l="object"==typeof t&&t&&t.Object===Object&&t,h="object"==typeof self&&self&&self.Object===Object&&self,u=l||h||Function("return this")(),c=function(){return u.Date.now()},p=/\s/,d=function(t){for(var e=t.length;e--&&p.test(t.charAt(e)););return e},f=/^\s+/,m=function(t){return t?t.slice(0,d(t)+1).replace(f,""):t},g=u.Symbol,v=Object.prototype,y=v.hasOwnProperty,x=v.toString,_=g?g.toStringTag:void 0,b=function(t){var e=y.call(t,_),r=t[_];try{t[_]=void 0;var i=!0}catch(t){}var n=x.call(t);return i&&(e?t[_]=r:delete t[_]),n},w=Object.prototype.toString,S=function(t){return w.call(t)},M=g?g.toStringTag:void 0,T=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":M&&M in Object(t)?b(t):S(t)},E=function(t){return null!=t&&"object"==typeof t},P=function(t){return"symbol"==typeof t||E(t)&&"[object Symbol]"==T(t)},C=/^[-+]0x[0-9a-f]+$/i,A=/^0b[01]+$/i,D=/^0o[0-7]+$/i,k=parseInt,R=function(t){if("number"==typeof t)return t;if(P(t))return NaN;if(o(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=o(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=m(t);var r=A.test(t);return r||D.test(t)?k(t.slice(2),r?2:8):C.test(t)?NaN:+t},I=Math.max,L=Math.min,F=function(t,e,r){var i,n,s,a,l,h,u=0,p=!1,d=!1,f=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function m(e){var r=i,s=n;return i=n=void 0,u=e,a=t.apply(s,r)}function g(t){return u=t,l=setTimeout(y,e),p?m(t):a}function v(t){var r=t-h;return void 0===h||r>=e||r<0||d&&t-u>=s}function y(){var t=c();if(v(t))return x(t);l=setTimeout(y,function(t){var r=e-(t-h);return d?L(r,s-(t-u)):r}(t))}function x(t){return l=void 0,f&&i?m(t):(i=n=void 0,a)}function _(){var t=c(),r=v(t);if(i=arguments,n=this,h=t,r){if(void 0===l)return g(h);if(d)return clearTimeout(l),l=setTimeout(y,e),m(h)}return void 0===l&&(l=setTimeout(y,e)),a}return e=R(e)||0,o(r)&&(p=!!r.leading,s=(d="maxWait"in r)?I(R(r.maxWait)||0,e):s,f="trailing"in r?!!r.trailing:f),_.cancel=function(){void 0!==l&&clearTimeout(l),u=0,i=h=n=l=void 0},_.flush=function(){return void 0===l?a:x(c())},_},O={};function z(t){var e=[].slice.call(arguments,1);O[t]&&O[t].forEach((function(t){t.apply(this,e)}))}var B=new Proxy({off:function(t,e){O[t]=O[t]||[];var r=O[t].indexOf(e);r>-1&&O[t].splice(r,1)},on:function(t,e,r){r&&e(),O[t]=O[t]||[],-1===O[t].indexOf(e)&&O[t].push(e)},trigger:z,watchResize:function(){var t=$(window);n=t.width(),s=t.width(),t.on("resize",F((function(){var e=t.width(),r=t.height();e!==n&&(n=e,z("resize-w")),r!==s&&(s=r,z("resize-h")),z("resize")}),100))}},{get:function(t,e){return"reactiveWinWidth"===e?n:"reactiveWinHeight"===e?s:t[e]}}),V=i((function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i},t.exports.__esModule=!0,t.exports.default=t.exports}));e(V);var N=i((function(t){t.exports=function(t){if(Array.isArray(t))return V(t)},t.exports.__esModule=!0,t.exports.default=t.exports}));e(N);var G=i((function(t){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports}));e(G);var W=i((function(t){t.exports=function(t,e){if(t){if("string"==typeof t)return V(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports}));e(W);var H=i((function(t){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports}));e(H);var U=e(i((function(t){t.exports=function(t){return N(t)||G(t)||W(t)||H()},t.exports.__esModule=!0,t.exports.default=t.exports}))),j=e(i((function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports}))),X=e(i((function(t){function e(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports})));CanvasRenderingContext2D.prototype.clear=function(){var t=this.canvas,e=t.width,r=t.height;this.clearRect(0,0,e,r)};var q=function(t){var e=document.createElement("canvas");return t.width&&(e.width=t.width),t.height&&(e.height=t.height),e},Y=function(){function t(e){j(this,t),this.canvas=e||document.createElement("canvas"),this.canvasWidth=this.canvas.width,this.canvasHeight=this.canvas.height,this.ratio=this.canvasWidth/this.canvasHeight,this.ctx=this.canvas.getContext("2d")}return X(t,[{key:"setDimension",value:function(t){return t.width&&(this.canvas.width=this.canvasWidth=t.width),t.height&&(this.canvas.height=this.canvasHeight=t.height),this.ratio=this.canvasWidth/this.canvasHeight,this}},{key:"crop",value:function(t,e,r,i){var n=q({width:r,height:i});return n.getContext("2d").drawImage(this.canvas,t,e,r,i,0,0,r,i),this.clear(),this.setDimension({width:r,height:i}),this.ctx.drawImage(n,0,0,r,i),this}},{key:"mask",value:function(e){this.ctx.save();var r=e;e.constructor===t&&(r=e.canvas);var i=[].slice.call(arguments,1);return this.ctx.globalCompositeOperation="destination-in",r.constructor===CanvasGradient?(0===i.length&&(i=[0,0,this.canvasWidth,this.canvasHeight]),this.ctx.fillStyle=r,this.ctx.fillRect.apply(this.ctx,i)):this.ctx.drawImage.apply(this.ctx,[r].concat(U(i))),this.ctx.restore(),this}},{key:"clear",value:function(){return this.ctx.clear(),this}},{key:"drawImage",value:function(){var t=arguments;return 1===t.length&&(t=[t[0],0,0,this.canvasWidth,this.canvasHeight]),this.ctx.drawImage.apply(this.ctx,t),this}},{key:"drawCoverImage",value:function(t,e){var r=e.sourceRatio,i=this.canvasWidth,n=i/r;n<this.canvasHeight&&(i=(n=this.canvasHeight)*r);var s=i>this.canvasWidth?(this.canvasWidth-i)/2:0,a=n>this.canvasHeight?(this.canvasHeight-n)/2:0;return this.ctx.drawImage(t,s,a,i,n)}}],[{key:"fromImage",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new t(q({width:r.width||e.width,height:r.height||e.height})).drawImage(e)}}]),t}(),Z=function(){function t(e){j(this,t),this.tl=e.tl,this.cb=e.cb||function(){},this.friction=e.friction||1,this.$section=e.section?$(e.section):null,this.playing=!1,this.progress=this.getProgress(),this._loop=this._loop.bind(this)}return X(t,[{key:"play",value:function(){this.playing||(this.playing=!0,window.requestAnimationFrame(this._loop))}},{key:"pause",value:function(){this.playing=!1}},{key:"_loop",value:function(){this.playing&&(this.targetProgress=this.getProgress(),this.progress+=(this.targetProgress-this.progress)*this.friction,this.tl&&this.tl.progress(this.progress).pause(),this.cb(this.progress),window.requestAnimationFrame(this._loop))}},{key:"getProgress",value:function(){return this.$section?this.$section.progress():1}},{key:"destroy",value:function(){this.pause(),this.tl&&(this.tl.progress(0).pause(),this.tl.kill(),this.tl.getChildren().forEach((function(t){t.target&&TweenMax.set(t.target,{clearProps:"all"})})))}}]),t}(),J=function(t,e,r){for(var i=-1,n=t.length;++i<n;){var s=t[i],a=e(s);if(null!=a&&(void 0===o?a==a&&!P(a):r(a,o)))var o=a,l=s}return l},K=function(t,e){return t>e},Q=function(){this.__data__=[],this.size=0},tt=function(t,e){return t===e||t!=t&&e!=e},et=function(t,e){for(var r=t.length;r--;)if(tt(t[r][0],e))return r;return-1},rt=Array.prototype.splice,it=function(t){var e=this.__data__,r=et(e,t);return!(r<0||(r==e.length-1?e.pop():rt.call(e,r,1),--this.size,0))},nt=function(t){var e=this.__data__,r=et(e,t);return r<0?void 0:e[r][1]},st=function(t){return et(this.__data__,t)>-1},at=function(t,e){var r=this.__data__,i=et(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this};function ot(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}ot.prototype.clear=Q,ot.prototype.delete=it,ot.prototype.get=nt,ot.prototype.has=st,ot.prototype.set=at;var lt,ht=ot,ut=function(){this.__data__=new ht,this.size=0},ct=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},pt=function(t){return this.__data__.get(t)},dt=function(t){return this.__data__.has(t)},ft=function(t){if(!o(t))return!1;var e=T(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},mt=u["__core-js_shared__"],gt=(lt=/[^.]+$/.exec(mt&&mt.keys&&mt.keys.IE_PROTO||""))?"Symbol(src)_1."+lt:"",vt=function(t){return!!gt&&gt in t},yt=Function.prototype.toString,xt=function(t){if(null!=t){try{return yt.call(t)}catch(t){}try{return t+""}catch(t){}}return""},_t=/^\[object .+?Constructor\]$/,bt=Function.prototype,wt=Object.prototype,St=bt.toString,Mt=wt.hasOwnProperty,Tt=RegExp("^"+St.call(Mt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Et=function(t){return!(!o(t)||vt(t))&&(ft(t)?Tt:_t).test(xt(t))},Pt=function(t,e){return null==t?void 0:t[e]},Ct=function(t,e){var r=Pt(t,e);return Et(r)?r:void 0},At=Ct(u,"Map"),Dt=Ct(Object,"create"),kt=function(){this.__data__=Dt?Dt(null):{},this.size=0},Rt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},It=Object.prototype.hasOwnProperty,Lt=function(t){var e=this.__data__;if(Dt){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return It.call(e,t)?e[t]:void 0},Ft=Object.prototype.hasOwnProperty,Ot=function(t){var e=this.__data__;return Dt?void 0!==e[t]:Ft.call(e,t)},zt=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Dt&&void 0===e?"__lodash_hash_undefined__":e,this};function Bt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}Bt.prototype.clear=kt,Bt.prototype.delete=Rt,Bt.prototype.get=Lt,Bt.prototype.has=Ot,Bt.prototype.set=zt;var Vt=Bt,Nt=function(){this.size=0,this.__data__={hash:new Vt,map:new(At||ht),string:new Vt}},Gt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t},Wt=function(t,e){var r=t.__data__;return Gt(e)?r["string"==typeof e?"string":"hash"]:r.map},Ht=function(t){var e=Wt(this,t).delete(t);return this.size-=e?1:0,e},Ut=function(t){return Wt(this,t).get(t)},jt=function(t){return Wt(this,t).has(t)},Xt=function(t,e){var r=Wt(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this};function qt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}qt.prototype.clear=Nt,qt.prototype.delete=Ht,qt.prototype.get=Ut,qt.prototype.has=jt,qt.prototype.set=Xt;var Yt=qt,Zt=function(t,e){var r=this.__data__;if(r instanceof ht){var i=r.__data__;if(!At||i.length<199)return i.push([t,e]),this.size=++r.size,this;r=this.__data__=new Yt(i)}return r.set(t,e),this.size=r.size,this};function $t(t){var e=this.__data__=new ht(t);this.size=e.size}$t.prototype.clear=ut,$t.prototype.delete=ct,$t.prototype.get=pt,$t.prototype.has=dt,$t.prototype.set=Zt;var Jt=$t,Kt=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Qt=function(t){return this.__data__.has(t)};function te(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Yt;++e<r;)this.add(t[e])}te.prototype.add=te.prototype.push=Kt,te.prototype.has=Qt;var ee=te,re=function(t,e){for(var r=-1,i=null==t?0:t.length;++r<i;)if(e(t[r],r,t))return!0;return!1},ie=function(t,e){return t.has(e)},ne=function(t,e,r,i,n,s){var a=1&r,o=t.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var h=s.get(t),u=s.get(e);if(h&&u)return h==e&&u==t;var c=-1,p=!0,d=2&r?new ee:void 0;for(s.set(t,e),s.set(e,t);++c<o;){var f=t[c],m=e[c];if(i)var g=a?i(m,f,c,e,t,s):i(f,m,c,t,e,s);if(void 0!==g){if(g)continue;p=!1;break}if(d){if(!re(e,(function(t,e){if(!ie(d,e)&&(f===t||n(f,t,r,i,s)))return d.push(e)}))){p=!1;break}}else if(f!==m&&!n(f,m,r,i,s)){p=!1;break}}return s.delete(t),s.delete(e),p},se=u.Uint8Array,ae=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t,i){r[++e]=[i,t]})),r},oe=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r},le=g?g.prototype:void 0,he=le?le.valueOf:void 0,ue=function(t,e,r,i,n,s,a){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!s(new se(t),new se(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return tt(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var o=ae;case"[object Set]":var l=1&i;if(o||(o=oe),t.size!=e.size&&!l)return!1;var h=a.get(t);if(h)return h==e;i|=2,a.set(t,e);var u=ne(o(t),o(e),i,n,s,a);return a.delete(t),u;case"[object Symbol]":if(he)return he.call(t)==he.call(e)}return!1},ce=function(t,e){for(var r=-1,i=e.length,n=t.length;++r<i;)t[n+r]=e[r];return t},pe=Array.isArray,de=function(t,e,r){var i=e(t);return pe(t)?i:ce(i,r(t))},fe=function(t,e){for(var r=-1,i=null==t?0:t.length,n=0,s=[];++r<i;){var a=t[r];e(a,r,t)&&(s[n++]=a)}return s},me=function(){return[]},ge=Object.prototype.propertyIsEnumerable,ve=Object.getOwnPropertySymbols,ye=ve?function(t){return null==t?[]:(t=Object(t),fe(ve(t),(function(e){return ge.call(t,e)})))}:me,xe=function(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i},_e=function(t){return E(t)&&"[object Arguments]"==T(t)},be=Object.prototype,we=be.hasOwnProperty,Se=be.propertyIsEnumerable,Me=_e(function(){return arguments}())?_e:function(t){return E(t)&&we.call(t,"callee")&&!Se.call(t,"callee")},Te=function(){return!1},Ee=i((function(t,e){var r=e&&!e.nodeType&&e,i=r&&t&&!t.nodeType&&t,n=i&&i.exports===r?u.Buffer:void 0,s=(n?n.isBuffer:void 0)||Te;t.exports=s})),Pe=/^(?:0|[1-9]\d*)$/,Ce=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&Pe.test(t))&&t>-1&&t%1==0&&t<e},Ae=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},De={};De["[object Float32Array]"]=De["[object Float64Array]"]=De["[object Int8Array]"]=De["[object Int16Array]"]=De["[object Int32Array]"]=De["[object Uint8Array]"]=De["[object Uint8ClampedArray]"]=De["[object Uint16Array]"]=De["[object Uint32Array]"]=!0,De["[object Arguments]"]=De["[object Array]"]=De["[object ArrayBuffer]"]=De["[object Boolean]"]=De["[object DataView]"]=De["[object Date]"]=De["[object Error]"]=De["[object Function]"]=De["[object Map]"]=De["[object Number]"]=De["[object Object]"]=De["[object RegExp]"]=De["[object Set]"]=De["[object String]"]=De["[object WeakMap]"]=!1;var ke=function(t){return E(t)&&Ae(t.length)&&!!De[T(t)]},Re=function(t){return function(e){return t(e)}},Ie=i((function(t,e){var r=e&&!e.nodeType&&e,i=r&&t&&!t.nodeType&&t,n=i&&i.exports===r&&l.process,s=function(){try{return i&&i.require&&i.require("util").types||n&&n.binding&&n.binding("util")}catch(t){}}();t.exports=s})),Le=Ie&&Ie.isTypedArray,Fe=Le?Re(Le):ke,Oe=Object.prototype.hasOwnProperty,ze=function(t,e){var r=pe(t),i=!r&&Me(t),n=!r&&!i&&Ee(t),s=!r&&!i&&!n&&Fe(t),a=r||i||n||s,o=a?xe(t.length,String):[],l=o.length;for(var h in t)!e&&!Oe.call(t,h)||a&&("length"==h||n&&("offset"==h||"parent"==h)||s&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||Ce(h,l))||o.push(h);return o},Be=Object.prototype,Ve=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Be)},Ne=function(t,e){return function(r){return t(e(r))}}(Object.keys,Object),Ge=Object.prototype.hasOwnProperty,We=function(t){if(!Ve(t))return Ne(t);var e=[];for(var r in Object(t))Ge.call(t,r)&&"constructor"!=r&&e.push(r);return e},He=function(t){return null!=t&&Ae(t.length)&&!ft(t)},Ue=function(t){return He(t)?ze(t):We(t)},je=function(t){return de(t,Ue,ye)},Xe=Object.prototype.hasOwnProperty,qe=function(t,e,r,i,n,s){var a=1&r,o=je(t),l=o.length;if(l!=je(e).length&&!a)return!1;for(var h=l;h--;){var u=o[h];if(!(a?u in e:Xe.call(e,u)))return!1}var c=s.get(t),p=s.get(e);if(c&&p)return c==e&&p==t;var d=!0;s.set(t,e),s.set(e,t);for(var f=a;++h<l;){var m=t[u=o[h]],g=e[u];if(i)var v=a?i(g,m,u,e,t,s):i(m,g,u,t,e,s);if(!(void 0===v?m===g||n(m,g,r,i,s):v)){d=!1;break}f||(f="constructor"==u)}if(d&&!f){var y=t.constructor,x=e.constructor;y==x||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof x&&x instanceof x||(d=!1)}return s.delete(t),s.delete(e),d},Ye=Ct(u,"DataView"),Ze=Ct(u,"Promise"),$e=Ct(u,"Set"),Je=Ct(u,"WeakMap"),Ke=xt(Ye),Qe=xt(At),tr=xt(Ze),er=xt($e),rr=xt(Je),ir=T;(Ye&&"[object DataView]"!=ir(new Ye(new ArrayBuffer(1)))||At&&"[object Map]"!=ir(new At)||Ze&&"[object Promise]"!=ir(Ze.resolve())||$e&&"[object Set]"!=ir(new $e)||Je&&"[object WeakMap]"!=ir(new Je))&&(ir=function(t){var e=T(t),r="[object Object]"==e?t.constructor:void 0,i=r?xt(r):"";if(i)switch(i){case Ke:return"[object DataView]";case Qe:return"[object Map]";case tr:return"[object Promise]";case er:return"[object Set]";case rr:return"[object WeakMap]"}return e});var nr=ir,sr=Object.prototype.hasOwnProperty,ar=function(t,e,r,i,n,s){var a=pe(t),o=pe(e),l=a?"[object Array]":nr(t),h=o?"[object Array]":nr(e),u="[object Object]"==(l="[object Arguments]"==l?"[object Object]":l),c="[object Object]"==(h="[object Arguments]"==h?"[object Object]":h),p=l==h;if(p&&Ee(t)){if(!Ee(e))return!1;a=!0,u=!1}if(p&&!u)return s||(s=new Jt),a||Fe(t)?ne(t,e,r,i,n,s):ue(t,e,l,r,i,n,s);if(!(1&r)){var d=u&&sr.call(t,"__wrapped__"),f=c&&sr.call(e,"__wrapped__");if(d||f){var m=d?t.value():t,g=f?e.value():e;return s||(s=new Jt),n(m,g,r,i,s)}}return!!p&&(s||(s=new Jt),qe(t,e,r,i,n,s))},or=function t(e,r,i,n,s){return e===r||(null==e||null==r||!E(e)&&!E(r)?e!=e&&r!=r:ar(e,r,i,n,t,s))},lr=function(t,e,r,i){var n=r.length,s=n,a=!i;if(null==t)return!s;for(t=Object(t);n--;){var o=r[n];if(a&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++n<s;){var l=(o=r[n])[0],h=t[l],u=o[1];if(a&&o[2]){if(void 0===h&&!(l in t))return!1}else{var c=new Jt;if(i)var p=i(h,u,l,t,e,c);if(!(void 0===p?or(u,h,3,i,c):p))return!1}}return!0},hr=function(t){return t==t&&!o(t)},ur=function(t){for(var e=Ue(t),r=e.length;r--;){var i=e[r],n=t[i];e[r]=[i,n,hr(n)]}return e},cr=function(t,e){return function(r){return null!=r&&r[t]===e&&(void 0!==e||t in Object(r))}},pr=function(t){var e=ur(t);return 1==e.length&&e[0][2]?cr(e[0][0],e[0][1]):function(r){return r===t||lr(r,t,e)}},dr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,fr=/^\w*$/,mr=function(t,e){if(pe(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!P(t))||fr.test(t)||!dr.test(t)||null!=e&&t in Object(e)};function gr(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var i=arguments,n=e?e.apply(this,i):i[0],s=r.cache;if(s.has(n))return s.get(n);var a=t.apply(this,i);return r.cache=s.set(n,a)||s,a};return r.cache=new(gr.Cache||Yt),r}gr.Cache=Yt;var vr=gr,yr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xr=/\\(\\)?/g,_r=function(t){var e=vr(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(yr,(function(t,r,i,n){e.push(i?n.replace(xr,"$1"):r||t)})),e})),br=function(t,e){for(var r=-1,i=null==t?0:t.length,n=Array(i);++r<i;)n[r]=e(t[r],r,t);return n},wr=g?g.prototype:void 0,Sr=wr?wr.toString:void 0,Mr=function t(e){if("string"==typeof e)return e;if(pe(e))return br(e,t)+"";if(P(e))return Sr?Sr.call(e):"";var r=e+"";return"0"==r&&1/e==-1/0?"-0":r},Tr=function(t){return null==t?"":Mr(t)},Er=function(t,e){return pe(t)?t:mr(t,e)?[t]:_r(Tr(t))},Pr=function(t){if("string"==typeof t||P(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},Cr=function(t,e){for(var r=0,i=(e=Er(e,t)).length;null!=t&&r<i;)t=t[Pr(e[r++])];return r&&r==i?t:void 0},Ar=function(t,e,r){var i=null==t?void 0:Cr(t,e);return void 0===i?r:i},Dr=function(t,e){return null!=t&&e in Object(t)},kr=function(t,e,r){for(var i=-1,n=(e=Er(e,t)).length,s=!1;++i<n;){var a=Pr(e[i]);if(!(s=null!=t&&r(t,a)))break;t=t[a]}return s||++i!=n?s:!!(n=null==t?0:t.length)&&Ae(n)&&Ce(a,n)&&(pe(t)||Me(t))},Rr=function(t,e){return null!=t&&kr(t,e,Dr)},Ir=function(t,e){return mr(t)&&hr(e)?cr(Pr(t),e):function(r){var i=Ar(r,t);return void 0===i&&i===e?Rr(r,t):or(e,i,3)}},Lr=function(t){return t},Fr=function(t){return function(e){return null==e?void 0:e[t]}},Or=function(t){return function(e){return Cr(e,t)}},zr=function(t){return mr(t)?Fr(Pr(t)):Or(t)},Br=function(t){return"function"==typeof t?t:null==t?Lr:"object"==typeof t?pe(t)?Ir(t[0],t[1]):pr(t):zr(t)},Vr=function(t,e){return t&&t.length?J(t,Br(e),K):void 0},Nr=function(){function t(e){var r=e.sources,i=e.canvas,n=e.rate,s=e.drawMode,a=e.onProgressUpdate;j(this,t),this.drawMode=s||"cover",this.rate=n||60,this.fpsInterval=1e3/this.rate,this.req=null,this.canvasElement=i,this.canvas=new Y(i),this.sources=r,this.framesCount=this.sources.length,this.playing=!1,this.drawMethod="cover"===this.drawMode?this.drawCover:this.draw,this.loadPromise=this.loadImages().then(this.setup.bind(this)),this.loaded=!1,this.loadedCount=0,this.onProgressUpdate=a||function(){}}return X(t,[{key:"progress",value:function(){return this.loadedCount/this.sources.length}},{key:"loadImage",value:function(t){var e=this;return new Promise((function(r){var i=new Image;i.crossOrigin="anonymous",i.onload=function(){e.loadedCount++,r(i),e.onProgressUpdate(e.progress())},i.src=t}))}},{key:"loadImages",value:function(){var t=this;return Promise.all(this.sources.map((function(e){return t.loadImage(e)}))).then((function(e){t.images=e}))}},{key:"setup",value:function(){this.setSampleImage(),this.imageWidth=this.sampleImage.width,this.imageHeight=this.sampleImage.height,this.imageRatio=this.imageWidth/this.imageHeight,this.responsive(),this.loaded=!0,this.drawMethod(0)}},{key:"setSampleImage",value:function(){this.sampleImage=Vr(this.images,(function(t){return t.width}))}},{key:"responsive",value:function(){var t=this.canvasElement.getBoundingClientRect(),e=t.width,r=t.height,i=this.imageWidth/e,n=this.imageHeight/r,s=Math.min(Math.max(1,i,n),2);this.canvasWidth=e*s,this.canvasHeight=r*s,this.canvas.setDimension({width:this.canvasWidth,height:this.canvasHeight}),void 0!==this.lastDraw&&this.drawMethod(this.lastDraw)}},{key:"draw",value:function(t){this.loaded&&(this.lastDraw=t,this.canvas.clear(),this.canvas.drawImage(this.images[t]))}},{key:"drawCover",value:function(t){this.loaded&&(this.lastDraw=t,this.canvas.clear(),this.canvas.drawCoverImage(this.images[t],{sourceRatio:this.imageRatio}))}},{key:"play",value:function(){var t=this;return this.playing?this.playPromise:this.playPromise=new Promise((function(e){var r=t;r.playing=!0;var i,n,s=0,a=Date.now(),o=function t(){n=Date.now(),(i=n-a)>r.fpsInterval&&(a=n-i%r.fpsInterval,r.drawMethod(s++)),s<r.framesCount&&r.playing?r.req=requestAnimationFrame(t):(r.playing=!1,e())};t.loadPromise.then((function(){t.req=requestAnimationFrame(o)}))}))}},{key:"pause",value:function(){return cancelAnimationFrame(this.req),this.playing=!1,this}}]),t}(),Gr=function(t){return new Promise((function(e){var r=new Image;r.crossOrigin="anonymous",r.onload=function(){e(r)},r.src=t}))},Wr=function(t){return Promise.all(t.map((function(t){return Gr(t)})))},Hr=function(t,e){var r,i={};for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r]);for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r]);return i},Ur=Object.freeze({__proto__:null,respondChildrenSize:function(t,e){var r=function(){var r=(e?t.find(e):t.children()).map((function(t,e){return $(e).height()})).get().sort((function(t,e){return e-t}));t.height(r[0])};return B.on("resize-w",r,!0),function(){B.off("resize-w",r)}},delay:function(t){return new Promise((function(e){setTimeout(e,t)}))},preloadImage:Gr,preloadImages:Wr,scrollAnimation:function(t,e){var r,i,n,s,a=$(window),o=e.direction||"Y",l=e.style,h="transform"===l,u=0,c=t.height(),p="fixed"===e.position;!function d(){if(n=a.scrollTop(),s=t.offset().top,n>=s-B.reactiveWinHeight&&n<=s+c){var f=(p?-n:s-B.reactiveWinHeight-n)/(B.reactiveWinHeight+c);u+=(f-u)*e.factor,r=u*e.offset,i=h?"translate"+o+"("+r+"px)":r+"px",t.css(l,i)}requestAnimationFrame(d)}()},inView:function(t,e){var r,i,n=$(t),s=new IntersectionObserver((function(t){t.forEach((function(t){r=$(t.target),t.intersectionRatio<=0?(t.target.classList.remove("inview"),r.trigger("exit")):(t.target.classList.add("inview"),i=n.index(t.target),$().add(t.target).add(n.eq(i+1)).removeClass("progressive-image"),r.trigger("enter"))}))}),e);return n.each((function(t,e){s.observe(e)})),s},measure:function(t){var e=performance.now();t();var r=performance.now();console.log("Call to doSomething took "+(r-e)+" milliseconds.")},extend:Hr,canUseWebP:function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))&&0===t.toDataURL("image/webp").indexOf("data:image/webp")}}),jr=function(){function t(e,r){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(j(this,t),"undefined"==typeof Hammer)throw"Hammer JS is required";this.canvas=e,this.ctx=e.getContext("2d"),this.imageUrls=r,this.offset=0,this.speed=0,this.speeding=!1,this.autoPlaying=!1,this.options=Hr(this.constructor.defaultOptions,n),this.paused=!1,this.loaded=!1,this.looping=!1,this._render=this._render.bind(this),this._refresh=this._refresh.bind(this),this._loop=this._loop.bind(this),this.imagePromise=Wr(this.imageUrls).then((function(t){i.images=t,i.loaded=!0})).then(this._refresh).then(this._loop),window.addEventListener("resize",this._refresh),this._bindSwipe()}return X(t,[{key:"_bindSwipe",value:function(){var t,e=this,r=new Hammer(this.canvas);r.get("swipe").set({threshold:1,velocity:.1}),r.on("swipeleft swiperight",(function(r){if(!e.autoPlaying){var i=r.type,n=20*Math.abs(r.velocity);"swipeleft"===i?e.speedRight(n):e.speedLeft(n),t&&clearTimeout(t),t=setTimeout((function(){t=null,e.speedStop()}),300)}}))}},{key:"_refresh",value:function(){var t=this;this.imagePromise.then((function(){t._tickCanvasSize(),t._tickImageScaleSize(),t._render()}))}},{key:"_tickCanvasSize",value:function(){this.canvas.width=2*this.canvas.offsetWidth,this.canvas.height=2*this.canvas.offsetHeight}},{key:"_tickImageScaleSize",value:function(){var t=this;this.images=this.images.map((function(e){var r=t.canvas.height/e.height;return e.scaleWidth=r*e.width,e})),this.galleryWidth=this.images.reduce((function(t,e){return e.scaleWidth+t}),0)}},{key:"_clearCanvas",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"_drawGallery",value:function(t){var e=this;this.images.forEach((function(r){e.ctx.drawImage(r,0,0,r.width,r.height,t,0,r.scaleWidth,e.canvas.height),t+=r.scaleWidth}))}},{key:"_render",value:function(){for(this._clearCanvas(),this.offset+=this.speed,this.x=this.offset%this.galleryWidth,this.x>0&&(this.x-=this.galleryWidth);this._drawGallery(this.x),this.x+=this.galleryWidth,!(this.x>=this.canvas.width););}},{key:"_loop",value:function(){var t=this;this.looping||(this.looping=!0,window.requestAnimationFrame((function e(r){t.paused?t.looping=!1:(Math.abs(t.speed)>.1&&(t._render(),t.options.onProgress(t.speed/t.options.maxSpeed),t.speedTimer||t.autoPlaying||(t.speed*=.95)),window.requestAnimationFrame(e))})))}},{key:"_speedChange",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;this.speeding&&(this.speedTimer=setTimeout((function(){e.speed=Math.min(e.options.maxSpeed,Math.abs(e.speed+t))*Math.sign(t),e._speedChange(t,Math.max(.7*r,1e3/60))}),r))}},{key:"speedLeft",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.01*this.canvas.width;this.speeding=!0,this.speed+=t,this._speedChange(1)}},{key:"speedRight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.01*this.canvas.width;this.speeding=!0,this.speed-=t,this._speedChange(-1)}},{key:"speedStop",value:function(){this.speeding=!1,clearTimeout(this.speedTimer),this.speedTimer=void 0}},{key:"autoPlay",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.autoPlaying=!0,this.speed=t}},{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(){this.paused=!1,this.loaded&&this._loop()}}]),t}();a(jr,"defaultOptions",{maxSpeed:1e3,onProgress:function(){}});var Xr=function(){function t(){j(this,t),this._events={}}return X(t,[{key:"on",value:function(t,e){this._events[t]=this._events[t]||[],this._events[t].unshift(e)}},{key:"once",value:function(t,e){var r=this;this.on(t,(function i(n){r.off(t,i),void 0!==n?e(n):e()}))}},{key:"off",value:function(t,e){if(this.has(t)){if(1===arguments.length)return this._events[t]=null,void delete this._events[t];var r=this._events[t].indexOf(e);r>-1&&this._events[t].splice(r,1)}}},{key:"trigger",value:function(t,e){if(this.has(t))for(var r=this._events[t].length-1;r>=0;r--)void 0!==e?this._events[t][r](e):this._events[t][r]()}},{key:"has",value:function(t){return t in this._events&&0!==this._events[t].length}},{key:"destroy",value:function(){for(var t in this._events)this._events[t]=null;this._events=null}}]),t}(),qr=i((function(t){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports})),Yr=e(qr),Zr=i((function(t){function e(r,i){return t.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,e(r,i)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}));e(Zr);var $r=e(i((function(t){t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zr(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports}))),Jr=i((function(t){function e(r){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}));e(Jr);var Kr=e(i((function(t){var e=Jr.default;t.exports=function(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return qr(t)},t.exports.__esModule=!0,t.exports.default=t.exports}))),Qr=i((function(t){function e(r){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})),ti=e(Qr);function ei(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,i=ti(t);if(e){var n=ti(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return Kr(this,r)}}var ri=new(function(t){$r(r,t);var e=ei(r);function r(t){var i;return j(this,r),(i=e.call(this)).onResizeImmediate=i.onResizeImmediate.bind(Yr(i)),i.initialized=!1,i}return X(r,[{key:"initialize",value:function(){return this.initialized||(this.initialized=!0,this.pageMetrics=new function(){this.scrollX=0,this.scrollY=0,this.windowWidth=0,this.windowHeight=0,this.documentOffsetX=0,this.documentOffsetY=0},this.el=this.initializeResizeFilter(),this.initializeModel(),this.setupEvents()),Promise.resolve()}},{key:"setupEvents",value:function(){window.removeEventListener("resize",this.onResizeImmediate),window.addEventListener("resize",this.onResizeImmediate)}},{key:"initializeResizeFilter",value:function(){var t=document.querySelector(".css-dimensions-tracker")||document.createElement("div");return t.style.position="fixed",t.style.top="0",t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.style.visibility="hidden",t.style.zIndex="-1",document.documentElement.appendChild(t),t}},{key:"initializeModel",value:function(){this.pageMetrics.windowHeight=this.el.clientHeight,this.pageMetrics.windowWidth=this.el.clientWidth,this.pageMetrics.scrollY=window.scrollY||window.pageYOffset,this.pageMetrics.scrollX=window.scrollX||window.pageXOffset;var t=document.documentElement.getBoundingClientRect();this.pageMetrics.documentOffsetX=t.left+this.pageMetrics.scrollX,this.pageMetrics.documentOffsetY=t.top+this.pageMetrics.scrollY}},{key:"onResizeImmediate",value:function(){var t=this.el.clientWidth,e=this.el.clientHeight;if(t!==this.pageMetrics.windowWidth||e!==this.pageMetrics.windowHeight){this.pageMetrics.windowWidth=t,this.pageMetrics.windowHeight=e,this.pageMetrics.scrollY=window.scrollY||window.pageYOffset,this.pageMetrics.scrollX=window.scrollX||window.pageXOffset;var r=document.documentElement.getBoundingClientRect();this.pageMetrics.documentOffsetX=r.left+this.pageMetrics.scrollX,this.pageMetrics.documentOffsetY=r.top+this.pageMetrics.scrollY,this.trigger("ON_RESIZE_IMMEDIATE",this.pageMetrics)}}}]),r}(Xr)),ii=i((function(t){t.exports=function(t,e){return e.get?e.get.call(t):e.value},t.exports.__esModule=!0,t.exports.default=t.exports}));e(ii);var ni=i((function(t){t.exports=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)},t.exports.__esModule=!0,t.exports.default=t.exports}));e(ni);var si=e(i((function(t){t.exports=function(t,e){var r=ni(t,e,"get");return ii(t,r)},t.exports.__esModule=!0,t.exports.default=t.exports})));function ai(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,i=ti(t);if(e){var n=ti(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return Kr(this,r)}}function oi(t,e,r){hi(t,e),e.set(t,r)}function li(t,e){hi(t,e),e.add(t)}function hi(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ui(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var ci=new WeakSet,pi=new WeakSet,di=new WeakSet,fi=new WeakSet,mi=new WeakSet,gi=new WeakSet,vi=new WeakMap,yi=new WeakMap,xi=function(t){$r(r,t);var e=ai(r);function r(){var t;return j(this,r),t=e.call(this),li(Yr(t),gi),li(Yr(t),mi),li(Yr(t),fi),li(Yr(t),di),li(Yr(t),pi),li(Yr(t),ci),oi(Yr(t),vi,{writable:!0,value:function(){t.cssDimensionsTracker.clientWidth!==t.pageMetrics.windowWidth&&(ui(Yr(t),mi,Mi).call(Yr(t)),t.trigger("ON_RESIZE_IMMEDIATE",t.pageMetrics))}}),oi(Yr(t),yi,{writable:!0,value:function(){t.updateScrollPosition(),t.trigger("ON_SCROLL",t.pageMetrics)}}),t.ready=new Promise((function(e){return t._resolveReady=e})),t}return X(r,[{key:"initialize",value:function(){return this.pageMetrics={},ui(this,fi,Si).call(this),ui(this,di,wi).call(this),ui(this,ci,_i).call(this),ui(this,pi,bi).call(this),ui(this,mi,Mi).call(this),document.body.classList.add("page-metrics-ready"),this._resolveReady(),this.ready}},{key:"initialMeasure",value:function(){this.updateScrollBarWidth(),this.updateScrollPosition()}},{key:"updateScrollBarWidth",value:function(){this.pageMetrics.scrollBarWidth=ui(this,gi,Ti).call(this),this.pageMetrics.scrollBarWidth>0?document.body.style.setProperty("--scroll-bar-width","".concat(this.pageMetrics.scrollBarWidth,"px")):document.body.style.setProperty("--scroll-bar-width","")}},{key:"updateScrollPosition",value:function(){this.pageMetrics.scrollY=window.scrollY||window.pageYOffset,this.pageMetrics.scrollX=window.scrollX||window.pageXOffset}}]),r}(Xr);function _i(){window.addEventListener("resize",si(this,vi)),window.addEventListener("scroll",si(this,yi))}function bi(){var t=this,e=function(){return document.body.style.setProperty("--large-viewport-height","".concat(t.pageMetrics.lvh,"px"))},r=this.lvTracker.getBoundingClientRect(),i=r.width,n=r.height;if(this.pageMetrics.lvh=Math.ceil(n),this.pageMetrics.lvw=Math.ceil(i),e(),window.ResizeObserver){var s=!0;new ResizeObserver((function(r){if(s)s=!1;else{var i=r[0].contentRect,n=i.width,a=i.height;t.pageMetrics.lvh=Math.ceil(a),t.pageMetrics.lvw=Math.ceil(n),t.updateScrollPosition(),e(),t.trigger("ON_LV_CHANGE_IMMEDIATE",t.pageMetrics),window.clearTimeout(t.LV_CHANGE_TIMEOUT),t.LV_CHANGE_TIMEOUT=window.setTimeout((function(){t.trigger("ON_LV_CHANGE_DEBOUNCED",t.pageMetrics)}),250)}})).observe(this.lvTracker)}}function wi(){this.lvTracker=document.createElement("div"),CSS.supports("width","100lvh")?this.lvTracker.style="position: fixed; pointer-events: none; visibility: hidden; width: 100vw; height: 100lvh; z-index: -1;":this.lvTracker.style="position: fixed; pointer-events: none; visibility: hidden; width: 100vw; height: 100vh; z-index: -1;",document.body.appendChild(this.lvTracker)}function Si(){this.cssDimensionsTracker=document.createElement("div"),this.cssDimensionsTracker.style="position: fixed; top: 0; width: 100%; height: 100%; pointer-events: none; visibility: hidden; z-index: -1;",document.body.appendChild(this.cssDimensionsTracker)}function Mi(){this.updateScrollBarWidth(),this.pageMetrics.windowHeight=this.cssDimensionsTracker.clientHeight,this.pageMetrics.windowWidth=this.cssDimensionsTracker.clientWidth;var t=document.documentElement.getBoundingClientRect();this.pageMetrics.scrollY=window.scrollY||window.pageYOffset,this.pageMetrics.scrollX=window.scrollX||window.pageXOffset,this.pageMetrics.documentOffsetX=t.left+this.pageMetrics.scrollX,this.pageMetrics.documentOffsetY=t.top+this.pageMetrics.scrollY,document.body.style.setProperty("--viewport-height",this.pageMetrics.windowHeight+"px")}function Ti(){var t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}var Ei=function(){function t(e){var r=this;j(this,t),a(this,"onResizeImmediate",(function(){r.components.forEach((function(t){return t.onResizeImmediate(r.pmc.pageMetrics)}))})),a(this,"onLVChangeImmediate",(function(t){r.components.forEach((function(e){return e.onLVChangeImmediate(t)}))})),a(this,"onLVChangeDebounced",(function(t){r.components.forEach((function(e){return e.onLVChangeDebounced(t)}))})),a(this,"onBubbleGumReady",(function(){r.components.forEach((function(t){return t.onBubbleGumReady()}))})),this.el=e,this.components=[],this.componentAttribute="data-component-list",this.pmc=new xi,this.eventBus=new Xr,this._readyPromise=new Promise((function(t){r._readyResolve=t})),this.pmc.initialize().then((function(){r.initComponents(),r.setupEvents(),r._readyResolve(),r.pmc.initialMeasure(),r.onBubbleGumReady()}))}return X(t,[{key:"ready",value:function(t){this._readyPromise.then(t)}},{key:"initComponents",value:function(){var t=this;U(this.el.querySelectorAll("[".concat(this.componentAttribute,"]"))).forEach((function(e){e.getAttribute(t.componentAttribute).split(" ").forEach((function(r){t.addComponent({componentName:r,el:e})}))})),document.dispatchEvent(new Event("DOM_COMPONENTS_MOUNTED"))}},{key:"addComponent",value:function(t){var e=t.el,r=t.componentName;if(!this.constructor.COMPONENTS.hasOwnProperty(r))return console.error("No component type ".concat(r," found!"));var i=new(0,this.constructor.COMPONENTS[r])({el:e,gum:this,pageMetrics:this.pmc.pageMetrics,pmc:this.pmc,eventBus:this.eventBus});return i.initialize&&i.initialize(),this.components.push(i),i}},{key:"getComponentOfType",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement,i="[".concat(this.componentAttribute,"*=").concat(t,"]"),n=r.matches(i)?r:r.querySelector(i);return n?this.components.find((function(r){return r instanceof e.constructor.COMPONENTS[t]&&r.el===n})):null}},{key:"getComponentsOfType",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement,i="[".concat(this.componentAttribute,"*=").concat(t,"]"),n=r.matches(i)?[r]:U(r.querySelectorAll(i));return this.components.filter((function(r){return r instanceof e.constructor.COMPONENTS[t]&&n.includes(r.el)}))}},{key:"getComponentsForElement",value:function(t){return this.components.filter((function(e){return e.el===t}))}},{key:"setupEvents",value:function(){this.pmc.on("ON_LV_CHANGE_IMMEDIATE",this.onLVChangeImmediate),this.pmc.on("ON_LV_CHANGE_DEBOUNCED",this.onLVChangeDebounced),this.pmc.on("ON_RESIZE_IMMEDIATE",this.onResizeImmediate)}}],[{key:"registerComponent",value:function(t,e){if(this.COMPONENTS.hasOwnProperty(t))throw"Component ".concat(t," already exists.");if("function"!=typeof e)throw"Component ".concat(t," is not a constructor");this.COMPONENTS[t]=e}}]),t}();a(Ei,"COMPONENTS",{});var Pi=i((function(t){t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qr(t)););return t},t.exports.__esModule=!0,t.exports.default=t.exports}));e(Pi);var Ci=e(i((function(t){function e(){return"undefined"!=typeof Reflect&&Reflect.get?(t.exports=e=Reflect.get.bind(),t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=e=function(t,e,r){var i=Pi(t,e);if(i){var n=Object.getOwnPropertyDescriptor(i,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}},t.exports.__esModule=!0,t.exports.default=t.exports),e.apply(this,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})));function Ai(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,i=ti(t);if(e){var n=ti(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return Kr(this,r)}}var Di=function(t){$r(r,t);var e=Ai(r);function r(t){var i,n=t.el,s=t.gum,a=t.pageMetrics,o=t.pmc,l=t.eventBus;return j(this,r),(i=e.call(this)).el=n,i.gum=s,i.pageMetrics=a,i.pmc=o,i.eventBus=l,i}return X(r,[{key:"destroy",value:function(){Ci(ti(r.prototype),"destroy",this).call(this),this.el=null,this.gum=null,this.pageMetrics=null,this.pmc=null}},{key:"mounted",value:function(){}},{key:"onResizeImmediate",value:function(t){}},{key:"onResizeDebounced",value:function(t){}},{key:"onLVChangeImmediate",value:function(t){}},{key:"onLVChangeDebounced",value:function(t){}},{key:"onBubbleGumReady",value:function(){}}]),r}(Xr);function ki(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,i=ti(t);if(e){var n=ti(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return Kr(this,r)}}var Ri=function(t){$r(r,t);var e=ki(r);function r(){return j(this,r),e.apply(this,arguments)}return X(r,[{key:"initialize",value:function(){this.inModal=this.el.closest('[data-component-list="Modal"]'),this.setSource(),this.setupEvents()}},{key:"setupEvents",value:function(){for(var t,e=this,r=this.sources,i=function(t){window.matchMedia(t.dataset.mediaQuery).addListener((function(t){t.matches&&e.setSource()}))},n=0;n<r.length;n++)(t=r[n]).dataset.mediaQuery&&i(t)}},{key:"setSource",value:function(){var t=this.getCurrentVideoSource().dataset.src;this.inModal?this.el.dataset.src=t:this.el.getAttribute("src")!==t&&this.el.setAttribute("src",t)}},{key:"getCurrentVideoSource",value:function(){for(var t,e,r=this.sources,i=0;i<r.length;i++)if(!(e=(t=r[i]).dataset.mediaQuery)||window.matchMedia(e).matches)return t}},{key:"sources",get:function(){return U(this.el.querySelectorAll("[data-src]"))}}]),r}(Di),Ii=e(i((function(t){function e(t,e,r,i,n,s,a){try{var o=t[s](a),l=o.value}catch(t){return void r(t)}o.done?e(l):Promise.resolve(l).then(i,n)}t.exports=function(t){return function(){var r=this,i=arguments;return new Promise((function(n,s){var a=t.apply(r,i);function o(t){e(a,n,s,o,l,"next",t)}function l(t){e(a,n,s,o,l,"throw",t)}o(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports}))),Li=i((function(t){var e=Jr.default;function r(){t.exports=r=function(){return i},t.exports.__esModule=!0,t.exports.default=t.exports;var i={},n=Object.prototype,s=n.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",h=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function p(t,e,r,i){var n=e&&e.prototype instanceof m?e:m,s=Object.create(n.prototype),o=new C(i||[]);return a(s,"_invoke",{value:M(t,r,o)}),s}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}i.wrap=p;var f={};function m(){}function g(){}function v(){}var y={};c(y,l,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(A([])));_&&_!==n&&s.call(_,l)&&(y=_);var b=v.prototype=m.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,r){var i;a(this,"_invoke",{value:function(n,a){function o(){return new r((function(i,o){!function i(n,a,o,l){var h=d(t[n],t,a);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==e(c)&&s.call(c,"__await")?r.resolve(c.__await).then((function(t){i("next",t,o,l)}),(function(t){i("throw",t,o,l)})):r.resolve(c).then((function(t){u.value=t,o(u)}),(function(t){return i("throw",t,o,l)}))}l(h.arg)}(n,a,i,o)}))}return i=i?i.then(o,o):o()}})}function M(t,e,r){var i="suspendedStart";return function(n,s){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===n)throw s;return D()}for(r.method=n,r.arg=s;;){var a=r.delegate;if(a){var o=T(a,r);if(o){if(o===f)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===i)throw i="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i="executing";var l=d(t,e,r);if("normal"===l.type){if(i=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i="completed",r.method="throw",r.arg=l.arg)}}}function T(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,T(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var i=d(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,f;var n=i.arg;return n?n.done?(e[t.resultName]=n.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):n:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function A(t){if(t){var e=t[l];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(s.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:D}}function D(){return{value:void 0,done:!0}}return g.prototype=v,a(b,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:g,configurable:!0}),g.displayName=c(v,u,"GeneratorFunction"),i.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},i.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,u,"GeneratorFunction")),t.prototype=Object.create(b),t},i.awrap=function(t){return{__await:t}},w(S.prototype),c(S.prototype,h,(function(){return this})),i.AsyncIterator=S,i.async=function(t,e,r,n,s){void 0===s&&(s=Promise);var a=new S(p(t,e,r,n),s);return i.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),c(b,u,"Generator"),c(b,l,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),i.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},i.values=A,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&s.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return a.type="throw",a.arg=t,e.next=r,i&&(e.method="next",e.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i],a=n.completion;if("root"===n.tryLoc)return r("end");if(n.tryLoc<=this.prev){var o=s.call(n,"catchLoc"),l=s.call(n,"finallyLoc");if(o&&l){if(this.prev<n.catchLoc)return r(n.catchLoc,!0);if(this.prev<n.finallyLoc)return r(n.finallyLoc)}else if(o){if(this.prev<n.catchLoc)return r(n.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return r(n.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&s.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var n=i;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var a=n?n.completion:{};return a.type=t,a.arg=e,n?(this.method="next",this.next=n.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;P(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:A(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},i}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}));e(Li);var Fi=Li(),Oi=Fi;try{regeneratorRuntime=Fi}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=Fi:Function("r","regeneratorRuntime = r")(Fi)}function zi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,i=ti(t);if(e){var n=ti(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return Kr(this,r)}}function Bi(t,e){Ni(t,e),e.add(t)}function Vi(t,e,r){Ni(t,e),e.set(t,r)}function Ni(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Gi(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var Wi="MEDIA_LOAD_START",Hi="MEDIA_LOAD_COMPLETE",Ui="MEDIA_LOAD_ERROR",ji="LOADING_STATE_CHANGE",Xi=new WeakMap,qi=new WeakMap,Yi=new WeakMap,Zi=new WeakSet,$i=new WeakMap,Ji=new WeakMap,Ki=function(t){$r(i,t);var e,r=zi(i);function i(){var t,e,n;j(this,i);for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return t=r.call.apply(r,[this].concat(o)),Bi(Yr(t),Zi),a(Yr(t),"updatePosition",(function(){var e=t.el.getBoundingClientRect(),r=e.top,i=e.height;e.bottom,t._top=t.pageMetrics.scrollY+r,t._bottom=t._top+i})),Vi(Yr(t),Xi,{writable:!0,value:(e=Ii(Oi.mark((function e(){return Oi.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._inFrame=!0,t._loaded){e.next=5;break}return e.next=4,t.load();case 4:t._loaded=!0;case 5:if(!t._inFrame||!t._playOnEnter){e.next=13;break}return e.prev=6,e.next=9,t.play();case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(6);case 13:case"end":return e.stop()}}),e,null,[[6,11]])}))),function(){return e.apply(this,arguments)})}),Vi(Yr(t),qi,{writable:!0,value:(n=Ii(Oi.mark((function e(){return Oi.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._inFrame=!1,t._pauseOnExit&&t._loaded&&t.video.pause(),t._resetOnExit&&t._loaded&&(t.video.currentTime=0);case 3:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})}),a(Yr(t),"play",Ii(Oi.mark((function e(){return Oi.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.video.readyState<1)){e.next=3;break}return e.next=3,t.load();case 3:return e.next=5,t.video.play();case 5:case"end":return e.stop()}}),e)})))),a(Yr(t),"pause",(function(){t.video.pause()})),a(Yr(t),"load",Ii(Oi.mark((function e(){var r;return Oi.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.src,t.currentLoadUrl!==r){e.next=3;break}return e.abrupt("return");case 3:return t.currentLoadUrl=r,t.trigger(Wi),t._pendingPromise=new Promise((function(e,i){t._resolvePendingPromise=function(){t._resolvePendingPromise=null,t._rejectPendingPromise=null,e()},t._rejectPendingPromise=function(){t._resolvePendingPromise=null,t._rejectPendingPromise=null,i()},t.video.addEventListener("canplaythrough",si(Yr(t),$i)),Gi(Yr(t),Zi,Qi).call(Yr(t))&&t.video.addEventListener("canplay",si(Yr(t),$i)),t.video.addEventListener("error",si(Yr(t),Ji)),t.video.addEventListener("abort",si(Yr(t),Ji)),t.video.src=r,t.video.load()})),e.abrupt("return",t._pendingPromise);case 7:case"end":return e.stop()}}),e)})))),Vi(Yr(t),Yi,{writable:!0,value:function(){t.video.removeEventListener("canplaythrough",si(Yr(t),$i)),t.video.removeEventListener("canplay",si(Yr(t),$i)),t.video.removeEventListener("abort",si(Yr(t),Ji)),t.video.removeEventListener("error",si(Yr(t),Ji))}}),Vi(Yr(t),$i,{writable:!0,value:function(){si(Yr(t),Yi).call(Yr(t)),t.trigger(ji),t.trigger(Hi),t._resolvePendingPromise()}}),Vi(Yr(t),Ji,{writable:!0,value:function(){si(Yr(t),Yi).call(Yr(t)),t.trigger(Ui),t.trigger(ji),t._rejectPendingPromise()}}),a(Yr(t),"responsive",Ii(Oi.mark((function e(){var r,i;return Oi.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.updatePosition(),r=t.src,i=!t.video.paused,!t.currentLoadUrl||t.currentLoadUrl===r){e.next=9;break}return e.next=6,t.load();case 6:if(!i){e.next=9;break}return e.next=9,t.play();case 9:case"end":return e.stop()}}),e)})))),a(Yr(t),"onScroll",function(){var e=Ii(Oi.mark((function e(r){var i;return Oi.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.scrollY+r.lvh,t.currentLoadUrl||!(i>t._top-1e3)){e.next=4;break}return e.next=4,t.load();case 4:if(!(t._top<i&&t._bottom>r.scrollY)){e.next=10;break}if(t._inFrame){e.next=8;break}return e.next=8,si(Yr(t),Xi).call(Yr(t));case 8:e.next=13;break;case 10:if(!t._inFrame){e.next=13;break}return e.next=13,si(Yr(t),qi).call(Yr(t));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t}return X(i,[{key:"initialize",value:function(){this.video=this.el.querySelector("video"),this._playOnEnter=void 0===this.el.dataset.inlineMediaPlayOnEnter||JSON.parse(this.el.dataset.inlineMediaPlayOnEnter),this._pauseOnExit=void 0===this.el.dataset.inlineMediaPauseOnExit||JSON.parse(this.el.dataset.inlineMediaPauseOnExit),this._resetOnExit=void 0===this.el.dataset.inlineMediaResetOnExit||JSON.parse(this.el.dataset.inlineMediaResetOnExit)}},{key:"onBubbleGumReady",value:function(){this.updatePosition(),this.pmc.on("ON_SCROLL",this.onScroll)}},{key:"src",get:function(){return this.getCurrentVideoSource().dataset.src}},{key:"onLVChangeDebounced",value:(e=Ii(Oi.mark((function t(){return Oi.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.responsive();case 2:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),i}(Ri);function Qi(){var t=navigator.userAgent;return t.indexOf("Firefox")>-1&&-1===t.indexOf("Opera")}var tn=function(){function t(e){var r=this;j(this,t),a(this,"documentVisibilityChanged",(function(){"hidden"===document.visibilityState&&r.video.play()})),this.video=e}return X(t,[{key:"destroy",value:function(){document.removeEventListener("visibilitychange",this.documentVisibilityChanged),this.video=null}},{key:"playVideoWhenDocumentHidden",value:function(){document.addEventListener("visibilitychange",this.documentVisibilityChanged)}}]),t}();function en(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}!function(t){if(void 0!==t.jQuery){var e=t.jQuery;!function(){var t,r,i,n,s=e(window);e.fn.progress=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i=s.height(),t=s.scrollTop()+i,r=this.offset().top,n=e.includeWindow?this.height()+i:this.height(),t<r?0:Math.min((t-r)/n,1)}}(),e.fn.cycleCheck=function(t){var e=(this.index(this.filter(":checked"))+t)%this.length;this.eq(e).click()}}}(window);var rn=new WeakMap,nn=X((function t(e){var r=this;j(this,t),en(this,rn,{writable:!0,value:function(t){r.requestID=requestAnimationFrame(si(r,rn)),r.callback(t)}}),a(this,"start",(function(){r.running||(r.running=!0,r.requestID=requestAnimationFrame(si(r,rn)))})),a(this,"stop",(function(){r.running=!1,cancelAnimationFrame(r.requestID)})),a(this,"destroy",(function(){r.stop(),r.callback=null})),this.callback=e,this.running=!1,this.requestID=null}));function sn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function an(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?sn(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}return an(an({Event:B,Canvas:Y,Animation:Z,SeqAnimation:Nr,ImageGallery:jr,EventEmitterMicro:Xr,AnimSystem:ri,BubbleGum:Ei,Component:Di,AdaptiveVideo:Ri,InlineMedia:Ki,VideoManager:tn,PageMetricsController:xi},Object.freeze({__proto__:null,RAF:nn,targetFPS:function(t,e){var r="function"==typeof e?function(){return Math.floor(1e3/e())}:function(){return Math.floor(1e3/e)},i=0,n=0,s=0;return function(e){i=e-n,Math.ceil(i+s)>=r()&&(n=e,s=Math.max(i-r(),0),t(e))}}})),Ur)}()},6030:function(t){!function(){function e(t,e){document.addEventListener?t.addEventListener("scroll",e,!1):t.attachEvent("scroll",e)}function r(t){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(t)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function i(t,e){t.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+e+";"}function n(t){var e=t.g.offsetWidth,r=e+100;return t.j.style.width=r+"px",t.i.scrollLeft=r,t.h.scrollLeft=t.h.scrollWidth+100,t.l!==e&&(t.l=e,!0)}function s(t,r){function i(){var t=s;n(t)&&null!==t.g.parentNode&&r(t.l)}var s=t;e(t.h,i),e(t.i,i),n(t)}function a(t,e,r){e=e||{},r=r||window,this.family=t,this.style=e.style||"normal",this.weight=e.weight||"normal",this.stretch=e.stretch||"normal",this.context=r}var o=null,l=null,h=null,u=null;function c(t){return null===u&&(u=!!t.document.fonts),u}function p(t,e){var r=t.style,i=t.weight;if(null===h){var n=document.createElement("div");try{n.style.font="condensed 100px sans-serif"}catch(t){}h=""!==n.style.font}return[r,i,h?t.stretch:"","100px",e].join(" ")}a.prototype.load=function(t,e){var n=this,a=t||"BESbswy",h=0,u=e||3e3,d=(new Date).getTime();return new Promise((function(t,e){if(c(n.context)&&!function(t){return null===l&&(c(t)&&/Apple/.test(window.navigator.vendor)?(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),l=!!t&&603>parseInt(t[1],10)):l=!1),l}(n.context)){var f=new Promise((function(t,e){!function r(){(new Date).getTime()-d>=u?e(Error(u+"ms timeout exceeded")):n.context.document.fonts.load(p(n,'"'+n.family+'"'),a).then((function(e){1<=e.length?t():setTimeout(r,25)}),e)}()})),m=new Promise((function(t,e){h=setTimeout((function(){e(Error(u+"ms timeout exceeded"))}),u)}));Promise.race([m,f]).then((function(){clearTimeout(h),t(n)}),e)}else!function(t){document.body?t():document.addEventListener?document.addEventListener("DOMContentLoaded",(function e(){document.removeEventListener("DOMContentLoaded",e),t()})):document.attachEvent("onreadystatechange",(function e(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",e),t())}))}((function(){function l(){var e;(e=-1!=g&&-1!=v||-1!=g&&-1!=y||-1!=v&&-1!=y)&&((e=g!=v&&g!=y&&v!=y)||(null===o&&(e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),o=!!e&&(536>parseInt(e[1],10)||536===parseInt(e[1],10)&&11>=parseInt(e[2],10))),e=o&&(g==x&&v==x&&y==x||g==_&&v==_&&y==_||g==b&&v==b&&y==b)),e=!e),e&&(null!==w.parentNode&&w.parentNode.removeChild(w),clearTimeout(h),t(n))}var c=new r(a),f=new r(a),m=new r(a),g=-1,v=-1,y=-1,x=-1,_=-1,b=-1,w=document.createElement("div");w.dir="ltr",i(c,p(n,"sans-serif")),i(f,p(n,"serif")),i(m,p(n,"monospace")),w.appendChild(c.g),w.appendChild(f.g),w.appendChild(m.g),n.context.document.body.appendChild(w),x=c.g.offsetWidth,_=f.g.offsetWidth,b=m.g.offsetWidth,function t(){if((new Date).getTime()-d>=u)null!==w.parentNode&&w.parentNode.removeChild(w),e(Error(u+"ms timeout exceeded"));else{var r=n.context.document.hidden;!0!==r&&void 0!==r||(g=c.g.offsetWidth,v=f.g.offsetWidth,y=m.g.offsetWidth,l()),h=setTimeout(t,50)}}(),s(c,(function(t){g=t,l()})),i(c,p(n,'"'+n.family+'",sans-serif')),s(f,(function(t){v=t,l()})),i(f,p(n,'"'+n.family+'",serif')),s(m,(function(t){y=t,l()})),i(m,p(n,'"'+n.family+'",monospace'))}))}))},t.exports=a}()},4028:function(t,e,r){var i;t=r.nmd(t),function(){var n,s="Expected a function",a="__lodash_hash_undefined__",o="__lodash_placeholder__",l=16,h=32,u=64,c=128,p=256,d=1/0,f=9007199254740991,m=NaN,g=4294967295,v=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",l],["flip",512],["partial",h],["partialRight",u],["rearg",p]],y="[object Arguments]",x="[object Array]",_="[object Boolean]",b="[object Date]",w="[object Error]",S="[object Function]",M="[object GeneratorFunction]",T="[object Map]",E="[object Number]",P="[object Object]",C="[object Promise]",A="[object RegExp]",D="[object Set]",k="[object String]",R="[object Symbol]",I="[object WeakMap]",L="[object ArrayBuffer]",F="[object DataView]",O="[object Float32Array]",z="[object Float64Array]",B="[object Int8Array]",V="[object Int16Array]",N="[object Int32Array]",G="[object Uint8Array]",W="[object Uint8ClampedArray]",H="[object Uint16Array]",U="[object Uint32Array]",j=/\b__p \+= '';/g,X=/\b(__p \+=) '' \+/g,q=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Y=/&(?:amp|lt|gt|quot|#39);/g,Z=/[&<>"']/g,$=RegExp(Y.source),J=RegExp(Z.source),K=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,tt=/<%=([\s\S]+?)%>/g,et=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,rt=/^\w*$/,it=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nt=/[\\^$.*+?()[\]{}|]/g,st=RegExp(nt.source),at=/^\s+/,ot=/\s/,lt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ht=/\{\n\/\* \[wrapped with (.+)\] \*/,ut=/,? & /,ct=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,pt=/[()=,{}\[\]\/\s]/,dt=/\\(\\)?/g,ft=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,mt=/\w*$/,gt=/^[-+]0x[0-9a-f]+$/i,vt=/^0b[01]+$/i,yt=/^\[object .+?Constructor\]$/,xt=/^0o[0-7]+$/i,_t=/^(?:0|[1-9]\d*)$/,bt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,wt=/($^)/,St=/['\n\r\u2028\u2029\\]/g,Mt="\\ud800-\\udfff",Tt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Et="\\u2700-\\u27bf",Pt="a-z\\xdf-\\xf6\\xf8-\\xff",Ct="A-Z\\xc0-\\xd6\\xd8-\\xde",At="\\ufe0e\\ufe0f",Dt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",kt="['’]",Rt="["+Mt+"]",It="["+Dt+"]",Lt="["+Tt+"]",Ft="\\d+",Ot="["+Et+"]",zt="["+Pt+"]",Bt="[^"+Mt+Dt+Ft+Et+Pt+Ct+"]",Vt="\\ud83c[\\udffb-\\udfff]",Nt="[^"+Mt+"]",Gt="(?:\\ud83c[\\udde6-\\uddff]){2}",Wt="[\\ud800-\\udbff][\\udc00-\\udfff]",Ht="["+Ct+"]",Ut="\\u200d",jt="(?:"+zt+"|"+Bt+")",Xt="(?:"+Ht+"|"+Bt+")",qt="(?:['’](?:d|ll|m|re|s|t|ve))?",Yt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Zt="(?:"+Lt+"|"+Vt+")"+"?",$t="["+At+"]?",Jt=$t+Zt+("(?:"+Ut+"(?:"+[Nt,Gt,Wt].join("|")+")"+$t+Zt+")*"),Kt="(?:"+[Ot,Gt,Wt].join("|")+")"+Jt,Qt="(?:"+[Nt+Lt+"?",Lt,Gt,Wt,Rt].join("|")+")",te=RegExp(kt,"g"),ee=RegExp(Lt,"g"),re=RegExp(Vt+"(?="+Vt+")|"+Qt+Jt,"g"),ie=RegExp([Ht+"?"+zt+"+"+qt+"(?="+[It,Ht,"$"].join("|")+")",Xt+"+"+Yt+"(?="+[It,Ht+jt,"$"].join("|")+")",Ht+"?"+jt+"+"+qt,Ht+"+"+Yt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ft,Kt].join("|"),"g"),ne=RegExp("["+Ut+Mt+Tt+At+"]"),se=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ae=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],oe=-1,le={};le[O]=le[z]=le[B]=le[V]=le[N]=le[G]=le[W]=le[H]=le[U]=!0,le[y]=le[x]=le[L]=le[_]=le[F]=le[b]=le[w]=le[S]=le[T]=le[E]=le[P]=le[A]=le[D]=le[k]=le[I]=!1;var he={};he[y]=he[x]=he[L]=he[F]=he[_]=he[b]=he[O]=he[z]=he[B]=he[V]=he[N]=he[T]=he[E]=he[P]=he[A]=he[D]=he[k]=he[R]=he[G]=he[W]=he[H]=he[U]=!0,he[w]=he[S]=he[I]=!1;var ue={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ce=parseFloat,pe=parseInt,de="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,fe="object"==typeof self&&self&&self.Object===Object&&self,me=de||fe||Function("return this")(),ge=e&&!e.nodeType&&e,ve=ge&&t&&!t.nodeType&&t,ye=ve&&ve.exports===ge,xe=ye&&de.process,_e=function(){try{var t=ve&&ve.require&&ve.require("util").types;return t||xe&&xe.binding&&xe.binding("util")}catch(t){}}(),be=_e&&_e.isArrayBuffer,we=_e&&_e.isDate,Se=_e&&_e.isMap,Me=_e&&_e.isRegExp,Te=_e&&_e.isSet,Ee=_e&&_e.isTypedArray;function Pe(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function Ce(t,e,r,i){for(var n=-1,s=null==t?0:t.length;++n<s;){var a=t[n];e(i,a,r(a),t)}return i}function Ae(t,e){for(var r=-1,i=null==t?0:t.length;++r<i&&!1!==e(t[r],r,t););return t}function De(t,e){for(var r=null==t?0:t.length;r--&&!1!==e(t[r],r,t););return t}function ke(t,e){for(var r=-1,i=null==t?0:t.length;++r<i;)if(!e(t[r],r,t))return!1;return!0}function Re(t,e){for(var r=-1,i=null==t?0:t.length,n=0,s=[];++r<i;){var a=t[r];e(a,r,t)&&(s[n++]=a)}return s}function Ie(t,e){return!!(null==t?0:t.length)&&He(t,e,0)>-1}function Le(t,e,r){for(var i=-1,n=null==t?0:t.length;++i<n;)if(r(e,t[i]))return!0;return!1}function Fe(t,e){for(var r=-1,i=null==t?0:t.length,n=Array(i);++r<i;)n[r]=e(t[r],r,t);return n}function Oe(t,e){for(var r=-1,i=e.length,n=t.length;++r<i;)t[n+r]=e[r];return t}function ze(t,e,r,i){var n=-1,s=null==t?0:t.length;for(i&&s&&(r=t[++n]);++n<s;)r=e(r,t[n],n,t);return r}function Be(t,e,r,i){var n=null==t?0:t.length;for(i&&n&&(r=t[--n]);n--;)r=e(r,t[n],n,t);return r}function Ve(t,e){for(var r=-1,i=null==t?0:t.length;++r<i;)if(e(t[r],r,t))return!0;return!1}var Ne=qe("length");function Ge(t,e,r){var i;return r(t,(function(t,r,n){if(e(t,r,n))return i=r,!1})),i}function We(t,e,r,i){for(var n=t.length,s=r+(i?1:-1);i?s--:++s<n;)if(e(t[s],s,t))return s;return-1}function He(t,e,r){return e==e?function(t,e,r){var i=r-1,n=t.length;for(;++i<n;)if(t[i]===e)return i;return-1}(t,e,r):We(t,je,r)}function Ue(t,e,r,i){for(var n=r-1,s=t.length;++n<s;)if(i(t[n],e))return n;return-1}function je(t){return t!=t}function Xe(t,e){var r=null==t?0:t.length;return r?$e(t,e)/r:m}function qe(t){return function(e){return null==e?n:e[t]}}function Ye(t){return function(e){return null==t?n:t[e]}}function Ze(t,e,r,i,n){return n(t,(function(t,n,s){r=i?(i=!1,t):e(r,t,n,s)})),r}function $e(t,e){for(var r,i=-1,s=t.length;++i<s;){var a=e(t[i]);a!==n&&(r=r===n?a:r+a)}return r}function Je(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i}function Ke(t){return t?t.slice(0,gr(t)+1).replace(at,""):t}function Qe(t){return function(e){return t(e)}}function tr(t,e){return Fe(e,(function(e){return t[e]}))}function er(t,e){return t.has(e)}function rr(t,e){for(var r=-1,i=t.length;++r<i&&He(e,t[r],0)>-1;);return r}function ir(t,e){for(var r=t.length;r--&&He(e,t[r],0)>-1;);return r}function nr(t,e){for(var r=t.length,i=0;r--;)t[r]===e&&++i;return i}var sr=Ye({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),ar=Ye({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function or(t){return"\\"+ue[t]}function lr(t){return ne.test(t)}function hr(t){var e=-1,r=Array(t.size);return t.forEach((function(t,i){r[++e]=[i,t]})),r}function ur(t,e){return function(r){return t(e(r))}}function cr(t,e){for(var r=-1,i=t.length,n=0,s=[];++r<i;){var a=t[r];a!==e&&a!==o||(t[r]=o,s[n++]=r)}return s}function pr(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}function dr(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=[t,t]})),r}function fr(t){return lr(t)?function(t){var e=re.lastIndex=0;for(;re.test(t);)++e;return e}(t):Ne(t)}function mr(t){return lr(t)?function(t){return t.match(re)||[]}(t):function(t){return t.split("")}(t)}function gr(t){for(var e=t.length;e--&&ot.test(t.charAt(e)););return e}var vr=Ye({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var yr=function t(e){var r,i=(e=null==e?me:yr.defaults(me.Object(),e,yr.pick(me,ae))).Array,ot=e.Date,Mt=e.Error,Tt=e.Function,Et=e.Math,Pt=e.Object,Ct=e.RegExp,At=e.String,Dt=e.TypeError,kt=i.prototype,Rt=Tt.prototype,It=Pt.prototype,Lt=e["__core-js_shared__"],Ft=Rt.toString,Ot=It.hasOwnProperty,zt=0,Bt=(r=/[^.]+$/.exec(Lt&&Lt.keys&&Lt.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",Vt=It.toString,Nt=Ft.call(Pt),Gt=me._,Wt=Ct("^"+Ft.call(Ot).replace(nt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ht=ye?e.Buffer:n,Ut=e.Symbol,jt=e.Uint8Array,Xt=Ht?Ht.allocUnsafe:n,qt=ur(Pt.getPrototypeOf,Pt),Yt=Pt.create,Zt=It.propertyIsEnumerable,$t=kt.splice,Jt=Ut?Ut.isConcatSpreadable:n,Kt=Ut?Ut.iterator:n,Qt=Ut?Ut.toStringTag:n,re=function(){try{var t=ds(Pt,"defineProperty");return t({},"",{}),t}catch(t){}}(),ne=e.clearTimeout!==me.clearTimeout&&e.clearTimeout,ue=ot&&ot.now!==me.Date.now&&ot.now,de=e.setTimeout!==me.setTimeout&&e.setTimeout,fe=Et.ceil,ge=Et.floor,ve=Pt.getOwnPropertySymbols,xe=Ht?Ht.isBuffer:n,_e=e.isFinite,Ne=kt.join,Ye=ur(Pt.keys,Pt),xr=Et.max,_r=Et.min,br=ot.now,wr=e.parseInt,Sr=Et.random,Mr=kt.reverse,Tr=ds(e,"DataView"),Er=ds(e,"Map"),Pr=ds(e,"Promise"),Cr=ds(e,"Set"),Ar=ds(e,"WeakMap"),Dr=ds(Pt,"create"),kr=Ar&&new Ar,Rr={},Ir=Ns(Tr),Lr=Ns(Er),Fr=Ns(Pr),Or=Ns(Cr),zr=Ns(Ar),Br=Ut?Ut.prototype:n,Vr=Br?Br.valueOf:n,Nr=Br?Br.toString:n;function Gr(t){if(io(t)&&!Xa(t)&&!(t instanceof jr)){if(t instanceof Ur)return t;if(Ot.call(t,"__wrapped__"))return Gs(t)}return new Ur(t)}var Wr=function(){function t(){}return function(e){if(!ro(e))return{};if(Yt)return Yt(e);t.prototype=e;var r=new t;return t.prototype=n,r}}();function Hr(){}function Ur(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=n}function jr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=g,this.__views__=[]}function Xr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function qr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function Yr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function Zr(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Yr;++e<r;)this.add(t[e])}function $r(t){var e=this.__data__=new qr(t);this.size=e.size}function Jr(t,e){var r=Xa(t),i=!r&&ja(t),n=!r&&!i&&$a(t),s=!r&&!i&&!n&&co(t),a=r||i||n||s,o=a?Je(t.length,At):[],l=o.length;for(var h in t)!e&&!Ot.call(t,h)||a&&("length"==h||n&&("offset"==h||"parent"==h)||s&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||_s(h,l))||o.push(h);return o}function Kr(t){var e=t.length;return e?t[Zi(0,e-1)]:n}function Qr(t,e){return zs(kn(t),li(e,0,t.length))}function ti(t){return zs(kn(t))}function ei(t,e,r){(r!==n&&!Wa(t[e],r)||r===n&&!(e in t))&&ai(t,e,r)}function ri(t,e,r){var i=t[e];Ot.call(t,e)&&Wa(i,r)&&(r!==n||e in t)||ai(t,e,r)}function ii(t,e){for(var r=t.length;r--;)if(Wa(t[r][0],e))return r;return-1}function ni(t,e,r,i){return di(t,(function(t,n,s){e(i,t,r(t),s)})),i}function si(t,e){return t&&Rn(e,Lo(e),t)}function ai(t,e,r){"__proto__"==e&&re?re(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function oi(t,e){for(var r=-1,s=e.length,a=i(s),o=null==t;++r<s;)a[r]=o?n:Ao(t,e[r]);return a}function li(t,e,r){return t==t&&(r!==n&&(t=t<=r?t:r),e!==n&&(t=t>=e?t:e)),t}function hi(t,e,r,i,s,a){var o,l=1&e,h=2&e,u=4&e;if(r&&(o=s?r(t,i,s,a):r(t)),o!==n)return o;if(!ro(t))return t;var c=Xa(t);if(c){if(o=function(t){var e=t.length,r=new t.constructor(e);e&&"string"==typeof t[0]&&Ot.call(t,"index")&&(r.index=t.index,r.input=t.input);return r}(t),!l)return kn(t,o)}else{var p=gs(t),d=p==S||p==M;if($a(t))return Tn(t,l);if(p==P||p==y||d&&!s){if(o=h||d?{}:ys(t),!l)return h?function(t,e){return Rn(t,ms(t),e)}(t,function(t,e){return t&&Rn(e,Fo(e),t)}(o,t)):function(t,e){return Rn(t,fs(t),e)}(t,si(o,t))}else{if(!he[p])return s?t:{};o=function(t,e,r){var i=t.constructor;switch(e){case L:return En(t);case _:case b:return new i(+t);case F:return function(t,e){var r=e?En(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case O:case z:case B:case V:case N:case G:case W:case H:case U:return Pn(t,r);case T:return new i;case E:case k:return new i(t);case A:return function(t){var e=new t.constructor(t.source,mt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case D:return new i;case R:return n=t,Vr?Pt(Vr.call(n)):{}}var n}(t,p,l)}}a||(a=new $r);var f=a.get(t);if(f)return f;a.set(t,o),lo(t)?t.forEach((function(i){o.add(hi(i,e,r,i,t,a))})):no(t)&&t.forEach((function(i,n){o.set(n,hi(i,e,r,n,t,a))}));var m=c?n:(u?h?as:ss:h?Fo:Lo)(t);return Ae(m||t,(function(i,n){m&&(i=t[n=i]),ri(o,n,hi(i,e,r,n,t,a))})),o}function ui(t,e,r){var i=r.length;if(null==t)return!i;for(t=Pt(t);i--;){var s=r[i],a=e[s],o=t[s];if(o===n&&!(s in t)||!a(o))return!1}return!0}function ci(t,e,r){if("function"!=typeof t)throw new Dt(s);return Is((function(){t.apply(n,r)}),e)}function pi(t,e,r,i){var n=-1,s=Ie,a=!0,o=t.length,l=[],h=e.length;if(!o)return l;r&&(e=Fe(e,Qe(r))),i?(s=Le,a=!1):e.length>=200&&(s=er,a=!1,e=new Zr(e));t:for(;++n<o;){var u=t[n],c=null==r?u:r(u);if(u=i||0!==u?u:0,a&&c==c){for(var p=h;p--;)if(e[p]===c)continue t;l.push(u)}else s(e,c,i)||l.push(u)}return l}Gr.templateSettings={escape:K,evaluate:Q,interpolate:tt,variable:"",imports:{_:Gr}},Gr.prototype=Hr.prototype,Gr.prototype.constructor=Gr,Ur.prototype=Wr(Hr.prototype),Ur.prototype.constructor=Ur,jr.prototype=Wr(Hr.prototype),jr.prototype.constructor=jr,Xr.prototype.clear=function(){this.__data__=Dr?Dr(null):{},this.size=0},Xr.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Xr.prototype.get=function(t){var e=this.__data__;if(Dr){var r=e[t];return r===a?n:r}return Ot.call(e,t)?e[t]:n},Xr.prototype.has=function(t){var e=this.__data__;return Dr?e[t]!==n:Ot.call(e,t)},Xr.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Dr&&e===n?a:e,this},qr.prototype.clear=function(){this.__data__=[],this.size=0},qr.prototype.delete=function(t){var e=this.__data__,r=ii(e,t);return!(r<0)&&(r==e.length-1?e.pop():$t.call(e,r,1),--this.size,!0)},qr.prototype.get=function(t){var e=this.__data__,r=ii(e,t);return r<0?n:e[r][1]},qr.prototype.has=function(t){return ii(this.__data__,t)>-1},qr.prototype.set=function(t,e){var r=this.__data__,i=ii(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this},Yr.prototype.clear=function(){this.size=0,this.__data__={hash:new Xr,map:new(Er||qr),string:new Xr}},Yr.prototype.delete=function(t){var e=cs(this,t).delete(t);return this.size-=e?1:0,e},Yr.prototype.get=function(t){return cs(this,t).get(t)},Yr.prototype.has=function(t){return cs(this,t).has(t)},Yr.prototype.set=function(t,e){var r=cs(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this},Zr.prototype.add=Zr.prototype.push=function(t){return this.__data__.set(t,a),this},Zr.prototype.has=function(t){return this.__data__.has(t)},$r.prototype.clear=function(){this.__data__=new qr,this.size=0},$r.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},$r.prototype.get=function(t){return this.__data__.get(t)},$r.prototype.has=function(t){return this.__data__.has(t)},$r.prototype.set=function(t,e){var r=this.__data__;if(r instanceof qr){var i=r.__data__;if(!Er||i.length<199)return i.push([t,e]),this.size=++r.size,this;r=this.__data__=new Yr(i)}return r.set(t,e),this.size=r.size,this};var di=Fn(bi),fi=Fn(wi,!0);function mi(t,e){var r=!0;return di(t,(function(t,i,n){return r=!!e(t,i,n)})),r}function gi(t,e,r){for(var i=-1,s=t.length;++i<s;){var a=t[i],o=e(a);if(null!=o&&(l===n?o==o&&!uo(o):r(o,l)))var l=o,h=a}return h}function vi(t,e){var r=[];return di(t,(function(t,i,n){e(t,i,n)&&r.push(t)})),r}function yi(t,e,r,i,n){var s=-1,a=t.length;for(r||(r=xs),n||(n=[]);++s<a;){var o=t[s];e>0&&r(o)?e>1?yi(o,e-1,r,i,n):Oe(n,o):i||(n[n.length]=o)}return n}var xi=On(),_i=On(!0);function bi(t,e){return t&&xi(t,e,Lo)}function wi(t,e){return t&&_i(t,e,Lo)}function Si(t,e){return Re(e,(function(e){return Qa(t[e])}))}function Mi(t,e){for(var r=0,i=(e=bn(e,t)).length;null!=t&&r<i;)t=t[Vs(e[r++])];return r&&r==i?t:n}function Ti(t,e,r){var i=e(t);return Xa(t)?i:Oe(i,r(t))}function Ei(t){return null==t?t===n?"[object Undefined]":"[object Null]":Qt&&Qt in Pt(t)?function(t){var e=Ot.call(t,Qt),r=t[Qt];try{t[Qt]=n;var i=!0}catch(t){}var s=Vt.call(t);i&&(e?t[Qt]=r:delete t[Qt]);return s}(t):function(t){return Vt.call(t)}(t)}function Pi(t,e){return t>e}function Ci(t,e){return null!=t&&Ot.call(t,e)}function Ai(t,e){return null!=t&&e in Pt(t)}function Di(t,e,r){for(var s=r?Le:Ie,a=t[0].length,o=t.length,l=o,h=i(o),u=1/0,c=[];l--;){var p=t[l];l&&e&&(p=Fe(p,Qe(e))),u=_r(p.length,u),h[l]=!r&&(e||a>=120&&p.length>=120)?new Zr(l&&p):n}p=t[0];var d=-1,f=h[0];t:for(;++d<a&&c.length<u;){var m=p[d],g=e?e(m):m;if(m=r||0!==m?m:0,!(f?er(f,g):s(c,g,r))){for(l=o;--l;){var v=h[l];if(!(v?er(v,g):s(t[l],g,r)))continue t}f&&f.push(g),c.push(m)}}return c}function ki(t,e,r){var i=null==(t=As(t,e=bn(e,t)))?t:t[Vs(Ks(e))];return null==i?n:Pe(i,t,r)}function Ri(t){return io(t)&&Ei(t)==y}function Ii(t,e,r,i,s){return t===e||(null==t||null==e||!io(t)&&!io(e)?t!=t&&e!=e:function(t,e,r,i,s,a){var o=Xa(t),l=Xa(e),h=o?x:gs(t),u=l?x:gs(e),c=(h=h==y?P:h)==P,p=(u=u==y?P:u)==P,d=h==u;if(d&&$a(t)){if(!$a(e))return!1;o=!0,c=!1}if(d&&!c)return a||(a=new $r),o||co(t)?is(t,e,r,i,s,a):function(t,e,r,i,n,s,a){switch(r){case F:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case L:return!(t.byteLength!=e.byteLength||!s(new jt(t),new jt(e)));case _:case b:case E:return Wa(+t,+e);case w:return t.name==e.name&&t.message==e.message;case A:case k:return t==e+"";case T:var o=hr;case D:var l=1&i;if(o||(o=pr),t.size!=e.size&&!l)return!1;var h=a.get(t);if(h)return h==e;i|=2,a.set(t,e);var u=is(o(t),o(e),i,n,s,a);return a.delete(t),u;case R:if(Vr)return Vr.call(t)==Vr.call(e)}return!1}(t,e,h,r,i,s,a);if(!(1&r)){var f=c&&Ot.call(t,"__wrapped__"),m=p&&Ot.call(e,"__wrapped__");if(f||m){var g=f?t.value():t,v=m?e.value():e;return a||(a=new $r),s(g,v,r,i,a)}}if(!d)return!1;return a||(a=new $r),function(t,e,r,i,s,a){var o=1&r,l=ss(t),h=l.length,u=ss(e),c=u.length;if(h!=c&&!o)return!1;var p=h;for(;p--;){var d=l[p];if(!(o?d in e:Ot.call(e,d)))return!1}var f=a.get(t),m=a.get(e);if(f&&m)return f==e&&m==t;var g=!0;a.set(t,e),a.set(e,t);var v=o;for(;++p<h;){var y=t[d=l[p]],x=e[d];if(i)var _=o?i(x,y,d,e,t,a):i(y,x,d,t,e,a);if(!(_===n?y===x||s(y,x,r,i,a):_)){g=!1;break}v||(v="constructor"==d)}if(g&&!v){var b=t.constructor,w=e.constructor;b==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(g=!1)}return a.delete(t),a.delete(e),g}(t,e,r,i,s,a)}(t,e,r,i,Ii,s))}function Li(t,e,r,i){var s=r.length,a=s,o=!i;if(null==t)return!a;for(t=Pt(t);s--;){var l=r[s];if(o&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++s<a;){var h=(l=r[s])[0],u=t[h],c=l[1];if(o&&l[2]){if(u===n&&!(h in t))return!1}else{var p=new $r;if(i)var d=i(u,c,h,t,e,p);if(!(d===n?Ii(c,u,3,i,p):d))return!1}}return!0}function Fi(t){return!(!ro(t)||(e=t,Bt&&Bt in e))&&(Qa(t)?Wt:yt).test(Ns(t));var e}function Oi(t){return"function"==typeof t?t:null==t?al:"object"==typeof t?Xa(t)?Wi(t[0],t[1]):Gi(t):ml(t)}function zi(t){if(!Ts(t))return Ye(t);var e=[];for(var r in Pt(t))Ot.call(t,r)&&"constructor"!=r&&e.push(r);return e}function Bi(t){if(!ro(t))return function(t){var e=[];if(null!=t)for(var r in Pt(t))e.push(r);return e}(t);var e=Ts(t),r=[];for(var i in t)("constructor"!=i||!e&&Ot.call(t,i))&&r.push(i);return r}function Vi(t,e){return t<e}function Ni(t,e){var r=-1,n=Ya(t)?i(t.length):[];return di(t,(function(t,i,s){n[++r]=e(t,i,s)})),n}function Gi(t){var e=ps(t);return 1==e.length&&e[0][2]?Ps(e[0][0],e[0][1]):function(r){return r===t||Li(r,t,e)}}function Wi(t,e){return ws(t)&&Es(e)?Ps(Vs(t),e):function(r){var i=Ao(r,t);return i===n&&i===e?Do(r,t):Ii(e,i,3)}}function Hi(t,e,r,i,s){t!==e&&xi(e,(function(a,o){if(s||(s=new $r),ro(a))!function(t,e,r,i,s,a,o){var l=ks(t,r),h=ks(e,r),u=o.get(h);if(u)return void ei(t,r,u);var c=a?a(l,h,r+"",t,e,o):n,p=c===n;if(p){var d=Xa(h),f=!d&&$a(h),m=!d&&!f&&co(h);c=h,d||f||m?Xa(l)?c=l:Za(l)?c=kn(l):f?(p=!1,c=Tn(h,!0)):m?(p=!1,c=Pn(h,!0)):c=[]:ao(h)||ja(h)?(c=l,ja(l)?c=_o(l):ro(l)&&!Qa(l)||(c=ys(h))):p=!1}p&&(o.set(h,c),s(c,h,i,a,o),o.delete(h));ei(t,r,c)}(t,e,o,r,Hi,i,s);else{var l=i?i(ks(t,o),a,o+"",t,e,s):n;l===n&&(l=a),ei(t,o,l)}}),Fo)}function Ui(t,e){var r=t.length;if(r)return _s(e+=e<0?r:0,r)?t[e]:n}function ji(t,e,r){e=e.length?Fe(e,(function(t){return Xa(t)?function(e){return Mi(e,1===t.length?t[0]:t)}:t})):[al];var i=-1;e=Fe(e,Qe(us()));var n=Ni(t,(function(t,r,n){var s=Fe(e,(function(e){return e(t)}));return{criteria:s,index:++i,value:t}}));return function(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}(n,(function(t,e){return function(t,e,r){var i=-1,n=t.criteria,s=e.criteria,a=n.length,o=r.length;for(;++i<a;){var l=Cn(n[i],s[i]);if(l)return i>=o?l:l*("desc"==r[i]?-1:1)}return t.index-e.index}(t,e,r)}))}function Xi(t,e,r){for(var i=-1,n=e.length,s={};++i<n;){var a=e[i],o=Mi(t,a);r(o,a)&&tn(s,bn(a,t),o)}return s}function qi(t,e,r,i){var n=i?Ue:He,s=-1,a=e.length,o=t;for(t===e&&(e=kn(e)),r&&(o=Fe(t,Qe(r)));++s<a;)for(var l=0,h=e[s],u=r?r(h):h;(l=n(o,u,l,i))>-1;)o!==t&&$t.call(o,l,1),$t.call(t,l,1);return t}function Yi(t,e){for(var r=t?e.length:0,i=r-1;r--;){var n=e[r];if(r==i||n!==s){var s=n;_s(n)?$t.call(t,n,1):dn(t,n)}}return t}function Zi(t,e){return t+ge(Sr()*(e-t+1))}function $i(t,e){var r="";if(!t||e<1||e>f)return r;do{e%2&&(r+=t),(e=ge(e/2))&&(t+=t)}while(e);return r}function Ji(t,e){return Ls(Cs(t,e,al),t+"")}function Ki(t){return Kr(Ho(t))}function Qi(t,e){var r=Ho(t);return zs(r,li(e,0,r.length))}function tn(t,e,r,i){if(!ro(t))return t;for(var s=-1,a=(e=bn(e,t)).length,o=a-1,l=t;null!=l&&++s<a;){var h=Vs(e[s]),u=r;if("__proto__"===h||"constructor"===h||"prototype"===h)return t;if(s!=o){var c=l[h];(u=i?i(c,h,l):n)===n&&(u=ro(c)?c:_s(e[s+1])?[]:{})}ri(l,h,u),l=l[h]}return t}var en=kr?function(t,e){return kr.set(t,e),t}:al,rn=re?function(t,e){return re(t,"toString",{configurable:!0,enumerable:!1,value:il(e),writable:!0})}:al;function nn(t){return zs(Ho(t))}function sn(t,e,r){var n=-1,s=t.length;e<0&&(e=-e>s?0:s+e),(r=r>s?s:r)<0&&(r+=s),s=e>r?0:r-e>>>0,e>>>=0;for(var a=i(s);++n<s;)a[n]=t[n+e];return a}function an(t,e){var r;return di(t,(function(t,i,n){return!(r=e(t,i,n))})),!!r}function on(t,e,r){var i=0,n=null==t?i:t.length;if("number"==typeof e&&e==e&&n<=2147483647){for(;i<n;){var s=i+n>>>1,a=t[s];null!==a&&!uo(a)&&(r?a<=e:a<e)?i=s+1:n=s}return n}return ln(t,e,al,r)}function ln(t,e,r,i){var s=0,a=null==t?0:t.length;if(0===a)return 0;for(var o=(e=r(e))!=e,l=null===e,h=uo(e),u=e===n;s<a;){var c=ge((s+a)/2),p=r(t[c]),d=p!==n,f=null===p,m=p==p,g=uo(p);if(o)var v=i||m;else v=u?m&&(i||d):l?m&&d&&(i||!f):h?m&&d&&!f&&(i||!g):!f&&!g&&(i?p<=e:p<e);v?s=c+1:a=c}return _r(a,4294967294)}function hn(t,e){for(var r=-1,i=t.length,n=0,s=[];++r<i;){var a=t[r],o=e?e(a):a;if(!r||!Wa(o,l)){var l=o;s[n++]=0===a?0:a}}return s}function un(t){return"number"==typeof t?t:uo(t)?m:+t}function cn(t){if("string"==typeof t)return t;if(Xa(t))return Fe(t,cn)+"";if(uo(t))return Nr?Nr.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function pn(t,e,r){var i=-1,n=Ie,s=t.length,a=!0,o=[],l=o;if(r)a=!1,n=Le;else if(s>=200){var h=e?null:Jn(t);if(h)return pr(h);a=!1,n=er,l=new Zr}else l=e?[]:o;t:for(;++i<s;){var u=t[i],c=e?e(u):u;if(u=r||0!==u?u:0,a&&c==c){for(var p=l.length;p--;)if(l[p]===c)continue t;e&&l.push(c),o.push(u)}else n(l,c,r)||(l!==o&&l.push(c),o.push(u))}return o}function dn(t,e){return null==(t=As(t,e=bn(e,t)))||delete t[Vs(Ks(e))]}function fn(t,e,r,i){return tn(t,e,r(Mi(t,e)),i)}function mn(t,e,r,i){for(var n=t.length,s=i?n:-1;(i?s--:++s<n)&&e(t[s],s,t););return r?sn(t,i?0:s,i?s+1:n):sn(t,i?s+1:0,i?n:s)}function gn(t,e){var r=t;return r instanceof jr&&(r=r.value()),ze(e,(function(t,e){return e.func.apply(e.thisArg,Oe([t],e.args))}),r)}function vn(t,e,r){var n=t.length;if(n<2)return n?pn(t[0]):[];for(var s=-1,a=i(n);++s<n;)for(var o=t[s],l=-1;++l<n;)l!=s&&(a[s]=pi(a[s]||o,t[l],e,r));return pn(yi(a,1),e,r)}function yn(t,e,r){for(var i=-1,s=t.length,a=e.length,o={};++i<s;){var l=i<a?e[i]:n;r(o,t[i],l)}return o}function xn(t){return Za(t)?t:[]}function _n(t){return"function"==typeof t?t:al}function bn(t,e){return Xa(t)?t:ws(t,e)?[t]:Bs(bo(t))}var wn=Ji;function Sn(t,e,r){var i=t.length;return r=r===n?i:r,!e&&r>=i?t:sn(t,e,r)}var Mn=ne||function(t){return me.clearTimeout(t)};function Tn(t,e){if(e)return t.slice();var r=t.length,i=Xt?Xt(r):new t.constructor(r);return t.copy(i),i}function En(t){var e=new t.constructor(t.byteLength);return new jt(e).set(new jt(t)),e}function Pn(t,e){var r=e?En(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function Cn(t,e){if(t!==e){var r=t!==n,i=null===t,s=t==t,a=uo(t),o=e!==n,l=null===e,h=e==e,u=uo(e);if(!l&&!u&&!a&&t>e||a&&o&&h&&!l&&!u||i&&o&&h||!r&&h||!s)return 1;if(!i&&!a&&!u&&t<e||u&&r&&s&&!i&&!a||l&&r&&s||!o&&s||!h)return-1}return 0}function An(t,e,r,n){for(var s=-1,a=t.length,o=r.length,l=-1,h=e.length,u=xr(a-o,0),c=i(h+u),p=!n;++l<h;)c[l]=e[l];for(;++s<o;)(p||s<a)&&(c[r[s]]=t[s]);for(;u--;)c[l++]=t[s++];return c}function Dn(t,e,r,n){for(var s=-1,a=t.length,o=-1,l=r.length,h=-1,u=e.length,c=xr(a-l,0),p=i(c+u),d=!n;++s<c;)p[s]=t[s];for(var f=s;++h<u;)p[f+h]=e[h];for(;++o<l;)(d||s<a)&&(p[f+r[o]]=t[s++]);return p}function kn(t,e){var r=-1,n=t.length;for(e||(e=i(n));++r<n;)e[r]=t[r];return e}function Rn(t,e,r,i){var s=!r;r||(r={});for(var a=-1,o=e.length;++a<o;){var l=e[a],h=i?i(r[l],t[l],l,r,t):n;h===n&&(h=t[l]),s?ai(r,l,h):ri(r,l,h)}return r}function In(t,e){return function(r,i){var n=Xa(r)?Ce:ni,s=e?e():{};return n(r,t,us(i,2),s)}}function Ln(t){return Ji((function(e,r){var i=-1,s=r.length,a=s>1?r[s-1]:n,o=s>2?r[2]:n;for(a=t.length>3&&"function"==typeof a?(s--,a):n,o&&bs(r[0],r[1],o)&&(a=s<3?n:a,s=1),e=Pt(e);++i<s;){var l=r[i];l&&t(e,l,i,a)}return e}))}function Fn(t,e){return function(r,i){if(null==r)return r;if(!Ya(r))return t(r,i);for(var n=r.length,s=e?n:-1,a=Pt(r);(e?s--:++s<n)&&!1!==i(a[s],s,a););return r}}function On(t){return function(e,r,i){for(var n=-1,s=Pt(e),a=i(e),o=a.length;o--;){var l=a[t?o:++n];if(!1===r(s[l],l,s))break}return e}}function zn(t){return function(e){var r=lr(e=bo(e))?mr(e):n,i=r?r[0]:e.charAt(0),s=r?Sn(r,1).join(""):e.slice(1);return i[t]()+s}}function Bn(t){return function(e){return ze(tl(Xo(e).replace(te,"")),t,"")}}function Vn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=Wr(t.prototype),i=t.apply(r,e);return ro(i)?i:r}}function Nn(t){return function(e,r,i){var s=Pt(e);if(!Ya(e)){var a=us(r,3);e=Lo(e),r=function(t){return a(s[t],t,s)}}var o=t(e,r,i);return o>-1?s[a?e[o]:o]:n}}function Gn(t){return ns((function(e){var r=e.length,i=r,a=Ur.prototype.thru;for(t&&e.reverse();i--;){var o=e[i];if("function"!=typeof o)throw new Dt(s);if(a&&!l&&"wrapper"==ls(o))var l=new Ur([],!0)}for(i=l?i:r;++i<r;){var h=ls(o=e[i]),u="wrapper"==h?os(o):n;l=u&&Ss(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[ls(u[0])].apply(l,u[3]):1==o.length&&Ss(o)?l[h]():l.thru(o)}return function(){var t=arguments,i=t[0];if(l&&1==t.length&&Xa(i))return l.plant(i).value();for(var n=0,s=r?e[n].apply(this,t):i;++n<r;)s=e[n].call(this,s);return s}}))}function Wn(t,e,r,s,a,o,l,h,u,p){var d=e&c,f=1&e,m=2&e,g=24&e,v=512&e,y=m?n:Vn(t);return function n(){for(var c=arguments.length,x=i(c),_=c;_--;)x[_]=arguments[_];if(g)var b=hs(n),w=nr(x,b);if(s&&(x=An(x,s,a,g)),o&&(x=Dn(x,o,l,g)),c-=w,g&&c<p){var S=cr(x,b);return Zn(t,e,Wn,n.placeholder,r,x,S,h,u,p-c)}var M=f?r:this,T=m?M[t]:t;return c=x.length,h?x=Ds(x,h):v&&c>1&&x.reverse(),d&&u<c&&(x.length=u),this&&this!==me&&this instanceof n&&(T=y||Vn(T)),T.apply(M,x)}}function Hn(t,e){return function(r,i){return function(t,e,r,i){return bi(t,(function(t,n,s){e(i,r(t),n,s)})),i}(r,t,e(i),{})}}function Un(t,e){return function(r,i){var s;if(r===n&&i===n)return e;if(r!==n&&(s=r),i!==n){if(s===n)return i;"string"==typeof r||"string"==typeof i?(r=cn(r),i=cn(i)):(r=un(r),i=un(i)),s=t(r,i)}return s}}function jn(t){return ns((function(e){return e=Fe(e,Qe(us())),Ji((function(r){var i=this;return t(e,(function(t){return Pe(t,i,r)}))}))}))}function Xn(t,e){var r=(e=e===n?" ":cn(e)).length;if(r<2)return r?$i(e,t):e;var i=$i(e,fe(t/fr(e)));return lr(e)?Sn(mr(i),0,t).join(""):i.slice(0,t)}function qn(t){return function(e,r,s){return s&&"number"!=typeof s&&bs(e,r,s)&&(r=s=n),e=go(e),r===n?(r=e,e=0):r=go(r),function(t,e,r,n){for(var s=-1,a=xr(fe((e-t)/(r||1)),0),o=i(a);a--;)o[n?a:++s]=t,t+=r;return o}(e,r,s=s===n?e<r?1:-1:go(s),t)}}function Yn(t){return function(e,r){return"string"==typeof e&&"string"==typeof r||(e=xo(e),r=xo(r)),t(e,r)}}function Zn(t,e,r,i,s,a,o,l,c,p){var d=8&e;e|=d?h:u,4&(e&=~(d?u:h))||(e&=-4);var f=[t,e,s,d?a:n,d?o:n,d?n:a,d?n:o,l,c,p],m=r.apply(n,f);return Ss(t)&&Rs(m,f),m.placeholder=i,Fs(m,t,e)}function $n(t){var e=Et[t];return function(t,r){if(t=xo(t),(r=null==r?0:_r(vo(r),292))&&_e(t)){var i=(bo(t)+"e").split("e");return+((i=(bo(e(i[0]+"e"+(+i[1]+r)))+"e").split("e"))[0]+"e"+(+i[1]-r))}return e(t)}}var Jn=Cr&&1/pr(new Cr([,-0]))[1]==d?function(t){return new Cr(t)}:cl;function Kn(t){return function(e){var r=gs(e);return r==T?hr(e):r==D?dr(e):function(t,e){return Fe(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Qn(t,e,r,a,d,f,m,g){var v=2&e;if(!v&&"function"!=typeof t)throw new Dt(s);var y=a?a.length:0;if(y||(e&=-97,a=d=n),m=m===n?m:xr(vo(m),0),g=g===n?g:vo(g),y-=d?d.length:0,e&u){var x=a,_=d;a=d=n}var b=v?n:os(t),w=[t,e,r,a,d,x,_,f,m,g];if(b&&function(t,e){var r=t[1],i=e[1],n=r|i,s=n<131,a=i==c&&8==r||i==c&&r==p&&t[7].length<=e[8]||384==i&&e[7].length<=e[8]&&8==r;if(!s&&!a)return t;1&i&&(t[2]=e[2],n|=1&r?0:4);var l=e[3];if(l){var h=t[3];t[3]=h?An(h,l,e[4]):l,t[4]=h?cr(t[3],o):e[4]}(l=e[5])&&(h=t[5],t[5]=h?Dn(h,l,e[6]):l,t[6]=h?cr(t[5],o):e[6]);(l=e[7])&&(t[7]=l);i&c&&(t[8]=null==t[8]?e[8]:_r(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=n}(w,b),t=w[0],e=w[1],r=w[2],a=w[3],d=w[4],!(g=w[9]=w[9]===n?v?0:t.length:xr(w[9]-y,0))&&24&e&&(e&=-25),e&&1!=e)S=8==e||e==l?function(t,e,r){var s=Vn(t);return function a(){for(var o=arguments.length,l=i(o),h=o,u=hs(a);h--;)l[h]=arguments[h];var c=o<3&&l[0]!==u&&l[o-1]!==u?[]:cr(l,u);return(o-=c.length)<r?Zn(t,e,Wn,a.placeholder,n,l,c,n,n,r-o):Pe(this&&this!==me&&this instanceof a?s:t,this,l)}}(t,e,g):e!=h&&33!=e||d.length?Wn.apply(n,w):function(t,e,r,n){var s=1&e,a=Vn(t);return function e(){for(var o=-1,l=arguments.length,h=-1,u=n.length,c=i(u+l),p=this&&this!==me&&this instanceof e?a:t;++h<u;)c[h]=n[h];for(;l--;)c[h++]=arguments[++o];return Pe(p,s?r:this,c)}}(t,e,r,a);else var S=function(t,e,r){var i=1&e,n=Vn(t);return function e(){return(this&&this!==me&&this instanceof e?n:t).apply(i?r:this,arguments)}}(t,e,r);return Fs((b?en:Rs)(S,w),t,e)}function ts(t,e,r,i){return t===n||Wa(t,It[r])&&!Ot.call(i,r)?e:t}function es(t,e,r,i,s,a){return ro(t)&&ro(e)&&(a.set(e,t),Hi(t,e,n,es,a),a.delete(e)),t}function rs(t){return ao(t)?n:t}function is(t,e,r,i,s,a){var o=1&r,l=t.length,h=e.length;if(l!=h&&!(o&&h>l))return!1;var u=a.get(t),c=a.get(e);if(u&&c)return u==e&&c==t;var p=-1,d=!0,f=2&r?new Zr:n;for(a.set(t,e),a.set(e,t);++p<l;){var m=t[p],g=e[p];if(i)var v=o?i(g,m,p,e,t,a):i(m,g,p,t,e,a);if(v!==n){if(v)continue;d=!1;break}if(f){if(!Ve(e,(function(t,e){if(!er(f,e)&&(m===t||s(m,t,r,i,a)))return f.push(e)}))){d=!1;break}}else if(m!==g&&!s(m,g,r,i,a)){d=!1;break}}return a.delete(t),a.delete(e),d}function ns(t){return Ls(Cs(t,n,qs),t+"")}function ss(t){return Ti(t,Lo,fs)}function as(t){return Ti(t,Fo,ms)}var os=kr?function(t){return kr.get(t)}:cl;function ls(t){for(var e=t.name+"",r=Rr[e],i=Ot.call(Rr,e)?r.length:0;i--;){var n=r[i],s=n.func;if(null==s||s==t)return n.name}return e}function hs(t){return(Ot.call(Gr,"placeholder")?Gr:t).placeholder}function us(){var t=Gr.iteratee||ol;return t=t===ol?Oi:t,arguments.length?t(arguments[0],arguments[1]):t}function cs(t,e){var r,i,n=t.__data__;return("string"==(i=typeof(r=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==r:null===r)?n["string"==typeof e?"string":"hash"]:n.map}function ps(t){for(var e=Lo(t),r=e.length;r--;){var i=e[r],n=t[i];e[r]=[i,n,Es(n)]}return e}function ds(t,e){var r=function(t,e){return null==t?n:t[e]}(t,e);return Fi(r)?r:n}var fs=ve?function(t){return null==t?[]:(t=Pt(t),Re(ve(t),(function(e){return Zt.call(t,e)})))}:yl,ms=ve?function(t){for(var e=[];t;)Oe(e,fs(t)),t=qt(t);return e}:yl,gs=Ei;function vs(t,e,r){for(var i=-1,n=(e=bn(e,t)).length,s=!1;++i<n;){var a=Vs(e[i]);if(!(s=null!=t&&r(t,a)))break;t=t[a]}return s||++i!=n?s:!!(n=null==t?0:t.length)&&eo(n)&&_s(a,n)&&(Xa(t)||ja(t))}function ys(t){return"function"!=typeof t.constructor||Ts(t)?{}:Wr(qt(t))}function xs(t){return Xa(t)||ja(t)||!!(Jt&&t&&t[Jt])}function _s(t,e){var r=typeof t;return!!(e=null==e?f:e)&&("number"==r||"symbol"!=r&&_t.test(t))&&t>-1&&t%1==0&&t<e}function bs(t,e,r){if(!ro(r))return!1;var i=typeof e;return!!("number"==i?Ya(r)&&_s(e,r.length):"string"==i&&e in r)&&Wa(r[e],t)}function ws(t,e){if(Xa(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!uo(t))||(rt.test(t)||!et.test(t)||null!=e&&t in Pt(e))}function Ss(t){var e=ls(t),r=Gr[e];if("function"!=typeof r||!(e in jr.prototype))return!1;if(t===r)return!0;var i=os(r);return!!i&&t===i[0]}(Tr&&gs(new Tr(new ArrayBuffer(1)))!=F||Er&&gs(new Er)!=T||Pr&&gs(Pr.resolve())!=C||Cr&&gs(new Cr)!=D||Ar&&gs(new Ar)!=I)&&(gs=function(t){var e=Ei(t),r=e==P?t.constructor:n,i=r?Ns(r):"";if(i)switch(i){case Ir:return F;case Lr:return T;case Fr:return C;case Or:return D;case zr:return I}return e});var Ms=Lt?Qa:xl;function Ts(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||It)}function Es(t){return t==t&&!ro(t)}function Ps(t,e){return function(r){return null!=r&&(r[t]===e&&(e!==n||t in Pt(r)))}}function Cs(t,e,r){return e=xr(e===n?t.length-1:e,0),function(){for(var n=arguments,s=-1,a=xr(n.length-e,0),o=i(a);++s<a;)o[s]=n[e+s];s=-1;for(var l=i(e+1);++s<e;)l[s]=n[s];return l[e]=r(o),Pe(t,this,l)}}function As(t,e){return e.length<2?t:Mi(t,sn(e,0,-1))}function Ds(t,e){for(var r=t.length,i=_r(e.length,r),s=kn(t);i--;){var a=e[i];t[i]=_s(a,r)?s[a]:n}return t}function ks(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Rs=Os(en),Is=de||function(t,e){return me.setTimeout(t,e)},Ls=Os(rn);function Fs(t,e,r){var i=e+"";return Ls(t,function(t,e){var r=e.length;if(!r)return t;var i=r-1;return e[i]=(r>1?"& ":"")+e[i],e=e.join(r>2?", ":" "),t.replace(lt,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return Ae(v,(function(r){var i="_."+r[0];e&r[1]&&!Ie(t,i)&&t.push(i)})),t.sort()}(function(t){var e=t.match(ht);return e?e[1].split(ut):[]}(i),r)))}function Os(t){var e=0,r=0;return function(){var i=br(),s=16-(i-r);if(r=i,s>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(n,arguments)}}function zs(t,e){var r=-1,i=t.length,s=i-1;for(e=e===n?i:e;++r<e;){var a=Zi(r,s),o=t[a];t[a]=t[r],t[r]=o}return t.length=e,t}var Bs=function(t){var e=Oa(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(it,(function(t,r,i,n){e.push(i?n.replace(dt,"$1"):r||t)})),e}));function Vs(t){if("string"==typeof t||uo(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ns(t){if(null!=t){try{return Ft.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Gs(t){if(t instanceof jr)return t.clone();var e=new Ur(t.__wrapped__,t.__chain__);return e.__actions__=kn(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Ws=Ji((function(t,e){return Za(t)?pi(t,yi(e,1,Za,!0)):[]})),Hs=Ji((function(t,e){var r=Ks(e);return Za(r)&&(r=n),Za(t)?pi(t,yi(e,1,Za,!0),us(r,2)):[]})),Us=Ji((function(t,e){var r=Ks(e);return Za(r)&&(r=n),Za(t)?pi(t,yi(e,1,Za,!0),n,r):[]}));function js(t,e,r){var i=null==t?0:t.length;if(!i)return-1;var n=null==r?0:vo(r);return n<0&&(n=xr(i+n,0)),We(t,us(e,3),n)}function Xs(t,e,r){var i=null==t?0:t.length;if(!i)return-1;var s=i-1;return r!==n&&(s=vo(r),s=r<0?xr(i+s,0):_r(s,i-1)),We(t,us(e,3),s,!0)}function qs(t){return(null==t?0:t.length)?yi(t,1):[]}function Ys(t){return t&&t.length?t[0]:n}var Zs=Ji((function(t){var e=Fe(t,xn);return e.length&&e[0]===t[0]?Di(e):[]})),$s=Ji((function(t){var e=Ks(t),r=Fe(t,xn);return e===Ks(r)?e=n:r.pop(),r.length&&r[0]===t[0]?Di(r,us(e,2)):[]})),Js=Ji((function(t){var e=Ks(t),r=Fe(t,xn);return(e="function"==typeof e?e:n)&&r.pop(),r.length&&r[0]===t[0]?Di(r,n,e):[]}));function Ks(t){var e=null==t?0:t.length;return e?t[e-1]:n}var Qs=Ji(ta);function ta(t,e){return t&&t.length&&e&&e.length?qi(t,e):t}var ea=ns((function(t,e){var r=null==t?0:t.length,i=oi(t,e);return Yi(t,Fe(e,(function(t){return _s(t,r)?+t:t})).sort(Cn)),i}));function ra(t){return null==t?t:Mr.call(t)}var ia=Ji((function(t){return pn(yi(t,1,Za,!0))})),na=Ji((function(t){var e=Ks(t);return Za(e)&&(e=n),pn(yi(t,1,Za,!0),us(e,2))})),sa=Ji((function(t){var e=Ks(t);return e="function"==typeof e?e:n,pn(yi(t,1,Za,!0),n,e)}));function aa(t){if(!t||!t.length)return[];var e=0;return t=Re(t,(function(t){if(Za(t))return e=xr(t.length,e),!0})),Je(e,(function(e){return Fe(t,qe(e))}))}function oa(t,e){if(!t||!t.length)return[];var r=aa(t);return null==e?r:Fe(r,(function(t){return Pe(e,n,t)}))}var la=Ji((function(t,e){return Za(t)?pi(t,e):[]})),ha=Ji((function(t){return vn(Re(t,Za))})),ua=Ji((function(t){var e=Ks(t);return Za(e)&&(e=n),vn(Re(t,Za),us(e,2))})),ca=Ji((function(t){var e=Ks(t);return e="function"==typeof e?e:n,vn(Re(t,Za),n,e)})),pa=Ji(aa);var da=Ji((function(t){var e=t.length,r=e>1?t[e-1]:n;return r="function"==typeof r?(t.pop(),r):n,oa(t,r)}));function fa(t){var e=Gr(t);return e.__chain__=!0,e}function ma(t,e){return e(t)}var ga=ns((function(t){var e=t.length,r=e?t[0]:0,i=this.__wrapped__,s=function(e){return oi(e,t)};return!(e>1||this.__actions__.length)&&i instanceof jr&&_s(r)?((i=i.slice(r,+r+(e?1:0))).__actions__.push({func:ma,args:[s],thisArg:n}),new Ur(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(n),t}))):this.thru(s)}));var va=In((function(t,e,r){Ot.call(t,r)?++t[r]:ai(t,r,1)}));var ya=Nn(js),xa=Nn(Xs);function _a(t,e){return(Xa(t)?Ae:di)(t,us(e,3))}function ba(t,e){return(Xa(t)?De:fi)(t,us(e,3))}var wa=In((function(t,e,r){Ot.call(t,r)?t[r].push(e):ai(t,r,[e])}));var Sa=Ji((function(t,e,r){var n=-1,s="function"==typeof e,a=Ya(t)?i(t.length):[];return di(t,(function(t){a[++n]=s?Pe(e,t,r):ki(t,e,r)})),a})),Ma=In((function(t,e,r){ai(t,r,e)}));function Ta(t,e){return(Xa(t)?Fe:Ni)(t,us(e,3))}var Ea=In((function(t,e,r){t[r?0:1].push(e)}),(function(){return[[],[]]}));var Pa=Ji((function(t,e){if(null==t)return[];var r=e.length;return r>1&&bs(t,e[0],e[1])?e=[]:r>2&&bs(e[0],e[1],e[2])&&(e=[e[0]]),ji(t,yi(e,1),[])})),Ca=ue||function(){return me.Date.now()};function Aa(t,e,r){return e=r?n:e,e=t&&null==e?t.length:e,Qn(t,c,n,n,n,n,e)}function Da(t,e){var r;if("function"!=typeof e)throw new Dt(s);return t=vo(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=n),r}}var ka=Ji((function(t,e,r){var i=1;if(r.length){var n=cr(r,hs(ka));i|=h}return Qn(t,i,e,r,n)})),Ra=Ji((function(t,e,r){var i=3;if(r.length){var n=cr(r,hs(Ra));i|=h}return Qn(e,i,t,r,n)}));function Ia(t,e,r){var i,a,o,l,h,u,c=0,p=!1,d=!1,f=!0;if("function"!=typeof t)throw new Dt(s);function m(e){var r=i,s=a;return i=a=n,c=e,l=t.apply(s,r)}function g(t){return c=t,h=Is(y,e),p?m(t):l}function v(t){var r=t-u;return u===n||r>=e||r<0||d&&t-c>=o}function y(){var t=Ca();if(v(t))return x(t);h=Is(y,function(t){var r=e-(t-u);return d?_r(r,o-(t-c)):r}(t))}function x(t){return h=n,f&&i?m(t):(i=a=n,l)}function _(){var t=Ca(),r=v(t);if(i=arguments,a=this,u=t,r){if(h===n)return g(u);if(d)return Mn(h),h=Is(y,e),m(u)}return h===n&&(h=Is(y,e)),l}return e=xo(e)||0,ro(r)&&(p=!!r.leading,o=(d="maxWait"in r)?xr(xo(r.maxWait)||0,e):o,f="trailing"in r?!!r.trailing:f),_.cancel=function(){h!==n&&Mn(h),c=0,i=u=a=h=n},_.flush=function(){return h===n?l:x(Ca())},_}var La=Ji((function(t,e){return ci(t,1,e)})),Fa=Ji((function(t,e,r){return ci(t,xo(e)||0,r)}));function Oa(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Dt(s);var r=function(){var i=arguments,n=e?e.apply(this,i):i[0],s=r.cache;if(s.has(n))return s.get(n);var a=t.apply(this,i);return r.cache=s.set(n,a)||s,a};return r.cache=new(Oa.Cache||Yr),r}function za(t){if("function"!=typeof t)throw new Dt(s);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Oa.Cache=Yr;var Ba=wn((function(t,e){var r=(e=1==e.length&&Xa(e[0])?Fe(e[0],Qe(us())):Fe(yi(e,1),Qe(us()))).length;return Ji((function(i){for(var n=-1,s=_r(i.length,r);++n<s;)i[n]=e[n].call(this,i[n]);return Pe(t,this,i)}))})),Va=Ji((function(t,e){var r=cr(e,hs(Va));return Qn(t,h,n,e,r)})),Na=Ji((function(t,e){var r=cr(e,hs(Na));return Qn(t,u,n,e,r)})),Ga=ns((function(t,e){return Qn(t,p,n,n,n,e)}));function Wa(t,e){return t===e||t!=t&&e!=e}var Ha=Yn(Pi),Ua=Yn((function(t,e){return t>=e})),ja=Ri(function(){return arguments}())?Ri:function(t){return io(t)&&Ot.call(t,"callee")&&!Zt.call(t,"callee")},Xa=i.isArray,qa=be?Qe(be):function(t){return io(t)&&Ei(t)==L};function Ya(t){return null!=t&&eo(t.length)&&!Qa(t)}function Za(t){return io(t)&&Ya(t)}var $a=xe||xl,Ja=we?Qe(we):function(t){return io(t)&&Ei(t)==b};function Ka(t){if(!io(t))return!1;var e=Ei(t);return e==w||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!ao(t)}function Qa(t){if(!ro(t))return!1;var e=Ei(t);return e==S||e==M||"[object AsyncFunction]"==e||"[object Proxy]"==e}function to(t){return"number"==typeof t&&t==vo(t)}function eo(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=f}function ro(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function io(t){return null!=t&&"object"==typeof t}var no=Se?Qe(Se):function(t){return io(t)&&gs(t)==T};function so(t){return"number"==typeof t||io(t)&&Ei(t)==E}function ao(t){if(!io(t)||Ei(t)!=P)return!1;var e=qt(t);if(null===e)return!0;var r=Ot.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&Ft.call(r)==Nt}var oo=Me?Qe(Me):function(t){return io(t)&&Ei(t)==A};var lo=Te?Qe(Te):function(t){return io(t)&&gs(t)==D};function ho(t){return"string"==typeof t||!Xa(t)&&io(t)&&Ei(t)==k}function uo(t){return"symbol"==typeof t||io(t)&&Ei(t)==R}var co=Ee?Qe(Ee):function(t){return io(t)&&eo(t.length)&&!!le[Ei(t)]};var po=Yn(Vi),fo=Yn((function(t,e){return t<=e}));function mo(t){if(!t)return[];if(Ya(t))return ho(t)?mr(t):kn(t);if(Kt&&t[Kt])return function(t){for(var e,r=[];!(e=t.next()).done;)r.push(e.value);return r}(t[Kt]());var e=gs(t);return(e==T?hr:e==D?pr:Ho)(t)}function go(t){return t?(t=xo(t))===d||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function vo(t){var e=go(t),r=e%1;return e==e?r?e-r:e:0}function yo(t){return t?li(vo(t),0,g):0}function xo(t){if("number"==typeof t)return t;if(uo(t))return m;if(ro(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ro(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ke(t);var r=vt.test(t);return r||xt.test(t)?pe(t.slice(2),r?2:8):gt.test(t)?m:+t}function _o(t){return Rn(t,Fo(t))}function bo(t){return null==t?"":cn(t)}var wo=Ln((function(t,e){if(Ts(e)||Ya(e))Rn(e,Lo(e),t);else for(var r in e)Ot.call(e,r)&&ri(t,r,e[r])})),So=Ln((function(t,e){Rn(e,Fo(e),t)})),Mo=Ln((function(t,e,r,i){Rn(e,Fo(e),t,i)})),To=Ln((function(t,e,r,i){Rn(e,Lo(e),t,i)})),Eo=ns(oi);var Po=Ji((function(t,e){t=Pt(t);var r=-1,i=e.length,s=i>2?e[2]:n;for(s&&bs(e[0],e[1],s)&&(i=1);++r<i;)for(var a=e[r],o=Fo(a),l=-1,h=o.length;++l<h;){var u=o[l],c=t[u];(c===n||Wa(c,It[u])&&!Ot.call(t,u))&&(t[u]=a[u])}return t})),Co=Ji((function(t){return t.push(n,es),Pe(zo,n,t)}));function Ao(t,e,r){var i=null==t?n:Mi(t,e);return i===n?r:i}function Do(t,e){return null!=t&&vs(t,e,Ai)}var ko=Hn((function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=Vt.call(e)),t[e]=r}),il(al)),Ro=Hn((function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=Vt.call(e)),Ot.call(t,e)?t[e].push(r):t[e]=[r]}),us),Io=Ji(ki);function Lo(t){return Ya(t)?Jr(t):zi(t)}function Fo(t){return Ya(t)?Jr(t,!0):Bi(t)}var Oo=Ln((function(t,e,r){Hi(t,e,r)})),zo=Ln((function(t,e,r,i){Hi(t,e,r,i)})),Bo=ns((function(t,e){var r={};if(null==t)return r;var i=!1;e=Fe(e,(function(e){return e=bn(e,t),i||(i=e.length>1),e})),Rn(t,as(t),r),i&&(r=hi(r,7,rs));for(var n=e.length;n--;)dn(r,e[n]);return r}));var Vo=ns((function(t,e){return null==t?{}:function(t,e){return Xi(t,e,(function(e,r){return Do(t,r)}))}(t,e)}));function No(t,e){if(null==t)return{};var r=Fe(as(t),(function(t){return[t]}));return e=us(e),Xi(t,r,(function(t,r){return e(t,r[0])}))}var Go=Kn(Lo),Wo=Kn(Fo);function Ho(t){return null==t?[]:tr(t,Lo(t))}var Uo=Bn((function(t,e,r){return e=e.toLowerCase(),t+(r?jo(e):e)}));function jo(t){return Qo(bo(t).toLowerCase())}function Xo(t){return(t=bo(t))&&t.replace(bt,sr).replace(ee,"")}var qo=Bn((function(t,e,r){return t+(r?"-":"")+e.toLowerCase()})),Yo=Bn((function(t,e,r){return t+(r?" ":"")+e.toLowerCase()})),Zo=zn("toLowerCase");var $o=Bn((function(t,e,r){return t+(r?"_":"")+e.toLowerCase()}));var Jo=Bn((function(t,e,r){return t+(r?" ":"")+Qo(e)}));var Ko=Bn((function(t,e,r){return t+(r?" ":"")+e.toUpperCase()})),Qo=zn("toUpperCase");function tl(t,e,r){return t=bo(t),(e=r?n:e)===n?function(t){return se.test(t)}(t)?function(t){return t.match(ie)||[]}(t):function(t){return t.match(ct)||[]}(t):t.match(e)||[]}var el=Ji((function(t,e){try{return Pe(t,n,e)}catch(t){return Ka(t)?t:new Mt(t)}})),rl=ns((function(t,e){return Ae(e,(function(e){e=Vs(e),ai(t,e,ka(t[e],t))})),t}));function il(t){return function(){return t}}var nl=Gn(),sl=Gn(!0);function al(t){return t}function ol(t){return Oi("function"==typeof t?t:hi(t,1))}var ll=Ji((function(t,e){return function(r){return ki(r,t,e)}})),hl=Ji((function(t,e){return function(r){return ki(t,r,e)}}));function ul(t,e,r){var i=Lo(e),n=Si(e,i);null!=r||ro(e)&&(n.length||!i.length)||(r=e,e=t,t=this,n=Si(e,Lo(e)));var s=!(ro(r)&&"chain"in r&&!r.chain),a=Qa(t);return Ae(n,(function(r){var i=e[r];t[r]=i,a&&(t.prototype[r]=function(){var e=this.__chain__;if(s||e){var r=t(this.__wrapped__),n=r.__actions__=kn(this.__actions__);return n.push({func:i,args:arguments,thisArg:t}),r.__chain__=e,r}return i.apply(t,Oe([this.value()],arguments))})})),t}function cl(){}var pl=jn(Fe),dl=jn(ke),fl=jn(Ve);function ml(t){return ws(t)?qe(Vs(t)):function(t){return function(e){return Mi(e,t)}}(t)}var gl=qn(),vl=qn(!0);function yl(){return[]}function xl(){return!1}var _l=Un((function(t,e){return t+e}),0),bl=$n("ceil"),wl=Un((function(t,e){return t/e}),1),Sl=$n("floor");var Ml,Tl=Un((function(t,e){return t*e}),1),El=$n("round"),Pl=Un((function(t,e){return t-e}),0);return Gr.after=function(t,e){if("function"!=typeof e)throw new Dt(s);return t=vo(t),function(){if(--t<1)return e.apply(this,arguments)}},Gr.ary=Aa,Gr.assign=wo,Gr.assignIn=So,Gr.assignInWith=Mo,Gr.assignWith=To,Gr.at=Eo,Gr.before=Da,Gr.bind=ka,Gr.bindAll=rl,Gr.bindKey=Ra,Gr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Xa(t)?t:[t]},Gr.chain=fa,Gr.chunk=function(t,e,r){e=(r?bs(t,e,r):e===n)?1:xr(vo(e),0);var s=null==t?0:t.length;if(!s||e<1)return[];for(var a=0,o=0,l=i(fe(s/e));a<s;)l[o++]=sn(t,a,a+=e);return l},Gr.compact=function(t){for(var e=-1,r=null==t?0:t.length,i=0,n=[];++e<r;){var s=t[e];s&&(n[i++]=s)}return n},Gr.concat=function(){var t=arguments.length;if(!t)return[];for(var e=i(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return Oe(Xa(r)?kn(r):[r],yi(e,1))},Gr.cond=function(t){var e=null==t?0:t.length,r=us();return t=e?Fe(t,(function(t){if("function"!=typeof t[1])throw new Dt(s);return[r(t[0]),t[1]]})):[],Ji((function(r){for(var i=-1;++i<e;){var n=t[i];if(Pe(n[0],this,r))return Pe(n[1],this,r)}}))},Gr.conforms=function(t){return function(t){var e=Lo(t);return function(r){return ui(r,t,e)}}(hi(t,1))},Gr.constant=il,Gr.countBy=va,Gr.create=function(t,e){var r=Wr(t);return null==e?r:si(r,e)},Gr.curry=function t(e,r,i){var s=Qn(e,8,n,n,n,n,n,r=i?n:r);return s.placeholder=t.placeholder,s},Gr.curryRight=function t(e,r,i){var s=Qn(e,l,n,n,n,n,n,r=i?n:r);return s.placeholder=t.placeholder,s},Gr.debounce=Ia,Gr.defaults=Po,Gr.defaultsDeep=Co,Gr.defer=La,Gr.delay=Fa,Gr.difference=Ws,Gr.differenceBy=Hs,Gr.differenceWith=Us,Gr.drop=function(t,e,r){var i=null==t?0:t.length;return i?sn(t,(e=r||e===n?1:vo(e))<0?0:e,i):[]},Gr.dropRight=function(t,e,r){var i=null==t?0:t.length;return i?sn(t,0,(e=i-(e=r||e===n?1:vo(e)))<0?0:e):[]},Gr.dropRightWhile=function(t,e){return t&&t.length?mn(t,us(e,3),!0,!0):[]},Gr.dropWhile=function(t,e){return t&&t.length?mn(t,us(e,3),!0):[]},Gr.fill=function(t,e,r,i){var s=null==t?0:t.length;return s?(r&&"number"!=typeof r&&bs(t,e,r)&&(r=0,i=s),function(t,e,r,i){var s=t.length;for((r=vo(r))<0&&(r=-r>s?0:s+r),(i=i===n||i>s?s:vo(i))<0&&(i+=s),i=r>i?0:yo(i);r<i;)t[r++]=e;return t}(t,e,r,i)):[]},Gr.filter=function(t,e){return(Xa(t)?Re:vi)(t,us(e,3))},Gr.flatMap=function(t,e){return yi(Ta(t,e),1)},Gr.flatMapDeep=function(t,e){return yi(Ta(t,e),d)},Gr.flatMapDepth=function(t,e,r){return r=r===n?1:vo(r),yi(Ta(t,e),r)},Gr.flatten=qs,Gr.flattenDeep=function(t){return(null==t?0:t.length)?yi(t,d):[]},Gr.flattenDepth=function(t,e){return(null==t?0:t.length)?yi(t,e=e===n?1:vo(e)):[]},Gr.flip=function(t){return Qn(t,512)},Gr.flow=nl,Gr.flowRight=sl,Gr.fromPairs=function(t){for(var e=-1,r=null==t?0:t.length,i={};++e<r;){var n=t[e];i[n[0]]=n[1]}return i},Gr.functions=function(t){return null==t?[]:Si(t,Lo(t))},Gr.functionsIn=function(t){return null==t?[]:Si(t,Fo(t))},Gr.groupBy=wa,Gr.initial=function(t){return(null==t?0:t.length)?sn(t,0,-1):[]},Gr.intersection=Zs,Gr.intersectionBy=$s,Gr.intersectionWith=Js,Gr.invert=ko,Gr.invertBy=Ro,Gr.invokeMap=Sa,Gr.iteratee=ol,Gr.keyBy=Ma,Gr.keys=Lo,Gr.keysIn=Fo,Gr.map=Ta,Gr.mapKeys=function(t,e){var r={};return e=us(e,3),bi(t,(function(t,i,n){ai(r,e(t,i,n),t)})),r},Gr.mapValues=function(t,e){var r={};return e=us(e,3),bi(t,(function(t,i,n){ai(r,i,e(t,i,n))})),r},Gr.matches=function(t){return Gi(hi(t,1))},Gr.matchesProperty=function(t,e){return Wi(t,hi(e,1))},Gr.memoize=Oa,Gr.merge=Oo,Gr.mergeWith=zo,Gr.method=ll,Gr.methodOf=hl,Gr.mixin=ul,Gr.negate=za,Gr.nthArg=function(t){return t=vo(t),Ji((function(e){return Ui(e,t)}))},Gr.omit=Bo,Gr.omitBy=function(t,e){return No(t,za(us(e)))},Gr.once=function(t){return Da(2,t)},Gr.orderBy=function(t,e,r,i){return null==t?[]:(Xa(e)||(e=null==e?[]:[e]),Xa(r=i?n:r)||(r=null==r?[]:[r]),ji(t,e,r))},Gr.over=pl,Gr.overArgs=Ba,Gr.overEvery=dl,Gr.overSome=fl,Gr.partial=Va,Gr.partialRight=Na,Gr.partition=Ea,Gr.pick=Vo,Gr.pickBy=No,Gr.property=ml,Gr.propertyOf=function(t){return function(e){return null==t?n:Mi(t,e)}},Gr.pull=Qs,Gr.pullAll=ta,Gr.pullAllBy=function(t,e,r){return t&&t.length&&e&&e.length?qi(t,e,us(r,2)):t},Gr.pullAllWith=function(t,e,r){return t&&t.length&&e&&e.length?qi(t,e,n,r):t},Gr.pullAt=ea,Gr.range=gl,Gr.rangeRight=vl,Gr.rearg=Ga,Gr.reject=function(t,e){return(Xa(t)?Re:vi)(t,za(us(e,3)))},Gr.remove=function(t,e){var r=[];if(!t||!t.length)return r;var i=-1,n=[],s=t.length;for(e=us(e,3);++i<s;){var a=t[i];e(a,i,t)&&(r.push(a),n.push(i))}return Yi(t,n),r},Gr.rest=function(t,e){if("function"!=typeof t)throw new Dt(s);return Ji(t,e=e===n?e:vo(e))},Gr.reverse=ra,Gr.sampleSize=function(t,e,r){return e=(r?bs(t,e,r):e===n)?1:vo(e),(Xa(t)?Qr:Qi)(t,e)},Gr.set=function(t,e,r){return null==t?t:tn(t,e,r)},Gr.setWith=function(t,e,r,i){return i="function"==typeof i?i:n,null==t?t:tn(t,e,r,i)},Gr.shuffle=function(t){return(Xa(t)?ti:nn)(t)},Gr.slice=function(t,e,r){var i=null==t?0:t.length;return i?(r&&"number"!=typeof r&&bs(t,e,r)?(e=0,r=i):(e=null==e?0:vo(e),r=r===n?i:vo(r)),sn(t,e,r)):[]},Gr.sortBy=Pa,Gr.sortedUniq=function(t){return t&&t.length?hn(t):[]},Gr.sortedUniqBy=function(t,e){return t&&t.length?hn(t,us(e,2)):[]},Gr.split=function(t,e,r){return r&&"number"!=typeof r&&bs(t,e,r)&&(e=r=n),(r=r===n?g:r>>>0)?(t=bo(t))&&("string"==typeof e||null!=e&&!oo(e))&&!(e=cn(e))&&lr(t)?Sn(mr(t),0,r):t.split(e,r):[]},Gr.spread=function(t,e){if("function"!=typeof t)throw new Dt(s);return e=null==e?0:xr(vo(e),0),Ji((function(r){var i=r[e],n=Sn(r,0,e);return i&&Oe(n,i),Pe(t,this,n)}))},Gr.tail=function(t){var e=null==t?0:t.length;return e?sn(t,1,e):[]},Gr.take=function(t,e,r){return t&&t.length?sn(t,0,(e=r||e===n?1:vo(e))<0?0:e):[]},Gr.takeRight=function(t,e,r){var i=null==t?0:t.length;return i?sn(t,(e=i-(e=r||e===n?1:vo(e)))<0?0:e,i):[]},Gr.takeRightWhile=function(t,e){return t&&t.length?mn(t,us(e,3),!1,!0):[]},Gr.takeWhile=function(t,e){return t&&t.length?mn(t,us(e,3)):[]},Gr.tap=function(t,e){return e(t),t},Gr.throttle=function(t,e,r){var i=!0,n=!0;if("function"!=typeof t)throw new Dt(s);return ro(r)&&(i="leading"in r?!!r.leading:i,n="trailing"in r?!!r.trailing:n),Ia(t,e,{leading:i,maxWait:e,trailing:n})},Gr.thru=ma,Gr.toArray=mo,Gr.toPairs=Go,Gr.toPairsIn=Wo,Gr.toPath=function(t){return Xa(t)?Fe(t,Vs):uo(t)?[t]:kn(Bs(bo(t)))},Gr.toPlainObject=_o,Gr.transform=function(t,e,r){var i=Xa(t),n=i||$a(t)||co(t);if(e=us(e,4),null==r){var s=t&&t.constructor;r=n?i?new s:[]:ro(t)&&Qa(s)?Wr(qt(t)):{}}return(n?Ae:bi)(t,(function(t,i,n){return e(r,t,i,n)})),r},Gr.unary=function(t){return Aa(t,1)},Gr.union=ia,Gr.unionBy=na,Gr.unionWith=sa,Gr.uniq=function(t){return t&&t.length?pn(t):[]},Gr.uniqBy=function(t,e){return t&&t.length?pn(t,us(e,2)):[]},Gr.uniqWith=function(t,e){return e="function"==typeof e?e:n,t&&t.length?pn(t,n,e):[]},Gr.unset=function(t,e){return null==t||dn(t,e)},Gr.unzip=aa,Gr.unzipWith=oa,Gr.update=function(t,e,r){return null==t?t:fn(t,e,_n(r))},Gr.updateWith=function(t,e,r,i){return i="function"==typeof i?i:n,null==t?t:fn(t,e,_n(r),i)},Gr.values=Ho,Gr.valuesIn=function(t){return null==t?[]:tr(t,Fo(t))},Gr.without=la,Gr.words=tl,Gr.wrap=function(t,e){return Va(_n(e),t)},Gr.xor=ha,Gr.xorBy=ua,Gr.xorWith=ca,Gr.zip=pa,Gr.zipObject=function(t,e){return yn(t||[],e||[],ri)},Gr.zipObjectDeep=function(t,e){return yn(t||[],e||[],tn)},Gr.zipWith=da,Gr.entries=Go,Gr.entriesIn=Wo,Gr.extend=So,Gr.extendWith=Mo,ul(Gr,Gr),Gr.add=_l,Gr.attempt=el,Gr.camelCase=Uo,Gr.capitalize=jo,Gr.ceil=bl,Gr.clamp=function(t,e,r){return r===n&&(r=e,e=n),r!==n&&(r=(r=xo(r))==r?r:0),e!==n&&(e=(e=xo(e))==e?e:0),li(xo(t),e,r)},Gr.clone=function(t){return hi(t,4)},Gr.cloneDeep=function(t){return hi(t,5)},Gr.cloneDeepWith=function(t,e){return hi(t,5,e="function"==typeof e?e:n)},Gr.cloneWith=function(t,e){return hi(t,4,e="function"==typeof e?e:n)},Gr.conformsTo=function(t,e){return null==e||ui(t,e,Lo(e))},Gr.deburr=Xo,Gr.defaultTo=function(t,e){return null==t||t!=t?e:t},Gr.divide=wl,Gr.endsWith=function(t,e,r){t=bo(t),e=cn(e);var i=t.length,s=r=r===n?i:li(vo(r),0,i);return(r-=e.length)>=0&&t.slice(r,s)==e},Gr.eq=Wa,Gr.escape=function(t){return(t=bo(t))&&J.test(t)?t.replace(Z,ar):t},Gr.escapeRegExp=function(t){return(t=bo(t))&&st.test(t)?t.replace(nt,"\\$&"):t},Gr.every=function(t,e,r){var i=Xa(t)?ke:mi;return r&&bs(t,e,r)&&(e=n),i(t,us(e,3))},Gr.find=ya,Gr.findIndex=js,Gr.findKey=function(t,e){return Ge(t,us(e,3),bi)},Gr.findLast=xa,Gr.findLastIndex=Xs,Gr.findLastKey=function(t,e){return Ge(t,us(e,3),wi)},Gr.floor=Sl,Gr.forEach=_a,Gr.forEachRight=ba,Gr.forIn=function(t,e){return null==t?t:xi(t,us(e,3),Fo)},Gr.forInRight=function(t,e){return null==t?t:_i(t,us(e,3),Fo)},Gr.forOwn=function(t,e){return t&&bi(t,us(e,3))},Gr.forOwnRight=function(t,e){return t&&wi(t,us(e,3))},Gr.get=Ao,Gr.gt=Ha,Gr.gte=Ua,Gr.has=function(t,e){return null!=t&&vs(t,e,Ci)},Gr.hasIn=Do,Gr.head=Ys,Gr.identity=al,Gr.includes=function(t,e,r,i){t=Ya(t)?t:Ho(t),r=r&&!i?vo(r):0;var n=t.length;return r<0&&(r=xr(n+r,0)),ho(t)?r<=n&&t.indexOf(e,r)>-1:!!n&&He(t,e,r)>-1},Gr.indexOf=function(t,e,r){var i=null==t?0:t.length;if(!i)return-1;var n=null==r?0:vo(r);return n<0&&(n=xr(i+n,0)),He(t,e,n)},Gr.inRange=function(t,e,r){return e=go(e),r===n?(r=e,e=0):r=go(r),function(t,e,r){return t>=_r(e,r)&&t<xr(e,r)}(t=xo(t),e,r)},Gr.invoke=Io,Gr.isArguments=ja,Gr.isArray=Xa,Gr.isArrayBuffer=qa,Gr.isArrayLike=Ya,Gr.isArrayLikeObject=Za,Gr.isBoolean=function(t){return!0===t||!1===t||io(t)&&Ei(t)==_},Gr.isBuffer=$a,Gr.isDate=Ja,Gr.isElement=function(t){return io(t)&&1===t.nodeType&&!ao(t)},Gr.isEmpty=function(t){if(null==t)return!0;if(Ya(t)&&(Xa(t)||"string"==typeof t||"function"==typeof t.splice||$a(t)||co(t)||ja(t)))return!t.length;var e=gs(t);if(e==T||e==D)return!t.size;if(Ts(t))return!zi(t).length;for(var r in t)if(Ot.call(t,r))return!1;return!0},Gr.isEqual=function(t,e){return Ii(t,e)},Gr.isEqualWith=function(t,e,r){var i=(r="function"==typeof r?r:n)?r(t,e):n;return i===n?Ii(t,e,n,r):!!i},Gr.isError=Ka,Gr.isFinite=function(t){return"number"==typeof t&&_e(t)},Gr.isFunction=Qa,Gr.isInteger=to,Gr.isLength=eo,Gr.isMap=no,Gr.isMatch=function(t,e){return t===e||Li(t,e,ps(e))},Gr.isMatchWith=function(t,e,r){return r="function"==typeof r?r:n,Li(t,e,ps(e),r)},Gr.isNaN=function(t){return so(t)&&t!=+t},Gr.isNative=function(t){if(Ms(t))throw new Mt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Fi(t)},Gr.isNil=function(t){return null==t},Gr.isNull=function(t){return null===t},Gr.isNumber=so,Gr.isObject=ro,Gr.isObjectLike=io,Gr.isPlainObject=ao,Gr.isRegExp=oo,Gr.isSafeInteger=function(t){return to(t)&&t>=-9007199254740991&&t<=f},Gr.isSet=lo,Gr.isString=ho,Gr.isSymbol=uo,Gr.isTypedArray=co,Gr.isUndefined=function(t){return t===n},Gr.isWeakMap=function(t){return io(t)&&gs(t)==I},Gr.isWeakSet=function(t){return io(t)&&"[object WeakSet]"==Ei(t)},Gr.join=function(t,e){return null==t?"":Ne.call(t,e)},Gr.kebabCase=qo,Gr.last=Ks,Gr.lastIndexOf=function(t,e,r){var i=null==t?0:t.length;if(!i)return-1;var s=i;return r!==n&&(s=(s=vo(r))<0?xr(i+s,0):_r(s,i-1)),e==e?function(t,e,r){for(var i=r+1;i--;)if(t[i]===e)return i;return i}(t,e,s):We(t,je,s,!0)},Gr.lowerCase=Yo,Gr.lowerFirst=Zo,Gr.lt=po,Gr.lte=fo,Gr.max=function(t){return t&&t.length?gi(t,al,Pi):n},Gr.maxBy=function(t,e){return t&&t.length?gi(t,us(e,2),Pi):n},Gr.mean=function(t){return Xe(t,al)},Gr.meanBy=function(t,e){return Xe(t,us(e,2))},Gr.min=function(t){return t&&t.length?gi(t,al,Vi):n},Gr.minBy=function(t,e){return t&&t.length?gi(t,us(e,2),Vi):n},Gr.stubArray=yl,Gr.stubFalse=xl,Gr.stubObject=function(){return{}},Gr.stubString=function(){return""},Gr.stubTrue=function(){return!0},Gr.multiply=Tl,Gr.nth=function(t,e){return t&&t.length?Ui(t,vo(e)):n},Gr.noConflict=function(){return me._===this&&(me._=Gt),this},Gr.noop=cl,Gr.now=Ca,Gr.pad=function(t,e,r){t=bo(t);var i=(e=vo(e))?fr(t):0;if(!e||i>=e)return t;var n=(e-i)/2;return Xn(ge(n),r)+t+Xn(fe(n),r)},Gr.padEnd=function(t,e,r){t=bo(t);var i=(e=vo(e))?fr(t):0;return e&&i<e?t+Xn(e-i,r):t},Gr.padStart=function(t,e,r){t=bo(t);var i=(e=vo(e))?fr(t):0;return e&&i<e?Xn(e-i,r)+t:t},Gr.parseInt=function(t,e,r){return r||null==e?e=0:e&&(e=+e),wr(bo(t).replace(at,""),e||0)},Gr.random=function(t,e,r){if(r&&"boolean"!=typeof r&&bs(t,e,r)&&(e=r=n),r===n&&("boolean"==typeof e?(r=e,e=n):"boolean"==typeof t&&(r=t,t=n)),t===n&&e===n?(t=0,e=1):(t=go(t),e===n?(e=t,t=0):e=go(e)),t>e){var i=t;t=e,e=i}if(r||t%1||e%1){var s=Sr();return _r(t+s*(e-t+ce("1e-"+((s+"").length-1))),e)}return Zi(t,e)},Gr.reduce=function(t,e,r){var i=Xa(t)?ze:Ze,n=arguments.length<3;return i(t,us(e,4),r,n,di)},Gr.reduceRight=function(t,e,r){var i=Xa(t)?Be:Ze,n=arguments.length<3;return i(t,us(e,4),r,n,fi)},Gr.repeat=function(t,e,r){return e=(r?bs(t,e,r):e===n)?1:vo(e),$i(bo(t),e)},Gr.replace=function(){var t=arguments,e=bo(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Gr.result=function(t,e,r){var i=-1,s=(e=bn(e,t)).length;for(s||(s=1,t=n);++i<s;){var a=null==t?n:t[Vs(e[i])];a===n&&(i=s,a=r),t=Qa(a)?a.call(t):a}return t},Gr.round=El,Gr.runInContext=t,Gr.sample=function(t){return(Xa(t)?Kr:Ki)(t)},Gr.size=function(t){if(null==t)return 0;if(Ya(t))return ho(t)?fr(t):t.length;var e=gs(t);return e==T||e==D?t.size:zi(t).length},Gr.snakeCase=$o,Gr.some=function(t,e,r){var i=Xa(t)?Ve:an;return r&&bs(t,e,r)&&(e=n),i(t,us(e,3))},Gr.sortedIndex=function(t,e){return on(t,e)},Gr.sortedIndexBy=function(t,e,r){return ln(t,e,us(r,2))},Gr.sortedIndexOf=function(t,e){var r=null==t?0:t.length;if(r){var i=on(t,e);if(i<r&&Wa(t[i],e))return i}return-1},Gr.sortedLastIndex=function(t,e){return on(t,e,!0)},Gr.sortedLastIndexBy=function(t,e,r){return ln(t,e,us(r,2),!0)},Gr.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var r=on(t,e,!0)-1;if(Wa(t[r],e))return r}return-1},Gr.startCase=Jo,Gr.startsWith=function(t,e,r){return t=bo(t),r=null==r?0:li(vo(r),0,t.length),e=cn(e),t.slice(r,r+e.length)==e},Gr.subtract=Pl,Gr.sum=function(t){return t&&t.length?$e(t,al):0},Gr.sumBy=function(t,e){return t&&t.length?$e(t,us(e,2)):0},Gr.template=function(t,e,r){var i=Gr.templateSettings;r&&bs(t,e,r)&&(e=n),t=bo(t),e=Mo({},e,i,ts);var s,a,o=Mo({},e.imports,i.imports,ts),l=Lo(o),h=tr(o,l),u=0,c=e.interpolate||wt,p="__p += '",d=Ct((e.escape||wt).source+"|"+c.source+"|"+(c===tt?ft:wt).source+"|"+(e.evaluate||wt).source+"|$","g"),f="//# sourceURL="+(Ot.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++oe+"]")+"\n";t.replace(d,(function(e,r,i,n,o,l){return i||(i=n),p+=t.slice(u,l).replace(St,or),r&&(s=!0,p+="' +\n__e("+r+") +\n'"),o&&(a=!0,p+="';\n"+o+";\n__p += '"),i&&(p+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=l+e.length,e})),p+="';\n";var m=Ot.call(e,"variable")&&e.variable;if(m){if(pt.test(m))throw new Mt("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(a?p.replace(j,""):p).replace(X,"$1").replace(q,"$1;"),p="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var g=el((function(){return Tt(l,f+"return "+p).apply(n,h)}));if(g.source=p,Ka(g))throw g;return g},Gr.times=function(t,e){if((t=vo(t))<1||t>f)return[];var r=g,i=_r(t,g);e=us(e),t-=g;for(var n=Je(i,e);++r<t;)e(r);return n},Gr.toFinite=go,Gr.toInteger=vo,Gr.toLength=yo,Gr.toLower=function(t){return bo(t).toLowerCase()},Gr.toNumber=xo,Gr.toSafeInteger=function(t){return t?li(vo(t),-9007199254740991,f):0===t?t:0},Gr.toString=bo,Gr.toUpper=function(t){return bo(t).toUpperCase()},Gr.trim=function(t,e,r){if((t=bo(t))&&(r||e===n))return Ke(t);if(!t||!(e=cn(e)))return t;var i=mr(t),s=mr(e);return Sn(i,rr(i,s),ir(i,s)+1).join("")},Gr.trimEnd=function(t,e,r){if((t=bo(t))&&(r||e===n))return t.slice(0,gr(t)+1);if(!t||!(e=cn(e)))return t;var i=mr(t);return Sn(i,0,ir(i,mr(e))+1).join("")},Gr.trimStart=function(t,e,r){if((t=bo(t))&&(r||e===n))return t.replace(at,"");if(!t||!(e=cn(e)))return t;var i=mr(t);return Sn(i,rr(i,mr(e))).join("")},Gr.truncate=function(t,e){var r=30,i="...";if(ro(e)){var s="separator"in e?e.separator:s;r="length"in e?vo(e.length):r,i="omission"in e?cn(e.omission):i}var a=(t=bo(t)).length;if(lr(t)){var o=mr(t);a=o.length}if(r>=a)return t;var l=r-fr(i);if(l<1)return i;var h=o?Sn(o,0,l).join(""):t.slice(0,l);if(s===n)return h+i;if(o&&(l+=h.length-l),oo(s)){if(t.slice(l).search(s)){var u,c=h;for(s.global||(s=Ct(s.source,bo(mt.exec(s))+"g")),s.lastIndex=0;u=s.exec(c);)var p=u.index;h=h.slice(0,p===n?l:p)}}else if(t.indexOf(cn(s),l)!=l){var d=h.lastIndexOf(s);d>-1&&(h=h.slice(0,d))}return h+i},Gr.unescape=function(t){return(t=bo(t))&&$.test(t)?t.replace(Y,vr):t},Gr.uniqueId=function(t){var e=++zt;return bo(t)+e},Gr.upperCase=Ko,Gr.upperFirst=Qo,Gr.each=_a,Gr.eachRight=ba,Gr.first=Ys,ul(Gr,(Ml={},bi(Gr,(function(t,e){Ot.call(Gr.prototype,e)||(Ml[e]=t)})),Ml),{chain:!1}),Gr.VERSION="4.17.21",Ae(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Gr[t].placeholder=Gr})),Ae(["drop","take"],(function(t,e){jr.prototype[t]=function(r){r=r===n?1:xr(vo(r),0);var i=this.__filtered__&&!e?new jr(this):this.clone();return i.__filtered__?i.__takeCount__=_r(r,i.__takeCount__):i.__views__.push({size:_r(r,g),type:t+(i.__dir__<0?"Right":"")}),i},jr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Ae(["filter","map","takeWhile"],(function(t,e){var r=e+1,i=1==r||3==r;jr.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:us(t,3),type:r}),e.__filtered__=e.__filtered__||i,e}})),Ae(["head","last"],(function(t,e){var r="take"+(e?"Right":"");jr.prototype[t]=function(){return this[r](1).value()[0]}})),Ae(["initial","tail"],(function(t,e){var r="drop"+(e?"":"Right");jr.prototype[t]=function(){return this.__filtered__?new jr(this):this[r](1)}})),jr.prototype.compact=function(){return this.filter(al)},jr.prototype.find=function(t){return this.filter(t).head()},jr.prototype.findLast=function(t){return this.reverse().find(t)},jr.prototype.invokeMap=Ji((function(t,e){return"function"==typeof t?new jr(this):this.map((function(r){return ki(r,t,e)}))})),jr.prototype.reject=function(t){return this.filter(za(us(t)))},jr.prototype.slice=function(t,e){t=vo(t);var r=this;return r.__filtered__&&(t>0||e<0)?new jr(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==n&&(r=(e=vo(e))<0?r.dropRight(-e):r.take(e-t)),r)},jr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},jr.prototype.toArray=function(){return this.take(g)},bi(jr.prototype,(function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),s=Gr[i?"take"+("last"==e?"Right":""):e],a=i||/^find/.test(e);s&&(Gr.prototype[e]=function(){var e=this.__wrapped__,o=i?[1]:arguments,l=e instanceof jr,h=o[0],u=l||Xa(e),c=function(t){var e=s.apply(Gr,Oe([t],o));return i&&p?e[0]:e};u&&r&&"function"==typeof h&&1!=h.length&&(l=u=!1);var p=this.__chain__,d=!!this.__actions__.length,f=a&&!p,m=l&&!d;if(!a&&u){e=m?e:new jr(this);var g=t.apply(e,o);return g.__actions__.push({func:ma,args:[c],thisArg:n}),new Ur(g,p)}return f&&m?t.apply(this,o):(g=this.thru(c),f?i?g.value()[0]:g.value():g)})})),Ae(["pop","push","shift","sort","splice","unshift"],(function(t){var e=kt[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);Gr.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var n=this.value();return e.apply(Xa(n)?n:[],t)}return this[r]((function(r){return e.apply(Xa(r)?r:[],t)}))}})),bi(jr.prototype,(function(t,e){var r=Gr[e];if(r){var i=r.name+"";Ot.call(Rr,i)||(Rr[i]=[]),Rr[i].push({name:e,func:r})}})),Rr[Wn(n,2).name]=[{name:"wrapper",func:n}],jr.prototype.clone=function(){var t=new jr(this.__wrapped__);return t.__actions__=kn(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=kn(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=kn(this.__views__),t},jr.prototype.reverse=function(){if(this.__filtered__){var t=new jr(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},jr.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,r=Xa(t),i=e<0,n=r?t.length:0,s=function(t,e,r){var i=-1,n=r.length;for(;++i<n;){var s=r[i],a=s.size;switch(s.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=_r(e,t+a);break;case"takeRight":t=xr(t,e-a)}}return{start:t,end:e}}(0,n,this.__views__),a=s.start,o=s.end,l=o-a,h=i?o:a-1,u=this.__iteratees__,c=u.length,p=0,d=_r(l,this.__takeCount__);if(!r||!i&&n==l&&d==l)return gn(t,this.__actions__);var f=[];t:for(;l--&&p<d;){for(var m=-1,g=t[h+=e];++m<c;){var v=u[m],y=v.iteratee,x=v.type,_=y(g);if(2==x)g=_;else if(!_){if(1==x)continue t;break t}}f[p++]=g}return f},Gr.prototype.at=ga,Gr.prototype.chain=function(){return fa(this)},Gr.prototype.commit=function(){return new Ur(this.value(),this.__chain__)},Gr.prototype.next=function(){this.__values__===n&&(this.__values__=mo(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?n:this.__values__[this.__index__++]}},Gr.prototype.plant=function(t){for(var e,r=this;r instanceof Hr;){var i=Gs(r);i.__index__=0,i.__values__=n,e?s.__wrapped__=i:e=i;var s=i;r=r.__wrapped__}return s.__wrapped__=t,e},Gr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof jr){var e=t;return this.__actions__.length&&(e=new jr(this)),(e=e.reverse()).__actions__.push({func:ma,args:[ra],thisArg:n}),new Ur(e,this.__chain__)}return this.thru(ra)},Gr.prototype.toJSON=Gr.prototype.valueOf=Gr.prototype.value=function(){return gn(this.__wrapped__,this.__actions__)},Gr.prototype.first=Gr.prototype.head,Kt&&(Gr.prototype[Kt]=function(){return this}),Gr}();me._=yr,(i=function(){return yr}.call(e,r,e,t))===n||(t.exports=i)}.call(this)},7506:function(module,exports,__webpack_require__){var factory;"undefined"!=typeof navigator&&(factory=function(){"use strict";var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(t){_useWebWorker=!!t},getWebWorker=function(){return _useWebWorker},setLocationHref=function(t){locationHref=t},getLocationHref=function(){return locationHref};function createTag(t){return document.createElement(t)}function extendPrototype(t,e){var r,i,n=t.length;for(r=0;r<n;r+=1)for(var s in i=t[r].prototype)Object.prototype.hasOwnProperty.call(i,s)&&(e.prototype[s]=i[s])}function getDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)}function createProxyFunction(t){function e(){}return e.prototype=t,e}var audioControllerFactory=function(){function t(t){this.audios=[],this.audioFactory=t,this._volume=1,this._isMuted=!1}return t.prototype={addAudio:function(t){this.audios.push(t)},pause:function(){var t,e=this.audios.length;for(t=0;t<e;t+=1)this.audios[t].pause()},resume:function(){var t,e=this.audios.length;for(t=0;t<e;t+=1)this.audios[t].resume()},setRate:function(t){var e,r=this.audios.length;for(e=0;e<r;e+=1)this.audios[e].setRate(t)},createAudio:function(t){return this.audioFactory?this.audioFactory(t):window.Howl?new window.Howl({src:[t]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(t){this.audioFactory=t},setVolume:function(t){this._volume=t,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var t,e=this.audios.length;for(t=0;t<e;t+=1)this.audios[t].volume(this._volume*(this._isMuted?0:1))}},function(){return new t}}(),createTypedArray=function(){function t(t,e){var r,i=0,n=[];switch(t){case"int16":case"uint8c":r=1;break;default:r=1.1}for(i=0;i<e;i+=1)n.push(r);return n}return"function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?function(e,r){return"float32"===e?new Float32Array(r):"int16"===e?new Int16Array(r):"uint8c"===e?new Uint8ClampedArray(r):t(e,r)}:t}();function createSizedArray(t){return Array.apply(null,{length:t})}function _typeof$6(t){return _typeof$6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$6(t)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),_shouldRoundValues=!1,bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};function ProjectInterface$1(){return{}}!function(){var t,e=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],r=e.length;for(t=0;t<r;t+=1)BMMath[e[t]]=Math[e[t]]}(),BMMath.random=Math.random,BMMath.abs=function(t){if("object"===_typeof$6(t)&&t.length){var e,r=createSizedArray(t.length),i=t.length;for(e=0;e<i;e+=1)r[e]=Math.abs(t[e]);return r}return Math.abs(t)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function roundValues(t){_shouldRoundValues=!!t}function bmRnd(t){return _shouldRoundValues?Math.round(t):t}function styleDiv(t){t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.display="block",t.style.transformOrigin="0 0",t.style.webkitTransformOrigin="0 0",t.style.backfaceVisibility="visible",t.style.webkitBackfaceVisibility="visible",t.style.transformStyle="preserve-3d",t.style.webkitTransformStyle="preserve-3d",t.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(t,e,r,i){this.type=t,this.currentTime=e,this.totalTime=r,this.direction=i<0?-1:1}function BMCompleteEvent(t,e){this.type=t,this.direction=e<0?-1:1}function BMCompleteLoopEvent(t,e,r,i){this.type=t,this.currentLoop=r,this.totalLoops=e,this.direction=i<0?-1:1}function BMSegmentStartEvent(t,e,r){this.type=t,this.firstFrame=e,this.totalFrames=r}function BMDestroyEvent(t,e){this.type=t,this.target=e}function BMRenderFrameErrorEvent(t,e){this.type="renderFrameError",this.nativeError=t,this.currentTime=e}function BMConfigErrorEvent(t){this.type="configError",this.nativeError=t}function BMAnimationConfigErrorEvent(t,e){this.type=t,this.nativeError=e}var createElementID=(_count=0,function(){return idPrefix$1+"__lottie_element_"+(_count+=1)}),_count;function HSVtoRGB(t,e,r){var i,n,s,a,o,l,h,u;switch(l=r*(1-e),h=r*(1-(o=6*t-(a=Math.floor(6*t)))*e),u=r*(1-(1-o)*e),a%6){case 0:i=r,n=u,s=l;break;case 1:i=h,n=r,s=l;break;case 2:i=l,n=r,s=u;break;case 3:i=l,n=h,s=r;break;case 4:i=u,n=l,s=r;break;case 5:i=r,n=l,s=h}return[i,n,s]}function RGBtoHSV(t,e,r){var i,n=Math.max(t,e,r),s=Math.min(t,e,r),a=n-s,o=0===n?0:a/n,l=n/255;switch(n){case s:i=0;break;case t:i=e-r+a*(e<r?6:0),i/=6*a;break;case e:i=r-t+2*a,i/=6*a;break;case r:i=t-e+4*a,i/=6*a}return[i,o,l]}function addSaturationToRGB(t,e){var r=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return r[1]+=e,r[1]>1?r[1]=1:r[1]<=0&&(r[1]=0),HSVtoRGB(r[0],r[1],r[2])}function addBrightnessToRGB(t,e){var r=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return r[2]+=e,r[2]>1?r[2]=1:r[2]<0&&(r[2]=0),HSVtoRGB(r[0],r[1],r[2])}function addHueToRGB(t,e){var r=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return r[0]+=e/360,r[0]>1?r[0]-=1:r[0]<0&&(r[0]+=1),HSVtoRGB(r[0],r[1],r[2])}var rgbToHex=function(){var t,e,r=[];for(t=0;t<256;t+=1)e=t.toString(16),r[t]=1===e.length?"0"+e:e;return function(t,e,i){return t<0&&(t=0),e<0&&(e=0),i<0&&(i=0),"#"+r[t]+r[e]+r[i]}}(),setSubframeEnabled=function(t){subframeEnabled=!!t},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(t){expressionsPlugin=t},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(t){expressionsInterfaces=t},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(t){defaultCurveSegments=t},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(t){idPrefix$1=t},getIdPrefix=function(){return idPrefix$1};function createNS(t){return document.createElementNS(svgNS,t)}function _typeof$5(t){return _typeof$5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$5(t)}var dataManager=function(){var t,e,r=1,i=[],n={onmessage:function(){},postMessage:function(e){t({data:e})}},s={postMessage:function(t){n.onmessage({data:t})}};function a(){e||(e=function(e){if(window.Worker&&window.Blob&&getWebWorker()){var r=new Blob(["var _workerSelf = self; self.onmessage = ",e.toString()],{type:"text/javascript"}),i=URL.createObjectURL(r);return new Worker(i)}return t=e,n}((function(t){if(s.dataManager||(s.dataManager=function(){function t(n,s){var a,o,l,h,u,p,d=n.length;for(o=0;o<d;o+=1)if("ks"in(a=n[o])&&!a.completed){if(a.completed=!0,a.hasMask){var f=a.masksProperties;for(h=f.length,l=0;l<h;l+=1)if(f[l].pt.k.i)i(f[l].pt.k);else for(p=f[l].pt.k.length,u=0;u<p;u+=1)f[l].pt.k[u].s&&i(f[l].pt.k[u].s[0]),f[l].pt.k[u].e&&i(f[l].pt.k[u].e[0])}0===a.ty?(a.layers=e(a.refId,s),t(a.layers,s)):4===a.ty?r(a.shapes):5===a.ty&&c(a)}}function e(t,e){var r=function(t,e){for(var r=0,i=e.length;r<i;){if(e[r].id===t)return e[r];r+=1}return null}(t,e);return r?r.layers.__used?JSON.parse(JSON.stringify(r.layers)):(r.layers.__used=!0,r.layers):null}function r(t){var e,n,s;for(e=t.length-1;e>=0;e-=1)if("sh"===t[e].ty)if(t[e].ks.k.i)i(t[e].ks.k);else for(s=t[e].ks.k.length,n=0;n<s;n+=1)t[e].ks.k[n].s&&i(t[e].ks.k[n].s[0]),t[e].ks.k[n].e&&i(t[e].ks.k[n].e[0]);else"gr"===t[e].ty&&r(t[e].it)}function i(t){var e,r=t.i.length;for(e=0;e<r;e+=1)t.i[e][0]+=t.v[e][0],t.i[e][1]+=t.v[e][1],t.o[e][0]+=t.v[e][0],t.o[e][1]+=t.v[e][1]}function n(t,e){var r=e?e.split("."):[100,100,100];return t[0]>r[0]||!(r[0]>t[0])&&(t[1]>r[1]||!(r[1]>t[1])&&(t[2]>r[2]||!(r[2]>t[2])&&null))}var s,a=function(){var t=[4,4,14];function e(t){var e,r,i,n=t.length;for(e=0;e<n;e+=1)5===t[e].ty&&(i=void 0,i=(r=t[e]).t.d,r.t.d={k:[{s:i,t:0}]})}return function(r){if(n(t,r.v)&&(e(r.layers),r.assets)){var i,s=r.assets.length;for(i=0;i<s;i+=1)r.assets[i].layers&&e(r.assets[i].layers)}}}(),o=(s=[4,7,99],function(t){if(t.chars&&!n(s,t.v)){var e,i=t.chars.length;for(e=0;e<i;e+=1){var a=t.chars[e];a.data&&a.data.shapes&&(r(a.data.shapes),a.data.ip=0,a.data.op=99999,a.data.st=0,a.data.sr=1,a.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},t.chars[e].t||(a.data.shapes.push({ty:"no"}),a.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}),l=function(){var t=[5,7,15];function e(t){var e,r,i=t.length;for(e=0;e<i;e+=1)5===t[e].ty&&(r=void 0,"number"==typeof(r=t[e].t.p).a&&(r.a={a:0,k:r.a}),"number"==typeof r.p&&(r.p={a:0,k:r.p}),"number"==typeof r.r&&(r.r={a:0,k:r.r}))}return function(r){if(n(t,r.v)&&(e(r.layers),r.assets)){var i,s=r.assets.length;for(i=0;i<s;i+=1)r.assets[i].layers&&e(r.assets[i].layers)}}}(),h=function(){var t=[4,1,9];function e(t){var r,i,n,s=t.length;for(r=0;r<s;r+=1)if("gr"===t[r].ty)e(t[r].it);else if("fl"===t[r].ty||"st"===t[r].ty)if(t[r].c.k&&t[r].c.k[0].i)for(n=t[r].c.k.length,i=0;i<n;i+=1)t[r].c.k[i].s&&(t[r].c.k[i].s[0]/=255,t[r].c.k[i].s[1]/=255,t[r].c.k[i].s[2]/=255,t[r].c.k[i].s[3]/=255),t[r].c.k[i].e&&(t[r].c.k[i].e[0]/=255,t[r].c.k[i].e[1]/=255,t[r].c.k[i].e[2]/=255,t[r].c.k[i].e[3]/=255);else t[r].c.k[0]/=255,t[r].c.k[1]/=255,t[r].c.k[2]/=255,t[r].c.k[3]/=255}function r(t){var r,i=t.length;for(r=0;r<i;r+=1)4===t[r].ty&&e(t[r].shapes)}return function(e){if(n(t,e.v)&&(r(e.layers),e.assets)){var i,s=e.assets.length;for(i=0;i<s;i+=1)e.assets[i].layers&&r(e.assets[i].layers)}}}(),u=function(){var t=[4,4,18];function e(t){var r,i,n;for(r=t.length-1;r>=0;r-=1)if("sh"===t[r].ty)if(t[r].ks.k.i)t[r].ks.k.c=t[r].closed;else for(n=t[r].ks.k.length,i=0;i<n;i+=1)t[r].ks.k[i].s&&(t[r].ks.k[i].s[0].c=t[r].closed),t[r].ks.k[i].e&&(t[r].ks.k[i].e[0].c=t[r].closed);else"gr"===t[r].ty&&e(t[r].it)}function r(t){var r,i,n,s,a,o,l=t.length;for(i=0;i<l;i+=1){if((r=t[i]).hasMask){var h=r.masksProperties;for(s=h.length,n=0;n<s;n+=1)if(h[n].pt.k.i)h[n].pt.k.c=h[n].cl;else for(o=h[n].pt.k.length,a=0;a<o;a+=1)h[n].pt.k[a].s&&(h[n].pt.k[a].s[0].c=h[n].cl),h[n].pt.k[a].e&&(h[n].pt.k[a].e[0].c=h[n].cl)}4===r.ty&&e(r.shapes)}}return function(e){if(n(t,e.v)&&(r(e.layers),e.assets)){var i,s=e.assets.length;for(i=0;i<s;i+=1)e.assets[i].layers&&r(e.assets[i].layers)}}}();function c(t){0===t.t.a.length&&t.t.p}var p={completeData:function(r){r.__complete||(h(r),a(r),o(r),l(r),u(r),t(r.layers,r.assets),function(r,i){if(r){var n=0,s=r.length;for(n=0;n<s;n+=1)1===r[n].t&&(r[n].data.layers=e(r[n].data.refId,i),t(r[n].data.layers,i))}}(r.chars,r.assets),r.__complete=!0)}};return p.checkColors=h,p.checkChars=o,p.checkPathProperties=l,p.checkShapes=u,p.completeLayers=t,p}()),s.assetLoader||(s.assetLoader=function(){function t(t){var e=t.getResponseHeader("content-type");return e&&"json"===t.responseType&&-1!==e.indexOf("json")||t.response&&"object"===_typeof$5(t.response)?t.response:t.response&&"string"==typeof t.response?JSON.parse(t.response):t.responseText?JSON.parse(t.responseText):null}return{load:function(e,r,i,n){var s,a=new XMLHttpRequest;try{a.responseType="json"}catch(t){}a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status)s=t(a),i(s);else try{s=t(a),i(s)}catch(t){n&&n(t)}};try{a.open(["G","E","T"].join(""),e,!0)}catch(t){a.open(["G","E","T"].join(""),r+"/"+e,!0)}a.send()}}}()),"loadAnimation"===t.data.type)s.assetLoader.load(t.data.path,t.data.fullPath,(function(e){s.dataManager.completeData(e),s.postMessage({id:t.data.id,payload:e,status:"success"})}),(function(){s.postMessage({id:t.data.id,status:"error"})}));else if("complete"===t.data.type){var e=t.data.animation;s.dataManager.completeData(e),s.postMessage({id:t.data.id,payload:e,status:"success"})}else"loadData"===t.data.type&&s.assetLoader.load(t.data.path,t.data.fullPath,(function(e){s.postMessage({id:t.data.id,payload:e,status:"success"})}),(function(){s.postMessage({id:t.data.id,status:"error"})}))})),e.onmessage=function(t){var e=t.data,r=e.id,n=i[r];i[r]=null,"success"===e.status?n.onComplete(e.payload):n.onError&&n.onError()})}function o(t,e){var n="processId_"+(r+=1);return i[n]={onComplete:t,onError:e},n}return{loadAnimation:function(t,r,i){a();var n=o(r,i);e.postMessage({type:"loadAnimation",path:t,fullPath:window.location.origin+window.location.pathname,id:n})},loadData:function(t,r,i){a();var n=o(r,i);e.postMessage({type:"loadData",path:t,fullPath:window.location.origin+window.location.pathname,id:n})},completeAnimation:function(t,r,i){a();var n=o(r,i);e.postMessage({type:"complete",animation:t,id:n})}}}(),ImagePreloader=function(){var t=function(){var t=createTag("canvas");t.width=1,t.height=1;var e=t.getContext("2d");return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),t}();function e(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function r(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function i(t,e,r){var i="";if(t.e)i=t.p;else if(e){var n=t.p;-1!==n.indexOf("images/")&&(n=n.split("/")[1]),i=e+n}else i=r,i+=t.u?t.u:"",i+=t.p;return i}function n(t){var e=0,r=setInterval(function(){(t.getBBox().width||e>500)&&(this._imageLoaded(),clearInterval(r)),e+=1}.bind(this),50)}function s(t){var e={assetData:t},r=i(t,this.assetsPath,this.path);return dataManager.loadData(r,function(t){e.img=t,this._footageLoaded()}.bind(this),function(){e.img={},this._footageLoaded()}.bind(this)),e}function a(){this._imageLoaded=e.bind(this),this._footageLoaded=r.bind(this),this.testImageLoaded=n.bind(this),this.createFootageData=s.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return a.prototype={loadAssets:function(t,e){var r;this.imagesLoadedCb=e;var i=t.length;for(r=0;r<i;r+=1)t[r].layers||(t[r].t&&"seq"!==t[r].t?3===t[r].t&&(this.totalFootages+=1,this.images.push(this.createFootageData(t[r]))):(this.totalImages+=1,this.images.push(this._createImageData(t[r]))))},setAssetsPath:function(t){this.assetsPath=t||""},setPath:function(t){this.path=t||""},loadedImages:function(){return this.totalImages===this.loadedAssets},loadedFootages:function(){return this.totalFootages===this.loadedFootagesCount},destroy:function(){this.imagesLoadedCb=null,this.images.length=0},getAsset:function(t){for(var e=0,r=this.images.length;e<r;){if(this.images[e].assetData===t)return this.images[e].img;e+=1}return null},createImgData:function(e){var r=i(e,this.assetsPath,this.path),n=createTag("img");n.crossOrigin="anonymous",n.addEventListener("load",this._imageLoaded,!1),n.addEventListener("error",function(){s.img=t,this._imageLoaded()}.bind(this),!1),n.src=r;var s={img:n,assetData:e};return s},createImageData:function(e){var r=i(e,this.assetsPath,this.path),n=createNS("image");isSafari?this.testImageLoaded(n):n.addEventListener("load",this._imageLoaded,!1),n.addEventListener("error",function(){s.img=t,this._imageLoaded()}.bind(this),!1),n.setAttributeNS("http://www.w3.org/1999/xlink","href",r),this._elementHelper.append?this._elementHelper.append(n):this._elementHelper.appendChild(n);var s={img:n,assetData:e};return s},imageLoaded:e,footageLoaded:r,setCacheType:function(t,e){"svg"===t?(this._elementHelper=e,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}},a}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(t,e){if(this._cbs[t])for(var r=this._cbs[t],i=0;i<r.length;i+=1)r[i](e)},addEventListener:function(t,e){return this._cbs[t]||(this._cbs[t]=[]),this._cbs[t].push(e),function(){this.removeEventListener(t,e)}.bind(this)},removeEventListener:function(t,e){if(e){if(this._cbs[t]){for(var r=0,i=this._cbs[t].length;r<i;)this._cbs[t][r]===e&&(this._cbs[t].splice(r,1),r-=1,i-=1),r+=1;this._cbs[t].length||(this._cbs[t]=null)}}else this._cbs[t]=null}};var markerParser=function(){function t(t){for(var e,r=t.split("\r\n"),i={},n=0,s=0;s<r.length;s+=1)2===(e=r[s].split(":")).length&&(i[e[0]]=e[1].trim(),n+=1);if(0===n)throw new Error;return i}return function(e){for(var r=[],i=0;i<e.length;i+=1){var n=e[i],s={time:n.tm,duration:n.dr};try{s.payload=JSON.parse(e[i].cm)}catch(r){try{s.payload=t(e[i].cm)}catch(t){s.payload={name:e[i].cm}}}r.push(s)}return r}}(),ProjectInterface=function(){function t(t){this.compositions.push(t)}return function(){function e(t){for(var e=0,r=this.compositions.length;e<r;){if(this.compositions[e].data&&this.compositions[e].data.nm===t)return this.compositions[e].prepareFrame&&this.compositions[e].data.xt&&this.compositions[e].prepareFrame(this.currentFrame),this.compositions[e].compInterface;e+=1}return null}return e.compositions=[],e.currentFrame=0,e.registerComposition=t,e}}(),renderers={},registerRenderer=function(t,e){renderers[t]=e};function getRenderer(t){return renderers[t]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var t in renderers)if(renderers[t])return t;return""}function _typeof$4(t){return _typeof$4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$4(t)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0)};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(t){(t.wrapper||t.container)&&(this.wrapper=t.wrapper||t.container);var e="svg";t.animType?e=t.animType:t.renderer&&(e=t.renderer);var r=getRenderer(e);this.renderer=new r(this,t.rendererSettings),this.imagePreloader.setCacheType(e,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=e,""===t.loop||null===t.loop||void 0===t.loop||!0===t.loop?this.loop=!0:!1===t.loop?this.loop=!1:this.loop=parseInt(t.loop,10),this.autoplay=!("autoplay"in t)||t.autoplay,this.name=t.name?t.name:"",this.autoloadSegments=!Object.prototype.hasOwnProperty.call(t,"autoloadSegments")||t.autoloadSegments,this.assetsPath=t.assetsPath,this.initialSegment=t.initialSegment,t.audioFactory&&this.audioController.setAudioFactory(t.audioFactory),t.animationData?this.setupAnimation(t.animationData):t.path&&(-1!==t.path.lastIndexOf("\\")?this.path=t.path.substr(0,t.path.lastIndexOf("\\")+1):this.path=t.path.substr(0,t.path.lastIndexOf("/")+1),this.fileName=t.path.substr(t.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(t.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(t){dataManager.completeAnimation(t,this.configAnimation)},AnimationItem.prototype.setData=function(t,e){e&&"object"!==_typeof$4(e)&&(e=JSON.parse(e));var r={wrapper:t,animationData:e},i=t.attributes;r.path=i.getNamedItem("data-animation-path")?i.getNamedItem("data-animation-path").value:i.getNamedItem("data-bm-path")?i.getNamedItem("data-bm-path").value:i.getNamedItem("bm-path")?i.getNamedItem("bm-path").value:"",r.animType=i.getNamedItem("data-anim-type")?i.getNamedItem("data-anim-type").value:i.getNamedItem("data-bm-type")?i.getNamedItem("data-bm-type").value:i.getNamedItem("bm-type")?i.getNamedItem("bm-type").value:i.getNamedItem("data-bm-renderer")?i.getNamedItem("data-bm-renderer").value:i.getNamedItem("bm-renderer")?i.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var n=i.getNamedItem("data-anim-loop")?i.getNamedItem("data-anim-loop").value:i.getNamedItem("data-bm-loop")?i.getNamedItem("data-bm-loop").value:i.getNamedItem("bm-loop")?i.getNamedItem("bm-loop").value:"";"false"===n?r.loop=!1:"true"===n?r.loop=!0:""!==n&&(r.loop=parseInt(n,10));var s=i.getNamedItem("data-anim-autoplay")?i.getNamedItem("data-anim-autoplay").value:i.getNamedItem("data-bm-autoplay")?i.getNamedItem("data-bm-autoplay").value:!i.getNamedItem("bm-autoplay")||i.getNamedItem("bm-autoplay").value;r.autoplay="false"!==s,r.name=i.getNamedItem("data-name")?i.getNamedItem("data-name").value:i.getNamedItem("data-bm-name")?i.getNamedItem("data-bm-name").value:i.getNamedItem("bm-name")?i.getNamedItem("bm-name").value:"","false"===(i.getNamedItem("data-anim-prerender")?i.getNamedItem("data-anim-prerender").value:i.getNamedItem("data-bm-prerender")?i.getNamedItem("data-bm-prerender").value:i.getNamedItem("bm-prerender")?i.getNamedItem("bm-prerender").value:"")&&(r.prerender=!1),r.path?this.setParams(r):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(t){t.op>this.animationData.op&&(this.animationData.op=t.op,this.totalFrames=Math.floor(t.op-this.animationData.ip));var e,r,i=this.animationData.layers,n=i.length,s=t.layers,a=s.length;for(r=0;r<a;r+=1)for(e=0;e<n;){if(i[e].id===s[r].id){i[e]=s[r];break}e+=1}if((t.chars||t.fonts)&&(this.renderer.globalData.fontManager.addChars(t.chars),this.renderer.globalData.fontManager.addFonts(t.fonts,this.renderer.globalData.defs)),t.assets)for(n=t.assets.length,e=0;e<n;e+=1)this.animationData.assets.push(t.assets[e]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(t){this.animationData=t;var e=getExpressionsPlugin();e&&e.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var t=this.animationData.segments;if(!t||0===t.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var e=t.shift();this.timeCompleted=e.time*this.frameRate;var r=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(r,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(t){if(this.renderer)try{this.animationData=t,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(t),t.assets||(t.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(t.assets),this.markers=markerParser(t.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(t){this.triggerConfigError(t)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||"canvas"!==this.renderer.rendererType)&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var t=getExpressionsPlugin();t&&t.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(t,e){var r="number"==typeof t?t:void 0,i="number"==typeof e?e:void 0;this.renderer.updateContainerSize(r,i)},AnimationItem.prototype.setSubframe=function(t){this.isSubframeEnabled=!!t},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!1!==this.isLoaded&&this.renderer)try{this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(t){this.triggerRenderFrameError(t)}},AnimationItem.prototype.play=function(t){t&&this.name!==t||!0===this.isPaused&&(this.isPaused=!1,this.trigger("_pause"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(t){t&&this.name!==t||!1===this.isPaused&&(this.isPaused=!0,this.trigger("_play"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(t){t&&this.name!==t||(!0===this.isPaused?this.play():this.pause())},AnimationItem.prototype.stop=function(t){t&&this.name!==t||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(t){for(var e,r=0;r<this.markers.length;r+=1)if((e=this.markers[r]).payload&&e.payload.name===t)return e;return null},AnimationItem.prototype.goToAndStop=function(t,e,r){if(!r||this.name===r){var i=Number(t);if(isNaN(i)){var n=this.getMarkerData(t);n&&this.goToAndStop(n.time,!0)}else e?this.setCurrentRawFrameValue(t):this.setCurrentRawFrameValue(t*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(t,e,r){if(!r||this.name===r){var i=Number(t);if(isNaN(i)){var n=this.getMarkerData(t);n&&(n.duration?this.playSegments([n.time,n.time+n.duration],!0):this.goToAndStop(n.time,!0))}else this.goToAndStop(i,e,r);this.play()}},AnimationItem.prototype.advanceTime=function(t){if(!0!==this.isPaused&&!1!==this.isLoaded){var e=this.currentRawFrame+t*this.frameModifier,r=!1;e>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?e>=this.totalFrames?(this.playCount+=1,this.checkSegments(e%this.totalFrames)||(this.setCurrentRawFrameValue(e%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(e):this.checkSegments(e>this.totalFrames?e%this.totalFrames:0)||(r=!0,e=this.totalFrames-1):e<0?this.checkSegments(e%this.totalFrames)||(!this.loop||this.playCount--<=0&&!0!==this.loop?(r=!0,e=0):(this.setCurrentRawFrameValue(this.totalFrames+e%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(e),r&&(this.setCurrentRawFrameValue(e),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(t,e){this.playCount=0,t[1]<t[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=t[0]-t[1],this.timeCompleted=this.totalFrames,this.firstFrame=t[1],this.setCurrentRawFrameValue(this.totalFrames-.001-e)):t[1]>t[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=t[1]-t[0],this.timeCompleted=this.totalFrames,this.firstFrame=t[0],this.setCurrentRawFrameValue(.001+e)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(t,e){var r=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<t?r=t:this.currentRawFrame+this.firstFrame>e&&(r=e-t)),this.firstFrame=t,this.totalFrames=e-t,this.timeCompleted=this.totalFrames,-1!==r&&this.goToAndStop(r,!0)},AnimationItem.prototype.playSegments=function(t,e){if(e&&(this.segments.length=0),"object"===_typeof$4(t[0])){var r,i=t.length;for(r=0;r<i;r+=1)this.segments.push(t[r])}else this.segments.push(t);this.segments.length&&e&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(t){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),t&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(t){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),t),!0)},AnimationItem.prototype.destroy=function(t){t&&this.name!==t||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.renderer=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(t){this.currentRawFrame=t,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(t){this.playSpeed=t,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(t){this.playDirection=t<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(t){this.loop=t},AnimationItem.prototype.setVolume=function(t,e){e&&this.name!==e||this.audioController.setVolume(t)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(t){t&&this.name!==t||this.audioController.mute()},AnimationItem.prototype.unmute=function(t){t&&this.name!==t||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(t){var e="";if(t.e)e=t.p;else if(this.assetsPath){var r=t.p;-1!==r.indexOf("images/")&&(r=r.split("/")[1]),e=this.assetsPath+r}else e=this.path,e+=t.u?t.u:"",e+=t.p;return e},AnimationItem.prototype.getAssetData=function(t){for(var e=0,r=this.assets.length;e<r;){if(t===this.assets[e].id)return this.assets[e];e+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(t){return t?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(t,e,r){try{this.renderer.getElementByPath(t).updateDocumentData(e,r)}catch(t){}},AnimationItem.prototype.trigger=function(t){if(this._cbs&&this._cbs[t])switch(t){case"enterFrame":this.triggerEvent(t,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(t,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(t,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(t,new BMCompleteEvent(t,this.frameMult));break;case"segmentStart":this.triggerEvent(t,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(t,new BMDestroyEvent(t,this));break;default:this.triggerEvent(t)}"enterFrame"===t&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===t&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult)),"complete"===t&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(t,this.frameMult)),"segmentStart"===t&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames)),"destroy"===t&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(t,this))},AnimationItem.prototype.triggerRenderFrameError=function(t){var e=new BMRenderFrameErrorEvent(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)},AnimationItem.prototype.triggerConfigError=function(t){var e=new BMConfigErrorEvent(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)};var animationManager=function(){var t={},e=[],r=0,i=0,n=0,s=!0,a=!1;function o(t){for(var r=0,n=t.target;r<i;)e[r].animation===n&&(e.splice(r,1),r-=1,i-=1,n.isPaused||u()),r+=1}function l(t,r){if(!t)return null;for(var n=0;n<i;){if(e[n].elem===t&&null!==e[n].elem)return e[n].animation;n+=1}var s=new AnimationItem;return c(s,t),s.setData(t,r),s}function h(){n+=1,f()}function u(){n-=1}function c(t,r){t.addEventListener("destroy",o),t.addEventListener("_active",h),t.addEventListener("_idle",u),e.push({elem:r,animation:t}),i+=1}function p(t){var o,l=t-r;for(o=0;o<i;o+=1)e[o].animation.advanceTime(l);r=t,n&&!a?window.requestAnimationFrame(p):s=!0}function d(t){r=t,window.requestAnimationFrame(p)}function f(){!a&&n&&s&&(window.requestAnimationFrame(d),s=!1)}return t.registerAnimation=l,t.loadAnimation=function(t){var e=new AnimationItem;return c(e,null),e.setParams(t),e},t.setSpeed=function(t,r){var n;for(n=0;n<i;n+=1)e[n].animation.setSpeed(t,r)},t.setDirection=function(t,r){var n;for(n=0;n<i;n+=1)e[n].animation.setDirection(t,r)},t.play=function(t){var r;for(r=0;r<i;r+=1)e[r].animation.play(t)},t.pause=function(t){var r;for(r=0;r<i;r+=1)e[r].animation.pause(t)},t.stop=function(t){var r;for(r=0;r<i;r+=1)e[r].animation.stop(t)},t.togglePause=function(t){var r;for(r=0;r<i;r+=1)e[r].animation.togglePause(t)},t.searchAnimations=function(t,e,r){var i,n=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),s=n.length;for(i=0;i<s;i+=1)r&&n[i].setAttribute("data-bm-type",r),l(n[i],t);if(e&&0===s){r||(r="svg");var a=document.getElementsByTagName("body")[0];a.innerText="";var o=createTag("div");o.style.width="100%",o.style.height="100%",o.setAttribute("data-bm-type",r),a.appendChild(o),l(o,t)}},t.resize=function(){var t;for(t=0;t<i;t+=1)e[t].animation.resize()},t.goToAndStop=function(t,r,n){var s;for(s=0;s<i;s+=1)e[s].animation.goToAndStop(t,r,n)},t.destroy=function(t){var r;for(r=i-1;r>=0;r-=1)e[r].animation.destroy(t)},t.freeze=function(){a=!0},t.unfreeze=function(){a=!1,f()},t.setVolume=function(t,r){var n;for(n=0;n<i;n+=1)e[n].animation.setVolume(t,r)},t.mute=function(t){var r;for(r=0;r<i;r+=1)e[r].animation.mute(t)},t.unmute=function(t){var r;for(r=0;r<i;r+=1)e[r].animation.unmute(t)},t.getRegisteredAnimations=function(){var t,r=e.length,i=[];for(t=0;t<r;t+=1)i.push(e[t].animation);return i},t}(),BezierFactory=function(){var t={getBezierEasing:function(t,r,i,n,s){var a=s||("bez_"+t+"_"+r+"_"+i+"_"+n).replace(/\./g,"p");if(e[a])return e[a];var o=new h([t,r,i,n]);return e[a]=o,o}},e={},r=.1,i="function"==typeof Float32Array;function n(t,e){return 1-3*e+3*t}function s(t,e){return 3*e-6*t}function a(t){return 3*t}function o(t,e,r){return((n(e,r)*t+s(e,r))*t+a(e))*t}function l(t,e,r){return 3*n(e,r)*t*t+2*s(e,r)*t+a(e)}function h(t){this._p=t,this._mSampleValues=i?new Float32Array(11):new Array(11),this._precomputed=!1,this.get=this.get.bind(this)}return h.prototype={get:function(t){var e=this._p[0],r=this._p[1],i=this._p[2],n=this._p[3];return this._precomputed||this._precompute(),e===r&&i===n?t:0===t?0:1===t?1:o(this._getTForX(t),r,n)},_precompute:function(){var t=this._p[0],e=this._p[1],r=this._p[2],i=this._p[3];this._precomputed=!0,t===e&&r===i||this._calcSampleValues()},_calcSampleValues:function(){for(var t=this._p[0],e=this._p[2],i=0;i<11;++i)this._mSampleValues[i]=o(i*r,t,e)},_getTForX:function(t){for(var e=this._p[0],i=this._p[2],n=this._mSampleValues,s=0,a=1;10!==a&&n[a]<=t;++a)s+=r;var h=s+(t-n[--a])/(n[a+1]-n[a])*r,u=l(h,e,i);return u>=.001?function(t,e,r,i){for(var n=0;n<4;++n){var s=l(e,r,i);if(0===s)return e;e-=(o(e,r,i)-t)/s}return e}(t,h,e,i):0===u?h:function(t,e,r,i,n){var s,a,l=0;do{(s=o(a=e+(r-e)/2,i,n)-t)>0?r=a:e=a}while(Math.abs(s)>1e-7&&++l<10);return a}(t,s,s+r,e,i)}},t}(),pooling={double:function(t){return t.concat(createSizedArray(t.length))}},poolFactory=function(t,e,r){var i=0,n=t,s=createSizedArray(n);return{newElement:function(){return i?s[i-=1]:e()},release:function(t){i===n&&(s=pooling.double(s),n*=2),r&&r(t),s[i]=t,i+=1}}},bezierLengthPool=poolFactory(8,(function(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}})),segmentsLengthPool=poolFactory(8,(function(){return{lengths:[],totalLength:0}}),(function(t){var e,r=t.lengths.length;for(e=0;e<r;e+=1)bezierLengthPool.release(t.lengths[e]);t.lengths.length=0}));function bezFunction(){var t=Math;function e(t,e,r,i,n,s){var a=t*i+e*n+r*s-n*i-s*t-r*e;return a>-.001&&a<.001}var r=function(t,e,r,i){var n,s,a,o,l,h,u=getDefaultCurveSegments(),c=0,p=[],d=[],f=bezierLengthPool.newElement();for(a=r.length,n=0;n<u;n+=1){for(l=n/(u-1),h=0,s=0;s<a;s+=1)o=bmPow(1-l,3)*t[s]+3*bmPow(1-l,2)*l*r[s]+3*(1-l)*bmPow(l,2)*i[s]+bmPow(l,3)*e[s],p[s]=o,null!==d[s]&&(h+=bmPow(p[s]-d[s],2)),d[s]=p[s];h&&(c+=h=bmSqrt(h)),f.percents[n]=l,f.lengths[n]=c}return f.addedLength=c,f};function i(t){this.segmentLength=0,this.points=new Array(t)}function n(t,e){this.partialLength=t,this.point=e}var s,a=(s={},function(t,r,a,o){var l=(t[0]+"_"+t[1]+"_"+r[0]+"_"+r[1]+"_"+a[0]+"_"+a[1]+"_"+o[0]+"_"+o[1]).replace(/\./g,"p");if(!s[l]){var h,u,c,p,d,f,m,g=getDefaultCurveSegments(),v=0,y=null;2===t.length&&(t[0]!==r[0]||t[1]!==r[1])&&e(t[0],t[1],r[0],r[1],t[0]+a[0],t[1]+a[1])&&e(t[0],t[1],r[0],r[1],r[0]+o[0],r[1]+o[1])&&(g=2);var x=new i(g);for(c=a.length,h=0;h<g;h+=1){for(m=createSizedArray(c),d=h/(g-1),f=0,u=0;u<c;u+=1)p=bmPow(1-d,3)*t[u]+3*bmPow(1-d,2)*d*(t[u]+a[u])+3*(1-d)*bmPow(d,2)*(r[u]+o[u])+bmPow(d,3)*r[u],m[u]=p,null!==y&&(f+=bmPow(m[u]-y[u],2));v+=f=bmSqrt(f),x.points[h]=new n(f,m),y=m}x.segmentLength=v,s[l]=x}return s[l]});function o(t,e){var r=e.percents,i=e.lengths,n=r.length,s=bmFloor((n-1)*t),a=t*e.addedLength,o=0;if(s===n-1||0===s||a===i[s])return r[s];for(var l=i[s]>a?-1:1,h=!0;h;)if(i[s]<=a&&i[s+1]>a?(o=(a-i[s])/(i[s+1]-i[s]),h=!1):s+=l,s<0||s>=n-1){if(s===n-1)return r[s];h=!1}return r[s]+(r[s+1]-r[s])*o}var l=createTypedArray("float32",8);return{getSegmentsLength:function(t){var e,i=segmentsLengthPool.newElement(),n=t.c,s=t.v,a=t.o,o=t.i,l=t._length,h=i.lengths,u=0;for(e=0;e<l-1;e+=1)h[e]=r(s[e],s[e+1],a[e],o[e+1]),u+=h[e].addedLength;return n&&l&&(h[e]=r(s[e],s[0],a[e],o[0]),u+=h[e].addedLength),i.totalLength=u,i},getNewSegment:function(e,r,i,n,s,a,h){s<0?s=0:s>1&&(s=1);var u,c=o(s,h),p=o(a=a>1?1:a,h),d=e.length,f=1-c,m=1-p,g=f*f*f,v=c*f*f*3,y=c*c*f*3,x=c*c*c,_=f*f*m,b=c*f*m+f*c*m+f*f*p,w=c*c*m+f*c*p+c*f*p,S=c*c*p,M=f*m*m,T=c*m*m+f*p*m+f*m*p,E=c*p*m+f*p*p+c*m*p,P=c*p*p,C=m*m*m,A=p*m*m+m*p*m+m*m*p,D=p*p*m+m*p*p+p*m*p,k=p*p*p;for(u=0;u<d;u+=1)l[4*u]=t.round(1e3*(g*e[u]+v*i[u]+y*n[u]+x*r[u]))/1e3,l[4*u+1]=t.round(1e3*(_*e[u]+b*i[u]+w*n[u]+S*r[u]))/1e3,l[4*u+2]=t.round(1e3*(M*e[u]+T*i[u]+E*n[u]+P*r[u]))/1e3,l[4*u+3]=t.round(1e3*(C*e[u]+A*i[u]+D*n[u]+k*r[u]))/1e3;return l},getPointInSegment:function(e,r,i,n,s,a){var l=o(s,a),h=1-l;return[t.round(1e3*(h*h*h*e[0]+(l*h*h+h*l*h+h*h*l)*i[0]+(l*l*h+h*l*l+l*h*l)*n[0]+l*l*l*r[0]))/1e3,t.round(1e3*(h*h*h*e[1]+(l*h*h+h*l*h+h*h*l)*i[1]+(l*l*h+h*l*l+l*h*l)*n[1]+l*l*l*r[1]))/1e3]},buildBezierData:a,pointOnLine2D:e,pointOnLine3D:function(r,i,n,s,a,o,l,h,u){if(0===n&&0===o&&0===u)return e(r,i,s,a,l,h);var c,p=t.sqrt(t.pow(s-r,2)+t.pow(a-i,2)+t.pow(o-n,2)),d=t.sqrt(t.pow(l-r,2)+t.pow(h-i,2)+t.pow(u-n,2)),f=t.sqrt(t.pow(l-s,2)+t.pow(h-a,2)+t.pow(u-o,2));return(c=p>d?p>f?p-d-f:f-d-p:f>d?f-d-p:d-p-f)>-1e-4&&c<1e-4}}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(t,e){var r,i=this.offsetTime;"multidimensional"===this.propType&&(r=createTypedArray("float32",this.pv.length));for(var n,s,a,o,l,h,u,c,p,d=e.lastIndex,f=d,m=this.keyframes.length-1,g=!0;g;){if(n=this.keyframes[f],s=this.keyframes[f+1],f===m-1&&t>=s.t-i){n.h&&(n=s),d=0;break}if(s.t-i>t){d=f;break}f<m-1?f+=1:(d=0,g=!1)}a=this.keyframesMetadata[f]||{};var v,y=s.t-i,x=n.t-i;if(n.to){a.bezierData||(a.bezierData=bez.buildBezierData(n.s,s.s||n.e,n.to,n.ti));var _=a.bezierData;if(t>=y||t<x){var b=t>=y?_.points.length-1:0;for(l=_.points[b].point.length,o=0;o<l;o+=1)r[o]=_.points[b].point[o]}else{a.__fnct?p=a.__fnct:(p=BezierFactory.getBezierEasing(n.o.x,n.o.y,n.i.x,n.i.y,n.n).get,a.__fnct=p),h=p((t-x)/(y-x));var w,S=_.segmentLength*h,M=e.lastFrame<t&&e._lastKeyframeIndex===f?e._lastAddedLength:0;for(c=e.lastFrame<t&&e._lastKeyframeIndex===f?e._lastPoint:0,g=!0,u=_.points.length;g;){if(M+=_.points[c].partialLength,0===S||0===h||c===_.points.length-1){for(l=_.points[c].point.length,o=0;o<l;o+=1)r[o]=_.points[c].point[o];break}if(S>=M&&S<M+_.points[c+1].partialLength){for(w=(S-M)/_.points[c+1].partialLength,l=_.points[c].point.length,o=0;o<l;o+=1)r[o]=_.points[c].point[o]+(_.points[c+1].point[o]-_.points[c].point[o])*w;break}c<u-1?c+=1:g=!1}e._lastPoint=c,e._lastAddedLength=M-_.points[c].partialLength,e._lastKeyframeIndex=f}}else{var T,E,P,C,A;if(m=n.s.length,v=s.s||n.e,this.sh&&1!==n.h)t>=y?(r[0]=v[0],r[1]=v[1],r[2]=v[2]):t<=x?(r[0]=n.s[0],r[1]=n.s[1],r[2]=n.s[2]):quaternionToEuler(r,slerp(createQuaternion(n.s),createQuaternion(v),(t-x)/(y-x)));else for(f=0;f<m;f+=1)1!==n.h&&(t>=y?h=1:t<x?h=0:(n.o.x.constructor===Array?(a.__fnct||(a.__fnct=[]),a.__fnct[f]?p=a.__fnct[f]:(T=void 0===n.o.x[f]?n.o.x[0]:n.o.x[f],E=void 0===n.o.y[f]?n.o.y[0]:n.o.y[f],P=void 0===n.i.x[f]?n.i.x[0]:n.i.x[f],C=void 0===n.i.y[f]?n.i.y[0]:n.i.y[f],p=BezierFactory.getBezierEasing(T,E,P,C).get,a.__fnct[f]=p)):a.__fnct?p=a.__fnct:(T=n.o.x,E=n.o.y,P=n.i.x,C=n.i.y,p=BezierFactory.getBezierEasing(T,E,P,C).get,n.keyframeMetadata=p),h=p((t-x)/(y-x)))),v=s.s||n.e,A=1===n.h?n.s[f]:n.s[f]+(v[f]-n.s[f])*h,"multidimensional"===this.propType?r[f]=A:r=A}return e.lastIndex=d,r}function slerp(t,e,r){var i,n,s,a,o,l=[],h=t[0],u=t[1],c=t[2],p=t[3],d=e[0],f=e[1],m=e[2],g=e[3];return(n=h*d+u*f+c*m+p*g)<0&&(n=-n,d=-d,f=-f,m=-m,g=-g),1-n>1e-6?(i=Math.acos(n),s=Math.sin(i),a=Math.sin((1-r)*i)/s,o=Math.sin(r*i)/s):(a=1-r,o=r),l[0]=a*h+o*d,l[1]=a*u+o*f,l[2]=a*c+o*m,l[3]=a*p+o*g,l}function quaternionToEuler(t,e){var r=e[0],i=e[1],n=e[2],s=e[3],a=Math.atan2(2*i*s-2*r*n,1-2*i*i-2*n*n),o=Math.asin(2*r*i+2*n*s),l=Math.atan2(2*r*s-2*i*n,1-2*r*r-2*n*n);t[0]=a/degToRads,t[1]=o/degToRads,t[2]=l/degToRads}function createQuaternion(t){var e=t[0]*degToRads,r=t[1]*degToRads,i=t[2]*degToRads,n=Math.cos(e/2),s=Math.cos(r/2),a=Math.cos(i/2),o=Math.sin(e/2),l=Math.sin(r/2),h=Math.sin(i/2);return[o*l*a+n*s*h,o*s*a+n*l*h,n*l*a-o*s*h,n*s*a-o*l*h]}function getValueAtCurrentTime(){var t=this.comp.renderedFrame-this.offsetTime,e=this.keyframes[0].t-this.offsetTime,r=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(t===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=r&&t>=r||this._caching.lastFrame<e&&t<e))){this._caching.lastFrame>=t&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var i=this.interpolateValue(t,this._caching);this.pv=i}return this._caching.lastFrame=t,this.pv}function setVValue(t){var e;if("unidimensional"===this.propType)e=t*this.mult,mathAbs(this.v-e)>1e-5&&(this.v=e,this._mdf=!0);else for(var r=0,i=this.v.length;r<i;)e=t[r]*this.mult,mathAbs(this.v[r]-e)>1e-5&&(this.v[r]=e,this._mdf=!0),r+=1}function processEffectsSequence(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var t;this.lock=!0,this._mdf=this._isFirstFrame;var e=this.effectsSequence.length,r=this.kf?this.pv:this.data.k;for(t=0;t<e;t+=1)r=this.effectsSequence[t](r);this.setVValue(r),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}function ValueProperty(t,e,r,i){this.propType="unidimensional",this.mult=r||1,this.data=e,this.v=r?e.k*r:e.k,this.pv=e.k,this._mdf=!1,this.elem=t,this.container=i,this.comp=t.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(t,e,r,i){var n;this.propType="multidimensional",this.mult=r||1,this.data=e,this._mdf=!1,this.elem=t,this.container=i,this.comp=t.comp,this.k=!1,this.kf=!1,this.frameId=-1;var s=e.k.length;for(this.v=createTypedArray("float32",s),this.pv=createTypedArray("float32",s),this.vel=createTypedArray("float32",s),n=0;n<s;n+=1)this.v[n]=e.k[n]*this.mult,this.pv[n]=e.k[n];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(t,e,r,i){this.propType="unidimensional",this.keyframes=e.k,this.keyframesMetadata=[],this.offsetTime=t.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=e,this.mult=r||1,this.elem=t,this.container=i,this.comp=t.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(t,e,r,i){var n;this.propType="multidimensional";var s,a,o,l,h=e.k.length;for(n=0;n<h-1;n+=1)e.k[n].to&&e.k[n].s&&e.k[n+1]&&e.k[n+1].s&&(s=e.k[n].s,a=e.k[n+1].s,o=e.k[n].to,l=e.k[n].ti,(2===s.length&&(s[0]!==a[0]||s[1]!==a[1])&&bez.pointOnLine2D(s[0],s[1],a[0],a[1],s[0]+o[0],s[1]+o[1])&&bez.pointOnLine2D(s[0],s[1],a[0],a[1],a[0]+l[0],a[1]+l[1])||3===s.length&&(s[0]!==a[0]||s[1]!==a[1]||s[2]!==a[2])&&bez.pointOnLine3D(s[0],s[1],s[2],a[0],a[1],a[2],s[0]+o[0],s[1]+o[1],s[2]+o[2])&&bez.pointOnLine3D(s[0],s[1],s[2],a[0],a[1],a[2],a[0]+l[0],a[1]+l[1],a[2]+l[2]))&&(e.k[n].to=null,e.k[n].ti=null),s[0]===a[0]&&s[1]===a[1]&&0===o[0]&&0===o[1]&&0===l[0]&&0===l[1]&&(2===s.length||s[2]===a[2]&&0===o[2]&&0===l[2])&&(e.k[n].to=null,e.k[n].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=e,this.keyframes=e.k,this.keyframesMetadata=[],this.offsetTime=t.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=r||1,this.elem=t,this.container=i,this.comp=t.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var u=e.k[0].s.length;for(this.v=createTypedArray("float32",u),this.pv=createTypedArray("float32",u),n=0;n<u;n+=1)this.v[n]=initFrame,this.pv[n]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",u)},this.addEffect=addEffect}var PropertyFactory={getProp:function(t,e,r,i,n){var s;if(e.sid&&(e=t.globalData.slotManager.getProp(e)),e.k.length)if("number"==typeof e.k[0])s=new MultiDimensionalProperty(t,e,i,n);else switch(r){case 0:s=new KeyframedValueProperty(t,e,i,n);break;case 1:s=new KeyframedMultidimensionalProperty(t,e,i,n)}else s=new ValueProperty(t,e,i,n);return s.effectsSequence.length&&n.addDynamicProperty(s),s}};function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(t){-1===this.dynamicProperties.indexOf(t)&&(this.dynamicProperties.push(t),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){var t;this._mdf=!1;var e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(t){this.container=t,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=poolFactory(8,(function(){return createTypedArray("float32",2)}));function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(t,e){this.c=t,this.setLength(e);for(var r=0;r<e;)this.v[r]=pointPool.newElement(),this.o[r]=pointPool.newElement(),this.i[r]=pointPool.newElement(),r+=1},ShapePath.prototype.setLength=function(t){for(;this._maxLength<t;)this.doubleArrayLength();this._length=t},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(t,e,r,i,n){var s;switch(this._length=Math.max(this._length,i+1),this._length>=this._maxLength&&this.doubleArrayLength(),r){case"v":s=this.v;break;case"i":s=this.i;break;case"o":s=this.o;break;default:s=[]}(!s[i]||s[i]&&!n)&&(s[i]=pointPool.newElement()),s[i][0]=t,s[i][1]=e},ShapePath.prototype.setTripleAt=function(t,e,r,i,n,s,a,o){this.setXYAt(t,e,"v",a,o),this.setXYAt(r,i,"o",a,o),this.setXYAt(n,s,"i",a,o)},ShapePath.prototype.reverse=function(){var t=new ShapePath;t.setPathData(this.c,this._length);var e=this.v,r=this.o,i=this.i,n=0;this.c&&(t.setTripleAt(e[0][0],e[0][1],i[0][0],i[0][1],r[0][0],r[0][1],0,!1),n=1);var s,a=this._length-1,o=this._length;for(s=n;s<o;s+=1)t.setTripleAt(e[a][0],e[a][1],i[a][0],i[a][1],r[a][0],r[a][1],s,!1),a-=1;return t},ShapePath.prototype.length=function(){return this._length};var shapePool=(factory=poolFactory(4,(function(){return new ShapePath}),(function(t){var e,r=t._length;for(e=0;e<r;e+=1)pointPool.release(t.v[e]),pointPool.release(t.i[e]),pointPool.release(t.o[e]),t.v[e]=null,t.i[e]=null,t.o[e]=null;t._length=0,t.c=!1})),factory.clone=function(t){var e,r=factory.newElement(),i=void 0===t._length?t.v.length:t._length;for(r.setLength(i),r.c=t.c,e=0;e<i;e+=1)r.setTripleAt(t.v[e][0],t.v[e][1],t.o[e][0],t.o[e][1],t.i[e][0],t.i[e][1],e);return r},factory),factory;function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(t){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=t,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var t;for(t=0;t<this._length;t+=1)shapePool.release(this.shapes[t]);this._length=0};var shapeCollectionPool=(ob={newShapeCollection:function(){return _length?pool[_length-=1]:new ShapeCollection},release:function(t){var e,r=t._length;for(e=0;e<r;e+=1)shapePool.release(t.shapes[e]);t._length=0,_length===_maxLength&&(pool=pooling.double(pool),_maxLength*=2),pool[_length]=t,_length+=1}},_length=0,_maxLength=4,pool=createSizedArray(_maxLength),ob),ob,_length,_maxLength,pool,ShapePropertyFactory=function(){var t=-999999;function e(t,e,r){var i,n,s,a,o,l,h,u,c,p=r.lastIndex,d=this.keyframes;if(t<d[0].t-this.offsetTime)i=d[0].s[0],s=!0,p=0;else if(t>=d[d.length-1].t-this.offsetTime)i=d[d.length-1].s?d[d.length-1].s[0]:d[d.length-2].e[0],s=!0;else{for(var f,m,g,v=p,y=d.length-1,x=!0;x&&(f=d[v],!((m=d[v+1]).t-this.offsetTime>t));)v<y-1?v+=1:x=!1;if(g=this.keyframesMetadata[v]||{},p=v,!(s=1===f.h)){if(t>=m.t-this.offsetTime)u=1;else if(t<f.t-this.offsetTime)u=0;else{var _;g.__fnct?_=g.__fnct:(_=BezierFactory.getBezierEasing(f.o.x,f.o.y,f.i.x,f.i.y).get,g.__fnct=_),u=_((t-(f.t-this.offsetTime))/(m.t-this.offsetTime-(f.t-this.offsetTime)))}n=m.s?m.s[0]:f.e[0]}i=f.s[0]}for(l=e._length,h=i.i[0].length,r.lastIndex=p,a=0;a<l;a+=1)for(o=0;o<h;o+=1)c=s?i.i[a][o]:i.i[a][o]+(n.i[a][o]-i.i[a][o])*u,e.i[a][o]=c,c=s?i.o[a][o]:i.o[a][o]+(n.o[a][o]-i.o[a][o])*u,e.o[a][o]=c,c=s?i.v[a][o]:i.v[a][o]+(n.v[a][o]-i.v[a][o])*u,e.v[a][o]=c}function r(){var e=this.comp.renderedFrame-this.offsetTime,r=this.keyframes[0].t-this.offsetTime,i=this.keyframes[this.keyframes.length-1].t-this.offsetTime,n=this._caching.lastFrame;return n!==t&&(n<r&&e<r||n>i&&e>i)||(this._caching.lastIndex=n<e?this._caching.lastIndex:0,this.interpolateShape(e,this.pv,this._caching)),this._caching.lastFrame=e,this.pv}function i(){this.paths=this.localShapeCollection}function n(t){(function(t,e){if(t._length!==e._length||t.c!==e.c)return!1;var r,i=t._length;for(r=0;r<i;r+=1)if(t.v[r][0]!==e.v[r][0]||t.v[r][1]!==e.v[r][1]||t.o[r][0]!==e.o[r][0]||t.o[r][1]!==e.o[r][1]||t.i[r][0]!==e.i[r][0]||t.i[r][1]!==e.i[r][1])return!1;return!0})(this.v,t)||(this.v=shapePool.clone(t),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function s(){if(this.elem.globalData.frameId!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var t,e;this.lock=!0,this._mdf=!1,t=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k;var r=this.effectsSequence.length;for(e=0;e<r;e+=1)t=this.effectsSequence[e](t);this.setVValue(t),this.lock=!1,this.frameId=this.elem.globalData.frameId}else this._mdf=!1}function a(t,e,r){this.propType="shape",this.comp=t.comp,this.container=t,this.elem=t,this.data=e,this.k=!1,this.kf=!1,this._mdf=!1;var n=3===r?e.pt.k:e.ks.k;this.v=shapePool.clone(n),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=i,this.effectsSequence=[]}function o(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}function l(e,n,s){this.propType="shape",this.comp=e.comp,this.elem=e,this.container=e,this.offsetTime=e.data.st,this.keyframes=3===s?n.pt.k:n.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var a=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,a),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=t,this.reset=i,this._caching={lastFrame:t,lastIndex:0},this.effectsSequence=[r.bind(this)]}a.prototype.interpolateShape=e,a.prototype.getValue=s,a.prototype.setVValue=n,a.prototype.addEffect=o,l.prototype.getValue=s,l.prototype.interpolateShape=e,l.prototype.setVValue=n,l.prototype.addEffect=o;var h=function(){var t=roundCorner;function e(t,e){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=e.d,this.elem=t,this.comp=t.comp,this.frameId=-1,this.initDynamicPropertyContainer(t),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.s=PropertyFactory.getProp(t,e.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return e.prototype={reset:i,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var e=this.p.v[0],r=this.p.v[1],i=this.s.v[0]/2,n=this.s.v[1]/2,s=3!==this.d,a=this.v;a.v[0][0]=e,a.v[0][1]=r-n,a.v[1][0]=s?e+i:e-i,a.v[1][1]=r,a.v[2][0]=e,a.v[2][1]=r+n,a.v[3][0]=s?e-i:e+i,a.v[3][1]=r,a.i[0][0]=s?e-i*t:e+i*t,a.i[0][1]=r-n,a.i[1][0]=s?e+i:e-i,a.i[1][1]=r-n*t,a.i[2][0]=s?e+i*t:e-i*t,a.i[2][1]=r+n,a.i[3][0]=s?e-i:e+i,a.i[3][1]=r+n*t,a.o[0][0]=s?e+i*t:e-i*t,a.o[0][1]=r-n,a.o[1][0]=s?e+i:e-i,a.o[1][1]=r+n*t,a.o[2][0]=s?e-i*t:e+i*t,a.o[2][1]=r+n,a.o[3][0]=s?e-i:e+i,a.o[3][1]=r-n*t}},extendPrototype([DynamicPropertyContainer],e),e}(),u=function(){function t(t,e){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=t,this.comp=t.comp,this.data=e,this.frameId=-1,this.d=e.d,this.initDynamicPropertyContainer(t),1===e.sy?(this.ir=PropertyFactory.getProp(t,e.ir,0,0,this),this.is=PropertyFactory.getProp(t,e.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(t,e.pt,0,0,this),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.r=PropertyFactory.getProp(t,e.r,0,degToRads,this),this.or=PropertyFactory.getProp(t,e.or,0,0,this),this.os=PropertyFactory.getProp(t,e.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return t.prototype={reset:i,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var t,e,r,i,n=2*Math.floor(this.pt.v),s=2*Math.PI/n,a=!0,o=this.or.v,l=this.ir.v,h=this.os.v,u=this.is.v,c=2*Math.PI*o/(2*n),p=2*Math.PI*l/(2*n),d=-Math.PI/2;d+=this.r.v;var f=3===this.data.d?-1:1;for(this.v._length=0,t=0;t<n;t+=1){r=a?h:u,i=a?c:p;var m=(e=a?o:l)*Math.cos(d),g=e*Math.sin(d),v=0===m&&0===g?0:g/Math.sqrt(m*m+g*g),y=0===m&&0===g?0:-m/Math.sqrt(m*m+g*g);m+=+this.p.v[0],g+=+this.p.v[1],this.v.setTripleAt(m,g,m-v*i*r*f,g-y*i*r*f,m+v*i*r*f,g+y*i*r*f,t,!0),a=!a,d+=s*f}},convertPolygonToPath:function(){var t,e=Math.floor(this.pt.v),r=2*Math.PI/e,i=this.or.v,n=this.os.v,s=2*Math.PI*i/(4*e),a=.5*-Math.PI,o=3===this.data.d?-1:1;for(a+=this.r.v,this.v._length=0,t=0;t<e;t+=1){var l=i*Math.cos(a),h=i*Math.sin(a),u=0===l&&0===h?0:h/Math.sqrt(l*l+h*h),c=0===l&&0===h?0:-l/Math.sqrt(l*l+h*h);l+=+this.p.v[0],h+=+this.p.v[1],this.v.setTripleAt(l,h,l-u*s*n*o,h-c*s*n*o,l+u*s*n*o,h+c*s*n*o,t,!0),a+=r*o}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],t),t}(),c=function(){function t(t,e){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=t,this.comp=t.comp,this.frameId=-1,this.d=e.d,this.initDynamicPropertyContainer(t),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.s=PropertyFactory.getProp(t,e.s,1,0,this),this.r=PropertyFactory.getProp(t,e.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return t.prototype={convertRectToPath:function(){var t=this.p.v[0],e=this.p.v[1],r=this.s.v[0]/2,i=this.s.v[1]/2,n=bmMin(r,i,this.r.v),s=n*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(t+r,e-i+n,t+r,e-i+n,t+r,e-i+s,0,!0),this.v.setTripleAt(t+r,e+i-n,t+r,e+i-s,t+r,e+i-n,1,!0),0!==n?(this.v.setTripleAt(t+r-n,e+i,t+r-n,e+i,t+r-s,e+i,2,!0),this.v.setTripleAt(t-r+n,e+i,t-r+s,e+i,t-r+n,e+i,3,!0),this.v.setTripleAt(t-r,e+i-n,t-r,e+i-n,t-r,e+i-s,4,!0),this.v.setTripleAt(t-r,e-i+n,t-r,e-i+s,t-r,e-i+n,5,!0),this.v.setTripleAt(t-r+n,e-i,t-r+n,e-i,t-r+s,e-i,6,!0),this.v.setTripleAt(t+r-n,e-i,t+r-s,e-i,t+r-n,e-i,7,!0)):(this.v.setTripleAt(t-r,e+i,t-r+s,e+i,t-r,e+i,2),this.v.setTripleAt(t-r,e-i,t-r,e-i+s,t-r,e-i,3))):(this.v.setTripleAt(t+r,e-i+n,t+r,e-i+s,t+r,e-i+n,0,!0),0!==n?(this.v.setTripleAt(t+r-n,e-i,t+r-n,e-i,t+r-s,e-i,1,!0),this.v.setTripleAt(t-r+n,e-i,t-r+s,e-i,t-r+n,e-i,2,!0),this.v.setTripleAt(t-r,e-i+n,t-r,e-i+n,t-r,e-i+s,3,!0),this.v.setTripleAt(t-r,e+i-n,t-r,e+i-s,t-r,e+i-n,4,!0),this.v.setTripleAt(t-r+n,e+i,t-r+n,e+i,t-r+s,e+i,5,!0),this.v.setTripleAt(t+r-n,e+i,t+r-s,e+i,t+r-n,e+i,6,!0),this.v.setTripleAt(t+r,e+i-n,t+r,e+i-n,t+r,e+i-s,7,!0)):(this.v.setTripleAt(t-r,e-i,t-r+s,e-i,t-r,e-i,1,!0),this.v.setTripleAt(t-r,e+i,t-r,e+i-s,t-r,e+i,2,!0),this.v.setTripleAt(t+r,e+i,t+r-s,e+i,t+r,e+i,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:i},extendPrototype([DynamicPropertyContainer],t),t}(),p={getShapeProp:function(t,e,r){var i;return 3===r||4===r?i=(3===r?e.pt:e.ks).k.length?new l(t,e,r):new a(t,e,r):5===r?i=new c(t,e):6===r?i=new h(t,e):7===r&&(i=new u(t,e)),i.k&&t.addDynamicProperty(i),i},getConstructorFunction:function(){return a},getKeyframedConstructorFunction:function(){return l}};return p}(),Matrix=function(){var t=Math.cos,e=Math.sin,r=Math.tan,i=Math.round;function n(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function s(r){if(0===r)return this;var i=t(r),n=e(r);return this._t(i,-n,0,0,n,i,0,0,0,0,1,0,0,0,0,1)}function a(r){if(0===r)return this;var i=t(r),n=e(r);return this._t(1,0,0,0,0,i,-n,0,0,n,i,0,0,0,0,1)}function o(r){if(0===r)return this;var i=t(r),n=e(r);return this._t(i,0,n,0,0,1,0,0,-n,0,i,0,0,0,0,1)}function l(r){if(0===r)return this;var i=t(r),n=e(r);return this._t(i,-n,0,0,n,i,0,0,0,0,1,0,0,0,0,1)}function h(t,e){return this._t(1,e,t,1,0,0)}function u(t,e){return this.shear(r(t),r(e))}function c(i,n){var s=t(n),a=e(n);return this._t(s,a,0,0,-a,s,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,r(i),1,0,0,0,0,1,0,0,0,0,1)._t(s,-a,0,0,a,s,0,0,0,0,1,0,0,0,0,1)}function p(t,e,r){return r||0===r||(r=1),1===t&&1===e&&1===r?this:this._t(t,0,0,0,0,e,0,0,0,0,r,0,0,0,0,1)}function d(t,e,r,i,n,s,a,o,l,h,u,c,p,d,f,m){return this.props[0]=t,this.props[1]=e,this.props[2]=r,this.props[3]=i,this.props[4]=n,this.props[5]=s,this.props[6]=a,this.props[7]=o,this.props[8]=l,this.props[9]=h,this.props[10]=u,this.props[11]=c,this.props[12]=p,this.props[13]=d,this.props[14]=f,this.props[15]=m,this}function f(t,e,r){return r=r||0,0!==t||0!==e||0!==r?this._t(1,0,0,0,0,1,0,0,0,0,1,0,t,e,r,1):this}function m(t,e,r,i,n,s,a,o,l,h,u,c,p,d,f,m){var g=this.props;if(1===t&&0===e&&0===r&&0===i&&0===n&&1===s&&0===a&&0===o&&0===l&&0===h&&1===u&&0===c)return g[12]=g[12]*t+g[15]*p,g[13]=g[13]*s+g[15]*d,g[14]=g[14]*u+g[15]*f,g[15]*=m,this._identityCalculated=!1,this;var v=g[0],y=g[1],x=g[2],_=g[3],b=g[4],w=g[5],S=g[6],M=g[7],T=g[8],E=g[9],P=g[10],C=g[11],A=g[12],D=g[13],k=g[14],R=g[15];return g[0]=v*t+y*n+x*l+_*p,g[1]=v*e+y*s+x*h+_*d,g[2]=v*r+y*a+x*u+_*f,g[3]=v*i+y*o+x*c+_*m,g[4]=b*t+w*n+S*l+M*p,g[5]=b*e+w*s+S*h+M*d,g[6]=b*r+w*a+S*u+M*f,g[7]=b*i+w*o+S*c+M*m,g[8]=T*t+E*n+P*l+C*p,g[9]=T*e+E*s+P*h+C*d,g[10]=T*r+E*a+P*u+C*f,g[11]=T*i+E*o+P*c+C*m,g[12]=A*t+D*n+k*l+R*p,g[13]=A*e+D*s+k*h+R*d,g[14]=A*r+D*a+k*u+R*f,g[15]=A*i+D*o+k*c+R*m,this._identityCalculated=!1,this}function g(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function v(t){for(var e=0;e<16;){if(t.props[e]!==this.props[e])return!1;e+=1}return!0}function y(t){var e;for(e=0;e<16;e+=1)t.props[e]=this.props[e];return t}function x(t){var e;for(e=0;e<16;e+=1)this.props[e]=t[e]}function _(t,e,r){return{x:t*this.props[0]+e*this.props[4]+r*this.props[8]+this.props[12],y:t*this.props[1]+e*this.props[5]+r*this.props[9]+this.props[13],z:t*this.props[2]+e*this.props[6]+r*this.props[10]+this.props[14]}}function b(t,e,r){return t*this.props[0]+e*this.props[4]+r*this.props[8]+this.props[12]}function w(t,e,r){return t*this.props[1]+e*this.props[5]+r*this.props[9]+this.props[13]}function S(t,e,r){return t*this.props[2]+e*this.props[6]+r*this.props[10]+this.props[14]}function M(){var t=this.props[0]*this.props[5]-this.props[1]*this.props[4],e=this.props[5]/t,r=-this.props[1]/t,i=-this.props[4]/t,n=this.props[0]/t,s=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/t,a=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/t,o=new Matrix;return o.props[0]=e,o.props[1]=r,o.props[4]=i,o.props[5]=n,o.props[12]=s,o.props[13]=a,o}function T(t){return this.getInverseMatrix().applyToPointArray(t[0],t[1],t[2]||0)}function E(t){var e,r=t.length,i=[];for(e=0;e<r;e+=1)i[e]=T(t[e]);return i}function P(t,e,r){var i=createTypedArray("float32",6);if(this.isIdentity())i[0]=t[0],i[1]=t[1],i[2]=e[0],i[3]=e[1],i[4]=r[0],i[5]=r[1];else{var n=this.props[0],s=this.props[1],a=this.props[4],o=this.props[5],l=this.props[12],h=this.props[13];i[0]=t[0]*n+t[1]*a+l,i[1]=t[0]*s+t[1]*o+h,i[2]=e[0]*n+e[1]*a+l,i[3]=e[0]*s+e[1]*o+h,i[4]=r[0]*n+r[1]*a+l,i[5]=r[0]*s+r[1]*o+h}return i}function C(t,e,r){return this.isIdentity()?[t,e,r]:[t*this.props[0]+e*this.props[4]+r*this.props[8]+this.props[12],t*this.props[1]+e*this.props[5]+r*this.props[9]+this.props[13],t*this.props[2]+e*this.props[6]+r*this.props[10]+this.props[14]]}function A(t,e){if(this.isIdentity())return t+","+e;var r=this.props;return Math.round(100*(t*r[0]+e*r[4]+r[12]))/100+","+Math.round(100*(t*r[1]+e*r[5]+r[13]))/100}function D(){for(var t=0,e=this.props,r="matrix3d(";t<16;)r+=i(1e4*e[t])/1e4,r+=15===t?")":",",t+=1;return r}function k(t){return t<1e-6&&t>0||t>-1e-6&&t<0?i(1e4*t)/1e4:t}function R(){var t=this.props;return"matrix("+k(t[0])+","+k(t[1])+","+k(t[4])+","+k(t[5])+","+k(t[12])+","+k(t[13])+")"}return function(){this.reset=n,this.rotate=s,this.rotateX=a,this.rotateY=o,this.rotateZ=l,this.skew=u,this.skewFromAxis=c,this.shear=h,this.scale=p,this.setTransform=d,this.translate=f,this.transform=m,this.applyToPoint=_,this.applyToX=b,this.applyToY=w,this.applyToZ=S,this.applyToPointArray=C,this.applyToTriplePoints=P,this.applyToPointStringified=A,this.toCSS=D,this.to2dCSS=R,this.clone=y,this.cloneFromProps=x,this.equals=v,this.inversePoints=E,this.inversePoint=T,this.getInverseMatrix=M,this._t=this.transform,this.isIdentity=g,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(t){return _typeof$3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$3(t)}var lottie={},standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="";function setLocation(t){setLocationHref(t)}function searchAnimations(){!0===standalone?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function setSubframeRendering(t){setSubframeEnabled(t)}function setPrefix(t){setIdPrefix(t)}function loadAnimation(t){return!0===standalone&&(t.animationData=JSON.parse(animationData)),animationManager.loadAnimation(t)}function setQuality(t){if("string"==typeof t)switch(t){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10)}else!isNaN(t)&&t>1&&setDefaultCurveSegments(t);getDefaultCurveSegments()>=50?roundValues(!1):roundValues(!0)}function inBrowser(){return"undefined"!=typeof navigator}function installPlugin(t,e){"expressions"===t&&setExpressionsPlugin(e)}function getFactory(t){switch(t){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(t){for(var e=queryString.split("&"),r=0;r<e.length;r+=1){var i=e[r].split("=");if(decodeURIComponent(i[0])==t)return decodeURIComponent(i[1])}return null}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.11.0";var queryString="";if(standalone){var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{"object"!==_typeof$3(exports)&&__webpack_require__.amdO}catch(t){}var ShapeModifiers=function(){var t={},e={};return t.registerModifier=function(t,r){e[t]||(e[t]=r)},t.getModifier=function(t,r,i){return new e[t](r,i)},t}();function ShapeModifier(){}function TrimModifier(){}function PuckerAndBloatModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(t){if(!this.closed){t.sh.container.addDynamicProperty(t.sh);var e={shape:t.sh,data:t,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(e),this.addShapeToModifier(e),this._isAnimated&&t.setAsAnimated()}},ShapeModifier.prototype.init=function(t,e){this.shapes=[],this.elem=t,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(t,e){this.s=PropertyFactory.getProp(t,e.s,0,.01,this),this.e=PropertyFactory.getProp(t,e.e,0,.01,this),this.o=PropertyFactory.getProp(t,e.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=e.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(t){t.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(t,e,r,i,n){var s=[];e<=1?s.push({s:t,e:e}):t>=1?s.push({s:t-1,e:e-1}):(s.push({s:t,e:1}),s.push({s:0,e:e-1}));var a,o,l=[],h=s.length;for(a=0;a<h;a+=1){var u,c;(o=s[a]).e*n<i||o.s*n>i+r||(u=o.s*n<=i?0:(o.s*n-i)/r,c=o.e*n>=i+r?1:(o.e*n-i)/r,l.push([u,c]))}return l.length||l.push([0,0]),l},TrimModifier.prototype.releasePathsData=function(t){var e,r=t.length;for(e=0;e<r;e+=1)segmentsLengthPool.release(t[e]);return t.length=0,t},TrimModifier.prototype.processShapes=function(t){var e,r,i,n;if(this._mdf||t){var s=this.o.v%360/360;if(s<0&&(s+=1),(e=this.s.v>1?1+s:this.s.v<0?0+s:this.s.v+s)>(r=this.e.v>1?1+s:this.e.v<0?0+s:this.e.v+s)){var a=e;e=r,r=a}e=1e-4*Math.round(1e4*e),r=1e-4*Math.round(1e4*r),this.sValue=e,this.eValue=r}else e=this.sValue,r=this.eValue;var o,l,h,u,c,p=this.shapes.length,d=0;if(r===e)for(n=0;n<p;n+=1)this.shapes[n].localShapeCollection.releaseShapes(),this.shapes[n].shape._mdf=!0,this.shapes[n].shape.paths=this.shapes[n].localShapeCollection,this._mdf&&(this.shapes[n].pathsData.length=0);else if(1===r&&0===e||0===r&&1===e){if(this._mdf)for(n=0;n<p;n+=1)this.shapes[n].pathsData.length=0,this.shapes[n].shape._mdf=!0}else{var f,m,g=[];for(n=0;n<p;n+=1)if((f=this.shapes[n]).shape._mdf||this._mdf||t||2===this.m){if(l=(i=f.shape.paths)._length,c=0,!f.shape._mdf&&f.pathsData.length)c=f.totalShapeLength;else{for(h=this.releasePathsData(f.pathsData),o=0;o<l;o+=1)u=bez.getSegmentsLength(i.shapes[o]),h.push(u),c+=u.totalLength;f.totalShapeLength=c,f.pathsData=h}d+=c,f.shape._mdf=!0}else f.shape.paths=f.localShapeCollection;var v,y=e,x=r,_=0;for(n=p-1;n>=0;n-=1)if((f=this.shapes[n]).shape._mdf){for((m=f.localShapeCollection).releaseShapes(),2===this.m&&p>1?(v=this.calculateShapeEdges(e,r,f.totalShapeLength,_,d),_+=f.totalShapeLength):v=[[y,x]],l=v.length,o=0;o<l;o+=1){y=v[o][0],x=v[o][1],g.length=0,x<=1?g.push({s:f.totalShapeLength*y,e:f.totalShapeLength*x}):y>=1?g.push({s:f.totalShapeLength*(y-1),e:f.totalShapeLength*(x-1)}):(g.push({s:f.totalShapeLength*y,e:f.totalShapeLength}),g.push({s:0,e:f.totalShapeLength*(x-1)}));var b=this.addShapes(f,g[0]);if(g[0].s!==g[0].e){if(g.length>1)if(f.shape.paths.shapes[f.shape.paths._length-1].c){var w=b.pop();this.addPaths(b,m),b=this.addShapes(f,g[1],w)}else this.addPaths(b,m),b=this.addShapes(f,g[1]);this.addPaths(b,m)}}f.shape.paths=m}}},TrimModifier.prototype.addPaths=function(t,e){var r,i=t.length;for(r=0;r<i;r+=1)e.addShape(t[r])},TrimModifier.prototype.addSegment=function(t,e,r,i,n,s,a){n.setXYAt(e[0],e[1],"o",s),n.setXYAt(r[0],r[1],"i",s+1),a&&n.setXYAt(t[0],t[1],"v",s),n.setXYAt(i[0],i[1],"v",s+1)},TrimModifier.prototype.addSegmentFromArray=function(t,e,r,i){e.setXYAt(t[1],t[5],"o",r),e.setXYAt(t[2],t[6],"i",r+1),i&&e.setXYAt(t[0],t[4],"v",r),e.setXYAt(t[3],t[7],"v",r+1)},TrimModifier.prototype.addShapes=function(t,e,r){var i,n,s,a,o,l,h,u,c=t.pathsData,p=t.shape.paths.shapes,d=t.shape.paths._length,f=0,m=[],g=!0;for(r?(o=r._length,u=r._length):(r=shapePool.newElement(),o=0,u=0),m.push(r),i=0;i<d;i+=1){for(l=c[i].lengths,r.c=p[i].c,s=p[i].c?l.length:l.length+1,n=1;n<s;n+=1)if(f+(a=l[n-1]).addedLength<e.s)f+=a.addedLength,r.c=!1;else{if(f>e.e){r.c=!1;break}e.s<=f&&e.e>=f+a.addedLength?(this.addSegment(p[i].v[n-1],p[i].o[n-1],p[i].i[n],p[i].v[n],r,o,g),g=!1):(h=bez.getNewSegment(p[i].v[n-1],p[i].v[n],p[i].o[n-1],p[i].i[n],(e.s-f)/a.addedLength,(e.e-f)/a.addedLength,l[n-1]),this.addSegmentFromArray(h,r,o,g),g=!1,r.c=!1),f+=a.addedLength,o+=1}if(p[i].c&&l.length){if(a=l[n-1],f<=e.e){var v=l[n-1].addedLength;e.s<=f&&e.e>=f+v?(this.addSegment(p[i].v[n-1],p[i].o[n-1],p[i].i[0],p[i].v[0],r,o,g),g=!1):(h=bez.getNewSegment(p[i].v[n-1],p[i].v[0],p[i].o[n-1],p[i].i[0],(e.s-f)/v,(e.e-f)/v,l[n-1]),this.addSegmentFromArray(h,r,o,g),g=!1,r.c=!1)}else r.c=!1;f+=a.addedLength,o+=1}if(r._length&&(r.setXYAt(r.v[u][0],r.v[u][1],"i",u),r.setXYAt(r.v[r._length-1][0],r.v[r._length-1][1],"o",r._length-1)),f>e.e)break;i<d-1&&(r=shapePool.newElement(),g=!0,m.push(r),o=0)}return m},extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(t,e.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(t,e){var r=e/100,i=[0,0],n=t._length,s=0;for(s=0;s<n;s+=1)i[0]+=t.v[s][0],i[1]+=t.v[s][1];i[0]/=n,i[1]/=n;var a,o,l,h,u,c,p=shapePool.newElement();for(p.c=t.c,s=0;s<n;s+=1)a=t.v[s][0]+(i[0]-t.v[s][0])*r,o=t.v[s][1]+(i[1]-t.v[s][1])*r,l=t.o[s][0]+(i[0]-t.o[s][0])*-r,h=t.o[s][1]+(i[1]-t.o[s][1])*-r,u=t.i[s][0]+(i[0]-t.i[s][0])*-r,c=t.i[s][1]+(i[1]-t.i[s][1])*-r,p.setTripleAt(a,o,l,h,u,c,s);return p},PuckerAndBloatModifier.prototype.processShapes=function(t){var e,r,i,n,s,a,o=this.shapes.length,l=this.amount.v;if(0!==l)for(r=0;r<o;r+=1){if(a=(s=this.shapes[r]).localShapeCollection,s.shape._mdf||this._mdf||t)for(a.releaseShapes(),s.shape._mdf=!0,e=s.shape.paths.shapes,n=s.shape.paths._length,i=0;i<n;i+=1)a.addShape(this.processPath(e[i],l));s.shape.paths=s.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var t=[0,0];function e(t,e,r){if(this.elem=t,this.frameId=-1,this.propType="transform",this.data=e,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(r||t),e.p&&e.p.s?(this.px=PropertyFactory.getProp(t,e.p.x,0,0,this),this.py=PropertyFactory.getProp(t,e.p.y,0,0,this),e.p.z&&(this.pz=PropertyFactory.getProp(t,e.p.z,0,0,this))):this.p=PropertyFactory.getProp(t,e.p||{k:[0,0,0]},1,0,this),e.rx){if(this.rx=PropertyFactory.getProp(t,e.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(t,e.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(t,e.rz,0,degToRads,this),e.or.k[0].ti){var i,n=e.or.k.length;for(i=0;i<n;i+=1)e.or.k[i].to=null,e.or.k[i].ti=null}this.or=PropertyFactory.getProp(t,e.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(t,e.r||{k:0},0,degToRads,this);e.sk&&(this.sk=PropertyFactory.getProp(t,e.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(t,e.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(t,e.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(t,e.s||{k:[100,100,100]},1,.01,this),e.o?this.o=PropertyFactory.getProp(t,e.o,0,.01,t):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}return e.prototype={applyToMatrix:function(t){var e=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||e,this.a&&t.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&t.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&t.skewFromAxis(-this.sk.v,this.sa.v),this.r?t.rotate(-this.r.v):t.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?t.translate(this.px.v,this.py.v,-this.pz.v):t.translate(this.px.v,this.py.v,0):t.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(e){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||e){var r;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var i,n;if(r=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(i=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/r,0),n=this.p.getValueAtTime(this.p.keyframes[0].t/r,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(i=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/r,0),n=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/r,0)):(i=this.p.pv,n=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/r,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){i=[],n=[];var s=this.px,a=this.py;s._caching.lastFrame+s.offsetTime<=s.keyframes[0].t?(i[0]=s.getValueAtTime((s.keyframes[0].t+.01)/r,0),i[1]=a.getValueAtTime((a.keyframes[0].t+.01)/r,0),n[0]=s.getValueAtTime(s.keyframes[0].t/r,0),n[1]=a.getValueAtTime(a.keyframes[0].t/r,0)):s._caching.lastFrame+s.offsetTime>=s.keyframes[s.keyframes.length-1].t?(i[0]=s.getValueAtTime(s.keyframes[s.keyframes.length-1].t/r,0),i[1]=a.getValueAtTime(a.keyframes[a.keyframes.length-1].t/r,0),n[0]=s.getValueAtTime((s.keyframes[s.keyframes.length-1].t-.01)/r,0),n[1]=a.getValueAtTime((a.keyframes[a.keyframes.length-1].t-.01)/r,0)):(i=[s.pv,a.pv],n[0]=s.getValueAtTime((s._caching.lastFrame+s.offsetTime-.01)/r,s.offsetTime),n[1]=a.getValueAtTime((a._caching.lastFrame+a.offsetTime-.01)/r,a.offsetTime))}else i=n=t;this.v.rotate(-Math.atan2(i[1]-n[1],i[0]-n[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}},precalculateMatrix:function(){if(!this.a.k&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],e),e.prototype.addDynamicProperty=function(t){this._addDynamicProperty(t),this.elem.addDynamicProperty(t),this._isDirty=!0},e.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(t,r,i){return new e(t,r,i)}}}();function RepeaterModifier(){}function RoundCornersModifier(){}function floatEqual(t,e){return 1e5*Math.abs(t-e)<=Math.min(Math.abs(t),Math.abs(e))}function floatZero(t){return Math.abs(t)<=1e-5}function lerp(t,e,r){return t*(1-r)+e*r}function lerpPoint(t,e,r){return[lerp(t[0],e[0],r),lerp(t[1],e[1],r)]}function quadRoots(t,e,r){if(0===t)return[];var i=e*e-4*t*r;if(i<0)return[];var n=-e/(2*t);if(0===i)return[n];var s=Math.sqrt(i)/(2*t);return[n-s,n+s]}function polynomialCoefficients(t,e,r,i){return[3*e-t-3*r+i,3*t-6*e+3*r,-3*t+3*e,t]}function singlePoint(t){return new PolynomialBezier(t,t,t,t,!1)}function PolynomialBezier(t,e,r,i,n){n&&pointEqual(t,e)&&(e=lerpPoint(t,i,1/3)),n&&pointEqual(r,i)&&(r=lerpPoint(t,i,2/3));var s=polynomialCoefficients(t[0],e[0],r[0],i[0]),a=polynomialCoefficients(t[1],e[1],r[1],i[1]);this.a=[s[0],a[0]],this.b=[s[1],a[1]],this.c=[s[2],a[2]],this.d=[s[3],a[3]],this.points=[t,e,r,i]}function extrema(t,e){var r=t.points[0][e],i=t.points[t.points.length-1][e];if(r>i){var n=i;i=r,r=n}for(var s=quadRoots(3*t.a[e],2*t.b[e],t.c[e]),a=0;a<s.length;a+=1)if(s[a]>0&&s[a]<1){var o=t.point(s[a])[e];o<r?r=o:o>i&&(i=o)}return{min:r,max:i}}function intersectData(t,e,r){var i=t.boundingBox();return{cx:i.cx,cy:i.cy,width:i.width,height:i.height,bez:t,t:(e+r)/2,t1:e,t2:r}}function splitData(t){var e=t.bez.split(.5);return[intersectData(e[0],t.t1,t.t),intersectData(e[1],t.t,t.t2)]}function boxIntersect(t,e){return 2*Math.abs(t.cx-e.cx)<t.width+e.width&&2*Math.abs(t.cy-e.cy)<t.height+e.height}function intersectsImpl(t,e,r,i,n,s){if(boxIntersect(t,e))if(r>=s||t.width<=i&&t.height<=i&&e.width<=i&&e.height<=i)n.push([t.t,e.t]);else{var a=splitData(t),o=splitData(e);intersectsImpl(a[0],o[0],r+1,i,n,s),intersectsImpl(a[0],o[1],r+1,i,n,s),intersectsImpl(a[1],o[0],r+1,i,n,s),intersectsImpl(a[1],o[1],r+1,i,n,s)}}function crossProduct(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function lineIntersection(t,e,r,i){var n=[t[0],t[1],1],s=[e[0],e[1],1],a=[r[0],r[1],1],o=[i[0],i[1],1],l=crossProduct(crossProduct(n,s),crossProduct(a,o));return floatZero(l[2])?null:[l[0]/l[2],l[1]/l[2]]}function polarOffset(t,e,r){return[t[0]+Math.cos(e)*r,t[1]-Math.sin(e)*r]}function pointDistance(t,e){return Math.hypot(t[0]-e[0],t[1]-e[1])}function pointEqual(t,e){return floatEqual(t[0],e[0])&&floatEqual(t[1],e[1])}function ZigZagModifier(){}function setPoint(t,e,r,i,n,s,a){var o=r-Math.PI/2,l=r+Math.PI/2,h=e[0]+Math.cos(r)*i*n,u=e[1]-Math.sin(r)*i*n;t.setTripleAt(h,u,h+Math.cos(o)*s,u-Math.sin(o)*s,h+Math.cos(l)*a,u-Math.sin(l)*a,t.length())}function getPerpendicularVector(t,e){var r=[e[0]-t[0],e[1]-t[1]],i=.5*-Math.PI;return[Math.cos(i)*r[0]-Math.sin(i)*r[1],Math.sin(i)*r[0]+Math.cos(i)*r[1]]}function getProjectingAngle(t,e){var r=0===e?t.length()-1:e-1,i=(e+1)%t.length(),n=getPerpendicularVector(t.v[r],t.v[i]);return Math.atan2(0,1)-Math.atan2(n[1],n[0])}function zigZagCorner(t,e,r,i,n,s,a){var o=getProjectingAngle(e,r),l=e.v[r%e._length],h=e.v[0===r?e._length-1:r-1],u=e.v[(r+1)%e._length],c=2===s?Math.sqrt(Math.pow(l[0]-h[0],2)+Math.pow(l[1]-h[1],2)):0,p=2===s?Math.sqrt(Math.pow(l[0]-u[0],2)+Math.pow(l[1]-u[1],2)):0;setPoint(t,e.v[r%e._length],o,a,i,p/(2*(n+1)),c/(2*(n+1)),s)}function zigZagSegment(t,e,r,i,n,s){for(var a=0;a<i;a+=1){var o=(a+1)/(i+1),l=2===n?Math.sqrt(Math.pow(e.points[3][0]-e.points[0][0],2)+Math.pow(e.points[3][1]-e.points[0][1],2)):0,h=e.normalAngle(o);setPoint(t,e.point(o),h,s,r,l/(2*(i+1)),l/(2*(i+1)),n),s=-s}return s}function linearOffset(t,e,r){var i=Math.atan2(e[0]-t[0],e[1]-t[1]);return[polarOffset(t,i,r),polarOffset(e,i,r)]}function offsetSegment(t,e){var r,i,n,s,a,o,l;r=(l=linearOffset(t.points[0],t.points[1],e))[0],i=l[1],n=(l=linearOffset(t.points[1],t.points[2],e))[0],s=l[1],a=(l=linearOffset(t.points[2],t.points[3],e))[0],o=l[1];var h=lineIntersection(r,i,n,s);null===h&&(h=i);var u=lineIntersection(a,o,n,s);return null===u&&(u=a),new PolynomialBezier(r,h,u,o)}function joinLines(t,e,r,i,n){var s=e.points[3],a=r.points[0];if(3===i)return s;if(pointEqual(s,a))return s;if(2===i){var o=-e.tangentAngle(1),l=-r.tangentAngle(0)+Math.PI,h=lineIntersection(s,polarOffset(s,o+Math.PI/2,100),a,polarOffset(a,o+Math.PI/2,100)),u=h?pointDistance(h,s):pointDistance(s,a)/2,c=polarOffset(s,o,2*u*roundCorner);return t.setXYAt(c[0],c[1],"o",t.length()-1),c=polarOffset(a,l,2*u*roundCorner),t.setTripleAt(a[0],a[1],a[0],a[1],c[0],c[1],t.length()),a}var p=lineIntersection(pointEqual(s,e.points[2])?e.points[0]:e.points[2],s,a,pointEqual(a,r.points[1])?r.points[3]:r.points[1]);return p&&pointDistance(p,s)<n?(t.setTripleAt(p[0],p[1],p[0],p[1],p[0],p[1],t.length()),p):s}function getIntersection(t,e){var r=t.intersections(e);return r.length&&floatEqual(r[0][0],1)&&r.shift(),r.length?r[0]:null}function pruneSegmentIntersection(t,e){var r=t.slice(),i=e.slice(),n=getIntersection(t[t.length-1],e[0]);return n&&(r[t.length-1]=t[t.length-1].split(n[0])[0],i[0]=e[0].split(n[1])[1]),t.length>1&&e.length>1&&(n=getIntersection(t[0],e[e.length-1]))?[[t[0].split(n[0])[0]],[e[e.length-1].split(n[1])[1]]]:[r,i]}function pruneIntersections(t){for(var e,r=1;r<t.length;r+=1)e=pruneSegmentIntersection(t[r-1],t[r]),t[r-1]=e[0],t[r]=e[1];return t.length>1&&(e=pruneSegmentIntersection(t[t.length-1],t[0]),t[t.length-1]=e[0],t[0]=e[1]),t}function offsetSegmentSplit(t,e){var r,i,n,s,a=t.inflectionPoints();if(0===a.length)return[offsetSegment(t,e)];if(1===a.length||floatEqual(a[1],1))return r=(n=t.split(a[0]))[0],i=n[1],[offsetSegment(r,e),offsetSegment(i,e)];r=(n=t.split(a[0]))[0];var o=(a[1]-a[0])/(1-a[0]);return s=(n=n[1].split(o))[0],i=n[1],[offsetSegment(r,e),offsetSegment(s,e),offsetSegment(i,e)]}function OffsetPathModifier(){}function getFontProperties(t){for(var e=t.fStyle?t.fStyle.split(" "):[],r="normal",i="normal",n=e.length,s=0;s<n;s+=1)switch(e[s].toLowerCase()){case"italic":i="italic";break;case"bold":r="700";break;case"black":r="900";break;case"medium":r="500";break;case"regular":case"normal":r="400";break;case"light":case"thin":r="200"}return{style:i,weight:t.fWeight||r}}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(t,e.c,0,null,this),this.o=PropertyFactory.getProp(t,e.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(t,e.tr,this),this.so=PropertyFactory.getProp(t,e.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(t,e.tr.eo,0,.01,this),this.data=e,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(t,e,r,i,n,s){var a=s?-1:1,o=i.s.v[0]+(1-i.s.v[0])*(1-n),l=i.s.v[1]+(1-i.s.v[1])*(1-n);t.translate(i.p.v[0]*a*n,i.p.v[1]*a*n,i.p.v[2]),e.translate(-i.a.v[0],-i.a.v[1],i.a.v[2]),e.rotate(-i.r.v*a*n),e.translate(i.a.v[0],i.a.v[1],i.a.v[2]),r.translate(-i.a.v[0],-i.a.v[1],i.a.v[2]),r.scale(s?1/o:o,s?1/l:l),r.translate(i.a.v[0],i.a.v[1],i.a.v[2])},RepeaterModifier.prototype.init=function(t,e,r,i){for(this.elem=t,this.arr=e,this.pos=r,this.elemsData=i,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e[r]);r>0;)r-=1,this._elements.unshift(e[r]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(t){var e,r=t.length;for(e=0;e<r;e+=1)t[e]._processed=!1,"gr"===t[e].ty&&this.resetElements(t[e].it)},RepeaterModifier.prototype.cloneElements=function(t){var e=JSON.parse(JSON.stringify(t));return this.resetElements(e),e},RepeaterModifier.prototype.changeGroupRender=function(t,e){var r,i=t.length;for(r=0;r<i;r+=1)t[r]._render=e,"gr"===t[r].ty&&this.changeGroupRender(t[r].it,e)},RepeaterModifier.prototype.processShapes=function(t){var e,r,i,n,s,a=!1;if(this._mdf||t){var o,l=Math.ceil(this.c.v);if(this._groups.length<l){for(;this._groups.length<l;){var h={it:this.cloneElements(this._elements),ty:"gr"};h.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,h),this._groups.splice(0,0,h),this._currentCopies+=1}this.elem.reloadShapes(),a=!0}for(s=0,i=0;i<=this._groups.length-1;i+=1){if(o=s<l,this._groups[i]._render=o,this.changeGroupRender(this._groups[i].it,o),!o){var u=this.elemsData[i].it,c=u[u.length-1];0!==c.transform.op.v?(c.transform.op._mdf=!0,c.transform.op.v=0):c.transform.op._mdf=!1}s+=1}this._currentCopies=l;var p=this.o.v,d=p%1,f=p>0?Math.floor(p):Math.ceil(p),m=this.pMatrix.props,g=this.rMatrix.props,v=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var y,x,_=0;if(p>0){for(;_<f;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),_+=1;d&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,d,!1),_+=d)}else if(p<0){for(;_>f;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),_-=1;d&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-d,!0),_-=d)}for(i=1===this.data.m?0:this._currentCopies-1,n=1===this.data.m?1:-1,s=this._currentCopies;s;){if(x=(r=(e=this.elemsData[i].it)[e.length-1].transform.mProps.v.props).length,e[e.length-1].transform.mProps._mdf=!0,e[e.length-1].transform.op._mdf=!0,e[e.length-1].transform.op.v=1===this._currentCopies?this.so.v:this.so.v+(this.eo.v-this.so.v)*(i/(this._currentCopies-1)),0!==_){for((0!==i&&1===n||i!==this._currentCopies-1&&-1===n)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],g[8],g[9],g[10],g[11],g[12],g[13],g[14],g[15]),this.matrix.transform(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15]),this.matrix.transform(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10],m[11],m[12],m[13],m[14],m[15]),y=0;y<x;y+=1)r[y]=this.matrix.props[y];this.matrix.reset()}else for(this.matrix.reset(),y=0;y<x;y+=1)r[y]=this.matrix.props[y];_+=1,s-=1,i+=n}}else for(s=this._currentCopies,i=0,n=1;s;)r=(e=this.elemsData[i].it)[e.length-1].transform.mProps.v.props,e[e.length-1].transform.mProps._mdf=!1,e[e.length-1].transform.op._mdf=!1,s-=1,i+=n;return a},RepeaterModifier.prototype.addShape=function(){},extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(t,e.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(t,e){var r,i=shapePool.newElement();i.c=t.c;var n,s,a,o,l,h,u,c,p,d,f,m,g=t._length,v=0;for(r=0;r<g;r+=1)n=t.v[r],a=t.o[r],s=t.i[r],n[0]===a[0]&&n[1]===a[1]&&n[0]===s[0]&&n[1]===s[1]?0!==r&&r!==g-1||t.c?(o=0===r?t.v[g-1]:t.v[r-1],h=(l=Math.sqrt(Math.pow(n[0]-o[0],2)+Math.pow(n[1]-o[1],2)))?Math.min(l/2,e)/l:0,u=f=n[0]+(o[0]-n[0])*h,c=m=n[1]-(n[1]-o[1])*h,p=u-(u-n[0])*roundCorner,d=c-(c-n[1])*roundCorner,i.setTripleAt(u,c,p,d,f,m,v),v+=1,o=r===g-1?t.v[0]:t.v[r+1],h=(l=Math.sqrt(Math.pow(n[0]-o[0],2)+Math.pow(n[1]-o[1],2)))?Math.min(l/2,e)/l:0,u=p=n[0]+(o[0]-n[0])*h,c=d=n[1]+(o[1]-n[1])*h,f=u-(u-n[0])*roundCorner,m=c-(c-n[1])*roundCorner,i.setTripleAt(u,c,p,d,f,m,v),v+=1):(i.setTripleAt(n[0],n[1],a[0],a[1],s[0],s[1],v),v+=1):(i.setTripleAt(t.v[r][0],t.v[r][1],t.o[r][0],t.o[r][1],t.i[r][0],t.i[r][1],v),v+=1);return i},RoundCornersModifier.prototype.processShapes=function(t){var e,r,i,n,s,a,o=this.shapes.length,l=this.rd.v;if(0!==l)for(r=0;r<o;r+=1){if(a=(s=this.shapes[r]).localShapeCollection,s.shape._mdf||this._mdf||t)for(a.releaseShapes(),s.shape._mdf=!0,e=s.shape.paths.shapes,n=s.shape.paths._length,i=0;i<n;i+=1)a.addShape(this.processPath(e[i],l));s.shape.paths=s.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},PolynomialBezier.prototype.point=function(t){return[((this.a[0]*t+this.b[0])*t+this.c[0])*t+this.d[0],((this.a[1]*t+this.b[1])*t+this.c[1])*t+this.d[1]]},PolynomialBezier.prototype.derivative=function(t){return[(3*t*this.a[0]+2*this.b[0])*t+this.c[0],(3*t*this.a[1]+2*this.b[1])*t+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(t){var e=this.derivative(t);return Math.atan2(e[1],e[0])},PolynomialBezier.prototype.normalAngle=function(t){var e=this.derivative(t);return Math.atan2(e[0],e[1])},PolynomialBezier.prototype.inflectionPoints=function(){var t=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(t))return[];var e=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/t,r=e*e-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/t;if(r<0)return[];var i=Math.sqrt(r);return floatZero(i)?i>0&&i<1?[e]:[]:[e-i,e+i].filter((function(t){return t>0&&t<1}))},PolynomialBezier.prototype.split=function(t){if(t<=0)return[singlePoint(this.points[0]),this];if(t>=1)return[this,singlePoint(this.points[this.points.length-1])];var e=lerpPoint(this.points[0],this.points[1],t),r=lerpPoint(this.points[1],this.points[2],t),i=lerpPoint(this.points[2],this.points[3],t),n=lerpPoint(e,r,t),s=lerpPoint(r,i,t),a=lerpPoint(n,s,t);return[new PolynomialBezier(this.points[0],e,n,a,!0),new PolynomialBezier(a,s,i,this.points[3],!0)]},PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var t=this.bounds();return{left:t.x.min,right:t.x.max,top:t.y.min,bottom:t.y.max,width:t.x.max-t.x.min,height:t.y.max-t.y.min,cx:(t.x.max+t.x.min)/2,cy:(t.y.max+t.y.min)/2}},PolynomialBezier.prototype.intersections=function(t,e,r){void 0===e&&(e=2),void 0===r&&(r=7);var i=[];return intersectsImpl(intersectData(this,0,1),intersectData(t,0,1),0,e,i,r),i},PolynomialBezier.shapeSegment=function(t,e){var r=(e+1)%t.length();return new PolynomialBezier(t.v[e],t.o[e],t.i[r],t.v[r],!0)},PolynomialBezier.shapeSegmentInverted=function(t,e){var r=(e+1)%t.length();return new PolynomialBezier(t.v[r],t.i[r],t.o[e],t.v[e],!0)},extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(t,e.s,0,null,this),this.frequency=PropertyFactory.getProp(t,e.r,0,null,this),this.pointsType=PropertyFactory.getProp(t,e.pt,0,null,this),this._isAnimated=0!==this.amplitude.effectsSequence.length||0!==this.frequency.effectsSequence.length||0!==this.pointsType.effectsSequence.length},ZigZagModifier.prototype.processPath=function(t,e,r,i){var n=t._length,s=shapePool.newElement();if(s.c=t.c,t.c||(n-=1),0===n)return s;var a=-1,o=PolynomialBezier.shapeSegment(t,0);zigZagCorner(s,t,0,e,r,i,a);for(var l=0;l<n;l+=1)a=zigZagSegment(s,o,e,r,i,-a),o=l!==n-1||t.c?PolynomialBezier.shapeSegment(t,(l+1)%n):null,zigZagCorner(s,t,l+1,e,r,i,a);return s},ZigZagModifier.prototype.processShapes=function(t){var e,r,i,n,s,a,o=this.shapes.length,l=this.amplitude.v,h=Math.max(0,Math.round(this.frequency.v)),u=this.pointsType.v;if(0!==l)for(r=0;r<o;r+=1){if(a=(s=this.shapes[r]).localShapeCollection,s.shape._mdf||this._mdf||t)for(a.releaseShapes(),s.shape._mdf=!0,e=s.shape.paths.shapes,n=s.shape.paths._length,i=0;i<n;i+=1)a.addShape(this.processPath(e[i],l,h,u));s.shape.paths=s.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(t,e.a,0,null,this),this.miterLimit=PropertyFactory.getProp(t,e.ml,0,null,this),this.lineJoin=e.lj,this._isAnimated=0!==this.amount.effectsSequence.length},OffsetPathModifier.prototype.processPath=function(t,e,r,i){var n=shapePool.newElement();n.c=t.c;var s,a,o,l=t.length();t.c||(l-=1);var h=[];for(s=0;s<l;s+=1)o=PolynomialBezier.shapeSegment(t,s),h.push(offsetSegmentSplit(o,e));if(!t.c)for(s=l-1;s>=0;s-=1)o=PolynomialBezier.shapeSegmentInverted(t,s),h.push(offsetSegmentSplit(o,e));h=pruneIntersections(h);var u=null,c=null;for(s=0;s<h.length;s+=1){var p=h[s];for(c&&(u=joinLines(n,c,p[0],r,i)),c=p[p.length-1],a=0;a<p.length;a+=1)o=p[a],u&&pointEqual(o.points[0],u)?n.setXYAt(o.points[1][0],o.points[1][1],"o",n.length()-1):n.setTripleAt(o.points[0][0],o.points[0][1],o.points[1][0],o.points[1][1],o.points[0][0],o.points[0][1],n.length()),n.setTripleAt(o.points[3][0],o.points[3][1],o.points[3][0],o.points[3][1],o.points[2][0],o.points[2][1],n.length()),u=o.points[3]}return h.length&&joinLines(n,c,h[0][0],r,i),n},OffsetPathModifier.prototype.processShapes=function(t){var e,r,i,n,s,a,o=this.shapes.length,l=this.amount.v,h=this.miterLimit.v,u=this.lineJoin;if(0!==l)for(r=0;r<o;r+=1){if(a=(s=this.shapes[r]).localShapeCollection,s.shape._mdf||this._mdf||t)for(a.releaseShapes(),s.shape._mdf=!0,e=s.shape.paths.shapes,n=s.shape.paths._length,i=0;i<n;i+=1)a.addShape(this.processPath(e[i],l,u,h));s.shape.paths=s.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var FontManager=function(){var t={w:0,size:0,shapes:[],data:{shapes:[]}},e=[];e=e.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var r=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"],i=[65039,8205];function n(t,e){var r=createTag("span");r.setAttribute("aria-hidden",!0),r.style.fontFamily=e;var i=createTag("span");i.innerText="giItT1WQy@!-/#",r.style.position="absolute",r.style.left="-10000px",r.style.top="-10000px",r.style.fontSize="300px",r.style.fontVariant="normal",r.style.fontStyle="normal",r.style.fontWeight="normal",r.style.letterSpacing="0",r.appendChild(i),document.body.appendChild(r);var n=i.offsetWidth;return i.style.fontFamily=function(t){var e,r=t.split(","),i=r.length,n=[];for(e=0;e<i;e+=1)"sans-serif"!==r[e]&&"monospace"!==r[e]&&n.push(r[e]);return n.join(",")}(t)+", "+e,{node:i,w:n,parent:r}}function s(t,e){var r,i=document.body&&e?"svg":"canvas",n=getFontProperties(t);if("svg"===i){var s=createNS("text");s.style.fontSize="100px",s.setAttribute("font-family",t.fFamily),s.setAttribute("font-style",n.style),s.setAttribute("font-weight",n.weight),s.textContent="1",t.fClass?(s.style.fontFamily="inherit",s.setAttribute("class",t.fClass)):s.style.fontFamily=t.fFamily,e.appendChild(s),r=s}else{var a=new OffscreenCanvas(500,500).getContext("2d");a.font=n.style+" "+n.weight+" 100px "+t.fFamily,r=a}return{measureText:function(t){return"svg"===i?(r.textContent=t,r.getComputedTextLength()):r.measureText(t).width}}}var a=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};a.isModifier=function(t,e){var i=t.toString(16)+e.toString(16);return-1!==r.indexOf(i)},a.isZeroWidthJoiner=function(t,e){return e?t===i[0]&&e===i[1]:t===i[1]},a.isCombinedCharacter=function(t){return-1!==e.indexOf(t)};var o={addChars:function(t){if(t){var e;this.chars||(this.chars=[]);var r,i,n=t.length,s=this.chars.length;for(e=0;e<n;e+=1){for(r=0,i=!1;r<s;)this.chars[r].style===t[e].style&&this.chars[r].fFamily===t[e].fFamily&&this.chars[r].ch===t[e].ch&&(i=!0),r+=1;i||(this.chars.push(t[e]),s+=1)}}},addFonts:function(t,e){if(t){if(this.chars)return this.isLoaded=!0,void(this.fonts=t.list);if(!document.body)return this.isLoaded=!0,t.list.forEach((function(t){t.helper=s(t),t.cache={}})),void(this.fonts=t.list);var r,i=t.list,a=i.length,o=a;for(r=0;r<a;r+=1){var l,h,u=!0;if(i[r].loaded=!1,i[r].monoCase=n(i[r].fFamily,"monospace"),i[r].sansCase=n(i[r].fFamily,"sans-serif"),i[r].fPath){if("p"===i[r].fOrigin||3===i[r].origin){if((l=document.querySelectorAll('style[f-forigin="p"][f-family="'+i[r].fFamily+'"], style[f-origin="3"][f-family="'+i[r].fFamily+'"]')).length>0&&(u=!1),u){var c=createTag("style");c.setAttribute("f-forigin",i[r].fOrigin),c.setAttribute("f-origin",i[r].origin),c.setAttribute("f-family",i[r].fFamily),c.type="text/css",c.innerText="@font-face {font-family: "+i[r].fFamily+"; font-style: normal; src: url('"+i[r].fPath+"');}",e.appendChild(c)}}else if("g"===i[r].fOrigin||1===i[r].origin){for(l=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),h=0;h<l.length;h+=1)-1!==l[h].href.indexOf(i[r].fPath)&&(u=!1);if(u){var p=createTag("link");p.setAttribute("f-forigin",i[r].fOrigin),p.setAttribute("f-origin",i[r].origin),p.type="text/css",p.rel="stylesheet",p.href=i[r].fPath,document.body.appendChild(p)}}else if("t"===i[r].fOrigin||2===i[r].origin){for(l=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),h=0;h<l.length;h+=1)i[r].fPath===l[h].src&&(u=!1);if(u){var d=createTag("link");d.setAttribute("f-forigin",i[r].fOrigin),d.setAttribute("f-origin",i[r].origin),d.setAttribute("rel","stylesheet"),d.setAttribute("href",i[r].fPath),e.appendChild(d)}}}else i[r].loaded=!0,o-=1;i[r].helper=s(i[r],e),i[r].cache={},this.fonts.push(i[r])}0===o?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},getCharData:function(e,r,i){for(var n=0,s=this.chars.length;n<s;){if(this.chars[n].ch===e&&this.chars[n].style===r&&this.chars[n].fFamily===i)return this.chars[n];n+=1}return("string"==typeof e&&13!==e.charCodeAt(0)||!e)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",e,r,i)),t},getFontByName:function(t){for(var e=0,r=this.fonts.length;e<r;){if(this.fonts[e].fName===t)return this.fonts[e];e+=1}return this.fonts[0]},measureText:function(t,e,r){var i=this.getFontByName(e),n=t.charCodeAt(0);if(!i.cache[n+1]){var s=i.helper;if(" "===t){var a=s.measureText("|"+t+"|"),o=s.measureText("||");i.cache[n+1]=(a-o)/100}else i.cache[n+1]=s.measureText(t)/100}return i.cache[n+1]*r},checkLoadedFonts:function(){var t,e,r,i=this.fonts.length,n=i;for(t=0;t<i;t+=1)this.fonts[t].loaded?n-=1:"n"===this.fonts[t].fOrigin||0===this.fonts[t].origin?this.fonts[t].loaded=!0:(e=this.fonts[t].monoCase.node,r=this.fonts[t].monoCase.w,e.offsetWidth!==r?(n-=1,this.fonts[t].loaded=!0):(e=this.fonts[t].sansCase.node,r=this.fonts[t].sansCase.w,e.offsetWidth!==r&&(n-=1,this.fonts[t].loaded=!0)),this.fonts[t].loaded&&(this.fonts[t].sansCase.parent.parentNode.removeChild(this.fonts[t].sansCase.parent),this.fonts[t].monoCase.parent.parentNode.removeChild(this.fonts[t].monoCase.parent)));0!==n&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)},setIsLoaded:function(){this.isLoaded=!0}};return a.prototype=o,a}();function SlotManager(t){this.animationData=t}function slotFactory(t){return new SlotManager(t)}function RenderableElement(){}SlotManager.prototype.getProp=function(t){return this.animationData.slots&&this.animationData.slots[t.sid]?Object.assign(t,this.animationData.slots[t.sid].p):t},RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(t){-1===this.renderableComponents.indexOf(t)&&this.renderableComponents.push(t)},removeRenderableComponent:function(t){-1!==this.renderableComponents.indexOf(t)&&this.renderableComponents.splice(this.renderableComponents.indexOf(t),1)},prepareRenderableFrame:function(t){this.checkLayerLimits(t)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(t){this.data.ip-this.data.st<=t&&this.data.op-this.data.st>t?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var t,e=this.renderableComponents.length;for(t=0;t<e;t+=1)this.renderableComponents[t].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=(blendModeEnums={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"},function(t){return blendModeEnums[t]||""}),blendModeEnums;function SliderEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function AngleEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function ColorEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,1,0,r)}function PointEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,1,0,r)}function LayerIndexEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function MaskIndexEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function CheckboxEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function NoValueEffect(){this.p={}}function EffectsManager(t,e){var r,i=t.ef||[];this.effectElements=[];var n,s=i.length;for(r=0;r<s;r+=1)n=new GroupEffect(i[r],e),this.effectElements.push(n)}function GroupEffect(t,e){this.init(t,e)}function BaseElement(){}function FrameElement(){}function FootageElement(t,e,r){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(t.refId),this.footageData=e.imageLoader.getAsset(this.assetData),this.initBaseData(t,e,r)}function AudioElement(t,e,r){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(t.refId),this.initBaseData(t,e,r),this._isPlaying=!1,this._canPlay=!1;var i=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(i),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,t.au&&t.au.lv?t.au.lv:{k:[100]},1,.01,this)}function BaseRenderer(){}function TransformElement(){}function MaskElement(t,e,r){this.data=t,this.element=e,this.globalData=r,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var i,n,s=this.globalData.defs,a=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(a),this.solidPath="";var o,l,h,u,c,p,d=this.masksProperties,f=0,m=[],g=createElementID(),v="clipPath",y="clip-path";for(i=0;i<a;i+=1)if(("a"!==d[i].mode&&"n"!==d[i].mode||d[i].inv||100!==d[i].o.k||d[i].o.x)&&(v="mask",y="mask"),"s"!==d[i].mode&&"i"!==d[i].mode||0!==f?h=null:((h=createNS("rect")).setAttribute("fill","#ffffff"),h.setAttribute("width",this.element.comp.data.w||0),h.setAttribute("height",this.element.comp.data.h||0),m.push(h)),n=createNS("path"),"n"===d[i].mode)this.viewData[i]={op:PropertyFactory.getProp(this.element,d[i].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,d[i],3),elem:n,lastPath:""},s.appendChild(n);else{var x;if(f+=1,n.setAttribute("fill","s"===d[i].mode?"#000000":"#ffffff"),n.setAttribute("clip-rule","nonzero"),0!==d[i].x.k?(v="mask",y="mask",p=PropertyFactory.getProp(this.element,d[i].x,0,null,this.element),x=createElementID(),(u=createNS("filter")).setAttribute("id",x),(c=createNS("feMorphology")).setAttribute("operator","erode"),c.setAttribute("in","SourceGraphic"),c.setAttribute("radius","0"),u.appendChild(c),s.appendChild(u),n.setAttribute("stroke","s"===d[i].mode?"#000000":"#ffffff")):(c=null,p=null),this.storedData[i]={elem:n,x:p,expan:c,lastPath:"",lastOperator:"",filterId:x,lastRadius:0},"i"===d[i].mode){l=m.length;var _=createNS("g");for(o=0;o<l;o+=1)_.appendChild(m[o]);var b=createNS("mask");b.setAttribute("mask-type","alpha"),b.setAttribute("id",g+"_"+f),b.appendChild(n),s.appendChild(b),_.setAttribute("mask","url("+getLocationHref()+"#"+g+"_"+f+")"),m.length=0,m.push(_)}else m.push(n);d[i].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[i]={elem:n,lastPath:"",op:PropertyFactory.getProp(this.element,d[i].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,d[i],3),invRect:h},this.viewData[i].prop.k||this.drawPath(d[i],this.viewData[i].prop.v,this.viewData[i])}for(this.maskElement=createNS(v),a=m.length,i=0;i<a;i+=1)this.maskElement.appendChild(m[i]);f>0&&(this.maskElement.setAttribute("id",g),this.element.maskedElement.setAttribute(y,"url("+getLocationHref()+"#"+g+")"),s.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(t,e){var r;this.data=t,this.effectElements=[],this.initDynamicPropertyContainer(e);var i,n=this.data.ef.length,s=this.data.ef;for(r=0;r<n;r+=1){switch(i=null,s[r].ty){case 0:i=new SliderEffect(s[r],e,this);break;case 1:i=new AngleEffect(s[r],e,this);break;case 2:i=new ColorEffect(s[r],e,this);break;case 3:i=new PointEffect(s[r],e,this);break;case 4:case 7:i=new CheckboxEffect(s[r],e,this);break;case 10:i=new LayerIndexEffect(s[r],e,this);break;case 11:i=new MaskIndexEffect(s[r],e,this);break;case 5:i=new EffectsManager(s[r],e,this);break;default:i=new NoValueEffect(s[r],e,this)}i&&this.effectElements.push(i)}},BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var t=0,e=this.data.masksProperties.length;t<e;){if("n"!==this.data.masksProperties[t].mode&&!1!==this.data.masksProperties[t].cl)return!0;t+=1}return!1},initExpressions:function(){var t=getExpressionInterfaces();if(t){var e=t("layer"),r=t("effects"),i=t("shape"),n=t("text"),s=t("comp");this.layerInterface=e(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var a=r.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(a),0===this.data.ty||this.data.xt?this.compInterface=s(this):4===this.data.ty?(this.layerInterface.shapeInterface=i(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=n(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var t=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=t},initBaseData:function(t,e,r){this.globalData=e,this.comp=r,this.data=t,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(t,e){var r,i=this.dynamicProperties.length;for(r=0;r<i;r+=1)(e||this._isParent&&"transform"===this.dynamicProperties[r].propType)&&(this.dynamicProperties[r].getValue(),this.dynamicProperties[r]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(t){-1===this.dynamicProperties.indexOf(t)&&this.dynamicProperties.push(t)}},FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var t=getExpressionInterfaces();if(t){var e=t("footage");this.layerInterface=e(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData},AudioElement.prototype.prepareFrame=function(t){if(this.prepareRenderableFrame(t,!0),this.prepareProperties(t,!0),this.tm._placeholder)this._currentTime=t/this.data.sr;else{var e=this.tm.v;this._currentTime=e}this._volume=this.lv.v[0];var r=this._volume*this._volumeMultiplier;this._previousVolume!==r&&(this._previousVolume=r,this.audio.volume(r))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(t){this.audio.rate(t)},AudioElement.prototype.volume=function(t){this._volumeMultiplier=t,this._previousVolume=t*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},BaseRenderer.prototype.checkLayers=function(t){var e,r,i=this.layers.length;for(this.completeLayers=!0,e=i-1;e>=0;e-=1)this.elements[e]||(r=this.layers[e]).ip-r.st<=t-this.layers[e].st&&r.op-r.st>t-this.layers[e].st&&this.buildItem(e),this.completeLayers=!!this.elements[e]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(t){switch(t.ty){case 2:return this.createImage(t);case 0:return this.createComp(t);case 1:return this.createSolid(t);case 3:default:return this.createNull(t);case 4:return this.createShape(t);case 5:return this.createText(t);case 6:return this.createAudio(t);case 13:return this.createCamera(t);case 15:return this.createFootage(t)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(t){return new AudioElement(t,this.globalData,this)},BaseRenderer.prototype.createFootage=function(t){return new FootageElement(t,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.buildItem(t);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(t){var e;this.completeLayers=!1;var r,i=t.length,n=this.layers.length;for(e=0;e<i;e+=1)for(r=0;r<n;){if(this.layers[r].id===t[e].id){this.layers[r]=t[e];break}r+=1}},BaseRenderer.prototype.setProjectInterface=function(t){this.globalData.projectInterface=t},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(t,e,r){for(var i=this.elements,n=this.layers,s=0,a=n.length;s<a;)n[s].ind==e&&(i[s]&&!0!==i[s]?(r.push(i[s]),i[s].setAsParent(),void 0!==n[s].parent?this.buildElementParenting(t,n[s].parent,r):t.setHierarchy(r)):(this.buildItem(s),this.addPendingElement(t))),s+=1},BaseRenderer.prototype.addPendingElement=function(t){this.pendingElements.push(t)},BaseRenderer.prototype.searchExtraCompositions=function(t){var e,r=t.length;for(e=0;e<r;e+=1)if(t[e].xt){var i=this.createComp(t[e]);i.initExpressions(),this.globalData.projectInterface.registerComposition(i)}},BaseRenderer.prototype.getElementById=function(t){var e,r=this.elements.length;for(e=0;e<r;e+=1)if(this.elements[e].data.ind===t)return this.elements[e];return null},BaseRenderer.prototype.getElementByPath=function(t){var e,r=t.shift();if("number"==typeof r)e=this.elements[r];else{var i,n=this.elements.length;for(i=0;i<n;i+=1)if(this.elements[i].data.nm===r){e=this.elements[i];break}}return 0===t.length?e:e.getElementByPath(t)},BaseRenderer.prototype.setupGlobalData=function(t,e){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(t),this.globalData.fontManager.addChars(t.chars),this.globalData.fontManager.addFonts(t.fonts,e),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=t.fr,this.globalData.nm=t.nm,this.globalData.compSize={w:t.w,h:t.h}},TransformElement.prototype={initTransform:function(){this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_opMdf:!1,mat:new Matrix},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var t,e=this.finalTransform.mat,r=0,i=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;r<i;){if(this.hierarchy[r].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}r+=1}if(this.finalTransform._matMdf)for(t=this.finalTransform.mProp.v.props,e.cloneFromProps(t),r=0;r<i;r+=1)t=this.hierarchy[r].finalTransform.mProp.v.props,e.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}},globalToLocal:function(t){var e=[];e.push(this.finalTransform);for(var r,i=!0,n=this.comp;i;)n.finalTransform?(n.data.hasMask&&e.splice(0,0,n.finalTransform),n=n.comp):i=!1;var s,a=e.length;for(r=0;r<a;r+=1)s=e[r].mat.applyToPointArray(0,0,0),t=[t[0]-s[0],t[1]-s[1],0];return t},mHelper:new Matrix},MaskElement.prototype.getMaskProperty=function(t){return this.viewData[t].prop},MaskElement.prototype.renderFrame=function(t){var e,r=this.element.finalTransform.mat,i=this.masksProperties.length;for(e=0;e<i;e+=1)if((this.viewData[e].prop._mdf||t)&&this.drawPath(this.masksProperties[e],this.viewData[e].prop.v,this.viewData[e]),(this.viewData[e].op._mdf||t)&&this.viewData[e].elem.setAttribute("fill-opacity",this.viewData[e].op.v),"n"!==this.masksProperties[e].mode&&(this.viewData[e].invRect&&(this.element.finalTransform.mProp._mdf||t)&&this.viewData[e].invRect.setAttribute("transform",r.getInverseMatrix().to2dCSS()),this.storedData[e].x&&(this.storedData[e].x._mdf||t))){var n=this.storedData[e].expan;this.storedData[e].x.v<0?("erode"!==this.storedData[e].lastOperator&&(this.storedData[e].lastOperator="erode",this.storedData[e].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[e].filterId+")")),n.setAttribute("radius",-this.storedData[e].x.v)):("dilate"!==this.storedData[e].lastOperator&&(this.storedData[e].lastOperator="dilate",this.storedData[e].elem.setAttribute("filter",null)),this.storedData[e].elem.setAttribute("stroke-width",2*this.storedData[e].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var t="M0,0 ";return t+=" h"+this.globalData.compSize.w,t+=" v"+this.globalData.compSize.h,t+=" h-"+this.globalData.compSize.w,t+=" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(t,e,r){var i,n,s=" M"+e.v[0][0]+","+e.v[0][1];for(n=e._length,i=1;i<n;i+=1)s+=" C"+e.o[i-1][0]+","+e.o[i-1][1]+" "+e.i[i][0]+","+e.i[i][1]+" "+e.v[i][0]+","+e.v[i][1];if(e.c&&n>1&&(s+=" C"+e.o[i-1][0]+","+e.o[i-1][1]+" "+e.i[0][0]+","+e.i[0][1]+" "+e.v[0][0]+","+e.v[0][1]),r.lastPath!==s){var a="";r.elem&&(e.c&&(a=t.inv?this.solidPath+s:s),r.elem.setAttribute("d",a)),r.lastPath=s}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var t={createFilter:function(t,e){var r=createNS("filter");return r.setAttribute("id",t),!0!==e&&(r.setAttribute("filterUnits","objectBoundingBox"),r.setAttribute("x","0%"),r.setAttribute("y","0%"),r.setAttribute("width","100%"),r.setAttribute("height","100%")),r},createAlphaToLuminanceFilter:function(){var t=createNS("feColorMatrix");return t.setAttribute("type","matrix"),t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),t}};return t}(),featureSupport=function(){var t={maskType:!0,svgLumaHidden:!0,offscreenCanvas:"undefined"!=typeof OffscreenCanvas};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(t.maskType=!1),/firefox/i.test(navigator.userAgent)&&(t.svgLumaHidden=!1),t}(),registeredEffects={},idPrefix="filter_result_";function SVGEffects(t){var e,r,i="SourceGraphic",n=t.data.ef?t.data.ef.length:0,s=createElementID(),a=filtersFactory.createFilter(s,!0),o=0;for(this.filters=[],e=0;e<n;e+=1){r=null;var l=t.data.ef[e].ty;registeredEffects[l]&&(r=new(0,registeredEffects[l].effect)(a,t.effectsManager.effectElements[e],t,idPrefix+o,i),i=idPrefix+o,registeredEffects[l].countsAsEffect&&(o+=1)),r&&this.filters.push(r)}o&&(t.globalData.defs.appendChild(a),t.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+s+")")),this.filters.length&&t.addRenderableComponent(this)}function registerEffect(t,e,r){registeredEffects[t]={effect:e,countsAsEffect:r}}function SVGBaseElement(){}function HierarchyElement(){}function RenderableDOMElement(){}function IImageElement(t,e,r){this.assetData=e.getAssetData(t.refId),this.assetData&&this.assetData.sid&&(this.assetData=e.slotManager.getProp(this.assetData)),this.initElement(t,e,r),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ProcessedElement(t,e){this.elem=t,this.pos=e}function IShapeElement(){}SVGEffects.prototype.renderFrame=function(t){var e,r=this.filters.length;for(e=0;e<r;e+=1)this.filters[e].renderFrame(t)},SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var t=null;if(this.data.td){this.matteMasks={};var e=createNS("g");e.setAttribute("id",this.layerId),e.appendChild(this.layerElement),t=e,this.globalData.defs.appendChild(e)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),t=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0===this.data.ty&&!this.data.hd){var r=createNS("clipPath"),i=createNS("path");i.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var n=createElementID();if(r.setAttribute("id",n),r.appendChild(i),this.globalData.defs.appendChild(r),this.checkMasks()){var s=createNS("g");s.setAttribute("clip-path","url("+getLocationHref()+"#"+n+")"),s.appendChild(this.layerElement),this.transformedElement=s,t?t.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+n+")")}0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.mat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.mProp.o.v)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this)},getMatte:function(t){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[t]){var e,r,i,n,s=this.layerId+"_"+t;if(1===t||3===t){var a=createNS("mask");a.setAttribute("id",s),a.setAttribute("mask-type",3===t?"luminance":"alpha"),(i=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),a.appendChild(i),this.globalData.defs.appendChild(a),featureSupport.maskType||1!==t||(a.setAttribute("mask-type","luminance"),e=createElementID(),r=filtersFactory.createFilter(e),this.globalData.defs.appendChild(r),r.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(n=createNS("g")).appendChild(i),a.appendChild(n),n.setAttribute("filter","url("+getLocationHref()+"#"+e+")"))}else if(2===t){var o=createNS("mask");o.setAttribute("id",s),o.setAttribute("mask-type","alpha");var l=createNS("g");o.appendChild(l),e=createElementID(),r=filtersFactory.createFilter(e);var h=createNS("feComponentTransfer");h.setAttribute("in","SourceGraphic"),r.appendChild(h);var u=createNS("feFuncA");u.setAttribute("type","table"),u.setAttribute("tableValues","1.0 0.0"),h.appendChild(u),this.globalData.defs.appendChild(r);var c=createNS("rect");c.setAttribute("width",this.comp.data.w),c.setAttribute("height",this.comp.data.h),c.setAttribute("x","0"),c.setAttribute("y","0"),c.setAttribute("fill","#ffffff"),c.setAttribute("opacity","0"),l.setAttribute("filter","url("+getLocationHref()+"#"+e+")"),l.appendChild(c),(i=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),l.appendChild(i),featureSupport.maskType||(o.setAttribute("mask-type","luminance"),r.appendChild(filtersFactory.createAlphaToLuminanceFilter()),n=createNS("g"),l.appendChild(c),n.appendChild(this.layerElement),l.appendChild(n)),this.globalData.defs.appendChild(o)}this.matteMasks[t]=s}return this.matteMasks[t]},setMatte:function(t){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+t+")")}},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(t){this.hierarchy=t},setAsParent:function(){this._isParent=!0},checkParenting:function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(t,e,r){this.initFrame(),this.initBaseData(t,e,r),this.initTransform(t,e,r),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},IShapeElement.prototype={addShapeToModifiers:function(t){var e,r=this.shapeModifiers.length;for(e=0;e<r;e+=1)this.shapeModifiers[e].addShape(t)},isShapeInAnimatedModifiers:function(t){for(var e=this.shapeModifiers.length;0<e;)if(this.shapeModifiers[0].isAnimatedWithShape(t))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var t,e=this.shapes.length;for(t=0;t<e;t+=1)this.shapes[t].sh.reset();for(t=(e=this.shapeModifiers.length)-1;t>=0&&!this.shapeModifiers[t].processShapes(this._isFirstFrame);t-=1);}},searchProcessedElement:function(t){for(var e=this.processedElements,r=0,i=e.length;r<i;){if(e[r].elem===t)return e[r].pos;r+=1}return 0},addProcessedElement:function(t,e){for(var r=this.processedElements,i=r.length;i;)if(r[i-=1].elem===t)return void(r[i].pos=e);r.push(new ProcessedElement(t,e))},prepareFrame:function(t){this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(t,e,r){this.caches=[],this.styles=[],this.transformers=t,this.lStr="",this.sh=r,this.lvl=e,this._isAnimated=!!r.k;for(var i=0,n=t.length;i<n;){if(t[i].mProps.dynamicProperties.length){this._isAnimated=!0;break}i+=1}}function SVGStyleData(t,e){this.data=t,this.type=t.ty,this.d="",this.lvl=e,this._mdf=!1,this.closed=!0===t.hd,this.pElem=createNS("path"),this.msElem=null}function DashProperty(t,e,r,i){var n;this.elem=t,this.frameId=-1,this.dataProps=createSizedArray(e.length),this.renderer=r,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",e.length?e.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(i);var s,a=e.length||0;for(n=0;n<a;n+=1)s=PropertyFactory.getProp(t,e[n].v,0,0,this),this.k=s.k||this.k,this.dataProps[n]={n:e[n].n,p:s};this.k||this.getValue(!0),this._isAnimated=this.k}function SVGStrokeStyleData(t,e,r){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=r,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(t,e,r){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=r}function SVGNoStyleData(t,e,r){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.style=r}function GradientProperty(t,e,r){this.data=e,this.c=createTypedArray("uint8c",4*e.p);var i=e.k.k[0].s?e.k.k[0].s.length-4*e.p:e.k.k.length-4*e.p;this.o=createTypedArray("float32",i),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=i,this.initDynamicPropertyContainer(r),this.prop=PropertyFactory.getProp(t,e.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}function SVGGradientFillStyleData(t,e,r){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.initGradientData(t,e,r)}function SVGGradientStrokeStyleData(t,e,r){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.initGradientData(t,e,r),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(t,e,r){this.transform={mProps:t,op:e,container:r},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},DashProperty.prototype.getValue=function(t){if((this.elem.globalData.frameId!==this.frameId||t)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||t,this._mdf)){var e=0,r=this.dataProps.length;for("svg"===this.renderer&&(this.dashStr=""),e=0;e<r;e+=1)"o"!==this.dataProps[e].n?"svg"===this.renderer?this.dashStr+=" "+this.dataProps[e].p.v:this.dashArray[e]=this.dataProps[e].p.v:this.dashoffset[0]=this.dataProps[e].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),extendPrototype([DynamicPropertyContainer],SVGNoStyleData),GradientProperty.prototype.comparePoints=function(t,e){for(var r=0,i=this.o.length/2;r<i;){if(Math.abs(t[4*r]-t[4*e+2*r])>.01)return!1;r+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var t=0,e=this.data.k.k.length;t<e;){if(!this.comparePoints(this.data.k.k[t].s,this.data.p))return!1;t+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(t){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||t){var e,r,i,n=4*this.data.p;for(e=0;e<n;e+=1)r=e%4==0?100:255,i=Math.round(this.prop.v[e]*r),this.c[e]!==i&&(this.c[e]=i,this._cmdf=!t);if(this.o.length)for(n=this.prop.v.length,e=4*this.data.p;e<n;e+=1)r=e%2==0?100:1,i=e%2==0?Math.round(100*this.prop.v[e]):this.prop.v[e],this.o[e-4*this.data.p]!==i&&(this.o[e-4*this.data.p]=i,this._omdf=!t);this._mdf=!t}},extendPrototype([DynamicPropertyContainer],GradientProperty),SVGGradientFillStyleData.prototype.initGradientData=function(t,e,r){this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.s=PropertyFactory.getProp(t,e.s,1,null,this),this.e=PropertyFactory.getProp(t,e.e,1,null,this),this.h=PropertyFactory.getProp(t,e.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(t,e.a||{k:0},0,degToRads,this),this.g=new GradientProperty(t,e.g,this),this.style=r,this.stops=[],this.setGradientData(r.pElem,e),this.setGradientOpacity(e,r),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(t,e){var r=createElementID(),i=createNS(1===e.t?"linearGradient":"radialGradient");i.setAttribute("id",r),i.setAttribute("spreadMethod","pad"),i.setAttribute("gradientUnits","userSpaceOnUse");var n,s,a,o=[];for(a=4*e.g.p,s=0;s<a;s+=4)n=createNS("stop"),i.appendChild(n),o.push(n);t.setAttribute("gf"===e.ty?"fill":"stroke","url("+getLocationHref()+"#"+r+")"),this.gf=i,this.cst=o},SVGGradientFillStyleData.prototype.setGradientOpacity=function(t,e){if(this.g._hasOpacity&&!this.g._collapsable){var r,i,n,s=createNS("mask"),a=createNS("path");s.appendChild(a);var o=createElementID(),l=createElementID();s.setAttribute("id",l);var h=createNS(1===t.t?"linearGradient":"radialGradient");h.setAttribute("id",o),h.setAttribute("spreadMethod","pad"),h.setAttribute("gradientUnits","userSpaceOnUse"),n=t.g.k.k[0].s?t.g.k.k[0].s.length:t.g.k.k.length;var u=this.stops;for(i=4*t.g.p;i<n;i+=2)(r=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),h.appendChild(r),u.push(r);a.setAttribute("gf"===t.ty?"fill":"stroke","url("+getLocationHref()+"#"+o+")"),"gs"===t.ty&&(a.setAttribute("stroke-linecap",lineCapEnum[t.lc||2]),a.setAttribute("stroke-linejoin",lineJoinEnum[t.lj||2]),1===t.lj&&a.setAttribute("stroke-miterlimit",t.ml)),this.of=h,this.ms=s,this.ost=u,this.maskId=l,e.msElem=a}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var buildShapeString=function(t,e,r,i){if(0===e)return"";var n,s=t.o,a=t.i,o=t.v,l=" M"+i.applyToPointStringified(o[0][0],o[0][1]);for(n=1;n<e;n+=1)l+=" C"+i.applyToPointStringified(s[n-1][0],s[n-1][1])+" "+i.applyToPointStringified(a[n][0],a[n][1])+" "+i.applyToPointStringified(o[n][0],o[n][1]);return r&&e&&(l+=" C"+i.applyToPointStringified(s[n-1][0],s[n-1][1])+" "+i.applyToPointStringified(a[0][0],a[0][1])+" "+i.applyToPointStringified(o[0][0],o[0][1]),l+="z"),l},SVGElementsRenderer=function(){var t=new Matrix,e=new Matrix;function r(t,e,r){(r||e.transform.op._mdf)&&e.transform.container.setAttribute("opacity",e.transform.op.v),(r||e.transform.mProps._mdf)&&e.transform.container.setAttribute("transform",e.transform.mProps.v.to2dCSS())}function i(){}function n(r,i,n){var s,a,o,l,h,u,c,p,d,f,m,g=i.styles.length,v=i.lvl;for(u=0;u<g;u+=1){if(l=i.sh._mdf||n,i.styles[u].lvl<v){for(p=e.reset(),f=v-i.styles[u].lvl,m=i.transformers.length-1;!l&&f>0;)l=i.transformers[m].mProps._mdf||l,f-=1,m-=1;if(l)for(f=v-i.styles[u].lvl,m=i.transformers.length-1;f>0;)d=i.transformers[m].mProps.v.props,p.transform(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15]),f-=1,m-=1}else p=t;if(a=(c=i.sh.paths)._length,l){for(o="",s=0;s<a;s+=1)(h=c.shapes[s])&&h._length&&(o+=buildShapeString(h,h._length,h.c,p));i.caches[u]=o}else o=i.caches[u];i.styles[u].d+=!0===r.hd?"":o,i.styles[u]._mdf=l||i.styles[u]._mdf}}function s(t,e,r){var i=e.style;(e.c._mdf||r)&&i.pElem.setAttribute("fill","rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||r)&&i.pElem.setAttribute("fill-opacity",e.o.v)}function a(t,e,r){o(t,e,r),l(0,e,r)}function o(t,e,r){var i,n,s,a,o,l=e.gf,h=e.g._hasOpacity,u=e.s.v,c=e.e.v;if(e.o._mdf||r){var p="gf"===t.ty?"fill-opacity":"stroke-opacity";e.style.pElem.setAttribute(p,e.o.v)}if(e.s._mdf||r){var d=1===t.t?"x1":"cx",f="x1"===d?"y1":"cy";l.setAttribute(d,u[0]),l.setAttribute(f,u[1]),h&&!e.g._collapsable&&(e.of.setAttribute(d,u[0]),e.of.setAttribute(f,u[1]))}if(e.g._cmdf||r){i=e.cst;var m=e.g.c;for(s=i.length,n=0;n<s;n+=1)(a=i[n]).setAttribute("offset",m[4*n]+"%"),a.setAttribute("stop-color","rgb("+m[4*n+1]+","+m[4*n+2]+","+m[4*n+3]+")")}if(h&&(e.g._omdf||r)){var g=e.g.o;for(s=(i=e.g._collapsable?e.cst:e.ost).length,n=0;n<s;n+=1)a=i[n],e.g._collapsable||a.setAttribute("offset",g[2*n]+"%"),a.setAttribute("stop-opacity",g[2*n+1])}if(1===t.t)(e.e._mdf||r)&&(l.setAttribute("x2",c[0]),l.setAttribute("y2",c[1]),h&&!e.g._collapsable&&(e.of.setAttribute("x2",c[0]),e.of.setAttribute("y2",c[1])));else if((e.s._mdf||e.e._mdf||r)&&(o=Math.sqrt(Math.pow(u[0]-c[0],2)+Math.pow(u[1]-c[1],2)),l.setAttribute("r",o),h&&!e.g._collapsable&&e.of.setAttribute("r",o)),e.e._mdf||e.h._mdf||e.a._mdf||r){o||(o=Math.sqrt(Math.pow(u[0]-c[0],2)+Math.pow(u[1]-c[1],2)));var v=Math.atan2(c[1]-u[1],c[0]-u[0]),y=e.h.v;y>=1?y=.99:y<=-1&&(y=-.99);var x=o*y,_=Math.cos(v+e.a.v)*x+u[0],b=Math.sin(v+e.a.v)*x+u[1];l.setAttribute("fx",_),l.setAttribute("fy",b),h&&!e.g._collapsable&&(e.of.setAttribute("fx",_),e.of.setAttribute("fy",b))}}function l(t,e,r){var i=e.style,n=e.d;n&&(n._mdf||r)&&n.dashStr&&(i.pElem.setAttribute("stroke-dasharray",n.dashStr),i.pElem.setAttribute("stroke-dashoffset",n.dashoffset[0])),e.c&&(e.c._mdf||r)&&i.pElem.setAttribute("stroke","rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||r)&&i.pElem.setAttribute("stroke-opacity",e.o.v),(e.w._mdf||r)&&(i.pElem.setAttribute("stroke-width",e.w.v),i.msElem&&i.msElem.setAttribute("stroke-width",e.w.v))}return{createRenderFunction:function(t){switch(t.ty){case"fl":return s;case"gf":return o;case"gs":return a;case"st":return l;case"sh":case"el":case"rc":case"sr":return n;case"tr":return r;case"no":return i;default:return null}}}}();function SVGShapeElement(t,e,r){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(t,e,r),this.prevViewData=[]}function LetterProps(t,e,r,i,n,s){this.o=t,this.sw=e,this.sc=r,this.fc=i,this.m=n,this.p=s,this._mdf={o:!0,sw:!!e,sc:!!r,fc:!!i,m:!0,p:!0}}function TextProperty(t,e){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,e.d&&e.d.sid&&(e.d=t.globalData.slotManager.getProp(e.d)),this.data=e,this.elem=t,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var t,e,r,i,n=this.shapes.length,s=this.stylesList.length,a=[],o=!1;for(r=0;r<s;r+=1){for(i=this.stylesList[r],o=!1,a.length=0,t=0;t<n;t+=1)-1!==(e=this.shapes[t]).styles.indexOf(i)&&(a.push(e),o=e._isAnimated||o);a.length>1&&o&&this.setShapesAsAnimated(a)}},SVGShapeElement.prototype.setShapesAsAnimated=function(t){var e,r=t.length;for(e=0;e<r;e+=1)t[e].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(t,e){var r,i=new SVGStyleData(t,e),n=i.pElem;return"st"===t.ty?r=new SVGStrokeStyleData(this,t,i):"fl"===t.ty?r=new SVGFillStyleData(this,t,i):"gf"===t.ty||"gs"===t.ty?(r=new("gf"===t.ty?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,t,i),this.globalData.defs.appendChild(r.gf),r.maskId&&(this.globalData.defs.appendChild(r.ms),this.globalData.defs.appendChild(r.of),n.setAttribute("mask","url("+getLocationHref()+"#"+r.maskId+")"))):"no"===t.ty&&(r=new SVGNoStyleData(this,t,i)),"st"!==t.ty&&"gs"!==t.ty||(n.setAttribute("stroke-linecap",lineCapEnum[t.lc||2]),n.setAttribute("stroke-linejoin",lineJoinEnum[t.lj||2]),n.setAttribute("fill-opacity","0"),1===t.lj&&n.setAttribute("stroke-miterlimit",t.ml)),2===t.r&&n.setAttribute("fill-rule","evenodd"),t.ln&&n.setAttribute("id",t.ln),t.cl&&n.setAttribute("class",t.cl),t.bm&&(n.style["mix-blend-mode"]=getBlendMode(t.bm)),this.stylesList.push(i),this.addToAnimatedContents(t,r),r},SVGShapeElement.prototype.createGroupElement=function(t){var e=new ShapeGroupData;return t.ln&&e.gr.setAttribute("id",t.ln),t.cl&&e.gr.setAttribute("class",t.cl),t.bm&&(e.gr.style["mix-blend-mode"]=getBlendMode(t.bm)),e},SVGShapeElement.prototype.createTransformElement=function(t,e){var r=TransformPropertyFactory.getTransformProperty(this,t,this),i=new SVGTransformData(r,r.o,e);return this.addToAnimatedContents(t,i),i},SVGShapeElement.prototype.createShapeElement=function(t,e,r){var i=4;"rc"===t.ty?i=5:"el"===t.ty?i=6:"sr"===t.ty&&(i=7);var n=new SVGShapeData(e,r,ShapePropertyFactory.getShapeProp(this,t,i,this));return this.shapes.push(n),this.addShapeToModifiers(n),this.addToAnimatedContents(t,n),n},SVGShapeElement.prototype.addToAnimatedContents=function(t,e){for(var r=0,i=this.animatedContents.length;r<i;){if(this.animatedContents[r].element===e)return;r+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(t),element:e,data:t})},SVGShapeElement.prototype.setElementStyles=function(t){var e,r=t.styles,i=this.stylesList.length;for(e=0;e<i;e+=1)this.stylesList[e].closed||r.push(this.stylesList[e])},SVGShapeElement.prototype.reloadShapes=function(){var t;this._isFirstFrame=!0;var e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(t,e,r,i,n,s,a){var o,l,h,u,c,p,d=[].concat(s),f=t.length-1,m=[],g=[];for(o=f;o>=0;o-=1){if((p=this.searchProcessedElement(t[o]))?e[o]=r[p-1]:t[o]._render=a,"fl"===t[o].ty||"st"===t[o].ty||"gf"===t[o].ty||"gs"===t[o].ty||"no"===t[o].ty)p?e[o].style.closed=!1:e[o]=this.createStyleElement(t[o],n),t[o]._render&&e[o].style.pElem.parentNode!==i&&i.appendChild(e[o].style.pElem),m.push(e[o].style);else if("gr"===t[o].ty){if(p)for(h=e[o].it.length,l=0;l<h;l+=1)e[o].prevViewData[l]=e[o].it[l];else e[o]=this.createGroupElement(t[o]);this.searchShapes(t[o].it,e[o].it,e[o].prevViewData,e[o].gr,n+1,d,a),t[o]._render&&e[o].gr.parentNode!==i&&i.appendChild(e[o].gr)}else"tr"===t[o].ty?(p||(e[o]=this.createTransformElement(t[o],i)),u=e[o].transform,d.push(u)):"sh"===t[o].ty||"rc"===t[o].ty||"el"===t[o].ty||"sr"===t[o].ty?(p||(e[o]=this.createShapeElement(t[o],d,n)),this.setElementStyles(e[o])):"tm"===t[o].ty||"rd"===t[o].ty||"ms"===t[o].ty||"pb"===t[o].ty||"zz"===t[o].ty||"op"===t[o].ty?(p?(c=e[o]).closed=!1:((c=ShapeModifiers.getModifier(t[o].ty)).init(this,t[o]),e[o]=c,this.shapeModifiers.push(c)),g.push(c)):"rp"===t[o].ty&&(p?(c=e[o]).closed=!0:(c=ShapeModifiers.getModifier(t[o].ty),e[o]=c,c.init(this,t,o,e),this.shapeModifiers.push(c),a=!1),g.push(c));this.addProcessedElement(t[o],o+1)}for(f=m.length,o=0;o<f;o+=1)m[o].closed=!0;for(f=g.length,o=0;o<f;o+=1)g[o].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){var t;this.renderModifiers();var e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].reset();for(this.renderShape(),t=0;t<e;t+=1)(this.stylesList[t]._mdf||this._isFirstFrame)&&(this.stylesList[t].msElem&&(this.stylesList[t].msElem.setAttribute("d",this.stylesList[t].d),this.stylesList[t].d="M0 0"+this.stylesList[t].d),this.stylesList[t].pElem.setAttribute("d",this.stylesList[t].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var t,e,r=this.animatedContents.length;for(t=0;t<r;t+=1)e=this.animatedContents[t],(this._isFirstFrame||e.element._isAnimated)&&!0!==e.data&&e.fn(e.data,e.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},LetterProps.prototype.update=function(t,e,r,i,n,s){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var a=!1;return this.o!==t&&(this.o=t,this._mdf.o=!0,a=!0),this.sw!==e&&(this.sw=e,this._mdf.sw=!0,a=!0),this.sc!==r&&(this.sc=r,this._mdf.sc=!0,a=!0),this.fc!==i&&(this.fc=i,this._mdf.fc=!0,a=!0),this.m!==n&&(this.m=n,this._mdf.m=!0,a=!0),!s.length||this.p[0]===s[0]&&this.p[1]===s[1]&&this.p[4]===s[4]&&this.p[5]===s[5]&&this.p[12]===s[12]&&this.p[13]===s[13]||(this.p=s,this._mdf.p=!0,a=!0),a},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},TextProperty.prototype.setCurrentData=function(t){t.__complete||this.completeTextData(t),this.currentData=t,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(t){this.effectsSequence.push(t),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(t){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||t){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var e=this.currentData,r=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{var i;this.lock=!0,this._mdf=!1;var n=this.effectsSequence.length,s=t||this.data.d.k[this.keysIndex].s;for(i=0;i<n;i+=1)s=r!==this.keysIndex?this.effectsSequence[i](s,s.t):this.effectsSequence[i](this.currentData,s.t);e!==s&&this.setCurrentData(s),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var t=this.data.d.k,e=this.elem.comp.renderedFrame,r=0,i=t.length;r<=i-1&&!(r===i-1||t[r+1].t>e);)r+=1;return this.keysIndex!==r&&(this.keysIndex=r),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(t){for(var e,r,i=[],n=0,s=t.length,a=!1;n<s;)e=t.charCodeAt(n),FontManager.isCombinedCharacter(e)?i[i.length-1]+=t.charAt(n):e>=55296&&e<=56319?(r=t.charCodeAt(n+1))>=56320&&r<=57343?(a||FontManager.isModifier(e,r)?(i[i.length-1]+=t.substr(n,2),a=!1):i.push(t.substr(n,2)),n+=1):i.push(t.charAt(n)):e>56319?(r=t.charCodeAt(n+1),FontManager.isZeroWidthJoiner(e,r)?(a=!0,i[i.length-1]+=t.substr(n,2),n+=1):i.push(t.charAt(n))):FontManager.isZeroWidthJoiner(e)?(i[i.length-1]+=t.charAt(n),a=!0):i.push(t.charAt(n)),n+=1;return i},TextProperty.prototype.completeTextData=function(t){t.__complete=!0;var e,r,i,n,s,a,o,l=this.elem.globalData.fontManager,h=this.data,u=[],c=0,p=h.m.g,d=0,f=0,m=0,g=[],v=0,y=0,x=l.getFontByName(t.f),_=0,b=getFontProperties(x);t.fWeight=b.weight,t.fStyle=b.style,t.finalSize=t.s,t.finalText=this.buildFinalText(t.t),r=t.finalText.length,t.finalLineHeight=t.lh;var w,S=t.tr/1e3*t.finalSize;if(t.sz)for(var M,T,E=!0,P=t.sz[0],C=t.sz[1];E;){M=0,v=0,r=(T=this.buildFinalText(t.t)).length,S=t.tr/1e3*t.finalSize;var A=-1;for(e=0;e<r;e+=1)w=T[e].charCodeAt(0),i=!1," "===T[e]?A=e:13!==w&&3!==w||(v=0,i=!0,M+=t.finalLineHeight||1.2*t.finalSize),l.chars?(o=l.getCharData(T[e],x.fStyle,x.fFamily),_=i?0:o.w*t.finalSize/100):_=l.measureText(T[e],t.f,t.finalSize),v+_>P&&" "!==T[e]?(-1===A?r+=1:e=A,M+=t.finalLineHeight||1.2*t.finalSize,T.splice(e,A===e?1:0,"\r"),A=-1,v=0):(v+=_,v+=S);M+=x.ascent*t.finalSize/100,this.canResize&&t.finalSize>this.minimumFontSize&&C<M?(t.finalSize-=1,t.finalLineHeight=t.finalSize*t.lh/t.s):(t.finalText=T,r=t.finalText.length,E=!1)}v=-S,_=0;var D,k=0;for(e=0;e<r;e+=1)if(i=!1,13===(w=(D=t.finalText[e]).charCodeAt(0))||3===w?(k=0,g.push(v),y=v>y?v:y,v=-2*S,n="",i=!0,m+=1):n=D,l.chars?(o=l.getCharData(D,x.fStyle,l.getFontByName(t.f).fFamily),_=i?0:o.w*t.finalSize/100):_=l.measureText(n,t.f,t.finalSize)," "===D?k+=_+S:(v+=_+S+k,k=0),u.push({l:_,an:_,add:d,n:i,anIndexes:[],val:n,line:m,animatorJustifyOffset:0}),2==p){if(d+=_,""===n||" "===n||e===r-1){for(""!==n&&" "!==n||(d-=_);f<=e;)u[f].an=d,u[f].ind=c,u[f].extra=_,f+=1;c+=1,d=0}}else if(3==p){if(d+=_,""===n||e===r-1){for(""===n&&(d-=_);f<=e;)u[f].an=d,u[f].ind=c,u[f].extra=_,f+=1;d=0,c+=1}}else u[c].ind=c,u[c].extra=0,c+=1;if(t.l=u,y=v>y?v:y,g.push(v),t.sz)t.boxWidth=t.sz[0],t.justifyOffset=0;else switch(t.boxWidth=y,t.j){case 1:t.justifyOffset=-t.boxWidth;break;case 2:t.justifyOffset=-t.boxWidth/2;break;default:t.justifyOffset=0}t.lineWidths=g;var R,I,L,F,O=h.a;a=O.length;var z=[];for(s=0;s<a;s+=1){for((R=O[s]).a.sc&&(t.strokeColorAnim=!0),R.a.sw&&(t.strokeWidthAnim=!0),(R.a.fc||R.a.fh||R.a.fs||R.a.fb)&&(t.fillColorAnim=!0),F=0,L=R.s.b,e=0;e<r;e+=1)(I=u[e]).anIndexes[s]=F,(1==L&&""!==I.val||2==L&&""!==I.val&&" "!==I.val||3==L&&(I.n||" "==I.val||e==r-1)||4==L&&(I.n||e==r-1))&&(1===R.s.rn&&z.push(F),F+=1);h.a[s].s.totalChars=F;var B,V=-1;if(1===R.s.rn)for(e=0;e<r;e+=1)V!=(I=u[e]).anIndexes[s]&&(V=I.anIndexes[s],B=z.splice(Math.floor(Math.random()*z.length),1)[0]),I.anIndexes[s]=B}t.yOffset=t.finalLineHeight||1.2*t.finalSize,t.ls=t.ls||0,t.ascent=x.ascent*t.finalSize/100},TextProperty.prototype.updateDocumentData=function(t,e){e=void 0===e?this.keysIndex:e;var r=this.copyData({},this.data.d.k[e].s);r=this.copyData(r,t),this.data.d.k[e].s=r,this.recalculate(e),this.setCurrentData(r),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(t){var e=this.data.d.k[t].s;e.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(e)},TextProperty.prototype.canResizeFont=function(t){this.canResize=t,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(t){this.minimumFontSize=Math.floor(t)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var t=Math.max,e=Math.min,r=Math.floor;function i(t,e){this._currentTextLength=-1,this.k=!1,this.data=e,this.elem=t,this.comp=t.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(t),this.s=PropertyFactory.getProp(t,e.s||{k:0},0,0,this),this.e="e"in e?PropertyFactory.getProp(t,e.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(t,e.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(t,e.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(t,e.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(t,e.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(t,e.a,0,.01,this),this.dynamicProperties.length||this.getValue()}return i.prototype={getMult:function(i){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var n=0,s=0,a=1,o=1;this.ne.v>0?n=this.ne.v/100:s=-this.ne.v/100,this.xe.v>0?a=1-this.xe.v/100:o=1+this.xe.v/100;var l=BezierFactory.getBezierEasing(n,s,a,o).get,h=0,u=this.finalS,c=this.finalE,p=this.data.sh;if(2===p)h=l(h=c===u?i>=c?1:0:t(0,e(.5/(c-u)+(i-u)/(c-u),1)));else if(3===p)h=l(h=c===u?i>=c?0:1:1-t(0,e(.5/(c-u)+(i-u)/(c-u),1)));else if(4===p)c===u?h=0:(h=t(0,e(.5/(c-u)+(i-u)/(c-u),1)))<.5?h*=2:h=1-2*(h-.5),h=l(h);else if(5===p){if(c===u)h=0;else{var d=c-u,f=-d/2+(i=e(t(0,i+.5-u),c-u)),m=d/2;h=Math.sqrt(1-f*f/(m*m))}h=l(h)}else 6===p?(c===u?h=0:(i=e(t(0,i+.5-u),c-u),h=(1+Math.cos(Math.PI+2*Math.PI*i/(c-u)))/2),h=l(h)):(i>=r(u)&&(h=t(0,e(i-u<0?e(c,1)-(u-i):c-i,1))),h=l(h));if(100!==this.sm.v){var g=.01*this.sm.v;0===g&&(g=1e-8);var v=.5-.5*g;h<v?h=0:(h=(h-v)/g)>1&&(h=1)}return h*this.a.v},getValue:function(t){this.iterateDynamicProperties(),this._mdf=t||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,t&&2===this.data.r&&(this.e.v=this._currentTextLength);var e=2===this.data.r?1:100/this.data.totalChars,r=this.o.v/e,i=this.s.v/e+r,n=this.e.v/e+r;if(i>n){var s=i;i=n,n=s}this.finalS=i,this.finalE=n}},extendPrototype([DynamicPropertyContainer],i),{getTextSelectorProp:function(t,e,r){return new i(t,e,r)}}}();function TextAnimatorDataProperty(t,e,r){var i={propType:!1},n=PropertyFactory.getProp,s=e.a;this.a={r:s.r?n(t,s.r,0,degToRads,r):i,rx:s.rx?n(t,s.rx,0,degToRads,r):i,ry:s.ry?n(t,s.ry,0,degToRads,r):i,sk:s.sk?n(t,s.sk,0,degToRads,r):i,sa:s.sa?n(t,s.sa,0,degToRads,r):i,s:s.s?n(t,s.s,1,.01,r):i,a:s.a?n(t,s.a,1,0,r):i,o:s.o?n(t,s.o,0,.01,r):i,p:s.p?n(t,s.p,1,0,r):i,sw:s.sw?n(t,s.sw,0,0,r):i,sc:s.sc?n(t,s.sc,1,0,r):i,fc:s.fc?n(t,s.fc,1,0,r):i,fh:s.fh?n(t,s.fh,0,0,r):i,fs:s.fs?n(t,s.fs,0,.01,r):i,fb:s.fb?n(t,s.fb,0,.01,r):i,t:s.t?n(t,s.t,0,0,r):i},this.s=TextSelectorProp.getTextSelectorProp(t,e.s,r),this.s.t=e.s.t}function TextAnimatorProperty(t,e,r){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=t,this._renderType=e,this._elem=r,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(r)}function ITextElement(){}TextAnimatorProperty.prototype.searchProperties=function(){var t,e,r=this._textData.a.length,i=PropertyFactory.getProp;for(t=0;t<r;t+=1)e=this._textData.a[t],this._animatorsData[t]=new TextAnimatorDataProperty(this._elem,e,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:i(this._elem,this._textData.p.a,0,0,this),f:i(this._elem,this._textData.p.f,0,0,this),l:i(this._elem,this._textData.p.l,0,0,this),r:i(this._elem,this._textData.p.r,0,0,this),p:i(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=i(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(t,e){if(this.lettersChangedFlag=e,this._mdf||this._isFirstFrame||e||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var r,i,n,s,a,o,l,h,u,c,p,d,f,m,g,v,y,x,_,b=this._moreOptions.alignment.v,w=this._animatorsData,S=this._textData,M=this.mHelper,T=this._renderType,E=this.renderedLetters.length,P=t.l;if(this._hasMaskedPath){if(_=this._pathData.m,!this._pathData.n||this._pathData._mdf){var C,A=_.v;for(this._pathData.r.v&&(A=A.reverse()),a={tLength:0,segments:[]},s=A._length-1,v=0,n=0;n<s;n+=1)C=bez.buildBezierData(A.v[n],A.v[n+1],[A.o[n][0]-A.v[n][0],A.o[n][1]-A.v[n][1]],[A.i[n+1][0]-A.v[n+1][0],A.i[n+1][1]-A.v[n+1][1]]),a.tLength+=C.segmentLength,a.segments.push(C),v+=C.segmentLength;n=s,_.v.c&&(C=bez.buildBezierData(A.v[n],A.v[0],[A.o[n][0]-A.v[n][0],A.o[n][1]-A.v[n][1]],[A.i[0][0]-A.v[0][0],A.i[0][1]-A.v[0][1]]),a.tLength+=C.segmentLength,a.segments.push(C),v+=C.segmentLength),this._pathData.pi=a}if(a=this._pathData.pi,o=this._pathData.f.v,p=0,c=1,h=0,u=!0,m=a.segments,o<0&&_.v.c)for(a.tLength<Math.abs(o)&&(o=-Math.abs(o)%a.tLength),c=(f=m[p=m.length-1].points).length-1;o<0;)o+=f[c].partialLength,(c-=1)<0&&(c=(f=m[p-=1].points).length-1);d=(f=m[p].points)[c-1],g=(l=f[c]).partialLength}s=P.length,r=0,i=0;var D,k,R,I,L,F=1.2*t.finalSize*.714,O=!0;R=w.length;var z,B,V,N,G,W,H,U,j,X,q,Y,Z=-1,$=o,J=p,K=c,Q=-1,tt="",et=this.defaultPropsArray;if(2===t.j||1===t.j){var rt=0,it=0,nt=2===t.j?-.5:-1,st=0,at=!0;for(n=0;n<s;n+=1)if(P[n].n){for(rt&&(rt+=it);st<n;)P[st].animatorJustifyOffset=rt,st+=1;rt=0,at=!0}else{for(k=0;k<R;k+=1)(D=w[k].a).t.propType&&(at&&2===t.j&&(it+=D.t.v*nt),(L=w[k].s.getMult(P[n].anIndexes[k],S.a[k].s.totalChars)).length?rt+=D.t.v*L[0]*nt:rt+=D.t.v*L*nt);at=!1}for(rt&&(rt+=it);st<n;)P[st].animatorJustifyOffset=rt,st+=1}for(n=0;n<s;n+=1){if(M.reset(),N=1,P[n].n)r=0,i+=t.yOffset,i+=O?1:0,o=$,O=!1,this._hasMaskedPath&&(c=K,d=(f=m[p=J].points)[c-1],g=(l=f[c]).partialLength,h=0),tt="",q="",j="",Y="",et=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Q!==P[n].line){switch(t.j){case 1:o+=v-t.lineWidths[P[n].line];break;case 2:o+=(v-t.lineWidths[P[n].line])/2}Q=P[n].line}Z!==P[n].ind&&(P[Z]&&(o+=P[Z].extra),o+=P[n].an/2,Z=P[n].ind),o+=b[0]*P[n].an*.005;var ot=0;for(k=0;k<R;k+=1)(D=w[k].a).p.propType&&((L=w[k].s.getMult(P[n].anIndexes[k],S.a[k].s.totalChars)).length?ot+=D.p.v[0]*L[0]:ot+=D.p.v[0]*L),D.a.propType&&((L=w[k].s.getMult(P[n].anIndexes[k],S.a[k].s.totalChars)).length?ot+=D.a.v[0]*L[0]:ot+=D.a.v[0]*L);for(u=!0,this._pathData.a.v&&(o=.5*P[0].an+(v-this._pathData.f.v-.5*P[0].an-.5*P[P.length-1].an)*Z/(s-1),o+=this._pathData.f.v);u;)h+g>=o+ot||!f?(y=(o+ot-h)/l.partialLength,B=d.point[0]+(l.point[0]-d.point[0])*y,V=d.point[1]+(l.point[1]-d.point[1])*y,M.translate(-b[0]*P[n].an*.005,-b[1]*F*.01),u=!1):f&&(h+=l.partialLength,(c+=1)>=f.length&&(c=0,m[p+=1]?f=m[p].points:_.v.c?(c=0,f=m[p=0].points):(h-=l.partialLength,f=null)),f&&(d=l,g=(l=f[c]).partialLength));z=P[n].an/2-P[n].add,M.translate(-z,0,0)}else z=P[n].an/2-P[n].add,M.translate(-z,0,0),M.translate(-b[0]*P[n].an*.005,-b[1]*F*.01,0);for(k=0;k<R;k+=1)(D=w[k].a).t.propType&&(L=w[k].s.getMult(P[n].anIndexes[k],S.a[k].s.totalChars),0===r&&0===t.j||(this._hasMaskedPath?L.length?o+=D.t.v*L[0]:o+=D.t.v*L:L.length?r+=D.t.v*L[0]:r+=D.t.v*L));for(t.strokeWidthAnim&&(W=t.sw||0),t.strokeColorAnim&&(G=t.sc?[t.sc[0],t.sc[1],t.sc[2]]:[0,0,0]),t.fillColorAnim&&t.fc&&(H=[t.fc[0],t.fc[1],t.fc[2]]),k=0;k<R;k+=1)(D=w[k].a).a.propType&&((L=w[k].s.getMult(P[n].anIndexes[k],S.a[k].s.totalChars)).length?M.translate(-D.a.v[0]*L[0],-D.a.v[1]*L[1],D.a.v[2]*L[2]):M.translate(-D.a.v[0]*L,-D.a.v[1]*L,D.a.v[2]*L));for(k=0;k<R;k+=1)(D=w[k].a).s.propType&&((L=w[k].s.getMult(P[n].anIndexes[k],S.a[k].s.totalChars)).length?M.scale(1+(D.s.v[0]-1)*L[0],1+(D.s.v[1]-1)*L[1],1):M.scale(1+(D.s.v[0]-1)*L,1+(D.s.v[1]-1)*L,1));for(k=0;k<R;k+=1){if(D=w[k].a,L=w[k].s.getMult(P[n].anIndexes[k],S.a[k].s.totalChars),D.sk.propType&&(L.length?M.skewFromAxis(-D.sk.v*L[0],D.sa.v*L[1]):M.skewFromAxis(-D.sk.v*L,D.sa.v*L)),D.r.propType&&(L.length?M.rotateZ(-D.r.v*L[2]):M.rotateZ(-D.r.v*L)),D.ry.propType&&(L.length?M.rotateY(D.ry.v*L[1]):M.rotateY(D.ry.v*L)),D.rx.propType&&(L.length?M.rotateX(D.rx.v*L[0]):M.rotateX(D.rx.v*L)),D.o.propType&&(L.length?N+=(D.o.v*L[0]-N)*L[0]:N+=(D.o.v*L-N)*L),t.strokeWidthAnim&&D.sw.propType&&(L.length?W+=D.sw.v*L[0]:W+=D.sw.v*L),t.strokeColorAnim&&D.sc.propType)for(U=0;U<3;U+=1)L.length?G[U]+=(D.sc.v[U]-G[U])*L[0]:G[U]+=(D.sc.v[U]-G[U])*L;if(t.fillColorAnim&&t.fc){if(D.fc.propType)for(U=0;U<3;U+=1)L.length?H[U]+=(D.fc.v[U]-H[U])*L[0]:H[U]+=(D.fc.v[U]-H[U])*L;D.fh.propType&&(H=L.length?addHueToRGB(H,D.fh.v*L[0]):addHueToRGB(H,D.fh.v*L)),D.fs.propType&&(H=L.length?addSaturationToRGB(H,D.fs.v*L[0]):addSaturationToRGB(H,D.fs.v*L)),D.fb.propType&&(H=L.length?addBrightnessToRGB(H,D.fb.v*L[0]):addBrightnessToRGB(H,D.fb.v*L))}}for(k=0;k<R;k+=1)(D=w[k].a).p.propType&&(L=w[k].s.getMult(P[n].anIndexes[k],S.a[k].s.totalChars),this._hasMaskedPath?L.length?M.translate(0,D.p.v[1]*L[0],-D.p.v[2]*L[1]):M.translate(0,D.p.v[1]*L,-D.p.v[2]*L):L.length?M.translate(D.p.v[0]*L[0],D.p.v[1]*L[1],-D.p.v[2]*L[2]):M.translate(D.p.v[0]*L,D.p.v[1]*L,-D.p.v[2]*L));if(t.strokeWidthAnim&&(j=W<0?0:W),t.strokeColorAnim&&(X="rgb("+Math.round(255*G[0])+","+Math.round(255*G[1])+","+Math.round(255*G[2])+")"),t.fillColorAnim&&t.fc&&(q="rgb("+Math.round(255*H[0])+","+Math.round(255*H[1])+","+Math.round(255*H[2])+")"),this._hasMaskedPath){if(M.translate(0,-t.ls),M.translate(0,b[1]*F*.01+i,0),this._pathData.p.v){x=(l.point[1]-d.point[1])/(l.point[0]-d.point[0]);var lt=180*Math.atan(x)/Math.PI;l.point[0]<d.point[0]&&(lt+=180),M.rotate(-lt*Math.PI/180)}M.translate(B,V,0),o-=b[0]*P[n].an*.005,P[n+1]&&Z!==P[n+1].ind&&(o+=P[n].an/2,o+=.001*t.tr*t.finalSize)}else{switch(M.translate(r,i,0),t.ps&&M.translate(t.ps[0],t.ps[1]+t.ascent,0),t.j){case 1:M.translate(P[n].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[P[n].line]),0,0);break;case 2:M.translate(P[n].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[P[n].line])/2,0,0)}M.translate(0,-t.ls),M.translate(z,0,0),M.translate(b[0]*P[n].an*.005,b[1]*F*.01,0),r+=P[n].l+.001*t.tr*t.finalSize}"html"===T?tt=M.toCSS():"svg"===T?tt=M.to2dCSS():et=[M.props[0],M.props[1],M.props[2],M.props[3],M.props[4],M.props[5],M.props[6],M.props[7],M.props[8],M.props[9],M.props[10],M.props[11],M.props[12],M.props[13],M.props[14],M.props[15]],Y=N}E<=n?(I=new LetterProps(Y,j,X,q,tt,et),this.renderedLetters.push(I),E+=1,this.lettersChangedFlag=!0):(I=this.renderedLetters[n],this.lettersChangedFlag=I.update(Y,j,X,q,tt,et)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),ITextElement.prototype.initElement=function(t,e,r){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(t,e,r),this.textProperty=new TextProperty(this,t.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(t.t,this.renderType,this),this.initTransform(t,e,r),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)},ITextElement.prototype.createPathShape=function(t,e){var r,i,n=e.length,s="";for(r=0;r<n;r+=1)"sh"===e[r].ty&&(i=e[r].ks.k,s+=buildShapeString(i,i.i.length,!0,t));return s},ITextElement.prototype.updateDocumentData=function(t,e){this.textProperty.updateDocumentData(t,e)},ITextElement.prototype.canResizeFont=function(t){this.textProperty.canResizeFont(t)},ITextElement.prototype.setMinimumFontSize=function(t){this.textProperty.setMinimumFontSize(t)},ITextElement.prototype.applyTextPropertiesToMatrix=function(t,e,r,i,n){switch(t.ps&&e.translate(t.ps[0],t.ps[1]+t.ascent,0),e.translate(0,-t.ls,0),t.j){case 1:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[r]),0,0);break;case 2:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[r])/2,0,0)}e.translate(i,n,0)},ITextElement.prototype.buildColor=function(t){return"rgb("+Math.round(255*t[0])+","+Math.round(255*t[1])+","+Math.round(255*t[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){};var emptyShapeData={shapes:[]};function SVGTextLottieElement(t,e,r){this.textSpans=[],this.renderType="svg",this.initElement(t,e,r)}function ISolidElement(t,e,r){this.initElement(t,e,r)}function NullElement(t,e,r){this.initFrame(),this.initBaseData(t,e,r),this.initFrame(),this.initTransform(t,e,r),this.initHierarchy()}function SVGRendererBase(){}function ICompElement(){}function SVGCompElement(t,e,r){this.layers=t.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,r),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function SVGRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var r="";if(e&&e.title){var i=createNS("title"),n=createElementID();i.setAttribute("id",n),i.textContent=e.title,this.svgElement.appendChild(i),r+=n}if(e&&e.description){var s=createNS("desc"),a=createElementID();s.setAttribute("id",a),s.textContent=e.description,this.svgElement.appendChild(s),r+=" "+a}r&&this.svgElement.setAttribute("aria-labelledby",r);var o=createNS("defs");this.svgElement.appendChild(o);var l=createNS("g");this.svgElement.appendChild(l),this.layerElement=l,this.renderConfig={preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",progressiveLoad:e&&e.progressiveLoad||!1,hideOnTransparent:!(e&&!1===e.hideOnTransparent),viewBoxOnly:e&&e.viewBoxOnly||!1,viewBoxSize:e&&e.viewBoxSize||!1,className:e&&e.className||"",id:e&&e.id||"",focusable:e&&e.focusable,filterSize:{width:e&&e.filterSize&&e.filterSize.width||"100%",height:e&&e.filterSize&&e.filterSize.height||"100%",x:e&&e.filterSize&&e.filterSize.x||"0%",y:e&&e.filterSize&&e.filterSize.y||"0%"},width:e&&e.width,height:e&&e.height,runExpressions:!e||void 0===e.runExpressions||e.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:o,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function CVContextData(){var t;for(this.saved=[],this.cArrPos=0,this.cTr=new Matrix,this.cO=1,this.savedOp=createTypedArray("float32",15),t=0;t<15;t+=1)this.saved[t]=createTypedArray("float32",16);this._length=15}function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(t){for(var e=0,r=t.length,i=[],n="";e<r;)t[e]===String.fromCharCode(13)||t[e]===String.fromCharCode(3)?(i.push(n),n=""):n+=t[e],e+=1;return i.push(n),i},SVGTextLottieElement.prototype.buildShapeData=function(t,e){if(t.shapes&&t.shapes.length){var r=t.shapes[0];if(r.it){var i=r.it[r.it.length-1];i.s&&(i.s.k[0]=e,i.s.k[1]=e)}}return t},SVGTextLottieElement.prototype.buildNewText=function(){var t,e;this.addDynamicProperty(this);var r=this.textProperty.currentData;this.renderedLetters=createSizedArray(r?r.l.length:0),r.fc?this.layerElement.setAttribute("fill",this.buildColor(r.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),r.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(r.sc)),this.layerElement.setAttribute("stroke-width",r.sw)),this.layerElement.setAttribute("font-size",r.finalSize);var i=this.globalData.fontManager.getFontByName(r.f);if(i.fClass)this.layerElement.setAttribute("class",i.fClass);else{this.layerElement.setAttribute("font-family",i.fFamily);var n=r.fWeight,s=r.fStyle;this.layerElement.setAttribute("font-style",s),this.layerElement.setAttribute("font-weight",n)}this.layerElement.setAttribute("aria-label",r.t);var a,o=r.l||[],l=!!this.globalData.fontManager.chars;e=o.length;var h=this.mHelper,u=this.data.singleShape,c=0,p=0,d=!0,f=.001*r.tr*r.finalSize;if(!u||l||r.sz){var m,g=this.textSpans.length;for(t=0;t<e;t+=1){if(this.textSpans[t]||(this.textSpans[t]={span:null,childSpan:null,glyph:null}),!l||!u||0===t){if(a=g>t?this.textSpans[t].span:createNS(l?"g":"text"),g<=t){if(a.setAttribute("stroke-linecap","butt"),a.setAttribute("stroke-linejoin","round"),a.setAttribute("stroke-miterlimit","4"),this.textSpans[t].span=a,l){var v=createNS("g");a.appendChild(v),this.textSpans[t].childSpan=v}this.textSpans[t].span=a,this.layerElement.appendChild(a)}a.style.display="inherit"}if(h.reset(),u&&(o[t].n&&(c=-f,p+=r.yOffset,p+=d?1:0,d=!1),this.applyTextPropertiesToMatrix(r,h,o[t].line,c,p),c+=o[t].l||0,c+=f),l){var y;if(1===(m=this.globalData.fontManager.getCharData(r.finalText[t],i.fStyle,this.globalData.fontManager.getFontByName(r.f).fFamily)).t)y=new SVGCompElement(m.data,this.globalData,this);else{var x=emptyShapeData;m.data&&m.data.shapes&&(x=this.buildShapeData(m.data,r.finalSize)),y=new SVGShapeElement(x,this.globalData,this)}if(this.textSpans[t].glyph){var _=this.textSpans[t].glyph;this.textSpans[t].childSpan.removeChild(_.layerElement),_.destroy()}this.textSpans[t].glyph=y,y._debug=!0,y.prepareFrame(0),y.renderFrame(),this.textSpans[t].childSpan.appendChild(y.layerElement),1===m.t&&this.textSpans[t].childSpan.setAttribute("transform","scale("+r.finalSize/100+","+r.finalSize/100+")")}else u&&a.setAttribute("transform","translate("+h.props[12]+","+h.props[13]+")"),a.textContent=o[t].val,a.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}u&&a&&a.setAttribute("d","")}else{var b=this.textContainer,w="start";switch(r.j){case 1:w="end";break;case 2:w="middle";break;default:w="start"}b.setAttribute("text-anchor",w),b.setAttribute("letter-spacing",f);var S=this.buildTextContents(r.finalText);for(e=S.length,p=r.ps?r.ps[1]+r.ascent:0,t=0;t<e;t+=1)(a=this.textSpans[t].span||createNS("tspan")).textContent=S[t],a.setAttribute("x",0),a.setAttribute("y",p),a.style.display="inherit",b.appendChild(a),this.textSpans[t]||(this.textSpans[t]={span:null,glyph:null}),this.textSpans[t].span=a,p+=r.finalLineHeight;this.layerElement.appendChild(b)}for(;t<this.textSpans.length;)this.textSpans[t].span.style.display="none",t+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var t=this.layerElement.getBBox();this.bbox={top:t.y,left:t.x,width:t.width,height:t.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var t,e,r=this.textSpans.length;for(this.renderedFrame=this.comp.renderedFrame,t=0;t<r;t+=1)(e=this.textSpans[t].glyph)&&(e.prepareFrame(this.comp.renderedFrame-this.data.st),e._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if((!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){var t,e;this._sizeChanged=!0;var r,i,n,s=this.textAnimator.renderedLetters,a=this.textProperty.currentData.l;for(e=a.length,t=0;t<e;t+=1)a[t].n||(r=s[t],i=this.textSpans[t].span,(n=this.textSpans[t].glyph)&&n.renderFrame(),r._mdf.m&&i.setAttribute("transform",r.m),r._mdf.o&&i.setAttribute("opacity",r.o),r._mdf.sw&&i.setAttribute("stroke-width",r.sw),r._mdf.sc&&i.setAttribute("stroke",r.sc),r._mdf.fc&&i.setAttribute("fill",r.fc))}},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var t=createNS("rect");t.setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.layerElement.appendChild(t)},NullElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(t){return new NullElement(t,this.globalData,this)},SVGRendererBase.prototype.createShape=function(t){return new SVGShapeElement(t,this.globalData,this)},SVGRendererBase.prototype.createText=function(t){return new SVGTextLottieElement(t,this.globalData,this)},SVGRendererBase.prototype.createImage=function(t){return new IImageElement(t,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(t){return new ISolidElement(t,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(t){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+t.w+" "+t.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",t.w),this.svgElement.setAttribute("height",t.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),void 0!==this.renderConfig.focusable&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var e=this.globalData.defs;this.setupGlobalData(t,e),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=t;var r=createNS("clipPath"),i=createNS("rect");i.setAttribute("width",t.w),i.setAttribute("height",t.h),i.setAttribute("x",0),i.setAttribute("y",0);var n=createElementID();r.setAttribute("id",n),r.appendChild(i),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+n+")"),e.appendChild(r),this.layers=t.layers,this.elements=createSizedArray(t.layers.length)},SVGRendererBase.prototype.destroy=function(){var t;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var e=this.layers?this.layers.length:0;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(t){var e=0,r=this.layers.length;for(e=0;e<r;e+=1)if(this.layers[e].ind===t)return e;return-1},SVGRendererBase.prototype.buildItem=function(t){var e=this.elements;if(!e[t]&&99!==this.layers[t].ty){e[t]=!0;var r=this.createItem(this.layers[t]);if(e[t]=r,getExpressionsPlugin()&&(0===this.layers[t].ty&&this.globalData.projectInterface.registerComposition(r),r.initExpressions()),this.appendElementInPos(r,t),this.layers[t].tt){var i="tp"in this.layers[t]?this.findIndexByInd(this.layers[t].tp):t-1;if(-1===i)return;if(this.elements[i]&&!0!==this.elements[i]){var n=e[i].getMatte(this.layers[t].tt);r.setMatte(n)}else this.buildItem(i),this.addPendingElement(r)}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();if(t.checkParenting(),t.data.tt)for(var e=0,r=this.elements.length;e<r;){if(this.elements[e]===t){var i="tp"in t.data?this.findIndexByInd(t.data.tp):e-1,n=this.elements[i].getMatte(this.layers[e].tt);t.setMatte(n);break}e+=1}}},SVGRendererBase.prototype.renderFrame=function(t){if(this.renderedFrame!==t&&!this.destroyed){var e;null===t?t=this.renderedFrame:this.renderedFrame=t,this.globalData.frameNum=t,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=t,this.globalData._mdf=!1;var r=this.layers.length;for(this.completeLayers||this.checkLayers(t),e=r-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(t-this.layers[e].st);if(this.globalData._mdf)for(e=0;e<r;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(t,e){var r=t.getBaseElement();if(r){for(var i,n=0;n<e;)this.elements[n]&&!0!==this.elements[n]&&this.elements[n].getBaseElement()&&(i=this.elements[n].getBaseElement()),n+=1;i?this.layerElement.insertBefore(r,i):this.layerElement.appendChild(r)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(t,e,r){this.initFrame(),this.initBaseData(t,e,r),this.initTransform(t,e,r),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&e.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(t){if(this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=t/this.data.sr;else{var e=this.tm.v;e===this.data.op&&(e=this.data.op-1),this.renderedFrame=e}var r,i=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),r=i-1;r>=0;r-=1)(this.completeLayers||this.elements[r])&&(this.elements[r].prepareFrame(this.renderedFrame-this.layers[r].st),this.elements[r]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},ICompElement.prototype.setElements=function(t){this.elements=t},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(t){return new SVGCompElement(t,this.globalData,this)},extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(t){return new SVGCompElement(t,this.globalData,this)},CVContextData.prototype.duplicate=function(){var t=2*this._length,e=this.savedOp;this.savedOp=createTypedArray("float32",t),this.savedOp.set(e);var r=0;for(r=this._length;r<t;r+=1)this.saved[r]=createTypedArray("float32",16);this._length=t},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.cO=1},CVContextData.prototype.popTransform=function(){var t,e=this.saved[this.cArrPos],r=this.cTr.props;for(t=0;t<16;t+=1)r[t]=e[t];return e},CVContextData.prototype.popOpacity=function(){var t=this.savedOp[this.cArrPos];return this.cO=t,t},CVContextData.prototype.pop=function(){return this.cArrPos-=1,{transform:this.popTransform(),opacity:this.popOpacity()}},CVContextData.prototype.push=function(){var t,e=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var r=this.saved[this.cArrPos];for(t=0;t<16;t+=1)r[t]=e[t];this.savedOp[this.cArrPos]=this.cO,this.cArrPos+=1},CVContextData.prototype.getTransform=function(){return this.cTr},CVContextData.prototype.getOpacity=function(){return this.cO},CVContextData.prototype.setOpacity=function(t){this.cO=t},ShapeTransformManager.prototype={addTransformSequence:function(t){var e,r=t.length,i="_";for(e=0;e<r;e+=1)i+=t[e].transform.key+"_";var n=this.sequences[i];return n||(n={transforms:[].concat(t),finalTransform:new Matrix,_mdf:!1},this.sequences[i]=n,this.sequenceList.push(n)),n},processSequence:function(t,e){for(var r,i=0,n=t.transforms.length,s=e;i<n&&!e;){if(t.transforms[i].transform.mProps._mdf){s=!0;break}i+=1}if(s)for(t.finalTransform.reset(),i=n-1;i>=0;i-=1)r=t.transforms[i].transform.mProps.v.props,t.finalTransform.transform(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15]);t._mdf=s},processSequences:function(t){var e,r=this.sequenceList.length;for(e=0;e<r;e+=1)this.processSequence(this.sequenceList[e],t)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var t="__lottie_element_luma_buffer",e=null,r=null,i=null;function n(){var n,s,a;e||(n=createNS("svg"),s=createNS("filter"),a=createNS("feColorMatrix"),s.setAttribute("id",t),a.setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),s.appendChild(a),n.appendChild(s),n.setAttribute("id",t+"_svg"),featureSupport.svgLumaHidden&&(n.style.display="none"),i=n,document.body.appendChild(i),e=createTag("canvas"),(r=e.getContext("2d")).filter="url(#"+t+")",r.fillStyle="rgba(0,0,0,0)",r.fillRect(0,0,1,1))}return{load:n,get:function(i){return e||n(),e.width=i.width,e.height=i.height,r.filter="url(#"+t+")",e}}};function createCanvas(t,e){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(t,e);var r=createTag("canvas");return r.width=t,r.height=e,r}var assetLoader={loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas:createCanvas};function CVEffects(){}function CVMaskElement(t,e){var r;this.data=t,this.element=e,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var i=this.masksProperties.length,n=!1;for(r=0;r<i;r+=1)"n"!==this.masksProperties[r].mode&&(n=!0),this.viewData[r]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[r],3);this.hasMasks=n,n&&this.element.addRenderableComponent(this)}function CVBaseElement(){}CVEffects.prototype.renderFrame=function(){},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var t,e,r,i,n=this.element.finalTransform.mat,s=this.element.canvasContext,a=this.masksProperties.length;for(s.beginPath(),t=0;t<a;t+=1)if("n"!==this.masksProperties[t].mode){var o;this.masksProperties[t].inv&&(s.moveTo(0,0),s.lineTo(this.element.globalData.compSize.w,0),s.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),s.lineTo(0,this.element.globalData.compSize.h),s.lineTo(0,0)),i=this.viewData[t].v,e=n.applyToPointArray(i.v[0][0],i.v[0][1],0),s.moveTo(e[0],e[1]);var l=i._length;for(o=1;o<l;o+=1)r=n.applyToTriplePoints(i.o[o-1],i.i[o],i.v[o]),s.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]);r=n.applyToTriplePoints(i.o[o-1],i.i[0],i.v[0]),s.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5])}this.element.globalData.renderer.save(!0),s.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};function CVShapeData(t,e,r,i){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var n,s=4;"rc"===e.ty?s=5:"el"===e.ty?s=6:"sr"===e.ty&&(s=7),this.sh=ShapePropertyFactory.getShapeProp(t,e,s,t);var a,o=r.length;for(n=0;n<o;n+=1)r[n].closed||(a={transforms:i.addTransformSequence(r[n].transforms),trNodes:[]},this.styledShapes.push(a),r[n].elements.push(a))}function CVShapeElement(t,e,r){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(t,e,r)}function CVTextElement(t,e,r){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(t,e,r)}function CVImageElement(t,e,r){this.assetData=e.getAssetData(t.refId),this.img=e.imageLoader.getAsset(this.assetData),this.initElement(t,e,r)}function CVSolidElement(t,e,r){this.initElement(t,e,r)}function CanvasRendererBase(t,e){this.animationItem=t,this.renderConfig={clearCanvas:!e||void 0===e.clearCanvas||e.clearCanvas,context:e&&e.context||null,progressiveLoad:e&&e.progressiveLoad||!1,preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",className:e&&e.className||"",id:e&&e.id||""},this.renderConfig.dpr=e&&e.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=e&&e.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}function CVCompElement(t,e,r){this.completeLayers=!1,this.layers=t.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(t,e,r),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function CanvasRenderer(t,e){this.animationItem=t,this.renderConfig={clearCanvas:!e||void 0===e.clearCanvas||e.clearCanvas,context:e&&e.context||null,progressiveLoad:e&&e.progressiveLoad||!1,preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",className:e&&e.className||"",id:e&&e.id||"",runExpressions:!e||void 0===e.runExpressions||e.runExpressions},this.renderConfig.dpr=e&&e.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=e&&e.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}function HBaseElement(){}function HSolidElement(t,e,r){this.initElement(t,e,r)}function HShapeElement(t,e,r){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(t,e,r),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(t,e,r){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(t,e,r)}function HCameraElement(t,e,r){this.initFrame(),this.initBaseData(t,e,r),this.initHierarchy();var i=PropertyFactory.getProp;if(this.pe=i(this,t.pe,0,0,this),t.ks.p.s?(this.px=i(this,t.ks.p.x,1,0,this),this.py=i(this,t.ks.p.y,1,0,this),this.pz=i(this,t.ks.p.z,1,0,this)):this.p=i(this,t.ks.p,1,0,this),t.ks.a&&(this.a=i(this,t.ks.a,1,0,this)),t.ks.or.k.length&&t.ks.or.k[0].to){var n,s=t.ks.or.k.length;for(n=0;n<s;n+=1)t.ks.or.k[n].to=null,t.ks.or.k[n].ti=null}this.or=i(this,t.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=i(this,t.ks.rx,0,degToRads,this),this.ry=i(this,t.ks.ry,0,degToRads,this),this.rz=i(this,t.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HImageElement(t,e,r){this.assetData=e.getAssetData(t.refId),this.initElement(t,e,r)}function HybridRendererBase(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&!1===e.hideOnTransparent),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function HCompElement(t,e,r){this.layers=t.layers,this.supports3d=!t.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,r),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function HybridRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&!1===e.hideOnTransparent),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"},runExpressions:!e||void 0===e.runExpressions||e.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var t=this.globalData.canvasContext,e=assetLoader.createCanvas(t.canvas.width,t.canvas.height);this.buffers.push(e);var r=assetLoader.createCanvas(t.canvas.width,t.canvas.height);this.buffers.push(r),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this)},createContent:function(){},setBlendMode:function(){var t=this.globalData;if(t.blendMode!==this.data.bm){t.blendMode=this.data.bm;var e=getBlendMode(this.data.bm);t.canvasContext.globalCompositeOperation=e}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(t){t.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var t=this.buffers[0].getContext("2d");this.clearCanvas(t),t.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var t=this.buffers[1],e=t.getContext("2d");if(this.clearCanvas(e),e.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform),this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1).renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var r=assetLoader.getLumaCanvas(this.canvasContext.canvas);r.getContext("2d").drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(r,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(t,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(t){if(!this.hidden&&!this.data.hd&&(1!==this.data.td||t)){this.renderTransform(),this.renderRenderable(),this.setBlendMode();var e=0===this.data.ty;this.prepareLayer(),this.globalData.renderer.save(e),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v),this.renderInnerContent(),this.globalData.renderer.restore(e),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(t,e){var r={data:t,type:t.ty,preTransforms:this.transformsManager.addTransformSequence(e),transforms:[],elements:[],closed:!0===t.hd},i={};if("fl"===t.ty||"st"===t.ty?(i.c=PropertyFactory.getProp(this,t.c,1,255,this),i.c.k||(r.co="rgb("+bmFloor(i.c.v[0])+","+bmFloor(i.c.v[1])+","+bmFloor(i.c.v[2])+")")):"gf"!==t.ty&&"gs"!==t.ty||(i.s=PropertyFactory.getProp(this,t.s,1,null,this),i.e=PropertyFactory.getProp(this,t.e,1,null,this),i.h=PropertyFactory.getProp(this,t.h||{k:0},0,.01,this),i.a=PropertyFactory.getProp(this,t.a||{k:0},0,degToRads,this),i.g=new GradientProperty(this,t.g,this)),i.o=PropertyFactory.getProp(this,t.o,0,.01,this),"st"===t.ty||"gs"===t.ty){if(r.lc=lineCapEnum[t.lc||2],r.lj=lineJoinEnum[t.lj||2],1==t.lj&&(r.ml=t.ml),i.w=PropertyFactory.getProp(this,t.w,0,null,this),i.w.k||(r.wi=i.w.v),t.d){var n=new DashProperty(this,t.d,"canvas",this);i.d=n,i.d.k||(r.da=i.d.dashArray,r.do=i.d.dashoffset[0])}}else r.r=2===t.r?"evenodd":"nonzero";return this.stylesList.push(r),i.style=r,i},CVShapeElement.prototype.createGroupElement=function(){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(t){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,t.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,t,this)}}},CVShapeElement.prototype.createShapeElement=function(t){var e=new CVShapeData(this,t,this.stylesList,this.transformsManager);return this.shapes.push(e),this.addShapeToModifiers(e),e},CVShapeElement.prototype.reloadShapes=function(){var t;this._isFirstFrame=!0;var e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(t){var e,r=this.stylesList.length;for(e=0;e<r;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.push(t)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var t,e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.pop()},CVShapeElement.prototype.closeStyles=function(t){var e,r=t.length;for(e=0;e<r;e+=1)t[e].closed=!0},CVShapeElement.prototype.searchShapes=function(t,e,r,i,n){var s,a,o,l,h,u,c=t.length-1,p=[],d=[],f=[].concat(n);for(s=c;s>=0;s-=1){if((l=this.searchProcessedElement(t[s]))?e[s]=r[l-1]:t[s]._shouldRender=i,"fl"===t[s].ty||"st"===t[s].ty||"gf"===t[s].ty||"gs"===t[s].ty)l?e[s].style.closed=!1:e[s]=this.createStyleElement(t[s],f),p.push(e[s].style);else if("gr"===t[s].ty){if(l)for(o=e[s].it.length,a=0;a<o;a+=1)e[s].prevViewData[a]=e[s].it[a];else e[s]=this.createGroupElement(t[s]);this.searchShapes(t[s].it,e[s].it,e[s].prevViewData,i,f)}else"tr"===t[s].ty?(l||(u=this.createTransformElement(t[s]),e[s]=u),f.push(e[s]),this.addTransformToStyleList(e[s])):"sh"===t[s].ty||"rc"===t[s].ty||"el"===t[s].ty||"sr"===t[s].ty?l||(e[s]=this.createShapeElement(t[s])):"tm"===t[s].ty||"rd"===t[s].ty||"pb"===t[s].ty||"zz"===t[s].ty||"op"===t[s].ty?(l?(h=e[s]).closed=!1:((h=ShapeModifiers.getModifier(t[s].ty)).init(this,t[s]),e[s]=h,this.shapeModifiers.push(h)),d.push(h)):"rp"===t[s].ty&&(l?(h=e[s]).closed=!0:(h=ShapeModifiers.getModifier(t[s].ty),e[s]=h,h.init(this,t,s,e),this.shapeModifiers.push(h),i=!1),d.push(h));this.addProcessedElement(t[s],s+1)}for(this.removeTransformFromStyleList(),this.closeStyles(p),c=d.length,s=0;s<c;s+=1)d[s].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(t,e){(t._opMdf||e.op._mdf||this._isFirstFrame)&&(e.opacity=t.opacity,e.opacity*=e.op.v,e._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var t,e,r,i,n,s,a,o,l,h=this.stylesList.length,u=this.globalData.renderer,c=this.globalData.canvasContext;for(t=0;t<h;t+=1)if(("st"!==(o=(l=this.stylesList[t]).type)&&"gs"!==o||0!==l.wi)&&l.data._shouldRender&&0!==l.coOp&&0!==this.globalData.currentGlobalAlpha){for(u.save(),s=l.elements,"st"===o||"gs"===o?(c.strokeStyle="st"===o?l.co:l.grd,c.lineWidth=l.wi,c.lineCap=l.lc,c.lineJoin=l.lj,c.miterLimit=l.ml||0):c.fillStyle="fl"===o?l.co:l.grd,u.ctxOpacity(l.coOp),"st"!==o&&"gs"!==o&&c.beginPath(),u.ctxTransform(l.preTransforms.finalTransform.props),r=s.length,e=0;e<r;e+=1){for("st"!==o&&"gs"!==o||(c.beginPath(),l.da&&(c.setLineDash(l.da),c.lineDashOffset=l.do)),n=(a=s[e].trNodes).length,i=0;i<n;i+=1)"m"===a[i].t?c.moveTo(a[i].p[0],a[i].p[1]):"c"===a[i].t?c.bezierCurveTo(a[i].pts[0],a[i].pts[1],a[i].pts[2],a[i].pts[3],a[i].pts[4],a[i].pts[5]):c.closePath();"st"!==o&&"gs"!==o||(c.stroke(),l.da&&c.setLineDash(this.dashResetter))}"st"!==o&&"gs"!==o&&c.fill(l.r),u.restore()}},CVShapeElement.prototype.renderShape=function(t,e,r,i){var n,s;for(s=t,n=e.length-1;n>=0;n-=1)"tr"===e[n].ty?(s=r[n].transform,this.renderShapeTransform(t,s)):"sh"===e[n].ty||"el"===e[n].ty||"rc"===e[n].ty||"sr"===e[n].ty?this.renderPath(e[n],r[n]):"fl"===e[n].ty?this.renderFill(e[n],r[n],s):"st"===e[n].ty?this.renderStroke(e[n],r[n],s):"gf"===e[n].ty||"gs"===e[n].ty?this.renderGradientFill(e[n],r[n],s):"gr"===e[n].ty?this.renderShape(s,e[n].it,r[n].it):e[n].ty;i&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(t,e){if(this._isFirstFrame||e._mdf||t.transforms._mdf){var r,i,n,s=t.trNodes,a=e.paths,o=a._length;s.length=0;var l=t.transforms.finalTransform;for(n=0;n<o;n+=1){var h=a.shapes[n];if(h&&h.v){for(i=h._length,r=1;r<i;r+=1)1===r&&s.push({t:"m",p:l.applyToPointArray(h.v[0][0],h.v[0][1],0)}),s.push({t:"c",pts:l.applyToTriplePoints(h.o[r-1],h.i[r],h.v[r])});1===i&&s.push({t:"m",p:l.applyToPointArray(h.v[0][0],h.v[0][1],0)}),h.c&&i&&(s.push({t:"c",pts:l.applyToTriplePoints(h.o[r-1],h.i[0],h.v[0])}),s.push({t:"z"}))}}t.trNodes=s}},CVShapeElement.prototype.renderPath=function(t,e){if(!0!==t.hd&&t._shouldRender){var r,i=e.styledShapes.length;for(r=0;r<i;r+=1)this.renderStyledShape(e.styledShapes[r],e.sh)}},CVShapeElement.prototype.renderFill=function(t,e,r){var i=e.style;(e.c._mdf||this._isFirstFrame)&&(i.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||r._opMdf||this._isFirstFrame)&&(i.coOp=e.o.v*r.opacity)},CVShapeElement.prototype.renderGradientFill=function(t,e,r){var i,n=e.style;if(!n.grd||e.g._mdf||e.s._mdf||e.e._mdf||1!==t.t&&(e.h._mdf||e.a._mdf)){var s,a=this.globalData.canvasContext,o=e.s.v,l=e.e.v;if(1===t.t)i=a.createLinearGradient(o[0],o[1],l[0],l[1]);else{var h=Math.sqrt(Math.pow(o[0]-l[0],2)+Math.pow(o[1]-l[1],2)),u=Math.atan2(l[1]-o[1],l[0]-o[0]),c=e.h.v;c>=1?c=.99:c<=-1&&(c=-.99);var p=h*c,d=Math.cos(u+e.a.v)*p+o[0],f=Math.sin(u+e.a.v)*p+o[1];i=a.createRadialGradient(d,f,0,o[0],o[1],h)}var m=t.g.p,g=e.g.c,v=1;for(s=0;s<m;s+=1)e.g._hasOpacity&&e.g._collapsable&&(v=e.g.o[2*s+1]),i.addColorStop(g[4*s]/100,"rgba("+g[4*s+1]+","+g[4*s+2]+","+g[4*s+3]+","+v+")");n.grd=i}n.coOp=e.o.v*r.opacity},CVShapeElement.prototype.renderStroke=function(t,e,r){var i=e.style,n=e.d;n&&(n._mdf||this._isFirstFrame)&&(i.da=n.dashArray,i.do=n.dashoffset[0]),(e.c._mdf||this._isFirstFrame)&&(i.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||r._opMdf||this._isFirstFrame)&&(i.coOp=e.o.v*r.opacity),(e.w._mdf||this._isFirstFrame)&&(i.wi=e.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=!1;t.fc?(e=!0,this.values.fill=this.buildColor(t.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=e;var r=!1;t.sc&&(r=!0,this.values.stroke=this.buildColor(t.sc),this.values.sWidth=t.sw);var i,n,s,a,o,l,h,u,c,p,d,f,m=this.globalData.fontManager.getFontByName(t.f),g=t.l,v=this.mHelper;this.stroke=r,this.values.fValue=t.finalSize+"px "+this.globalData.fontManager.getFontByName(t.f).fFamily,n=t.finalText.length;var y=this.data.singleShape,x=.001*t.tr*t.finalSize,_=0,b=0,w=!0,S=0;for(i=0;i<n;i+=1){a=(s=this.globalData.fontManager.getCharData(t.finalText[i],m.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily))&&s.data||{},v.reset(),y&&g[i].n&&(_=-x,b+=t.yOffset,b+=w?1:0,w=!1),c=(h=a.shapes?a.shapes[0].it:[]).length,v.scale(t.finalSize/100,t.finalSize/100),y&&this.applyTextPropertiesToMatrix(t,v,g[i].line,_,b),d=createSizedArray(c-1);var M=0;for(u=0;u<c;u+=1)if("sh"===h[u].ty){for(l=h[u].ks.k.i.length,p=h[u].ks.k,f=[],o=1;o<l;o+=1)1===o&&f.push(v.applyToX(p.v[0][0],p.v[0][1],0),v.applyToY(p.v[0][0],p.v[0][1],0)),f.push(v.applyToX(p.o[o-1][0],p.o[o-1][1],0),v.applyToY(p.o[o-1][0],p.o[o-1][1],0),v.applyToX(p.i[o][0],p.i[o][1],0),v.applyToY(p.i[o][0],p.i[o][1],0),v.applyToX(p.v[o][0],p.v[o][1],0),v.applyToY(p.v[o][0],p.v[o][1],0));f.push(v.applyToX(p.o[o-1][0],p.o[o-1][1],0),v.applyToY(p.o[o-1][0],p.o[o-1][1],0),v.applyToX(p.i[0][0],p.i[0][1],0),v.applyToY(p.i[0][0],p.i[0][1],0),v.applyToX(p.v[0][0],p.v[0][1],0),v.applyToY(p.v[0][0],p.v[0][1],0)),d[M]=f,M+=1}y&&(_+=g[i].l,_+=x),this.textSpans[S]?this.textSpans[S].elem=d:this.textSpans[S]={elem:d},S+=1}},CVTextElement.prototype.renderInnerContent=function(){var t,e,r,i,n,s,a=this.canvasContext;a.font=this.values.fValue,a.lineCap="butt",a.lineJoin="miter",a.miterLimit=4,this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var o,l=this.textAnimator.renderedLetters,h=this.textProperty.currentData.l;e=h.length;var u,c,p=null,d=null,f=null;for(t=0;t<e;t+=1)if(!h[t].n){if((o=l[t])&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(o.p),this.globalData.renderer.ctxOpacity(o.o)),this.fill){for(o&&o.fc?p!==o.fc&&(p=o.fc,a.fillStyle=o.fc):p!==this.values.fill&&(p=this.values.fill,a.fillStyle=this.values.fill),i=(u=this.textSpans[t].elem).length,this.globalData.canvasContext.beginPath(),r=0;r<i;r+=1)for(s=(c=u[r]).length,this.globalData.canvasContext.moveTo(c[0],c[1]),n=2;n<s;n+=6)this.globalData.canvasContext.bezierCurveTo(c[n],c[n+1],c[n+2],c[n+3],c[n+4],c[n+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(o&&o.sw?f!==o.sw&&(f=o.sw,a.lineWidth=o.sw):f!==this.values.sWidth&&(f=this.values.sWidth,a.lineWidth=this.values.sWidth),o&&o.sc?d!==o.sc&&(d=o.sc,a.strokeStyle=o.sc):d!==this.values.stroke&&(d=this.values.stroke,a.strokeStyle=this.values.stroke),i=(u=this.textSpans[t].elem).length,this.globalData.canvasContext.beginPath(),r=0;r<i;r+=1)for(s=(c=u[r]).length,this.globalData.canvasContext.moveTo(c[0],c[1]),n=2;n<s;n+=6)this.globalData.canvasContext.bezierCurveTo(c[n],c[n+1],c[n+2],c[n+3],c[n+4],c[n+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}o&&this.globalData.renderer.restore()}},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var t=createTag("canvas");t.width=this.assetData.w,t.height=this.assetData.h;var e,r,i=t.getContext("2d"),n=this.img.width,s=this.img.height,a=n/s,o=this.assetData.w/this.assetData.h,l=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;a>o&&"xMidYMid slice"===l||a<o&&"xMidYMid slice"!==l?e=(r=s)*o:r=(e=n)/o,i.drawImage(this.img,(n-e)/2,(s-r)/2,e,r,0,0,this.assetData.w,this.assetData.h),this.img=t}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){var t=this.canvasContext;t.fillStyle=this.data.sc,t.fillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(t){return new CVShapeElement(t,this.globalData,this)},CanvasRendererBase.prototype.createText=function(t){return new CVTextElement(t,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(t){return new CVImageElement(t,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(t){return new CVSolidElement(t,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(t){if(1!==t[0]||0!==t[1]||0!==t[4]||1!==t[5]||0!==t[12]||0!==t[13])if(this.renderConfig.clearCanvas){this.transformMat.cloneFromProps(t);var e=this.contextData.getTransform(),r=e.props;this.transformMat.transform(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15]),e.cloneFromProps(this.transformMat.props);var i=e.props;this.canvasContext.setTransform(i[0],i[1],i[4],i[5],i[12],i[13])}else this.canvasContext.transform(t[0],t[1],t[4],t[5],t[12],t[13])},CanvasRendererBase.prototype.ctxOpacity=function(t){var e=this.contextData.getOpacity();if(!this.renderConfig.clearCanvas)return this.canvasContext.globalAlpha*=t<0?0:t,void(this.globalData.currentGlobalAlpha=e);e*=t<0?0:t,this.contextData.setOpacity(e),this.globalData.currentGlobalAlpha!==e&&(this.canvasContext.globalAlpha=e,this.globalData.currentGlobalAlpha=e)},CanvasRendererBase.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRendererBase.prototype.save=function(t){this.renderConfig.clearCanvas?(t&&this.canvasContext.save(),this.contextData.push()):this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(t){if(this.renderConfig.clearCanvas){t&&(this.canvasContext.restore(),this.globalData.blendMode="source-over");var e=this.contextData.pop(),r=e.transform,i=e.opacity;this.canvasContext.setTransform(r[0],r[1],r[4],r[5],r[12],r[13]),this.globalData.currentGlobalAlpha!==i&&(this.canvasContext.globalAlpha=i,this.globalData.currentGlobalAlpha=i)}else this.canvasContext.restore()},CanvasRendererBase.prototype.configAnimation=function(t){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var e=this.animationItem.container.style;e.width="100%",e.height="100%";var r="0px 0px 0px";e.transformOrigin=r,e.mozTransformOrigin=r,e.webkitTransformOrigin=r,e["-webkit-transform"]=r,e.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.data=t,this.layers=t.layers,this.transformCanvas={w:t.w,h:t.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(t,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(t.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(t,e){var r,i,n,s;if(this.reset(),t?(r=t,i=e,this.canvasContext.canvas.width=r,this.canvasContext.canvas.height=i):(this.animationItem.wrapper&&this.animationItem.container?(r=this.animationItem.wrapper.offsetWidth,i=this.animationItem.wrapper.offsetHeight):(r=this.canvasContext.canvas.width,i=this.canvasContext.canvas.height),this.canvasContext.canvas.width=r*this.renderConfig.dpr,this.canvasContext.canvas.height=i*this.renderConfig.dpr),-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")){var a=this.renderConfig.preserveAspectRatio.split(" "),o=a[1]||"meet",l=a[0]||"xMidYMid",h=l.substr(0,4),u=l.substr(4);n=r/i,(s=this.transformCanvas.w/this.transformCanvas.h)>n&&"meet"===o||s<n&&"slice"===o?(this.transformCanvas.sx=r/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=r/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=i/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=i/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx="xMid"===h&&(s<n&&"meet"===o||s>n&&"slice"===o)?(r-this.transformCanvas.w*(i/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===h&&(s<n&&"meet"===o||s>n&&"slice"===o)?(r-this.transformCanvas.w*(i/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty="YMid"===u&&(s>n&&"meet"===o||s<n&&"slice"===o)?(i-this.transformCanvas.h*(r/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===u&&(s>n&&"meet"===o||s<n&&"slice"===o)?(i-this.transformCanvas.h*(r/this.transformCanvas.w))*this.renderConfig.dpr:0}else"none"===this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=r/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=i/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){var t;for(this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),t=(this.layers?this.layers.length:0)-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy&&this.elements[t].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(t,e){if((this.renderedFrame!==t||!0!==this.renderConfig.clearCanvas||e)&&!this.destroyed&&-1!==t){var r;this.renderedFrame=t,this.globalData.frameNum=t-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||e,this.globalData.projectInterface.currentFrame=t;var i=this.layers.length;for(this.completeLayers||this.checkLayers(t),r=0;r<i;r+=1)(this.completeLayers||this.elements[r])&&this.elements[r].prepareFrame(t-this.layers[r].st);if(this.globalData._mdf){for(!0===this.renderConfig.clearCanvas?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),r=i-1;r>=0;r-=1)(this.completeLayers||this.elements[r])&&this.elements[r].renderFrame();!0!==this.renderConfig.clearCanvas&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(t){var e=this.elements;if(!e[t]&&99!==this.layers[t].ty){var r=this.createItem(this.layers[t],this,this.globalData);e[t]=r,r.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"},extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var t,e=this.canvasContext;for(e.beginPath(),e.moveTo(0,0),e.lineTo(this.data.w,0),e.lineTo(this.data.w,this.data.h),e.lineTo(0,this.data.h),e.lineTo(0,0),e.clip(),t=this.layers.length-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},CVCompElement.prototype.destroy=function(){var t;for(t=this.layers.length-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(t){return new CVCompElement(t,this.globalData,this)},extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(t){return new CVCompElement(t,this.globalData,this)},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){var t=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var e=this.finalTransform.mat.toCSS();t.transform=e,t.webkitTransform=e}this.finalTransform._opMdf&&(t.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var t;this.data.hasMask?((t=createNS("rect")).setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((t=createTag("div")).style.width=this.data.sw+"px",t.style.height=this.data.sh+"px",t.style.backgroundColor=this.data.sc),this.layerElement.appendChild(t)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var t;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),t=this.svgElement;else{t=createNS("svg");var e=this.comp.data?this.comp.data:this.globalData.compSize;t.setAttribute("width",e.w),t.setAttribute("height",e.h),t.appendChild(this.shapesContainer),this.layerElement.appendChild(t)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=t},HShapeElement.prototype.getTransformedPoint=function(t,e){var r,i=t.length;for(r=0;r<i;r+=1)e=t[r].mProps.v.applyToPointArray(e[0],e[1],0);return e},HShapeElement.prototype.calculateShapeBoundingBox=function(t,e){var r,i,n,s,a,o=t.sh.v,l=t.transformers,h=o._length;if(!(h<=1)){for(r=0;r<h-1;r+=1)i=this.getTransformedPoint(l,o.v[r]),n=this.getTransformedPoint(l,o.o[r]),s=this.getTransformedPoint(l,o.i[r+1]),a=this.getTransformedPoint(l,o.v[r+1]),this.checkBounds(i,n,s,a,e);o.c&&(i=this.getTransformedPoint(l,o.v[r]),n=this.getTransformedPoint(l,o.o[r]),s=this.getTransformedPoint(l,o.i[0]),a=this.getTransformedPoint(l,o.v[0]),this.checkBounds(i,n,s,a,e))}},HShapeElement.prototype.checkBounds=function(t,e,r,i,n){this.getBoundsOfCurve(t,e,r,i);var s=this.shapeBoundingBox;n.x=bmMin(s.left,n.x),n.xMax=bmMax(s.right,n.xMax),n.y=bmMin(s.top,n.y),n.yMax=bmMax(s.bottom,n.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(t,e,r,i){for(var n,s,a,o,l,h,u,c=[[t[0],i[0]],[t[1],i[1]]],p=0;p<2;++p)s=6*t[p]-12*e[p]+6*r[p],n=-3*t[p]+9*e[p]-9*r[p]+3*i[p],a=3*e[p]-3*t[p],s|=0,a|=0,0==(n|=0)&&0===s||(0===n?(o=-a/s)>0&&o<1&&c[p].push(this.calculateF(o,t,e,r,i,p)):(l=s*s-4*a*n)>=0&&((h=(-s+bmSqrt(l))/(2*n))>0&&h<1&&c[p].push(this.calculateF(h,t,e,r,i,p)),(u=(-s-bmSqrt(l))/(2*n))>0&&u<1&&c[p].push(this.calculateF(u,t,e,r,i,p))));this.shapeBoundingBox.left=bmMin.apply(null,c[0]),this.shapeBoundingBox.top=bmMin.apply(null,c[1]),this.shapeBoundingBox.right=bmMax.apply(null,c[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,c[1])},HShapeElement.prototype.calculateF=function(t,e,r,i,n,s){return bmPow(1-t,3)*e[s]+3*bmPow(1-t,2)*t*r[s]+3*(1-t)*bmPow(t,2)*i[s]+bmPow(t,3)*n[s]},HShapeElement.prototype.calculateBoundingBox=function(t,e){var r,i=t.length;for(r=0;r<i;r+=1)t[r]&&t[r].sh?this.calculateShapeBoundingBox(t[r],e):t[r]&&t[r].it?this.calculateBoundingBox(t[r].it,e):t[r]&&t[r].style&&t[r].w&&this.expandStrokeBoundingBox(t[r].w,e)},HShapeElement.prototype.expandStrokeBoundingBox=function(t,e){var r=0;if(t.keyframes){for(var i=0;i<t.keyframes.length;i+=1){var n=t.keyframes[i].s;n>r&&(r=n)}r*=t.mult}else r=t.v*t.mult;e.x-=r,e.xMax+=r,e.y-=r,e.yMax+=r},HShapeElement.prototype.currentBoxContains=function(t){return this.currentBBox.x<=t.x&&this.currentBBox.y<=t.y&&this.currentBBox.width+this.currentBBox.x>=t.x+t.width&&this.currentBBox.height+this.currentBBox.y>=t.y+t.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var t=this.tempBoundingBox,e=999999;if(t.x=e,t.xMax=-e,t.y=e,t.yMax=-e,this.calculateBoundingBox(this.itemsData,t),t.width=t.xMax<t.x?0:t.xMax-t.x,t.height=t.yMax<t.y?0:t.yMax-t.y,this.currentBoxContains(t))return;var r=!1;if(this.currentBBox.w!==t.width&&(this.currentBBox.w=t.width,this.shapeCont.setAttribute("width",t.width),r=!0),this.currentBBox.h!==t.height&&(this.currentBBox.h=t.height,this.shapeCont.setAttribute("height",t.height),r=!0),r||this.currentBBox.x!==t.x||this.currentBBox.y!==t.y){this.currentBBox.w=t.width,this.currentBBox.h=t.height,this.currentBBox.x=t.x,this.currentBBox.y=t.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var i=this.shapeCont.style,n="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";i.transform=n,i.webkitTransform=n}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var t=createNS("g");this.maskedElement.appendChild(t),this.innerElem=t}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=this.innerElem.style,r=t.fc?this.buildColor(t.fc):"rgba(0,0,0,0)";e.fill=r,e.color=r,t.sc&&(e.stroke=this.buildColor(t.sc),e.strokeWidth=t.sw+"px");var i,n,s=this.globalData.fontManager.getFontByName(t.f);if(!this.globalData.fontManager.chars)if(e.fontSize=t.finalSize+"px",e.lineHeight=t.finalSize+"px",s.fClass)this.innerElem.className=s.fClass;else{e.fontFamily=s.fFamily;var a=t.fWeight,o=t.fStyle;e.fontStyle=o,e.fontWeight=a}var l,h,u,c=t.l;n=c.length;var p,d=this.mHelper,f="",m=0;for(i=0;i<n;i+=1){if(this.globalData.fontManager.chars?(this.textPaths[m]?l=this.textPaths[m]:((l=createNS("path")).setAttribute("stroke-linecap",lineCapEnum[1]),l.setAttribute("stroke-linejoin",lineJoinEnum[2]),l.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[m]?u=(h=this.textSpans[m]).children[0]:((h=createTag("div")).style.lineHeight=0,(u=createNS("svg")).appendChild(l),styleDiv(h)))):this.isMasked?l=this.textPaths[m]?this.textPaths[m]:createNS("text"):this.textSpans[m]?(h=this.textSpans[m],l=this.textPaths[m]):(styleDiv(h=createTag("span")),styleDiv(l=createTag("span")),h.appendChild(l)),this.globalData.fontManager.chars){var g,v=this.globalData.fontManager.getCharData(t.finalText[i],s.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily);if(g=v?v.data:null,d.reset(),g&&g.shapes&&g.shapes.length&&(p=g.shapes[0].it,d.scale(t.finalSize/100,t.finalSize/100),f=this.createPathShape(d,p),l.setAttribute("d",f)),this.isMasked)this.innerElem.appendChild(l);else{if(this.innerElem.appendChild(h),g&&g.shapes){document.body.appendChild(u);var y=u.getBBox();u.setAttribute("width",y.width+2),u.setAttribute("height",y.height+2),u.setAttribute("viewBox",y.x-1+" "+(y.y-1)+" "+(y.width+2)+" "+(y.height+2));var x=u.style,_="translate("+(y.x-1)+"px,"+(y.y-1)+"px)";x.transform=_,x.webkitTransform=_,c[i].yOffset=y.y-1}else u.setAttribute("width",1),u.setAttribute("height",1);h.appendChild(u)}}else if(l.textContent=c[i].val,l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(l);else{this.innerElem.appendChild(h);var b=l.style,w="translate3d(0,"+-t.finalSize/1.2+"px,0)";b.transform=w,b.webkitTransform=w}this.isMasked?this.textSpans[m]=l:this.textSpans[m]=h,this.textSpans[m].style.display="block",this.textPaths[m]=l,m+=1}for(;m<this.textSpans.length;)this.textSpans[m].style.display="none",m+=1},HTextElement.prototype.renderInnerContent=function(){var t;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),t=this.svgElement.style;var e="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";t.transform=e,t.webkitTransform=e}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var r,i,n,s,a,o=0,l=this.textAnimator.renderedLetters,h=this.textProperty.currentData.l;for(i=h.length,r=0;r<i;r+=1)h[r].n?o+=1:(s=this.textSpans[r],a=this.textPaths[r],n=l[o],o+=1,n._mdf.m&&(this.isMasked?s.setAttribute("transform",n.m):(s.style.webkitTransform=n.m,s.style.transform=n.m)),s.style.opacity=n.o,n.sw&&n._mdf.sw&&a.setAttribute("stroke-width",n.sw),n.sc&&n._mdf.sc&&a.setAttribute("stroke",n.sc),n.fc&&n._mdf.fc&&(a.setAttribute("fill",n.fc),a.style.color=n.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var u=this.innerElem.getBBox();if(this.currentBBox.w!==u.width&&(this.currentBBox.w=u.width,this.svgElement.setAttribute("width",u.width)),this.currentBBox.h!==u.height&&(this.currentBBox.h=u.height,this.svgElement.setAttribute("height",u.height)),this.currentBBox.w!==u.width+2||this.currentBBox.h!==u.height+2||this.currentBBox.x!==u.x-1||this.currentBBox.y!==u.y-1){this.currentBBox.w=u.width+2,this.currentBBox.h=u.height+2,this.currentBBox.x=u.x-1,this.currentBBox.y=u.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),t=this.svgElement.style;var c="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";t.transform=c,t.webkitTransform=c}}}},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var t,e,r,i,n=this.comp.threeDElements.length;for(t=0;t<n;t+=1)if("3d"===(e=this.comp.threeDElements[t]).type){r=e.perspectiveElem.style,i=e.container.style;var s=this.pe.v+"px",a="0px 0px 0px",o="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";r.perspective=s,r.webkitPerspective=s,i.transformOrigin=a,i.mozTransformOrigin=a,i.webkitTransformOrigin=a,r.transform=o,r.webkitTransform=o}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var t,e,r=this._isFirstFrame;if(this.hierarchy)for(e=this.hierarchy.length,t=0;t<e;t+=1)r=this.hierarchy[t].finalTransform.mProp._mdf||r;if(r||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(t=e=this.hierarchy.length-1;t>=0;t-=1){var i=this.hierarchy[t].finalTransform.mProp;this.mat.translate(-i.p.v[0],-i.p.v[1],i.p.v[2]),this.mat.rotateX(-i.or.v[0]).rotateY(-i.or.v[1]).rotateZ(i.or.v[2]),this.mat.rotateX(-i.rx.v).rotateY(-i.ry.v).rotateZ(i.rz.v),this.mat.scale(1/i.s.v[0],1/i.s.v[1],1/i.s.v[2]),this.mat.translate(i.a.v[0],i.a.v[1],i.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var n;n=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var s=Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)),a=[n[0]/s,n[1]/s,n[2]/s],o=Math.sqrt(a[2]*a[2]+a[0]*a[0]),l=Math.atan2(a[1],o),h=Math.atan2(a[0],-a[2]);this.mat.rotateY(h).rotateX(-l)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var u=!this._prevMat.equals(this.mat);if((u||this.pe._mdf)&&this.comp.threeDElements){var c,p,d;for(e=this.comp.threeDElements.length,t=0;t<e;t+=1)if("3d"===(c=this.comp.threeDElements[t]).type){if(u){var f=this.mat.toCSS();(d=c.container.style).transform=f,d.webkitTransform=f}this.pe._mdf&&((p=c.perspectiveElem.style).perspective=this.pe.v+"px",p.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData),e=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(e),e.crossOrigin="anonymous",e.src=t,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRendererBase.prototype.appendElementInPos=function(t,e){var r=t.getBaseElement();if(r){var i=this.layers[e];if(i.ddd&&this.supports3d)this.addTo3dContainer(r,e);else if(this.threeDElements)this.addTo3dContainer(r,e);else{for(var n,s,a=0;a<e;)this.elements[a]&&!0!==this.elements[a]&&this.elements[a].getBaseElement&&(s=this.elements[a],n=(this.layers[a].ddd?this.getThreeDContainerByPos(a):s.getBaseElement())||n),a+=1;n?i.ddd&&this.supports3d||this.layerElement.insertBefore(r,n):i.ddd&&this.supports3d||this.layerElement.appendChild(r)}}},HybridRendererBase.prototype.createShape=function(t){return this.supports3d?new HShapeElement(t,this.globalData,this):new SVGShapeElement(t,this.globalData,this)},HybridRendererBase.prototype.createText=function(t){return this.supports3d?new HTextElement(t,this.globalData,this):new SVGTextLottieElement(t,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(t){return this.camera=new HCameraElement(t,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(t){return this.supports3d?new HImageElement(t,this.globalData,this):new IImageElement(t,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(t){return this.supports3d?new HSolidElement(t,this.globalData,this):new ISolidElement(t,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(t){for(var e=0,r=this.threeDElements.length;e<r;){if(this.threeDElements[e].startPos<=t&&this.threeDElements[e].endPos>=t)return this.threeDElements[e].perspectiveElem;e+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(t,e){var r,i,n=createTag("div");styleDiv(n);var s=createTag("div");if(styleDiv(s),"3d"===e){(r=n.style).width=this.globalData.compSize.w+"px",r.height=this.globalData.compSize.h+"px";var a="50% 50%";r.webkitTransformOrigin=a,r.mozTransformOrigin=a,r.transformOrigin=a;var o="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(i=s.style).transform=o,i.webkitTransform=o}n.appendChild(s);var l={container:s,perspectiveElem:n,startPos:t,endPos:t,type:e};return this.threeDElements.push(l),l},HybridRendererBase.prototype.build3dContainers=function(){var t,e,r=this.layers.length,i="";for(t=0;t<r;t+=1)this.layers[t].ddd&&3!==this.layers[t].ty?("3d"!==i&&(i="3d",e=this.createThreeDContainer(t,"3d")),e.endPos=Math.max(e.endPos,t)):("2d"!==i&&(i="2d",e=this.createThreeDContainer(t,"2d")),e.endPos=Math.max(e.endPos,t));for(t=(r=this.threeDElements.length)-1;t>=0;t-=1)this.resizerElem.appendChild(this.threeDElements[t].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(t,e){for(var r=0,i=this.threeDElements.length;r<i;){if(e<=this.threeDElements[r].endPos){for(var n,s=this.threeDElements[r].startPos;s<e;)this.elements[s]&&this.elements[s].getBaseElement&&(n=this.elements[s].getBaseElement()),s+=1;n?this.threeDElements[r].container.insertBefore(t,n):this.threeDElements[r].container.appendChild(t);break}r+=1}},HybridRendererBase.prototype.configAnimation=function(t){var e=createTag("div"),r=this.animationItem.wrapper,i=e.style;i.width=t.w+"px",i.height=t.h+"px",this.resizerElem=e,styleDiv(e),i.transformStyle="flat",i.mozTransformStyle="flat",i.webkitTransformStyle="flat",this.renderConfig.className&&e.setAttribute("class",this.renderConfig.className),r.appendChild(e),i.overflow="hidden";var n=createNS("svg");n.setAttribute("width","1"),n.setAttribute("height","1"),styleDiv(n),this.resizerElem.appendChild(n);var s=createNS("defs");n.appendChild(s),this.data=t,this.setupGlobalData(t,n),this.globalData.defs=s,this.layers=t.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){var t;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var e=this.layers?this.layers.length:0;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var t,e,r,i,n=this.animationItem.wrapper.offsetWidth,s=this.animationItem.wrapper.offsetHeight,a=n/s;this.globalData.compSize.w/this.globalData.compSize.h>a?(t=n/this.globalData.compSize.w,e=n/this.globalData.compSize.w,r=0,i=(s-this.globalData.compSize.h*(n/this.globalData.compSize.w))/2):(t=s/this.globalData.compSize.h,e=s/this.globalData.compSize.h,r=(n-this.globalData.compSize.w*(s/this.globalData.compSize.h))/2,i=0);var o=this.resizerElem.style;o.webkitTransform="matrix3d("+t+",0,0,0,0,"+e+",0,0,0,0,1,0,"+r+","+i+",0,1)",o.transform=o.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var t,e=this.globalData.compSize.w,r=this.globalData.compSize.h,i=this.threeDElements.length;for(t=0;t<i;t+=1){var n=this.threeDElements[t].perspectiveElem.style;n.webkitPerspective=Math.sqrt(Math.pow(e,2)+Math.pow(r,2))+"px",n.perspective=n.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(t){var e,r=t.length,i=createTag("div");for(e=0;e<r;e+=1)if(t[e].xt){var n=this.createComp(t[e],i,this.globalData.comp,null);n.initExpressions(),this.globalData.projectInterface.registerComposition(n)}},extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(t,e){for(var r,i=0;i<e;)this.elements[i]&&this.elements[i].getBaseElement&&(r=this.elements[i].getBaseElement()),i+=1;r?this.layerElement.insertBefore(t,r):this.layerElement.appendChild(t)},HCompElement.prototype.createComp=function(t){return this.supports3d?new HCompElement(t,this.globalData,this):new SVGCompElement(t,this.globalData,this)},extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(t){return this.supports3d?new HCompElement(t,this.globalData,this):new SVGCompElement(t,this.globalData,this)};var CompExpressionInterface=function(t){function e(e){for(var r=0,i=t.layers.length;r<i;){if(t.layers[r].nm===e||t.layers[r].ind===e)return t.elements[r].layerInterface;r+=1}return null}return Object.defineProperty(e,"_name",{value:t.data.nm}),e.layer=e,e.pixelAspect=1,e.height=t.data.h||t.globalData.compSize.h,e.width=t.data.w||t.globalData.compSize.w,e.pixelAspect=1,e.frameDuration=1/t.globalData.frameRate,e.displayStartTime=0,e.numLayers=t.layers.length,e},Expressions=function(){var t={initExpressions:function(t){var e=0,r=[];t.renderer.compInterface=CompExpressionInterface(t.renderer),t.renderer.globalData.projectInterface.registerComposition(t.renderer),t.renderer.globalData.pushExpression=function(){e+=1},t.renderer.globalData.popExpression=function(){0==(e-=1)&&function(){var t,e=r.length;for(t=0;t<e;t+=1)r[t].release();r.length=0}()},t.renderer.globalData.registerExpressionProperty=function(t){-1===r.indexOf(t)&&r.push(t)}}};return t}(),MaskManagerInterface=function(){function t(t,e){this._mask=t,this._data=e}return Object.defineProperty(t.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(t.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}}),function(e){var r,i=createSizedArray(e.viewData.length),n=e.viewData.length;for(r=0;r<n;r+=1)i[r]=new t(e.viewData[r],e.masksProperties[r]);return function(t){for(r=0;r<n;){if(e.masksProperties[r].nm===t)return i[r];r+=1}return null}}}(),ExpressionPropertyInterface=function(){var t={pv:0,v:0,mult:1},e={pv:[0,0,0],v:[0,0,0],mult:1};function r(t,e,r){Object.defineProperty(t,"velocity",{get:function(){return e.getVelocityAtTime(e.comp.currentFrame)}}),t.numKeys=e.keyframes?e.keyframes.length:0,t.key=function(i){if(!t.numKeys)return 0;var n="";n="s"in e.keyframes[i-1]?e.keyframes[i-1].s:"e"in e.keyframes[i-2]?e.keyframes[i-2].e:e.keyframes[i-2].s;var s="unidimensional"===r?new Number(n):Object.assign({},n);return s.time=e.keyframes[i-1].t/e.elem.comp.globalData.frameRate,s.value="unidimensional"===r?n[0]:n,s},t.valueAtTime=e.getValueAtTime,t.speedAtTime=e.getSpeedAtTime,t.velocityAtTime=e.getVelocityAtTime,t.propertyGroup=e.propertyGroup}function i(){return t}return function(n){return n?"unidimensional"===n.propType?function(e){e&&"pv"in e||(e=t);var i=1/e.mult,n=e.pv*i,s=new Number(n);return s.value=n,r(s,e,"unidimensional"),function(){return e.k&&e.getValue(),n=e.v*i,s.value!==n&&((s=new Number(n)).value=n,r(s,e,"unidimensional")),s}}(n):function(t){t&&"pv"in t||(t=e);var i=1/t.mult,n=t.data&&t.data.l||t.pv.length,s=createTypedArray("float32",n),a=createTypedArray("float32",n);return s.value=a,r(s,t,"multidimensional"),function(){t.k&&t.getValue();for(var e=0;e<n;e+=1)a[e]=t.v[e]*i,s[e]=a[e];return s}}(n):i}}(),TransformExpressionInterface=function(t){function e(t){switch(t){case"scale":case"Scale":case"ADBE Scale":case 6:return e.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return e.rotation;case"ADBE Rotate X":return e.xRotation;case"ADBE Rotate Y":return e.yRotation;case"position":case"Position":case"ADBE Position":case 2:return e.position;case"ADBE Position_0":return e.xPosition;case"ADBE Position_1":return e.yPosition;case"ADBE Position_2":return e.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return e.anchorPoint;case"opacity":case"Opacity":case 11:return e.opacity;default:return null}}var r,i,n,s;return Object.defineProperty(e,"rotation",{get:ExpressionPropertyInterface(t.r||t.rz)}),Object.defineProperty(e,"zRotation",{get:ExpressionPropertyInterface(t.rz||t.r)}),Object.defineProperty(e,"xRotation",{get:ExpressionPropertyInterface(t.rx)}),Object.defineProperty(e,"yRotation",{get:ExpressionPropertyInterface(t.ry)}),Object.defineProperty(e,"scale",{get:ExpressionPropertyInterface(t.s)}),t.p?s=ExpressionPropertyInterface(t.p):(r=ExpressionPropertyInterface(t.px),i=ExpressionPropertyInterface(t.py),t.pz&&(n=ExpressionPropertyInterface(t.pz))),Object.defineProperty(e,"position",{get:function(){return t.p?s():[r(),i(),n?n():0]}}),Object.defineProperty(e,"xPosition",{get:ExpressionPropertyInterface(t.px)}),Object.defineProperty(e,"yPosition",{get:ExpressionPropertyInterface(t.py)}),Object.defineProperty(e,"zPosition",{get:ExpressionPropertyInterface(t.pz)}),Object.defineProperty(e,"anchorPoint",{get:ExpressionPropertyInterface(t.a)}),Object.defineProperty(e,"opacity",{get:ExpressionPropertyInterface(t.o)}),Object.defineProperty(e,"skew",{get:ExpressionPropertyInterface(t.sk)}),Object.defineProperty(e,"skewAxis",{get:ExpressionPropertyInterface(t.sa)}),Object.defineProperty(e,"orientation",{get:ExpressionPropertyInterface(t.or)}),e},LayerExpressionInterface=function(){function t(t){var e=new Matrix;return void 0!==t?this._elem.finalTransform.mProp.getValueAtTime(t).clone(e):this._elem.finalTransform.mProp.applyToMatrix(e),e}function e(t,e){var r=this.getMatrix(e);return r.props[12]=0,r.props[13]=0,r.props[14]=0,this.applyPoint(r,t)}function r(t,e){var r=this.getMatrix(e);return this.applyPoint(r,t)}function i(t,e){var r=this.getMatrix(e);return r.props[12]=0,r.props[13]=0,r.props[14]=0,this.invertPoint(r,t)}function n(t,e){var r=this.getMatrix(e);return this.invertPoint(r,t)}function s(t,e){if(this._elem.hierarchy&&this._elem.hierarchy.length){var r,i=this._elem.hierarchy.length;for(r=0;r<i;r+=1)this._elem.hierarchy[r].finalTransform.mProp.applyToMatrix(t)}return t.applyToPointArray(e[0],e[1],e[2]||0)}function a(t,e){if(this._elem.hierarchy&&this._elem.hierarchy.length){var r,i=this._elem.hierarchy.length;for(r=0;r<i;r+=1)this._elem.hierarchy[r].finalTransform.mProp.applyToMatrix(t)}return t.inversePoint(e)}function o(t){var e=new Matrix;if(e.reset(),this._elem.finalTransform.mProp.applyToMatrix(e),this._elem.hierarchy&&this._elem.hierarchy.length){var r,i=this._elem.hierarchy.length;for(r=0;r<i;r+=1)this._elem.hierarchy[r].finalTransform.mProp.applyToMatrix(e);return e.inversePoint(t)}return e.inversePoint(t)}function l(){return[1,1,1,1]}return function(h){var u;function c(t){switch(t){case"ADBE Root Vectors Group":case"Contents":case 2:return c.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return u;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return c.effect;case"ADBE Text Properties":return c.textInterface;default:return null}}c.getMatrix=t,c.invertPoint=a,c.applyPoint=s,c.toWorld=r,c.toWorldVec=e,c.fromWorld=n,c.fromWorldVec=i,c.toComp=r,c.fromComp=o,c.sampleImage=l,c.sourceRectAtTime=h.sourceRectAtTime.bind(h),c._elem=h;var p=getDescriptor(u=TransformExpressionInterface(h.finalTransform.mProp),"anchorPoint");return Object.defineProperties(c,{hasParent:{get:function(){return h.hierarchy.length}},parent:{get:function(){return h.hierarchy[0].layerInterface}},rotation:getDescriptor(u,"rotation"),scale:getDescriptor(u,"scale"),position:getDescriptor(u,"position"),opacity:getDescriptor(u,"opacity"),anchorPoint:p,anchor_point:p,transform:{get:function(){return u}},active:{get:function(){return h.isInRange}}}),c.startTime=h.data.st,c.index=h.data.ind,c.source=h.data.refId,c.height=0===h.data.ty?h.data.h:100,c.width=0===h.data.ty?h.data.w:100,c.inPoint=h.data.ip/h.comp.globalData.frameRate,c.outPoint=h.data.op/h.comp.globalData.frameRate,c._name=h.data.nm,c.registerMaskInterface=function(t){c.mask=new MaskManagerInterface(t,h)},c.registerEffectsInterface=function(t){c.effect=t},c}}(),propertyGroupFactory=function(t,e){return function(r){return(r=void 0===r?1:r)<=0?t:e(r-1)}},PropertyInterface=function(t,e){var r={_name:t};return function(t){return(t=void 0===t?1:t)<=0?r:e(t-1)}},EffectsExpressionInterface=function(){function t(r,i,n,s){function a(t){for(var e=r.ef,i=0,n=e.length;i<n;){if(t===e[i].nm||t===e[i].mn||t===e[i].ix)return 5===e[i].ty?h[i]:h[i]();i+=1}throw new Error}var o,l=propertyGroupFactory(a,n),h=[],u=r.ef.length;for(o=0;o<u;o+=1)5===r.ef[o].ty?h.push(t(r.ef[o],i.effectElements[o],i.effectElements[o].propertyGroup,s)):h.push(e(i.effectElements[o],r.ef[o].ty,s,l));return"ADBE Color Control"===r.mn&&Object.defineProperty(a,"color",{get:function(){return h[0]()}}),Object.defineProperties(a,{numProperties:{get:function(){return r.np}},_name:{value:r.nm},propertyGroup:{value:l}}),a.enabled=0!==r.en,a.active=a.enabled,a}function e(t,e,r,i){var n=ExpressionPropertyInterface(t.p);return t.p.setGroupProperty&&t.p.setGroupProperty(PropertyInterface("",i)),function(){return 10===e?r.comp.compInterface(t.p.v):n()}}return{createEffectsInterface:function(e,r){if(e.effectsManager){var i,n=[],s=e.data.ef,a=e.effectsManager.effectElements.length;for(i=0;i<a;i+=1)n.push(t(s[i],e.effectsManager.effectElements[i],r,e));var o=e.data.ef||[],l=function(t){for(i=0,a=o.length;i<a;){if(t===o[i].nm||t===o[i].mn||t===o[i].ix)return n[i];i+=1}return null};return Object.defineProperty(l,"numProperties",{get:function(){return o.length}}),l}return null}}}(),ShapePathInterface=function(t,e,r){var i=e.sh;function n(t){return"Shape"===t||"shape"===t||"Path"===t||"path"===t||"ADBE Vector Shape"===t||2===t?n.path:null}var s=propertyGroupFactory(n,r);return i.setGroupProperty(PropertyInterface("Path",s)),Object.defineProperties(n,{path:{get:function(){return i.k&&i.getValue(),i}},shape:{get:function(){return i.k&&i.getValue(),i}},_name:{value:t.nm},ix:{value:t.ix},propertyIndex:{value:t.ix},mn:{value:t.mn},propertyGroup:{value:r}}),n},ShapeExpressionInterface=function(){function t(t,a,p){var d,f=[],m=t?t.length:0;for(d=0;d<m;d+=1)"gr"===t[d].ty?f.push(e(t[d],a[d],p)):"fl"===t[d].ty?f.push(r(t[d],a[d],p)):"st"===t[d].ty?f.push(n(t[d],a[d],p)):"tm"===t[d].ty?f.push(s(t[d],a[d],p)):"tr"===t[d].ty||("el"===t[d].ty?f.push(o(t[d],a[d],p)):"sr"===t[d].ty?f.push(l(t[d],a[d],p)):"sh"===t[d].ty?f.push(ShapePathInterface(t[d],a[d],p)):"rc"===t[d].ty?f.push(h(t[d],a[d],p)):"rd"===t[d].ty?f.push(u(t[d],a[d],p)):"rp"===t[d].ty?f.push(c(t[d],a[d],p)):"gf"===t[d].ty?f.push(i(t[d],a[d],p)):f.push((t[d],a[d],function(){return null})));return f}function e(e,r,i){var n=function(t){switch(t){case"ADBE Vectors Group":case"Contents":case 2:return n.content;default:return n.transform}};n.propertyGroup=propertyGroupFactory(n,i);var s=function(e,r,i){var n,s=function(t){for(var e=0,r=n.length;e<r;){if(n[e]._name===t||n[e].mn===t||n[e].propertyIndex===t||n[e].ix===t||n[e].ind===t)return n[e];e+=1}return"number"==typeof t?n[t-1]:null};s.propertyGroup=propertyGroupFactory(s,i),n=t(e.it,r.it,s.propertyGroup),s.numProperties=n.length;var o=a(e.it[e.it.length-1],r.it[r.it.length-1],s.propertyGroup);return s.transform=o,s.propertyIndex=e.cix,s._name=e.nm,s}(e,r,n.propertyGroup),o=a(e.it[e.it.length-1],r.it[r.it.length-1],n.propertyGroup);return n.content=s,n.transform=o,Object.defineProperty(n,"_name",{get:function(){return e.nm}}),n.numProperties=e.np,n.propertyIndex=e.ix,n.nm=e.nm,n.mn=e.mn,n}function r(t,e,r){function i(t){return"Color"===t||"color"===t?i.color:"Opacity"===t||"opacity"===t?i.opacity:null}return Object.defineProperties(i,{color:{get:ExpressionPropertyInterface(e.c)},opacity:{get:ExpressionPropertyInterface(e.o)},_name:{value:t.nm},mn:{value:t.mn}}),e.c.setGroupProperty(PropertyInterface("Color",r)),e.o.setGroupProperty(PropertyInterface("Opacity",r)),i}function i(t,e,r){function i(t){return"Start Point"===t||"start point"===t?i.startPoint:"End Point"===t||"end point"===t?i.endPoint:"Opacity"===t||"opacity"===t?i.opacity:null}return Object.defineProperties(i,{startPoint:{get:ExpressionPropertyInterface(e.s)},endPoint:{get:ExpressionPropertyInterface(e.e)},opacity:{get:ExpressionPropertyInterface(e.o)},type:{get:function(){return"a"}},_name:{value:t.nm},mn:{value:t.mn}}),e.s.setGroupProperty(PropertyInterface("Start Point",r)),e.e.setGroupProperty(PropertyInterface("End Point",r)),e.o.setGroupProperty(PropertyInterface("Opacity",r)),i}function n(t,e,r){var i,n=propertyGroupFactory(h,r),s=propertyGroupFactory(l,n);function a(r){Object.defineProperty(l,t.d[r].nm,{get:ExpressionPropertyInterface(e.d.dataProps[r].p)})}var o=t.d?t.d.length:0,l={};for(i=0;i<o;i+=1)a(i),e.d.dataProps[i].p.setGroupProperty(s);function h(t){return"Color"===t||"color"===t?h.color:"Opacity"===t||"opacity"===t?h.opacity:"Stroke Width"===t||"stroke width"===t?h.strokeWidth:null}return Object.defineProperties(h,{color:{get:ExpressionPropertyInterface(e.c)},opacity:{get:ExpressionPropertyInterface(e.o)},strokeWidth:{get:ExpressionPropertyInterface(e.w)},dash:{get:function(){return l}},_name:{value:t.nm},mn:{value:t.mn}}),e.c.setGroupProperty(PropertyInterface("Color",n)),e.o.setGroupProperty(PropertyInterface("Opacity",n)),e.w.setGroupProperty(PropertyInterface("Stroke Width",n)),h}function s(t,e,r){function i(e){return e===t.e.ix||"End"===e||"end"===e?i.end:e===t.s.ix?i.start:e===t.o.ix?i.offset:null}var n=propertyGroupFactory(i,r);return i.propertyIndex=t.ix,e.s.setGroupProperty(PropertyInterface("Start",n)),e.e.setGroupProperty(PropertyInterface("End",n)),e.o.setGroupProperty(PropertyInterface("Offset",n)),i.propertyIndex=t.ix,i.propertyGroup=r,Object.defineProperties(i,{start:{get:ExpressionPropertyInterface(e.s)},end:{get:ExpressionPropertyInterface(e.e)},offset:{get:ExpressionPropertyInterface(e.o)},_name:{value:t.nm}}),i.mn=t.mn,i}function a(t,e,r){function i(e){return t.a.ix===e||"Anchor Point"===e?i.anchorPoint:t.o.ix===e||"Opacity"===e?i.opacity:t.p.ix===e||"Position"===e?i.position:t.r.ix===e||"Rotation"===e||"ADBE Vector Rotation"===e?i.rotation:t.s.ix===e||"Scale"===e?i.scale:t.sk&&t.sk.ix===e||"Skew"===e?i.skew:t.sa&&t.sa.ix===e||"Skew Axis"===e?i.skewAxis:null}var n=propertyGroupFactory(i,r);return e.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",n)),e.transform.mProps.p.setGroupProperty(PropertyInterface("Position",n)),e.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",n)),e.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",n)),e.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",n)),e.transform.mProps.sk&&(e.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",n)),e.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",n))),e.transform.op.setGroupProperty(PropertyInterface("Opacity",n)),Object.defineProperties(i,{opacity:{get:ExpressionPropertyInterface(e.transform.mProps.o)},position:{get:ExpressionPropertyInterface(e.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(e.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(e.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(e.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(e.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(e.transform.mProps.sa)},_name:{value:t.nm}}),i.ty="tr",i.mn=t.mn,i.propertyGroup=r,i}function o(t,e,r){function i(e){return t.p.ix===e?i.position:t.s.ix===e?i.size:null}var n=propertyGroupFactory(i,r);i.propertyIndex=t.ix;var s="tm"===e.sh.ty?e.sh.prop:e.sh;return s.s.setGroupProperty(PropertyInterface("Size",n)),s.p.setGroupProperty(PropertyInterface("Position",n)),Object.defineProperties(i,{size:{get:ExpressionPropertyInterface(s.s)},position:{get:ExpressionPropertyInterface(s.p)},_name:{value:t.nm}}),i.mn=t.mn,i}function l(t,e,r){function i(e){return t.p.ix===e?i.position:t.r.ix===e?i.rotation:t.pt.ix===e?i.points:t.or.ix===e||"ADBE Vector Star Outer Radius"===e?i.outerRadius:t.os.ix===e?i.outerRoundness:!t.ir||t.ir.ix!==e&&"ADBE Vector Star Inner Radius"!==e?t.is&&t.is.ix===e?i.innerRoundness:null:i.innerRadius}var n=propertyGroupFactory(i,r),s="tm"===e.sh.ty?e.sh.prop:e.sh;return i.propertyIndex=t.ix,s.or.setGroupProperty(PropertyInterface("Outer Radius",n)),s.os.setGroupProperty(PropertyInterface("Outer Roundness",n)),s.pt.setGroupProperty(PropertyInterface("Points",n)),s.p.setGroupProperty(PropertyInterface("Position",n)),s.r.setGroupProperty(PropertyInterface("Rotation",n)),t.ir&&(s.ir.setGroupProperty(PropertyInterface("Inner Radius",n)),s.is.setGroupProperty(PropertyInterface("Inner Roundness",n))),Object.defineProperties(i,{position:{get:ExpressionPropertyInterface(s.p)},rotation:{get:ExpressionPropertyInterface(s.r)},points:{get:ExpressionPropertyInterface(s.pt)},outerRadius:{get:ExpressionPropertyInterface(s.or)},outerRoundness:{get:ExpressionPropertyInterface(s.os)},innerRadius:{get:ExpressionPropertyInterface(s.ir)},innerRoundness:{get:ExpressionPropertyInterface(s.is)},_name:{value:t.nm}}),i.mn=t.mn,i}function h(t,e,r){function i(e){return t.p.ix===e?i.position:t.r.ix===e?i.roundness:t.s.ix===e||"Size"===e||"ADBE Vector Rect Size"===e?i.size:null}var n=propertyGroupFactory(i,r),s="tm"===e.sh.ty?e.sh.prop:e.sh;return i.propertyIndex=t.ix,s.p.setGroupProperty(PropertyInterface("Position",n)),s.s.setGroupProperty(PropertyInterface("Size",n)),s.r.setGroupProperty(PropertyInterface("Rotation",n)),Object.defineProperties(i,{position:{get:ExpressionPropertyInterface(s.p)},roundness:{get:ExpressionPropertyInterface(s.r)},size:{get:ExpressionPropertyInterface(s.s)},_name:{value:t.nm}}),i.mn=t.mn,i}function u(t,e,r){function i(e){return t.r.ix===e||"Round Corners 1"===e?i.radius:null}var n=propertyGroupFactory(i,r),s=e;return i.propertyIndex=t.ix,s.rd.setGroupProperty(PropertyInterface("Radius",n)),Object.defineProperties(i,{radius:{get:ExpressionPropertyInterface(s.rd)},_name:{value:t.nm}}),i.mn=t.mn,i}function c(t,e,r){function i(e){return t.c.ix===e||"Copies"===e?i.copies:t.o.ix===e||"Offset"===e?i.offset:null}var n=propertyGroupFactory(i,r),s=e;return i.propertyIndex=t.ix,s.c.setGroupProperty(PropertyInterface("Copies",n)),s.o.setGroupProperty(PropertyInterface("Offset",n)),Object.defineProperties(i,{copies:{get:ExpressionPropertyInterface(s.c)},offset:{get:ExpressionPropertyInterface(s.o)},_name:{value:t.nm}}),i.mn=t.mn,i}return function(e,r,i){var n;function s(t){if("number"==typeof t)return 0===(t=void 0===t?1:t)?i:n[t-1];for(var e=0,r=n.length;e<r;){if(n[e]._name===t)return n[e];e+=1}return null}return s.propertyGroup=propertyGroupFactory(s,(function(){return i})),n=t(e,r,s.propertyGroup),s.numProperties=n.length,s._name="Contents",s}}(),TextExpressionInterface=function(t){var e;function r(t){return"ADBE Text Document"===t?r.sourceText:null}return Object.defineProperty(r,"sourceText",{get:function(){t.textProperty.getValue();var r=t.textProperty.currentData.t;return e&&r===e.value||((e=new String(r)).value=r||new String(r),Object.defineProperty(e,"style",{get:function(){return{fillColor:t.textProperty.currentData.fc}}})),e}}),r};function _typeof$2(t){return _typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$2(t)}var FootageInterface=(dataInterfaceFactory=function(t){function e(t){return"Outline"===t?e.outlineInterface():null}return e._name="Outline",e.outlineInterface=function(t){var e="",r=t.getFootageData();function i(t){if(r[t])return e=t,"object"===_typeof$2(r=r[t])?i:r;var n=t.indexOf(e);if(-1!==n){var s=parseInt(t.substr(n+e.length),10);return"object"===_typeof$2(r=r[s])?i:r}return""}return function(){return e="",r=t.getFootageData(),i}}(t),e},function(t){function e(t){return"Data"===t?e.dataInterface:null}return e._name="Data",e.dataInterface=dataInterfaceFactory(t),e}),dataInterfaceFactory,interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(t){return interfaces[t]||null}function _typeof$1(t){return _typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$1(t)}function seedRandom(t,e){var r=this,i=256,n="random",s=e.pow(i,6),a=e.pow(2,52),o=2*a,l=255;function h(t){var e,r=t.length,n=this,s=0,a=n.i=n.j=0,o=n.S=[];for(r||(t=[r++]);s<i;)o[s]=s++;for(s=0;s<i;s++)o[s]=o[a=l&a+t[s%r]+(e=o[s])],o[a]=e;n.g=function(t){for(var e,r=0,s=n.i,a=n.j,o=n.S;t--;)e=o[s=l&s+1],r=r*i+o[l&(o[s]=o[a=l&a+e])+(o[a]=e)];return n.i=s,n.j=a,r}}function u(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function c(t,e){var r,i=[],n=_typeof$1(t);if(e&&"object"==n)for(r in t)try{i.push(c(t[r],e-1))}catch(t){}return i.length?i:"string"==n?t:t+"\0"}function p(t,e){for(var r,i=t+"",n=0;n<i.length;)e[l&n]=l&(r^=19*e[l&n])+i.charCodeAt(n++);return d(e)}function d(t){return String.fromCharCode.apply(0,t)}e["seed"+n]=function(l,f,m){var g=[],v=p(c((f=!0===f?{entropy:!0}:f||{}).entropy?[l,d(t)]:null===l?function(){try{var e=new Uint8Array(i);return(r.crypto||r.msCrypto).getRandomValues(e),d(e)}catch(e){var n=r.navigator,s=n&&n.plugins;return[+new Date,r,s,r.screen,d(t)]}}():l,3),g),y=new h(g),x=function(){for(var t=y.g(6),e=s,r=0;t<a;)t=(t+r)*i,e*=i,r=y.g(1);for(;t>=o;)t/=2,e/=2,r>>>=1;return(t+r)/e};return x.int32=function(){return 0|y.g(4)},x.quick=function(){return y.g(4)/4294967296},x.double=x,p(d(y.S),t),(f.pass||m||function(t,r,i,s){return s&&(s.S&&u(s,y),t.state=function(){return u(y,{})}),i?(e[n]=t,r):t})(x,v,"global"in f?f.global:this==e,f.state)},p(e.random(),t)}function initialize$2(t){seedRandom([],t)}var propTypes={SHAPE:"shape"};function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null;function $bm_isInstanceOfArray(t){return t.constructor===Array||t.constructor===Float32Array}function isNumerable(t,e){return"number"===t||"boolean"===t||"string"===t||e instanceof Number}function $bm_neg(t){var e=_typeof(t);if("number"===e||"boolean"===e||t instanceof Number)return-t;if($bm_isInstanceOfArray(t)){var r,i=t.length,n=[];for(r=0;r<i;r+=1)n[r]=-t[r];return n}return t.propType?t.v:-t}initialize$2(BMMath);var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(t,e){var r=_typeof(t),i=_typeof(e);if("string"===r||"string"===i)return t+e;if(isNumerable(r,t)&&isNumerable(i,e))return t+e;if($bm_isInstanceOfArray(t)&&isNumerable(i,e))return(t=t.slice(0))[0]+=e,t;if(isNumerable(r,t)&&$bm_isInstanceOfArray(e))return(e=e.slice(0))[0]=t+e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var n=0,s=t.length,a=e.length,o=[];n<s||n<a;)("number"==typeof t[n]||t[n]instanceof Number)&&("number"==typeof e[n]||e[n]instanceof Number)?o[n]=t[n]+e[n]:o[n]=void 0===e[n]?t[n]:t[n]||e[n],n+=1;return o}return 0}var add=sum;function sub(t,e){var r=_typeof(t),i=_typeof(e);if(isNumerable(r,t)&&isNumerable(i,e))return"string"===r&&(t=parseInt(t,10)),"string"===i&&(e=parseInt(e,10)),t-e;if($bm_isInstanceOfArray(t)&&isNumerable(i,e))return(t=t.slice(0))[0]-=e,t;if(isNumerable(r,t)&&$bm_isInstanceOfArray(e))return(e=e.slice(0))[0]=t-e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var n=0,s=t.length,a=e.length,o=[];n<s||n<a;)("number"==typeof t[n]||t[n]instanceof Number)&&("number"==typeof e[n]||e[n]instanceof Number)?o[n]=t[n]-e[n]:o[n]=void 0===e[n]?t[n]:t[n]||e[n],n+=1;return o}return 0}function mul(t,e){var r,i,n,s=_typeof(t),a=_typeof(e);if(isNumerable(s,t)&&isNumerable(a,e))return t*e;if($bm_isInstanceOfArray(t)&&isNumerable(a,e)){for(n=t.length,r=createTypedArray("float32",n),i=0;i<n;i+=1)r[i]=t[i]*e;return r}if(isNumerable(s,t)&&$bm_isInstanceOfArray(e)){for(n=e.length,r=createTypedArray("float32",n),i=0;i<n;i+=1)r[i]=t*e[i];return r}return 0}function div(t,e){var r,i,n,s=_typeof(t),a=_typeof(e);if(isNumerable(s,t)&&isNumerable(a,e))return t/e;if($bm_isInstanceOfArray(t)&&isNumerable(a,e)){for(n=t.length,r=createTypedArray("float32",n),i=0;i<n;i+=1)r[i]=t[i]/e;return r}if(isNumerable(s,t)&&$bm_isInstanceOfArray(e)){for(n=e.length,r=createTypedArray("float32",n),i=0;i<n;i+=1)r[i]=t/e[i];return r}return 0}function mod(t,e){return"string"==typeof t&&(t=parseInt(t,10)),"string"==typeof e&&(e=parseInt(e,10)),t%e}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(t,e,r){if(e>r){var i=r;r=e,e=i}return Math.min(Math.max(t,e),r)}function radiansToDegrees(t){return t/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(t){return t*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(t,e){if("number"==typeof t||t instanceof Number)return e=e||0,Math.abs(t-e);var r;e||(e=helperLengthArray);var i=Math.min(t.length,e.length),n=0;for(r=0;r<i;r+=1)n+=Math.pow(e[r]-t[r],2);return Math.sqrt(n)}function normalize(t){return div(t,length(t))}function rgbToHsl(t){var e,r,i=t[0],n=t[1],s=t[2],a=Math.max(i,n,s),o=Math.min(i,n,s),l=(a+o)/2;if(a===o)e=0,r=0;else{var h=a-o;switch(r=l>.5?h/(2-a-o):h/(a+o),a){case i:e=(n-s)/h+(n<s?6:0);break;case n:e=(s-i)/h+2;break;case s:e=(i-n)/h+4}e/=6}return[e,r,l,t[3]]}function hue2rgb(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function hslToRgb(t){var e,r,i,n=t[0],s=t[1],a=t[2];if(0===s)e=a,i=a,r=a;else{var o=a<.5?a*(1+s):a+s-a*s,l=2*a-o;e=hue2rgb(l,o,n+1/3),r=hue2rgb(l,o,n),i=hue2rgb(l,o,n-1/3)}return[e,r,i,t[3]]}function linear(t,e,r,i,n){if(void 0!==i&&void 0!==n||(i=e,n=r,e=0,r=1),r<e){var s=r;r=e,e=s}if(t<=e)return i;if(t>=r)return n;var a,o=r===e?0:(t-e)/(r-e);if(!i.length)return i+(n-i)*o;var l=i.length,h=createTypedArray("float32",l);for(a=0;a<l;a+=1)h[a]=i[a]+(n[a]-i[a])*o;return h}function random(t,e){if(void 0===e&&(void 0===t?(t=0,e=1):(e=t,t=void 0)),e.length){var r,i=e.length;t||(t=createTypedArray("float32",i));var n=createTypedArray("float32",i),s=BMMath.random();for(r=0;r<i;r+=1)n[r]=t[r]+s*(e[r]-t[r]);return n}return void 0===t&&(t=0),t+BMMath.random()*(e-t)}function createPath(t,e,r,i){var n,s=t.length,a=shapePool.newElement();a.setPathData(!!i,s);var o,l,h=[0,0];for(n=0;n<s;n+=1)o=e&&e[n]?e[n]:h,l=r&&r[n]?r[n]:h,a.setTripleAt(t[n][0],t[n][1],l[0]+t[n][0],l[1]+t[n][1],o[0]+t[n][0],o[1]+t[n][1],n,!0);return a}function initiateExpression(elem,data,property){function noOp(t){return t}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||!0!==this.data.hd,wiggle=function(t,e){var r,i,n=this.pv.length?this.pv.length:1,s=createTypedArray("float32",n),a=Math.floor(5*time);for(r=0,i=0;r<a;){for(i=0;i<n;i+=1)s[i]+=-e+2*e*BMMath.random();r+=1}var o=5*time,l=o-Math.floor(o),h=createTypedArray("float32",n);if(n>1){for(i=0;i<n;i+=1)h[i]=this.pv[i]+s[i]+(-e+2*e*BMMath.random())*l;return h}return this.pv+s[0]+(-e+2*e*BMMath.random())*l}.bind(this);function loopInDuration(t,e){return loopIn(t,e,!0)}function loopOutDuration(t,e){return loopOut(t,e,!0)}thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue;function lookAt(t,e){var r=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],i=Math.atan2(r[0],Math.sqrt(r[1]*r[1]+r[2]*r[2]))/degToRads;return[-Math.atan2(r[1],r[2])/degToRads,i,0]}function easeOut(t,e,r,i,n){return applyEase(easeOutBez,t,e,r,i,n)}function easeIn(t,e,r,i,n){return applyEase(easeInBez,t,e,r,i,n)}function ease(t,e,r,i,n){return applyEase(easeInOutBez,t,e,r,i,n)}function applyEase(t,e,r,i,n,s){void 0===n?(n=r,s=i):e=(e-r)/(i-r),e>1?e=1:e<0&&(e=0);var a=t(e);if($bm_isInstanceOfArray(n)){var o,l=n.length,h=createTypedArray("float32",l);for(o=0;o<l;o+=1)h[o]=(s[o]-n[o])*a+n[o];return h}return(s-n)*a+n}function nearestKey(t){var e,r,i,n=data.k.length;if(data.k.length&&"number"!=typeof data.k[0])if(r=-1,(t*=elem.comp.globalData.frameRate)<data.k[0].t)r=1,i=data.k[0].t;else{for(e=0;e<n-1;e+=1){if(t===data.k[e].t){r=e+1,i=data.k[e].t;break}if(t>data.k[e].t&&t<data.k[e+1].t){t-data.k[e].t>data.k[e+1].t-t?(r=e+2,i=data.k[e+1].t):(r=e+1,i=data.k[e].t);break}}-1===r&&(r=e+1,i=data.k[e].t)}else r=0,i=0;var s={};return s.index=r,s.time=i/elem.comp.globalData.frameRate,s}function key(t){var e,r,i;if(!data.k.length||"number"==typeof data.k[0])throw new Error("The property has no keyframe at index "+t);t-=1,e={time:data.k[t].t/elem.comp.globalData.frameRate,value:[]};var n=Object.prototype.hasOwnProperty.call(data.k[t],"s")?data.k[t].s:data.k[t-1].e;for(i=n.length,r=0;r<i;r+=1)e[r]=n[r],e.value[r]=n[r];return e}function framesToTime(t,e){return e||(e=elem.comp.globalData.frameRate),t/e}function timeToFrames(t,e){return t||0===t||(t=time),e||(e=elem.comp.globalData.frameRate),t*e}function seedRandom(t){BMMath.seedrandom(randSeed+t)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(t,e){return"string"==typeof value?void 0===e?value.substring(t):value.substring(t,e):""}function substr(t,e){return"string"==typeof value?void 0===e?value.substr(t):value.substr(t,e):""}function posterizeTime(t){time=0===t?0:Math.floor(time*t)/t,value=valueAtTime(time)}var index=elem.data.ind,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(t){return value=t,this.frameExpressionId===elem.globalData.frameId&&"textSelector"!==this.propType?value:("textSelector"===this.propType&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),(hasParent=!(!elem.hierarchy||!elem.hierarchy.length))&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath],ob}(),expressionHelpers={searchExpressions:function(t,e,r){e.x&&(r.k=!0,r.x=!0,r.initiateExpression=ExpressionManager.initiateExpression,r.effectsSequence.push(r.initiateExpression(t,e,r).bind(r)))},getSpeedAtTime:function(t){var e=this.getValueAtTime(t),r=this.getValueAtTime(t+-.01),i=0;if(e.length){var n;for(n=0;n<e.length;n+=1)i+=Math.pow(r[n]-e[n],2);i=100*Math.sqrt(i)}else i=0;return i},getVelocityAtTime:function(t){if(void 0!==this.vel)return this.vel;var e,r,i=-.001,n=this.getValueAtTime(t),s=this.getValueAtTime(t+i);if(n.length)for(e=createTypedArray("float32",n.length),r=0;r<n.length;r+=1)e[r]=(s[r]-n[r])/i;else e=(s-n)/i;return e},getValueAtTime:function(t){return t*=this.elem.globalData.frameRate,(t-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<t?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(t,this._cachingAtTime),this._cachingAtTime.lastFrame=t),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(t){this.propertyGroup=t}};function addPropertyDecorator(){function t(t,e,r){if(!this.k||!this.keyframes)return this.pv;t=t?t.toLowerCase():"";var i,n,s,a,o,l=this.comp.renderedFrame,h=this.keyframes,u=h[h.length-1].t;if(l<=u)return this.pv;if(r?n=u-(i=e?Math.abs(u-this.elem.comp.globalData.frameRate*e):Math.max(0,u-this.elem.data.ip)):((!e||e>h.length-1)&&(e=h.length-1),i=u-(n=h[h.length-1-e].t)),"pingpong"===t){if(Math.floor((l-n)/i)%2!=0)return this.getValueAtTime((i-(l-n)%i+n)/this.comp.globalData.frameRate,0)}else{if("offset"===t){var c=this.getValueAtTime(n/this.comp.globalData.frameRate,0),p=this.getValueAtTime(u/this.comp.globalData.frameRate,0),d=this.getValueAtTime(((l-n)%i+n)/this.comp.globalData.frameRate,0),f=Math.floor((l-n)/i);if(this.pv.length){for(a=(o=new Array(c.length)).length,s=0;s<a;s+=1)o[s]=(p[s]-c[s])*f+d[s];return o}return(p-c)*f+d}if("continue"===t){var m=this.getValueAtTime(u/this.comp.globalData.frameRate,0),g=this.getValueAtTime((u-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(a=(o=new Array(m.length)).length,s=0;s<a;s+=1)o[s]=m[s]+(m[s]-g[s])*((l-u)/this.comp.globalData.frameRate)/5e-4;return o}return m+(l-u)/.001*(m-g)}}return this.getValueAtTime(((l-n)%i+n)/this.comp.globalData.frameRate,0)}function e(t,e,r){if(!this.k)return this.pv;t=t?t.toLowerCase():"";var i,n,s,a,o,l=this.comp.renderedFrame,h=this.keyframes,u=h[0].t;if(l>=u)return this.pv;if(r?n=u+(i=e?Math.abs(this.elem.comp.globalData.frameRate*e):Math.max(0,this.elem.data.op-u)):((!e||e>h.length-1)&&(e=h.length-1),i=(n=h[e].t)-u),"pingpong"===t){if(Math.floor((u-l)/i)%2==0)return this.getValueAtTime(((u-l)%i+u)/this.comp.globalData.frameRate,0)}else{if("offset"===t){var c=this.getValueAtTime(u/this.comp.globalData.frameRate,0),p=this.getValueAtTime(n/this.comp.globalData.frameRate,0),d=this.getValueAtTime((i-(u-l)%i+u)/this.comp.globalData.frameRate,0),f=Math.floor((u-l)/i)+1;if(this.pv.length){for(a=(o=new Array(c.length)).length,s=0;s<a;s+=1)o[s]=d[s]-(p[s]-c[s])*f;return o}return d-(p-c)*f}if("continue"===t){var m=this.getValueAtTime(u/this.comp.globalData.frameRate,0),g=this.getValueAtTime((u+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(a=(o=new Array(m.length)).length,s=0;s<a;s+=1)o[s]=m[s]+(m[s]-g[s])*(u-l)/.001;return o}return m+(m-g)*(u-l)/.001}}return this.getValueAtTime((i-((u-l)%i+u))/this.comp.globalData.frameRate,0)}function r(t,e){if(!this.k)return this.pv;if(t=.5*(t||.4),(e=Math.floor(e||5))<=1)return this.pv;var r,i,n=this.comp.renderedFrame/this.comp.globalData.frameRate,s=n-t,a=e>1?(n+t-s)/(e-1):1,o=0,l=0;for(r=this.pv.length?createTypedArray("float32",this.pv.length):0;o<e;){if(i=this.getValueAtTime(s+o*a),this.pv.length)for(l=0;l<this.pv.length;l+=1)r[l]+=i[l];else r+=i;o+=1}if(this.pv.length)for(l=0;l<this.pv.length;l+=1)r[l]/=e;else r/=e;return r}function i(t){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var e=this._transformCachingAtTime.v;if(e.cloneFromProps(this.pre.props),this.appliedTransformations<1){var r=this.a.getValueAtTime(t);e.translate(-r[0]*this.a.mult,-r[1]*this.a.mult,r[2]*this.a.mult)}if(this.appliedTransformations<2){var i=this.s.getValueAtTime(t);e.scale(i[0]*this.s.mult,i[1]*this.s.mult,i[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var n=this.sk.getValueAtTime(t),s=this.sa.getValueAtTime(t);e.skewFromAxis(-n*this.sk.mult,s*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var a=this.r.getValueAtTime(t);e.rotate(-a*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var o=this.rz.getValueAtTime(t),l=this.ry.getValueAtTime(t),h=this.rx.getValueAtTime(t),u=this.or.getValueAtTime(t);e.rotateZ(-o*this.rz.mult).rotateY(l*this.ry.mult).rotateX(h*this.rx.mult).rotateZ(-u[2]*this.or.mult).rotateY(u[1]*this.or.mult).rotateX(u[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var c=this.px.getValueAtTime(t),p=this.py.getValueAtTime(t);if(this.data.p.z){var d=this.pz.getValueAtTime(t);e.translate(c*this.px.mult,p*this.py.mult,-d*this.pz.mult)}else e.translate(c*this.px.mult,p*this.py.mult,0)}else{var f=this.p.getValueAtTime(t);e.translate(f[0]*this.p.mult,f[1]*this.p.mult,-f[2]*this.p.mult)}return e}function n(){return this.v.clone(new Matrix)}var s=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(t,e,r){var a=s(t,e,r);return a.dynamicProperties.length?a.getValueAtTime=i.bind(a):a.getValueAtTime=n.bind(a),a.setGroupProperty=expressionHelpers.setGroupProperty,a};var a=PropertyFactory.getProp;PropertyFactory.getProp=function(i,n,s,o,l){var h=a(i,n,s,o,l);h.kf?h.getValueAtTime=expressionHelpers.getValueAtTime.bind(h):h.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(h),h.setGroupProperty=expressionHelpers.setGroupProperty,h.loopOut=t,h.loopIn=e,h.smooth=r,h.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(h),h.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(h),h.numKeys=1===n.a?n.k.length:0,h.propertyIndex=n.ix;var u=0;return 0!==s&&(u=createTypedArray("float32",1===n.a?n.k[0].s.length:n.k.length)),h._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:u},expressionHelpers.searchExpressions(i,n,h),h.k&&l.addDynamicProperty(h),h};var o=ShapePropertyFactory.getConstructorFunction(),l=ShapePropertyFactory.getKeyframedConstructorFunction();function h(){}h.prototype={vertices:function(t,e){this.k&&this.getValue();var r,i=this.v;void 0!==e&&(i=this.getValueAtTime(e,0));var n=i._length,s=i[t],a=i.v,o=createSizedArray(n);for(r=0;r<n;r+=1)o[r]="i"===t||"o"===t?[s[r][0]-a[r][0],s[r][1]-a[r][1]]:[s[r][0],s[r][1]];return o},points:function(t){return this.vertices("v",t)},inTangents:function(t){return this.vertices("i",t)},outTangents:function(t){return this.vertices("o",t)},isClosed:function(){return this.v.c},pointOnPath:function(t,e){var r=this.v;void 0!==e&&(r=this.getValueAtTime(e,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(r));for(var i,n=this._segmentsLength,s=n.lengths,a=n.totalLength*t,o=0,l=s.length,h=0;o<l;){if(h+s[o].addedLength>a){var u=o,c=r.c&&o===l-1?0:o+1,p=(a-h)/s[o].addedLength;i=bez.getPointInSegment(r.v[u],r.v[c],r.o[u],r.i[c],p,s[o]);break}h+=s[o].addedLength,o+=1}return i||(i=r.c?[r.v[0][0],r.v[0][1]]:[r.v[r._length-1][0],r.v[r._length-1][1]]),i},vectorOnPath:function(t,e,r){1==t?t=this.v.c:0==t&&(t=.999);var i=this.pointOnPath(t,e),n=this.pointOnPath(t+.001,e),s=n[0]-i[0],a=n[1]-i[1],o=Math.sqrt(Math.pow(s,2)+Math.pow(a,2));return 0===o?[0,0]:"tangent"===r?[s/o,a/o]:[-a/o,s/o]},tangentOnPath:function(t,e){return this.vectorOnPath(t,e,"tangent")},normalOnPath:function(t,e){return this.vectorOnPath(t,e,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([h],o),extendPrototype([h],l),l.prototype.getValueAtTime=function(t){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),t*=this.elem.globalData.frameRate,(t-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<t?this._caching.lastIndex:0,this._cachingAtTime.lastTime=t,this.interpolateShape(t,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},l.prototype.initiateExpression=ExpressionManager.initiateExpression;var u=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(t,e,r,i,n){var s=u(t,e,r,i,n);return s.propertyIndex=e.ix,s.lock=!1,3===r?expressionHelpers.searchExpressions(t,e.pt,s):4===r&&expressionHelpers.searchExpressions(t,e.ks,s),s.k&&t.addDynamicProperty(s),s}}function initialize$1(){addPropertyDecorator()}function addDecorator(){TextProperty.prototype.getExpressionValue=function(t,e){var r=this.calculateExpression(e);if(t.t!==r){var i={};return this.copyData(i,t),i.t=r.toString(),i.__complete=!1,i}return t},TextProperty.prototype.searchProperty=function(){var t=this.searchKeyframes(),e=this.searchExpressions();return this.kf=t||e,this.kf},TextProperty.prototype.searchExpressions=function(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function(t,e){var r,i,n=createNS("feMerge");for(n.setAttribute("result",t),i=0;i<e.length;i+=1)(r=createNS("feMergeNode")).setAttribute("in",e[i]),n.appendChild(r),n.appendChild(r);return n}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(t,e,r,i,n){this.filterManager=e;var s=createNS("feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("color-interpolation-filters","linearRGB"),s.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=s,s.setAttribute("result",i+"_tint_1"),t.appendChild(s),(s=createNS("feColorMatrix")).setAttribute("type","matrix"),s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),s.setAttribute("result",i+"_tint_2"),t.appendChild(s),this.matrixFilter=s;var a=this.createMergeNode(i,[n,i+"_tint_1",i+"_tint_2"]);t.appendChild(a)}function SVGFillFilter(t,e,r,i){this.filterManager=e;var n=createNS("feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),n.setAttribute("result",i),t.appendChild(n),this.matrixFilter=n}function SVGStrokeEffect(t,e,r){this.initialized=!1,this.filterManager=e,this.elem=r,this.paths=[]}function SVGTritoneFilter(t,e,r,i){this.filterManager=e;var n=createNS("feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","linearRGB"),n.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),t.appendChild(n);var s=createNS("feComponentTransfer");s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("result",i),this.matrixFilter=s;var a=createNS("feFuncR");a.setAttribute("type","table"),s.appendChild(a),this.feFuncR=a;var o=createNS("feFuncG");o.setAttribute("type","table"),s.appendChild(o),this.feFuncG=o;var l=createNS("feFuncB");l.setAttribute("type","table"),s.appendChild(l),this.feFuncB=l,t.appendChild(s)}function SVGProLevelsFilter(t,e,r,i){this.filterManager=e;var n=this.filterManager.effectElements,s=createNS("feComponentTransfer");(n[10].p.k||0!==n[10].p.v||n[11].p.k||1!==n[11].p.v||n[12].p.k||1!==n[12].p.v||n[13].p.k||0!==n[13].p.v||n[14].p.k||1!==n[14].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",s)),(n[17].p.k||0!==n[17].p.v||n[18].p.k||1!==n[18].p.v||n[19].p.k||1!==n[19].p.v||n[20].p.k||0!==n[20].p.v||n[21].p.k||1!==n[21].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",s)),(n[24].p.k||0!==n[24].p.v||n[25].p.k||1!==n[25].p.v||n[26].p.k||1!==n[26].p.v||n[27].p.k||0!==n[27].p.v||n[28].p.k||1!==n[28].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",s)),(n[31].p.k||0!==n[31].p.v||n[32].p.k||1!==n[32].p.v||n[33].p.k||1!==n[33].p.v||n[34].p.k||0!==n[34].p.v||n[35].p.k||1!==n[35].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",s)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(s.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(s)),(n[3].p.k||0!==n[3].p.v||n[4].p.k||1!==n[4].p.v||n[5].p.k||1!==n[5].p.v||n[6].p.k||0!==n[6].p.v||n[7].p.k||1!==n[7].p.v)&&((s=createNS("feComponentTransfer")).setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("result",i),t.appendChild(s),this.feFuncRComposed=this.createFeFunc("feFuncR",s),this.feFuncGComposed=this.createFeFunc("feFuncG",s),this.feFuncBComposed=this.createFeFunc("feFuncB",s))}function SVGDropShadowEffect(t,e,r,i,n){var s=e.container.globalData.renderConfig.filterSize,a=e.data.fs||s;t.setAttribute("x",a.x||s.x),t.setAttribute("y",a.y||s.y),t.setAttribute("width",a.width||s.width),t.setAttribute("height",a.height||s.height),this.filterManager=e;var o=createNS("feGaussianBlur");o.setAttribute("in","SourceAlpha"),o.setAttribute("result",i+"_drop_shadow_1"),o.setAttribute("stdDeviation","0"),this.feGaussianBlur=o,t.appendChild(o);var l=createNS("feOffset");l.setAttribute("dx","25"),l.setAttribute("dy","0"),l.setAttribute("in",i+"_drop_shadow_1"),l.setAttribute("result",i+"_drop_shadow_2"),this.feOffset=l,t.appendChild(l);var h=createNS("feFlood");h.setAttribute("flood-color","#00ff00"),h.setAttribute("flood-opacity","1"),h.setAttribute("result",i+"_drop_shadow_3"),this.feFlood=h,t.appendChild(h);var u=createNS("feComposite");u.setAttribute("in",i+"_drop_shadow_3"),u.setAttribute("in2",i+"_drop_shadow_2"),u.setAttribute("operator","in"),u.setAttribute("result",i+"_drop_shadow_4"),t.appendChild(u);var c=this.createMergeNode(i,[i+"_drop_shadow_4",n]);t.appendChild(c)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,r=this.filterManager.effectElements[1].p.v,i=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+i+" 0"),this.matrixFilter.setAttribute("values",r[0]-e[0]+" 0 0 0 "+e[0]+" "+(r[1]-e[1])+" 0 0 0 "+e[1]+" "+(r[2]-e[2])+" 0 0 0 "+e[2]+" 0 0 0 1 0")}},SVGFillFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[2].p.v,r=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+e[0]+" 0 0 0 0 "+e[1]+" 0 0 0 0 "+e[2]+" 0 0 0 "+r+" 0")}},SVGStrokeEffect.prototype.initialize=function(){var t,e,r,i,n=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(i=this.elem.maskManager.masksProperties.length,r=0):i=1+(r=this.filterManager.effectElements[0].p.v-1),(e=createNS("g")).setAttribute("fill","none"),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-dashoffset",1);r<i;r+=1)t=createNS("path"),e.appendChild(t),this.paths.push({p:t,m:r});if(3===this.filterManager.effectElements[10].p.v){var s=createNS("mask"),a=createElementID();s.setAttribute("id",a),s.setAttribute("mask-type","alpha"),s.appendChild(e),this.elem.globalData.defs.appendChild(s);var o=createNS("g");for(o.setAttribute("mask","url("+getLocationHref()+"#"+a+")");n[0];)o.appendChild(n[0]);this.elem.layerElement.appendChild(o),this.masker=s,e.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(n=this.elem.layerElement.children||this.elem.layerElement.childNodes;n.length;)this.elem.layerElement.removeChild(n[0]);this.elem.layerElement.appendChild(e),this.elem.layerElement.removeAttribute("mask"),e.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=e},SVGStrokeEffect.prototype.renderFrame=function(t){var e;this.initialized||this.initialize();var r,i,n=this.paths.length;for(e=0;e<n;e+=1)if(-1!==this.paths[e].m&&(r=this.elem.maskManager.viewData[this.paths[e].m],i=this.paths[e].p,(t||this.filterManager._mdf||r.prop._mdf)&&i.setAttribute("d",r.lastPath),t||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||r.prop._mdf)){var s;if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var a=.01*Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),o=.01*Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),l=i.getTotalLength();s="0 0 0 "+l*a+" ";var h,u=l*(o-a),c=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01,p=Math.floor(u/c);for(h=0;h<p;h+=1)s+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01+" ";s+="0 "+10*l+" 0 0"}else s="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01;i.setAttribute("stroke-dasharray",s)}if((t||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(t||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(t||this.filterManager.effectElements[3].p._mdf)){var d=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(255*d[0])+","+bmFloor(255*d[1])+","+bmFloor(255*d[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,r=this.filterManager.effectElements[1].p.v,i=this.filterManager.effectElements[2].p.v,n=i[0]+" "+r[0]+" "+e[0],s=i[1]+" "+r[1]+" "+e[1],a=i[2]+" "+r[2]+" "+e[2];this.feFuncR.setAttribute("tableValues",n),this.feFuncG.setAttribute("tableValues",s),this.feFuncB.setAttribute("tableValues",a)}},SVGProLevelsFilter.prototype.createFeFunc=function(t,e){var r=createNS(t);return r.setAttribute("type","table"),e.appendChild(r),r},SVGProLevelsFilter.prototype.getTableValue=function(t,e,r,i,n){for(var s,a,o=0,l=Math.min(t,e),h=Math.max(t,e),u=Array.call(null,{length:256}),c=0,p=n-i,d=e-t;o<=256;)a=(s=o/256)<=l?d<0?n:i:s>=h?d<0?i:n:i+p*Math.pow((s-t)/d,1/r),u[c]=a,c+=1,o+=256/255;return u.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e,r=this.filterManager.effectElements;this.feFuncRComposed&&(t||r[3].p._mdf||r[4].p._mdf||r[5].p._mdf||r[6].p._mdf||r[7].p._mdf)&&(e=this.getTableValue(r[3].p.v,r[4].p.v,r[5].p.v,r[6].p.v,r[7].p.v),this.feFuncRComposed.setAttribute("tableValues",e),this.feFuncGComposed.setAttribute("tableValues",e),this.feFuncBComposed.setAttribute("tableValues",e)),this.feFuncR&&(t||r[10].p._mdf||r[11].p._mdf||r[12].p._mdf||r[13].p._mdf||r[14].p._mdf)&&(e=this.getTableValue(r[10].p.v,r[11].p.v,r[12].p.v,r[13].p.v,r[14].p.v),this.feFuncR.setAttribute("tableValues",e)),this.feFuncG&&(t||r[17].p._mdf||r[18].p._mdf||r[19].p._mdf||r[20].p._mdf||r[21].p._mdf)&&(e=this.getTableValue(r[17].p.v,r[18].p.v,r[19].p.v,r[20].p.v,r[21].p.v),this.feFuncG.setAttribute("tableValues",e)),this.feFuncB&&(t||r[24].p._mdf||r[25].p._mdf||r[26].p._mdf||r[27].p._mdf||r[28].p._mdf)&&(e=this.getTableValue(r[24].p.v,r[25].p.v,r[26].p.v,r[27].p.v,r[28].p.v),this.feFuncB.setAttribute("tableValues",e)),this.feFuncA&&(t||r[31].p._mdf||r[32].p._mdf||r[33].p._mdf||r[34].p._mdf||r[35].p._mdf)&&(e=this.getTableValue(r[31].p.v,r[32].p.v,r[33].p.v,r[34].p.v,r[35].p.v),this.feFuncA.setAttribute("tableValues",e))}},extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){if((t||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),t||this.filterManager.effectElements[0].p._mdf){var e=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*e[0]),Math.round(255*e[1]),Math.round(255*e[2])))}if((t||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),t||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var r=this.filterManager.effectElements[3].p.v,i=(this.filterManager.effectElements[2].p.v-90)*degToRads,n=r*Math.cos(i),s=r*Math.sin(i);this.feOffset.setAttribute("dx",n),this.feOffset.setAttribute("dy",s)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(t,e,r){this.initialized=!1,this.filterManager=e,this.filterElem=t,this.elem=r,r.matteElement=createNS("g"),r.matteElement.appendChild(r.layerElement),r.matteElement.appendChild(r.transformedElement),r.baseElement=r.matteElement}function SVGGaussianBlurEffect(t,e,r,i){t.setAttribute("x","-100%"),t.setAttribute("y","-100%"),t.setAttribute("width","300%"),t.setAttribute("height","300%"),this.filterManager=e;var n=createNS("feGaussianBlur");n.setAttribute("result",i),t.appendChild(n),this.feGaussianBlur=n}return SVGMatte3Effect.prototype.findSymbol=function(t){for(var e=0,r=_svgMatteSymbols.length;e<r;){if(_svgMatteSymbols[e]===t)return _svgMatteSymbols[e];e+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(t,e){var r=t.layerElement.parentNode;if(r){for(var i,n=r.children,s=0,a=n.length;s<a&&n[s]!==t.layerElement;)s+=1;s<=a-2&&(i=n[s+1]);var o=createNS("use");o.setAttribute("href","#"+e),i?r.insertBefore(o,i):r.appendChild(o)}},SVGMatte3Effect.prototype.setElementAsMask=function(t,e){if(!this.findSymbol(e)){var r=createElementID(),i=createNS("mask");i.setAttribute("id",e.layerId),i.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(e);var n=t.globalData.defs;n.appendChild(i);var s=createNS("symbol");s.setAttribute("id",r),this.replaceInParent(e,r),s.appendChild(e.layerElement),n.appendChild(s);var a=createNS("use");a.setAttribute("href","#"+r),i.appendChild(a),e.data.hd=!1,e.show()}t.setMatte(e.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var t=this.filterManager.effectElements[0].p.v,e=this.elem.comp.elements,r=0,i=e.length;r<i;)e[r]&&e[r].data.ind===t&&this.setElementAsMask(this.elem,e[r]),r+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGGaussianBlurEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=.3*this.filterManager.effectElements[0].p.v,r=this.filterManager.effectElements[1].p.v,i=3==r?0:e,n=2==r?0:e;this.feGaussianBlur.setAttribute("stdDeviation",i+" "+n);var s=1==this.filterManager.effectElements[2].p.v?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",s)}},registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect(20,SVGTintFilter,!0),registerEffect(21,SVGFillFilter,!0),registerEffect(22,SVGStrokeEffect,!1),registerEffect(23,SVGTritoneFilter,!0),registerEffect(24,SVGProLevelsFilter,!0),registerEffect(25,SVGDropShadowEffect,!0),registerEffect(28,SVGMatte3Effect,!1),registerEffect(29,SVGGaussianBlurEffect,!0),lottie},module.exports=factory())}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var r=__webpack_module_cache__[t]={id:t,loaded:!1,exports:{}};return __webpack_modules__[t].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}__webpack_require__.amdO={},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t};var __webpack_exports__={};!function(){"use strict";function t(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var r,i,n,s,a,o,l,h,u,c,p,d,f,m,g,v={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},y={duration:.5,overwrite:!1,delay:0},x=1e8,_=1e-8,b=2*Math.PI,w=b/4,S=0,M=Math.sqrt,T=Math.cos,E=Math.sin,P=function(t){return"string"==typeof t},C=function(t){return"function"==typeof t},A=function(t){return"number"==typeof t},D=function(t){return void 0===t},k=function(t){return"object"==typeof t},R=function(t){return!1!==t},I=function(){return"undefined"!=typeof window},L=function(t){return C(t)||P(t)},F="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},O=Array.isArray,z=/(?:-?\.?\d|\.)+/gi,B=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,V=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,N=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,G=/[+-]=-?[.\d]+/,W=/[^,'"\[\]\s]+/gi,H=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,U={},j={},X=function(t){return(j=bt(t,U))&&Sr},q=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},Y=function(t,e){return!e&&console.warn(t)},Z=function(t,e){return t&&(U[t]=e)&&j&&(j[t]=e)||U},$=function(){return 0},J={suppressEvents:!0,isStart:!0,kill:!1},K={suppressEvents:!0,kill:!1},Q={suppressEvents:!0},tt={},et=[],rt={},it={},nt={},st=30,at=[],ot="",lt=function(t){var e,r,i=t[0];if(k(i)||C(i)||(t=[t]),!(e=(i._gsap||{}).harness)){for(r=at.length;r--&&!at[r].targetTest(i););e=at[r]}for(r=t.length;r--;)t[r]&&(t[r]._gsap||(t[r]._gsap=new ze(t[r],e)))||t.splice(r,1);return t},ht=function(t){return t._gsap||lt(te(t))[0]._gsap},ut=function(t,e,r){return(r=t[e])&&C(r)?t[e]():D(r)&&t.getAttribute&&t.getAttribute(e)||r},ct=function(t,e){return(t=t.split(",")).forEach(e)||t},pt=function(t){return Math.round(1e5*t)/1e5||0},dt=function(t){return Math.round(1e7*t)/1e7||0},ft=function(t,e){var r=e.charAt(0),i=parseFloat(e.substr(2));return t=parseFloat(t),"+"===r?t+i:"-"===r?t-i:"*"===r?t*i:t/i},mt=function(t,e){for(var r=e.length,i=0;t.indexOf(e[i])<0&&++i<r;);return i<r},gt=function(){var t,e,r=et.length,i=et.slice(0);for(rt={},et.length=0,t=0;t<r;t++)(e=i[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},vt=function(t,e,r,n){et.length&&!i&&gt(),t.render(e,r,n||i&&e<0&&(t._initted||t._startAt)),et.length&&!i&&gt()},yt=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(W).length<2?e:P(t)?t.trim():t},xt=function(t){return t},_t=function(t,e){for(var r in e)r in t||(t[r]=e[r]);return t},bt=function(t,e){for(var r in e)t[r]=e[r];return t},wt=function t(e,r){for(var i in r)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(e[i]=k(r[i])?t(e[i]||(e[i]={}),r[i]):r[i]);return e},St=function(t,e){var r,i={};for(r in t)r in e||(i[r]=t[r]);return i},Mt=function(t){var e,r=t.parent||s,i=t.keyframes?(e=O(t.keyframes),function(t,r){for(var i in r)i in t||"duration"===i&&e||"ease"===i||(t[i]=r[i])}):_t;if(R(t.inherit))for(;r;)i(t,r.vars.defaults),r=r.parent||r._dp;return t},Tt=function(t,e,r,i,n){void 0===r&&(r="_first"),void 0===i&&(i="_last");var s,a=t[i];if(n)for(s=e[n];a&&a[n]>s;)a=a._prev;return a?(e._next=a._next,a._next=e):(e._next=t[r],t[r]=e),e._next?e._next._prev=e:t[i]=e,e._prev=a,e.parent=e._dp=t,e},Et=function(t,e,r,i){void 0===r&&(r="_first"),void 0===i&&(i="_last");var n=e._prev,s=e._next;n?n._next=s:t[r]===e&&(t[r]=s),s?s._prev=n:t[i]===e&&(t[i]=n),e._next=e._prev=e.parent=null},Pt=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Ct=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var r=t;r;)r._dirty=1,r=r.parent;return t},At=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},Dt=function(t,e,r,n){return t._startAt&&(i?t._startAt.revert(K):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,n))},kt=function t(e){return!e||e._ts&&t(e.parent)},Rt=function(t){return t._repeat?It(t._tTime,t=t.duration()+t._rDelay)*t:0},It=function(t,e){var r=Math.floor(t/=e);return t&&r===t?r-1:r},Lt=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Ft=function(t){return t._end=dt(t._start+(t._tDur/Math.abs(t._ts||t._rts||_)||0))},Ot=function(t,e){var r=t._dp;return r&&r.smoothChildTiming&&t._ts&&(t._start=dt(r._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Ft(t),r._dirty||Ct(r,t)),t},zt=function(t,e){var r;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(r=Lt(t.rawTime(),e),(!e._dur||Zt(0,e.totalDuration(),r)-e._tTime>_)&&e.render(r,!0)),Ct(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(r=t;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;t._zTime=-1e-8}},Bt=function(t,e,r,i){return e.parent&&Pt(e),e._start=dt((A(r)?r:r||t!==s?Xt(t,r,e):t._time)+e._delay),e._end=dt(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),Tt(t,e,"_first","_last",t._sort?"_start":0),Wt(e)||(t._recent=e),i||zt(t,e),t._ts<0&&Ot(t,t._tTime),t},Vt=function(t,e){return(U.ScrollTrigger||q("scrollTrigger",e))&&U.ScrollTrigger.create(e,t)},Nt=function(t,e,r,n,s){return je(t,e,s),t._initted?!r&&t._pt&&!i&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&u!==Me.frame?(et.push(t),t._lazy=[s,n],1):void 0:1},Gt=function t(e){var r=e.parent;return r&&r._ts&&r._initted&&!r._lock&&(r.rawTime()<0||t(r))},Wt=function(t){var e=t.data;return"isFromStart"===e||"isStart"===e},Ht=function(t,e,r,i){var n=t._repeat,s=dt(e)||0,a=t._tTime/t._tDur;return a&&!i&&(t._time*=s/t._dur),t._dur=s,t._tDur=n?n<0?1e10:dt(s*(n+1)+t._rDelay*n):s,a>0&&!i&&Ot(t,t._tTime=t._tDur*a),t.parent&&Ft(t),r||Ct(t.parent,t),t},Ut=function(t){return t instanceof Ve?Ct(t):Ht(t,t._dur)},jt={_start:0,endTime:$,totalDuration:$},Xt=function t(e,r,i){var n,s,a,o=e.labels,l=e._recent||jt,h=e.duration()>=x?l.endTime(!1):e._dur;return P(r)&&(isNaN(r)||r in o)?(s=r.charAt(0),a="%"===r.substr(-1),n=r.indexOf("="),"<"===s||">"===s?(n>=0&&(r=r.replace(/=/,"")),("<"===s?l._start:l.endTime(l._repeat>=0))+(parseFloat(r.substr(1))||0)*(a?(n<0?l:i).totalDuration()/100:1)):n<0?(r in o||(o[r]=h),o[r]):(s=parseFloat(r.charAt(n-1)+r.substr(n+1)),a&&i&&(s=s/100*(O(i)?i[0]:i).totalDuration()),n>1?t(e,r.substr(0,n-1),i)+s:h+s)):null==r?h:+r},qt=function(t,e,r){var i,n,s=A(e[1]),a=(s?2:1)+(t<2?0:1),o=e[a];if(s&&(o.duration=e[1]),o.parent=r,t){for(i=o,n=r;n&&!("immediateRender"in i);)i=n.vars.defaults||{},n=R(n.vars.inherit)&&n.parent;o.immediateRender=R(i.immediateRender),t<2?o.runBackwards=1:o.startAt=e[a-1]}return new $e(e[0],o,e[a+1])},Yt=function(t,e){return t||0===t?e(t):e},Zt=function(t,e,r){return r<t?t:r>e?e:r},$t=function(t,e){return P(t)&&(e=H.exec(t))?e[1]:""},Jt=[].slice,Kt=function(t,e){return t&&k(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&k(t[0]))&&!t.nodeType&&t!==a},Qt=function(t,e,r){return void 0===r&&(r=[]),t.forEach((function(t){var i;return P(t)&&!e||Kt(t,1)?(i=r).push.apply(i,te(t)):r.push(t)}))||r},te=function(t,e,r){return n&&!e&&n.selector?n.selector(t):!P(t)||r||!o&&Te()?O(t)?Qt(t,r):Kt(t)?Jt.call(t,0):t?[t]:[]:Jt.call((e||l).querySelectorAll(t),0)},ee=function(t){return t=te(t)[0]||Y("Invalid scope")||{},function(e){var r=t.current||t.nativeElement||t;return te(e,r.querySelectorAll?r:r===t?Y("Invalid scope")||l.createElement("div"):t)}},re=function(t){return t.sort((function(){return.5-Math.random()}))},ie=function(t){if(C(t))return t;var e=k(t)?t:{each:t},r=Re(e.ease),i=e.from||0,n=parseFloat(e.base)||0,s={},a=i>0&&i<1,o=isNaN(i)||a,l=e.axis,h=i,u=i;return P(i)?h=u={center:.5,edges:.5,end:1}[i]||0:!a&&o&&(h=i[0],u=i[1]),function(t,a,c){var p,d,f,m,g,v,y,_,b,w=(c||e).length,S=s[w];if(!S){if(!(b="auto"===e.grid?0:(e.grid||[1,x])[1])){for(y=-x;y<(y=c[b++].getBoundingClientRect().left)&&b<w;);b--}for(S=s[w]=[],p=o?Math.min(b,w)*h-.5:i%b,d=b===x?0:o?w*u/b-.5:i/b|0,y=0,_=x,v=0;v<w;v++)f=v%b-p,m=d-(v/b|0),S[v]=g=l?Math.abs("y"===l?m:f):M(f*f+m*m),g>y&&(y=g),g<_&&(_=g);"random"===i&&re(S),S.max=y-_,S.min=_,S.v=w=(parseFloat(e.amount)||parseFloat(e.each)*(b>w?w-1:l?"y"===l?w/b:b:Math.max(b,w/b))||0)*("edges"===i?-1:1),S.b=w<0?n-w:n,S.u=$t(e.amount||e.each)||0,r=r&&w<0?De(r):r}return w=(S[t]-S.min)/S.max||0,dt(S.b+(r?r(w):w)*S.v)+S.u}},ne=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(r){var i=dt(Math.round(parseFloat(r)/t)*t*e);return(i-i%1)/e+(A(r)?0:$t(r))}},se=function(t,e){var r,i,n=O(t);return!n&&k(t)&&(r=n=t.radius||x,t.values?(t=te(t.values),(i=!A(t[0]))&&(r*=r)):t=ne(t.increment)),Yt(e,n?C(t)?function(e){return i=t(e),Math.abs(i-e)<=r?i:e}:function(e){for(var n,s,a=parseFloat(i?e.x:e),o=parseFloat(i?e.y:0),l=x,h=0,u=t.length;u--;)(n=i?(n=t[u].x-a)*n+(s=t[u].y-o)*s:Math.abs(t[u]-a))<l&&(l=n,h=u);return h=!r||l<=r?t[h]:e,i||h===e||A(e)?h:h+$t(e)}:ne(t))},ae=function(t,e,r,i){return Yt(O(t)?!e:!0===r?!!(r=0):!i,(function(){return O(t)?t[~~(Math.random()*t.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((t-r/2+Math.random()*(e-t+.99*r))/r)*r*i)/i}))},oe=function(t,e,r){return Yt(r,(function(r){return t[~~e(r)]}))},le=function(t){for(var e,r,i,n,s=0,a="";~(e=t.indexOf("random(",s));)i=t.indexOf(")",e),n="["===t.charAt(e+7),r=t.substr(e+7,i-e-7).match(n?W:z),a+=t.substr(s,e-s)+ae(n?r:+r[0],n?0:+r[1],+r[2]||1e-5),s=i+1;return a+t.substr(s,t.length-s)},he=function(t,e,r,i,n){var s=e-t,a=i-r;return Yt(n,(function(e){return r+((e-t)/s*a||0)}))},ue=function(t,e,r){var i,n,s,a=t.labels,o=x;for(i in a)(n=a[i]-e)<0==!!r&&n&&o>(n=Math.abs(n))&&(s=i,o=n);return s},ce=function(t,e,r){var i,s,a,o=t.vars,l=o[e],h=n,u=t._ctx;if(l)return i=o[e+"Params"],s=o.callbackScope||t,r&&et.length&&gt(),u&&(n=u),a=i?l.apply(s,i):l.call(s),n=h,a},pe=function(t){return Pt(t),t.scrollTrigger&&t.scrollTrigger.kill(!!i),t.progress()<1&&ce(t,"onInterrupt"),t},de=[],fe=function(t){if(I()&&t){var e=(t=!t.name&&t.default||t).name,r=C(t),i=e&&!r&&t.init?function(){this._props=[]}:t,n={init:$,render:sr,add:He,kill:or,modifier:ar,rawVars:0},s={targetTest:0,get:0,getSetter:er,aliases:{},register:0};if(Te(),t!==i){if(it[e])return;_t(i,_t(St(t,n),s)),bt(i.prototype,bt(n,St(t,s))),it[i.prop=e]=i,t.targetTest&&(at.push(i),tt[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}Z(e,i),t.register&&t.register(Sr,i,ur)}else t&&de.push(t)},me=255,ge={aqua:[0,me,me],lime:[0,me,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,me],navy:[0,0,128],white:[me,me,me],olive:[128,128,0],yellow:[me,me,0],orange:[me,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[me,0,0],pink:[me,192,203],cyan:[0,me,me],transparent:[me,me,me,0]},ve=function(t,e,r){return(6*(t+=t<0?1:t>1?-1:0)<1?e+(r-e)*t*6:t<.5?r:3*t<2?e+(r-e)*(2/3-t)*6:e)*me+.5|0},ye=function(t,e,r){var i,n,s,a,o,l,h,u,c,p,d=t?A(t)?[t>>16,t>>8&me,t&me]:0:ge.black;if(!d){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),ge[t])d=ge[t];else if("#"===t.charAt(0)){if(t.length<6&&(i=t.charAt(1),n=t.charAt(2),s=t.charAt(3),t="#"+i+i+n+n+s+s+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(d=parseInt(t.substr(1,6),16))>>16,d>>8&me,d&me,parseInt(t.substr(7),16)/255];d=[(t=parseInt(t.substr(1),16))>>16,t>>8&me,t&me]}else if("hsl"===t.substr(0,3))if(d=p=t.match(z),e){if(~t.indexOf("="))return d=t.match(B),r&&d.length<4&&(d[3]=1),d}else a=+d[0]%360/360,o=+d[1]/100,i=2*(l=+d[2]/100)-(n=l<=.5?l*(o+1):l+o-l*o),d.length>3&&(d[3]*=1),d[0]=ve(a+1/3,i,n),d[1]=ve(a,i,n),d[2]=ve(a-1/3,i,n);else d=t.match(z)||ge.transparent;d=d.map(Number)}return e&&!p&&(i=d[0]/me,n=d[1]/me,s=d[2]/me,l=((h=Math.max(i,n,s))+(u=Math.min(i,n,s)))/2,h===u?a=o=0:(c=h-u,o=l>.5?c/(2-h-u):c/(h+u),a=h===i?(n-s)/c+(n<s?6:0):h===n?(s-i)/c+2:(i-n)/c+4,a*=60),d[0]=~~(a+.5),d[1]=~~(100*o+.5),d[2]=~~(100*l+.5)),r&&d.length<4&&(d[3]=1),d},xe=function(t){var e=[],r=[],i=-1;return t.split(be).forEach((function(t){var n=t.match(V)||[];e.push.apply(e,n),r.push(i+=n.length+1)})),e.c=r,e},_e=function(t,e,r){var i,n,s,a,o="",l=(t+o).match(be),h=e?"hsla(":"rgba(",u=0;if(!l)return t;if(l=l.map((function(t){return(t=ye(t,e,1))&&h+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),r&&(s=xe(t),(i=r.c).join(o)!==s.c.join(o)))for(a=(n=t.replace(be,"1").split(V)).length-1;u<a;u++)o+=n[u]+(~i.indexOf(u)?l.shift()||h+"0,0,0,0)":(s.length?s:l.length?l:r).shift());if(!n)for(a=(n=t.split(be)).length-1;u<a;u++)o+=n[u]+l[u];return o+n[a]},be=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in ge)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),we=/hsl[a]?\(/,Se=function(t){var e,r=t.join(" ");if(be.lastIndex=0,be.test(r))return e=we.test(r),t[1]=_e(t[1],e),t[0]=_e(t[0],e,xe(t[1])),!0},Me=function(){var t,e,r,i,n,s,u=Date.now,c=500,d=33,f=u(),m=f,g=1e3/240,v=g,y=[],x=function r(a){var o,l,h,p,x=u()-m,_=!0===a;if(x>c&&(f+=x-d),((o=(h=(m+=x)-f)-v)>0||_)&&(p=++i.frame,n=h-1e3*i.time,i.time=h/=1e3,v+=o+(o>=g?4:g-o),l=1),_||(t=e(r)),l)for(s=0;s<y.length;s++)y[s](h,n,p,a)};return i={time:0,frame:0,tick:function(){x(!0)},deltaRatio:function(t){return n/(1e3/(t||60))},wake:function(){h&&(!o&&I()&&(a=o=window,l=a.document||{},U.gsap=Sr,(a.gsapVersions||(a.gsapVersions=[])).push(Sr.version),X(j||a.GreenSockGlobals||!a.gsap&&a||{}),r=a.requestAnimationFrame,de.forEach(fe)),t&&i.sleep(),e=r||function(t){return setTimeout(t,v-1e3*i.time+1|0)},p=1,x(2))},sleep:function(){(r?a.cancelAnimationFrame:clearTimeout)(t),p=0,e=$},lagSmoothing:function(t,e){c=t||1/0,d=Math.min(e||33,c)},fps:function(t){g=1e3/(t||240),v=1e3*i.time+g},add:function(t,e,r){var n=e?function(e,r,s,a){t(e,r,s,a),i.remove(n)}:t;return i.remove(t),y[r?"unshift":"push"](n),Te(),n},remove:function(t,e){~(e=y.indexOf(t))&&y.splice(e,1)&&s>=e&&s--},_listeners:y}}(),Te=function(){return!p&&Me.wake()},Ee={},Pe=/^[\d.\-M][\d.\-,\s]/,Ce=/["']/g,Ae=function(t){for(var e,r,i,n={},s=t.substr(1,t.length-3).split(":"),a=s[0],o=1,l=s.length;o<l;o++)r=s[o],e=o!==l-1?r.lastIndexOf(","):r.length,i=r.substr(0,e),n[a]=isNaN(i)?i.replace(Ce,"").trim():+i,a=r.substr(e+1).trim();return n},De=function(t){return function(e){return 1-t(1-e)}},ke=function t(e,r){for(var i,n=e._first;n;)n instanceof Ve?t(n,r):!n.vars.yoyoEase||n._yoyo&&n._repeat||n._yoyo===r||(n.timeline?t(n.timeline,r):(i=n._ease,n._ease=n._yEase,n._yEase=i,n._yoyo=r)),n=n._next},Re=function(t,e){return t&&(C(t)?t:Ee[t]||function(t){var e,r,i,n,s=(t+"").split("("),a=Ee[s[0]];return a&&s.length>1&&a.config?a.config.apply(null,~t.indexOf("{")?[Ae(s[1])]:(e=t,r=e.indexOf("(")+1,i=e.indexOf(")"),n=e.indexOf("(",r),e.substring(r,~n&&n<i?e.indexOf(")",i+1):i)).split(",").map(yt)):Ee._CE&&Pe.test(t)?Ee._CE("",t):a}(t))||e},Ie=function(t,e,r,i){void 0===r&&(r=function(t){return 1-e(1-t)}),void 0===i&&(i=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var n,s={easeIn:e,easeOut:r,easeInOut:i};return ct(t,(function(t){for(var e in Ee[t]=U[t]=s,Ee[n=t.toLowerCase()]=r,s)Ee[n+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=Ee[t+"."+e]=s[e]})),s},Le=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},Fe=function t(e,r,i){var n=r>=1?r:1,s=(i||(e?.3:.45))/(r<1?r:1),a=s/b*(Math.asin(1/n)||0),o=function(t){return 1===t?1:n*Math.pow(2,-10*t)*E((t-a)*s)+1},l="out"===e?o:"in"===e?function(t){return 1-o(1-t)}:Le(o);return s=b/s,l.config=function(r,i){return t(e,r,i)},l},Oe=function t(e,r){void 0===r&&(r=1.70158);var i=function(t){return t?--t*t*((r+1)*t+r)+1:0},n="out"===e?i:"in"===e?function(t){return 1-i(1-t)}:Le(i);return n.config=function(r){return t(e,r)},n};ct("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var r=e<5?e+1:e;Ie(t+",Power"+(r-1),e?function(t){return Math.pow(t,r)}:function(t){return t},(function(t){return 1-Math.pow(1-t,r)}),(function(t){return t<.5?Math.pow(2*t,r)/2:1-Math.pow(2*(1-t),r)/2}))})),Ee.Linear.easeNone=Ee.none=Ee.Linear.easeIn,Ie("Elastic",Fe("in"),Fe("out"),Fe()),d=7.5625,m=1/(f=2.75),Ie("Bounce",(function(t){return 1-g(1-t)}),g=function(t){return t<m?d*t*t:t<.7272727272727273?d*Math.pow(t-1.5/f,2)+.75:t<.9090909090909092?d*(t-=2.25/f)*t+.9375:d*Math.pow(t-2.625/f,2)+.984375}),Ie("Expo",(function(t){return t?Math.pow(2,10*(t-1)):0})),Ie("Circ",(function(t){return-(M(1-t*t)-1)})),Ie("Sine",(function(t){return 1===t?1:1-T(t*w)})),Ie("Back",Oe("in"),Oe("out"),Oe()),Ee.SteppedEase=Ee.steps=U.SteppedEase={config:function(t,e){void 0===t&&(t=1);var r=1/t,i=t+(e?0:1),n=e?1:0;return function(t){return((i*Zt(0,.99999999,t)|0)+n)*r}}},y.ease=Ee["quad.out"],ct("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return ot+=t+","+t+"Params,"}));var ze=function(t,e){this.id=S++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:ut,this.set=e?e.getSetter:er},Be=function(){function t(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Ht(this,+t.duration,1,1),this.data=t.data,n&&(this._ctx=n,n.data.push(this)),p||Me.wake()}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,Ht(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(Te(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(Ot(this,t),!r._dp||r.parent||zt(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&Bt(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===_||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),vt(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+Rt(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+Rt(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(t,e){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*r,e):this._repeat?It(this._tTime,r)+1:1},e.timeScale=function(t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?Lt(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||-1e-8===t?0:this._rts,this.totalTime(Zt(-Math.abs(this._delay),this._tDur,e),!0),Ft(this),At(this)},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Te(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==_&&(this._tTime-=_)))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&Bt(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(R(t)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Lt(e.rawTime(t),this):this._tTime:this._tTime},e.revert=function(t){void 0===t&&(t=Q);var e=i;return i=t,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(t),this.totalTime(-.01,t.suppressEvents)),"nested"!==this.data&&!1!==t.kill&&this.kill(),i=e,this},e.globalTime=function(t){for(var e=this,r=arguments.length?t:e.rawTime();e;)r=e._start+r/(e._ts||1),e=e._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1/0:this._sat.globalTime(t):r},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,Ut(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){if(arguments.length){var e=this._time;return this._rDelay=t,Ut(this),e?this.time(e):this}return this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(Xt(this,t),R(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,R(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var t,e=this.parent||this._dp,r=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=r&&t<this.endTime(!0)-_))},e.eventCallback=function(t,e,r){var i=this.vars;return arguments.length>1?(e?(i[t]=e,r&&(i[t+"Params"]=r),"onUpdate"===t&&(this._onUpdate=e)):delete i[t],this):i[t]},e.then=function(t){var e=this;return new Promise((function(r){var i=C(t)?t:xt,n=function(){var t=e.then;e.then=null,C(i)&&(i=i(e))&&(i.then||i===e)&&(e.then=t),r(i),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?n():e._prom=n}))},e.kill=function(){pe(this)},t}();_t(Be.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Ve=function(r){function n(e,i){var n;return void 0===e&&(e={}),(n=r.call(this,e)||this).labels={},n.smoothChildTiming=!!e.smoothChildTiming,n.autoRemoveChildren=!!e.autoRemoveChildren,n._sort=R(e.sortChildren),s&&Bt(e.parent||s,t(n),i),e.reversed&&n.reverse(),e.paused&&n.paused(!0),e.scrollTrigger&&Vt(t(n),e.scrollTrigger),n}e(n,r);var a=n.prototype;return a.to=function(t,e,r){return qt(0,arguments,this),this},a.from=function(t,e,r){return qt(1,arguments,this),this},a.fromTo=function(t,e,r,i){return qt(2,arguments,this),this},a.set=function(t,e,r){return e.duration=0,e.parent=this,Mt(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new $e(t,e,Xt(this,r),1),this},a.call=function(t,e,r){return Bt(this,$e.delayedCall(0,t,e),r)},a.staggerTo=function(t,e,r,i,n,s,a){return r.duration=e,r.stagger=r.stagger||i,r.onComplete=s,r.onCompleteParams=a,r.parent=this,new $e(t,r,Xt(this,n)),this},a.staggerFrom=function(t,e,r,i,n,s,a){return r.runBackwards=1,Mt(r).immediateRender=R(r.immediateRender),this.staggerTo(t,e,r,i,n,s,a)},a.staggerFromTo=function(t,e,r,i,n,s,a,o){return i.startAt=r,Mt(i).immediateRender=R(i.immediateRender),this.staggerTo(t,e,i,n,s,a,o)},a.render=function(t,e,r){var n,a,o,l,h,u,c,p,d,f,m,g,v=this._time,y=this._dirty?this.totalDuration():this._tDur,x=this._dur,b=t<=0?0:dt(t),w=this._zTime<0!=t<0&&(this._initted||!x);if(this!==s&&b>y&&t>=0&&(b=y),b!==this._tTime||r||w){if(v!==this._time&&x&&(b+=this._time-v,t+=this._time-v),n=b,d=this._start,u=!(p=this._ts),w&&(x||(v=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat){if(m=this._yoyo,h=x+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*h+t,e,r);if(n=dt(b%h),b===y?(l=this._repeat,n=x):((l=~~(b/h))&&l===b/h&&(n=x,l--),n>x&&(n=x)),f=It(this._tTime,h),!v&&this._tTime&&f!==l&&this._tTime-f*h-this._dur<=0&&(f=l),m&&1&l&&(n=x-n,g=1),l!==f&&!this._lock){var S=m&&1&f,M=S===(m&&1&l);if(l<f&&(S=!S),v=S?0:b%x?x:b,this._lock=1,this.render(v||(g?0:dt(l*h)),e,!x)._lock=0,this._tTime=b,!e&&this.parent&&ce(this,"onRepeat"),this.vars.repeatRefresh&&!g&&(this.invalidate()._lock=1),v&&v!==this._time||u!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(x=this._dur,y=this._tDur,M&&(this._lock=2,v=S?x:-1e-4,this.render(v,!0),this.vars.repeatRefresh&&!g&&this.invalidate()),this._lock=0,!this._ts&&!u)return this;ke(this,g)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function(t,e,r){var i;if(r>e)for(i=t._first;i&&i._start<=r;){if("isPause"===i.data&&i._start>e)return i;i=i._next}else for(i=t._last;i&&i._start>=r;){if("isPause"===i.data&&i._start<e)return i;i=i._prev}}(this,dt(v),dt(n)),c&&(b-=n-(n=c._start))),this._tTime=b,this._time=n,this._act=!p,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,v=0),!v&&n&&!e&&!l&&(ce(this,"onStart"),this._tTime!==b))return this;if(n>=v&&t>=0)for(a=this._first;a;){if(o=a._next,(a._act||n>=a._start)&&a._ts&&c!==a){if(a.parent!==this)return this.render(t,e,r);if(a.render(a._ts>0?(n-a._start)*a._ts:(a._dirty?a.totalDuration():a._tDur)+(n-a._start)*a._ts,e,r),n!==this._time||!this._ts&&!u){c=0,o&&(b+=this._zTime=-1e-8);break}}a=o}else{a=this._last;for(var T=t<0?t:n;a;){if(o=a._prev,(a._act||T<=a._end)&&a._ts&&c!==a){if(a.parent!==this)return this.render(t,e,r);if(a.render(a._ts>0?(T-a._start)*a._ts:(a._dirty?a.totalDuration():a._tDur)+(T-a._start)*a._ts,e,r||i&&(a._initted||a._startAt)),n!==this._time||!this._ts&&!u){c=0,o&&(b+=this._zTime=T?-1e-8:_);break}}a=o}}if(c&&!e&&(this.pause(),c.render(n>=v?0:-1e-8)._zTime=n>=v?1:-1,this._ts))return this._start=d,Ft(this),this.render(t,e,r);this._onUpdate&&!e&&ce(this,"onUpdate",!0),(b===y&&this._tTime>=this.totalDuration()||!b&&v)&&(d!==this._start&&Math.abs(p)===Math.abs(this._ts)||this._lock||((t||!x)&&(b===y&&this._ts>0||!b&&this._ts<0)&&Pt(this,1),e||t<0&&!v||!b&&!v&&y||(ce(this,b===y&&t>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(b<y&&this.timeScale()>0)&&this._prom())))}return this},a.add=function(t,e){var r=this;if(A(e)||(e=Xt(this,e,t)),!(t instanceof Be)){if(O(t))return t.forEach((function(t){return r.add(t,e)})),this;if(P(t))return this.addLabel(t,e);if(!C(t))return this;t=$e.delayedCall(0,t)}return this!==t?Bt(this,t,e):this},a.getChildren=function(t,e,r,i){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===r&&(r=!0),void 0===i&&(i=-x);for(var n=[],s=this._first;s;)s._start>=i&&(s instanceof $e?e&&n.push(s):(r&&n.push(s),t&&n.push.apply(n,s.getChildren(!0,e,r)))),s=s._next;return n},a.getById=function(t){for(var e=this.getChildren(1,1,1),r=e.length;r--;)if(e[r].vars.id===t)return e[r]},a.remove=function(t){return P(t)?this.removeLabel(t):C(t)?this.killTweensOf(t):(Et(this,t),t===this._recent&&(this._recent=this._last),Ct(this))},a.totalTime=function(t,e){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=dt(Me.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts))),r.prototype.totalTime.call(this,t,e),this._forcing=0,this):this._tTime},a.addLabel=function(t,e){return this.labels[t]=Xt(this,e),this},a.removeLabel=function(t){return delete this.labels[t],this},a.addPause=function(t,e,r){var i=$e.delayedCall(0,e||$,r);return i.data="isPause",this._hasPause=1,Bt(this,i,Xt(this,t))},a.removePause=function(t){var e=this._first;for(t=Xt(this,t);e;)e._start===t&&"isPause"===e.data&&Pt(e),e=e._next},a.killTweensOf=function(t,e,r){for(var i=this.getTweensOf(t,r),n=i.length;n--;)Ne!==i[n]&&i[n].kill(t,e);return this},a.getTweensOf=function(t,e){for(var r,i=[],n=te(t),s=this._first,a=A(e);s;)s instanceof $e?mt(s._targets,n)&&(a?(!Ne||s._initted&&s._ts)&&s.globalTime(0)<=e&&s.globalTime(s.totalDuration())>e:!e||s.isActive())&&i.push(s):(r=s.getTweensOf(n,e)).length&&i.push.apply(i,r),s=s._next;return i},a.tweenTo=function(t,e){e=e||{};var r,i=this,n=Xt(i,t),s=e,a=s.startAt,o=s.onStart,l=s.onStartParams,h=s.immediateRender,u=$e.to(i,_t({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:n,overwrite:"auto",duration:e.duration||Math.abs((n-(a&&"time"in a?a.time:i._time))/i.timeScale())||_,onStart:function(){if(i.pause(),!r){var t=e.duration||Math.abs((n-(a&&"time"in a?a.time:i._time))/i.timeScale());u._dur!==t&&Ht(u,t,0,1).render(u._time,!0,!0),r=1}o&&o.apply(u,l||[])}},e));return h?u.render(0):u},a.tweenFromTo=function(t,e,r){return this.tweenTo(e,_t({startAt:{time:Xt(this,t)}},r))},a.recent=function(){return this._recent},a.nextLabel=function(t){return void 0===t&&(t=this._time),ue(this,Xt(this,t))},a.previousLabel=function(t){return void 0===t&&(t=this._time),ue(this,Xt(this,t),1)},a.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+_)},a.shiftChildren=function(t,e,r){void 0===r&&(r=0);for(var i,n=this._first,s=this.labels;n;)n._start>=r&&(n._start+=t,n._end+=t),n=n._next;if(e)for(i in s)s[i]>=r&&(s[i]+=t);return Ct(this)},a.invalidate=function(t){var e=this._first;for(this._lock=0;e;)e.invalidate(t),e=e._next;return r.prototype.invalidate.call(this,t)},a.clear=function(t){void 0===t&&(t=!0);for(var e,r=this._first;r;)e=r._next,this.remove(r),r=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),Ct(this)},a.totalDuration=function(t){var e,r,i,n=0,a=this,o=a._last,l=x;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-t:t));if(a._dirty){for(i=a.parent;o;)e=o._prev,o._dirty&&o.totalDuration(),(r=o._start)>l&&a._sort&&o._ts&&!a._lock?(a._lock=1,Bt(a,o,r-o._delay,1)._lock=0):l=r,r<0&&o._ts&&(n-=r,(!i&&!a._dp||i&&i.smoothChildTiming)&&(a._start+=r/a._ts,a._time-=r,a._tTime-=r),a.shiftChildren(-r,!1,-Infinity),l=0),o._end>n&&o._ts&&(n=o._end),o=e;Ht(a,a===s&&a._time>n?a._time:n,1,1),a._dirty=0}return a._tDur},n.updateRoot=function(t){if(s._ts&&(vt(s,Lt(t,s)),u=Me.frame),Me.frame>=st){st+=v.autoSleep||120;var e=s._first;if((!e||!e._ts)&&v.autoSleep&&Me._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||Me.sleep()}}},n}(Be);_t(Ve.prototype,{_lock:0,_hasPause:0,_forcing:0});var Ne,Ge,We=function(t,e,r,i,n,s,a){var o,l,h,u,c,p,d,f,m=new ur(this._pt,t,e,0,1,nr,null,n),g=0,v=0;for(m.b=r,m.e=i,r+="",(d=~(i+="").indexOf("random("))&&(i=le(i)),s&&(s(f=[r,i],t,e),r=f[0],i=f[1]),l=r.match(N)||[];o=N.exec(i);)u=o[0],c=i.substring(g,o.index),h?h=(h+1)%5:"rgba("===c.substr(-5)&&(h=1),u!==l[v++]&&(p=parseFloat(l[v-1])||0,m._pt={_next:m._pt,p:c||1===v?c:",",s:p,c:"="===u.charAt(1)?ft(p,u)-p:parseFloat(u)-p,m:h&&h<4?Math.round:0},g=N.lastIndex);return m.c=g<i.length?i.substring(g,i.length):"",m.fp=a,(G.test(i)||d)&&(m.e=0),this._pt=m,m},He=function(t,e,r,i,n,s,a,o,l,h){C(i)&&(i=i(n||0,t,s));var u,c=t[e],p="get"!==r?r:C(c)?l?t[e.indexOf("set")||!C(t["get"+e.substr(3)])?e:"get"+e.substr(3)](l):t[e]():c,d=C(c)?l?Qe:Ke:Je;if(P(i)&&(~i.indexOf("random(")&&(i=le(i)),"="===i.charAt(1)&&((u=ft(p,i)+($t(p)||0))||0===u)&&(i=u)),!h||p!==i||Ge)return isNaN(p*i)||""===i?(!c&&!(e in t)&&q(e,i),We.call(this,t,e,p,i,d,o||v.stringFilter,l)):(u=new ur(this._pt,t,e,+p||0,i-(p||0),"boolean"==typeof c?ir:rr,0,d),l&&(u.fp=l),a&&u.modifier(a,this,t),this._pt=u)},Ue=function(t,e,r,i,n,s){var a,o,l,h;if(it[t]&&!1!==(a=new it[t]).init(n,a.rawVars?e[t]:function(t,e,r,i,n){if(C(t)&&(t=qe(t,n,e,r,i)),!k(t)||t.style&&t.nodeType||O(t)||F(t))return P(t)?qe(t,n,e,r,i):t;var s,a={};for(s in t)a[s]=qe(t[s],n,e,r,i);return a}(e[t],i,n,s,r),r,i,s)&&(r._pt=o=new ur(r._pt,n,t,0,1,a.render,a,0,a.priority),r!==c))for(l=r._ptLookup[r._targets.indexOf(n)],h=a._props.length;h--;)l[a._props[h]]=o;return a},je=function t(e,n,a){var o,l,h,u,c,p,d,f,m,g,v,b,w,S=e.vars,M=S.ease,T=S.startAt,E=S.immediateRender,P=S.lazy,C=S.onUpdate,A=S.onUpdateParams,D=S.callbackScope,k=S.runBackwards,I=S.yoyoEase,L=S.keyframes,F=S.autoRevert,O=e._dur,z=e._startAt,B=e._targets,V=e.parent,N=V&&"nested"===V.data?V.vars.targets:B,G="auto"===e._overwrite&&!r,W=e.timeline;if(W&&(!L||!M)&&(M="none"),e._ease=Re(M,y.ease),e._yEase=I?De(Re(!0===I?M:I,y.ease)):0,I&&e._yoyo&&!e._repeat&&(I=e._yEase,e._yEase=e._ease,e._ease=I),e._from=!W&&!!S.runBackwards,!W||L&&!S.stagger){if(b=(f=B[0]?ht(B[0]).harness:0)&&S[f.prop],o=St(S,tt),z&&(z._zTime<0&&z.progress(1),n<0&&k&&E&&!F?z.render(-1,!0):z.revert(k&&O?K:J),z._lazy=0),T){if(Pt(e._startAt=$e.set(B,_t({data:"isStart",overwrite:!1,parent:V,immediateRender:!0,lazy:!z&&R(P),startAt:null,delay:0,onUpdate:C,onUpdateParams:A,callbackScope:D,stagger:0},T))),e._startAt._dp=0,e._startAt._sat=e,n<0&&(i||!E&&!F)&&e._startAt.revert(K),E&&O&&n<=0&&a<=0)return void(n&&(e._zTime=n))}else if(k&&O&&!z)if(n&&(E=!1),h=_t({overwrite:!1,data:"isFromStart",lazy:E&&!z&&R(P),immediateRender:E,stagger:0,parent:V},o),b&&(h[f.prop]=b),Pt(e._startAt=$e.set(B,h)),e._startAt._dp=0,e._startAt._sat=e,n<0&&(i?e._startAt.revert(K):e._startAt.render(-1,!0)),e._zTime=n,E){if(!n)return}else t(e._startAt,_,_);for(e._pt=e._ptCache=0,P=O&&R(P)||P&&!O,l=0;l<B.length;l++){if(d=(c=B[l])._gsap||lt(B)[l]._gsap,e._ptLookup[l]=g={},rt[d.id]&&et.length&&gt(),v=N===B?l:N.indexOf(c),f&&!1!==(m=new f).init(c,b||o,e,v,N)&&(e._pt=u=new ur(e._pt,c,m.name,0,1,m.render,m,0,m.priority),m._props.forEach((function(t){g[t]=u})),m.priority&&(p=1)),!f||b)for(h in o)it[h]&&(m=Ue(h,o,e,v,c,N))?m.priority&&(p=1):g[h]=u=He.call(e,c,h,"get",o[h],v,N,0,S.stringFilter);e._op&&e._op[l]&&e.kill(c,e._op[l]),G&&e._pt&&(Ne=e,s.killTweensOf(c,g,e.globalTime(n)),w=!e.parent,Ne=0),e._pt&&P&&(rt[d.id]=1)}p&&hr(e),e._onInit&&e._onInit(e)}e._onUpdate=C,e._initted=(!e._op||e._pt)&&!w,L&&n<=0&&W.render(x,!0,!0)},Xe=function(t,e,r,i){var n,s,a=e.ease||i||"power1.inOut";if(O(e))s=r[t]||(r[t]=[]),e.forEach((function(t,r){return s.push({t:r/(e.length-1)*100,v:t,e:a})}));else for(n in e)s=r[n]||(r[n]=[]),"ease"===n||s.push({t:parseFloat(t),v:e[n],e:a})},qe=function(t,e,r,i,n){return C(t)?t.call(e,r,i,n):P(t)&&~t.indexOf("random(")?le(t):t},Ye=ot+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Ze={};ct(Ye+",id,stagger,delay,duration,paused,scrollTrigger",(function(t){return Ze[t]=1}));var $e=function(n){function a(e,i,a,o){var l;"number"==typeof i&&(a.duration=i,i=a,a=null);var h,u,c,p,d,f,m,g,y=(l=n.call(this,o?i:Mt(i))||this).vars,x=y.duration,_=y.delay,b=y.immediateRender,w=y.stagger,S=y.overwrite,M=y.keyframes,T=y.defaults,E=y.scrollTrigger,P=y.yoyoEase,C=i.parent||s,D=(O(e)||F(e)?A(e[0]):"length"in i)?[e]:te(e);if(l._targets=D.length?lt(D):Y("GSAP target "+e+" not found. https://greensock.com",!v.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=S,M||w||L(x)||L(_)){if(i=l.vars,(h=l.timeline=new Ve({data:"nested",defaults:T||{},targets:C&&"nested"===C.data?C.vars.targets:D})).kill(),h.parent=h._dp=t(l),h._start=0,w||L(x)||L(_)){if(p=D.length,m=w&&ie(w),k(w))for(d in w)~Ye.indexOf(d)&&(g||(g={}),g[d]=w[d]);for(u=0;u<p;u++)(c=St(i,Ze)).stagger=0,P&&(c.yoyoEase=P),g&&bt(c,g),f=D[u],c.duration=+qe(x,t(l),u,f,D),c.delay=(+qe(_,t(l),u,f,D)||0)-l._delay,!w&&1===p&&c.delay&&(l._delay=_=c.delay,l._start+=_,c.delay=0),h.to(f,c,m?m(u,f,D):0),h._ease=Ee.none;h.duration()?x=_=0:l.timeline=0}else if(M){Mt(_t(h.vars.defaults,{ease:"none"})),h._ease=Re(M.ease||i.ease||"none");var I,z,B,V=0;if(O(M))M.forEach((function(t){return h.to(D,t,">")})),h.duration();else{for(d in c={},M)"ease"===d||"easeEach"===d||Xe(d,M[d],c,M.easeEach);for(d in c)for(I=c[d].sort((function(t,e){return t.t-e.t})),V=0,u=0;u<I.length;u++)(B={ease:(z=I[u]).e,duration:(z.t-(u?I[u-1].t:0))/100*x})[d]=z.v,h.to(D,B,V),V+=B.duration;h.duration()<x&&h.to({},{duration:x-h.duration()})}}x||l.duration(x=h.duration())}else l.timeline=0;return!0!==S||r||(Ne=t(l),s.killTweensOf(D),Ne=0),Bt(C,t(l),a),i.reversed&&l.reverse(),i.paused&&l.paused(!0),(b||!x&&!M&&l._start===dt(C._time)&&R(b)&&kt(t(l))&&"nested"!==C.data)&&(l._tTime=-1e-8,l.render(Math.max(0,-_)||0)),E&&Vt(t(l),E),l}e(a,n);var o=a.prototype;return o.render=function(t,e,r){var n,s,a,o,l,h,u,c,p,d=this._time,f=this._tDur,m=this._dur,g=t<0,v=t>f-_&&!g?f:t<_?0:t;if(m){if(v!==this._tTime||!t||r||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==g){if(n=v,c=this.timeline,this._repeat){if(o=m+this._rDelay,this._repeat<-1&&g)return this.totalTime(100*o+t,e,r);if(n=dt(v%o),v===f?(a=this._repeat,n=m):((a=~~(v/o))&&a===v/o&&(n=m,a--),n>m&&(n=m)),(h=this._yoyo&&1&a)&&(p=this._yEase,n=m-n),l=It(this._tTime,o),n===d&&!r&&this._initted)return this._tTime=v,this;a!==l&&(c&&this._yEase&&ke(c,h),!this.vars.repeatRefresh||h||this._lock||(this._lock=r=1,this.render(dt(o*a),!0).invalidate()._lock=0))}if(!this._initted){if(Nt(this,g?t:n,r,e,v))return this._tTime=0,this;if(d!==this._time)return this;if(m!==this._dur)return this.render(t,e,r)}if(this._tTime=v,this._time=n,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=u=(p||this._ease)(n/m),this._from&&(this.ratio=u=1-u),n&&!d&&!e&&!a&&(ce(this,"onStart"),this._tTime!==v))return this;for(s=this._pt;s;)s.r(u,s.d),s=s._next;c&&c.render(t<0?t:!n&&h?-1e-8:c._dur*c._ease(n/this._dur),e,r)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(g&&Dt(this,t,0,r),ce(this,"onUpdate")),this._repeat&&a!==l&&this.vars.onRepeat&&!e&&this.parent&&ce(this,"onRepeat"),v!==this._tDur&&v||this._tTime!==v||(g&&!this._onUpdate&&Dt(this,t,0,!0),(t||!m)&&(v===this._tDur&&this._ts>0||!v&&this._ts<0)&&Pt(this,1),e||g&&!d||!(v||d||h)||(ce(this,v===f?"onComplete":"onReverseComplete",!0),this._prom&&!(v<f&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,r,n){var s,a,o,l=t.ratio,h=e<0||!e&&(!t._start&&Gt(t)&&(t._initted||!Wt(t))||(t._ts<0||t._dp._ts<0)&&!Wt(t))?0:1,u=t._rDelay,c=0;if(u&&t._repeat&&(c=Zt(0,t._tDur,e),a=It(c,u),t._yoyo&&1&a&&(h=1-h),a!==It(t._tTime,u)&&(l=1-h,t.vars.repeatRefresh&&t._initted&&t.invalidate())),h!==l||i||n||t._zTime===_||!e&&t._zTime){if(!t._initted&&Nt(t,e,n,r,c))return;for(o=t._zTime,t._zTime=e||(r?_:0),r||(r=e&&!o),t.ratio=h,t._from&&(h=1-h),t._time=0,t._tTime=c,s=t._pt;s;)s.r(h,s.d),s=s._next;e<0&&Dt(t,e,0,!0),t._onUpdate&&!r&&ce(t,"onUpdate"),c&&t._repeat&&!r&&t.parent&&ce(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===h&&(h&&Pt(t,1),r||i||(ce(t,h?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,r);return this},o.targets=function(){return this._targets},o.invalidate=function(t){return(!t||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(t),n.prototype.invalidate.call(this,t)},o.resetTo=function(t,e,r,i){p||Me.wake(),this._ts||this.play();var n=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||je(this,n),function(t,e,r,i,n,s,a){var o,l,h,u,c=(t._pt&&t._ptCache||(t._ptCache={}))[e];if(!c)for(c=t._ptCache[e]=[],h=t._ptLookup,u=t._targets.length;u--;){if((o=h[u][e])&&o.d&&o.d._pt)for(o=o.d._pt;o&&o.p!==e&&o.fp!==e;)o=o._next;if(!o)return Ge=1,t.vars[e]="+=0",je(t,a),Ge=0,1;c.push(o)}for(u=c.length;u--;)(o=(l=c[u])._pt||l).s=!i&&0!==i||n?o.s+(i||0)+s*o.c:i,o.c=r-o.s,l.e&&(l.e=pt(r)+$t(l.e)),l.b&&(l.b=o.s+$t(l.b))}(this,t,e,r,i,this._ease(n/this._dur),n)?this.resetTo(t,e,r,i):(Ot(this,0),this.parent||Tt(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},o.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?pe(this):this;if(this.timeline){var r=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,Ne&&!0!==Ne.vars.overwrite)._first||pe(this),this.parent&&r!==this.timeline.totalDuration()&&Ht(this,this._dur*this.timeline._tDur/r,0,1),this}var i,n,s,a,o,l,h,u=this._targets,c=t?te(t):u,p=this._ptLookup,d=this._pt;if((!e||"all"===e)&&function(t,e){for(var r=t.length,i=r===e.length;i&&r--&&t[r]===e[r];);return r<0}(u,c))return"all"===e&&(this._pt=0),pe(this);for(i=this._op=this._op||[],"all"!==e&&(P(e)&&(o={},ct(e,(function(t){return o[t]=1})),e=o),e=function(t,e){var r,i,n,s,a=t[0]?ht(t[0]).harness:0,o=a&&a.aliases;if(!o)return e;for(i in r=bt({},e),o)if(i in r)for(n=(s=o[i].split(",")).length;n--;)r[s[n]]=r[i];return r}(u,e)),h=u.length;h--;)if(~c.indexOf(u[h]))for(o in n=p[h],"all"===e?(i[h]=e,a=n,s={}):(s=i[h]=i[h]||{},a=e),a)(l=n&&n[o])&&("kill"in l.d&&!0!==l.d.kill(o)||Et(this,l,"_pt"),delete n[o]),"all"!==s&&(s[o]=1);return this._initted&&!this._pt&&d&&pe(this),this},a.to=function(t,e){return new a(t,e,arguments[2])},a.from=function(t,e){return qt(1,arguments)},a.delayedCall=function(t,e,r,i){return new a(e,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:e,onReverseComplete:e,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:i})},a.fromTo=function(t,e,r){return qt(2,arguments)},a.set=function(t,e){return e.duration=0,e.repeatDelay||(e.repeat=0),new a(t,e)},a.killTweensOf=function(t,e,r){return s.killTweensOf(t,e,r)},a}(Be);_t($e.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),ct("staggerTo,staggerFrom,staggerFromTo",(function(t){$e[t]=function(){var e=new Ve,r=Jt.call(arguments,0);return r.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,r)}}));var Je=function(t,e,r){return t[e]=r},Ke=function(t,e,r){return t[e](r)},Qe=function(t,e,r,i){return t[e](i.fp,r)},tr=function(t,e,r){return t.setAttribute(e,r)},er=function(t,e){return C(t[e])?Ke:D(t[e])&&t.setAttribute?tr:Je},rr=function(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)},ir=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},nr=function(t,e){var r=e._pt,i="";if(!t&&e.b)i=e.b;else if(1===t&&e.e)i=e.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*t):Math.round(1e4*(r.s+r.c*t))/1e4)+i,r=r._next;i+=e.c}e.set(e.t,e.p,i,e)},sr=function(t,e){for(var r=e._pt;r;)r.r(t,r.d),r=r._next},ar=function(t,e,r,i){for(var n,s=this._pt;s;)n=s._next,s.p===i&&s.modifier(t,e,r),s=n},or=function(t){for(var e,r,i=this._pt;i;)r=i._next,i.p===t&&!i.op||i.op===t?Et(this,i,"_pt"):i.dep||(e=1),i=r;return!e},lr=function(t,e,r,i){i.mSet(t,e,i.m.call(i.tween,r,i.mt),i)},hr=function(t){for(var e,r,i,n,s=t._pt;s;){for(e=s._next,r=i;r&&r.pr>s.pr;)r=r._next;(s._prev=r?r._prev:n)?s._prev._next=s:i=s,(s._next=r)?r._prev=s:n=s,s=e}t._pt=i},ur=function(){function t(t,e,r,i,n,s,a,o,l){this.t=e,this.s=i,this.c=n,this.p=r,this.r=s||rr,this.d=a||this,this.set=o||Je,this.pr=l||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,r){this.mSet=this.mSet||this.set,this.set=lr,this.m=t,this.mt=r,this.tween=e},t}();ct(ot+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(t){return tt[t]=1})),U.TweenMax=U.TweenLite=$e,U.TimelineLite=U.TimelineMax=Ve,s=new Ve({sortChildren:!1,defaults:y,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),v.stringFilter=Se;var cr=[],pr={},dr=[],fr=0,mr=0,gr=function(t){return(pr[t]||dr).map((function(t){return t()}))},vr=function(){var t=Date.now(),e=[];t-fr>2&&(gr("matchMediaInit"),cr.forEach((function(t){var r,i,n,s,o=t.queries,l=t.conditions;for(i in o)(r=a.matchMedia(o[i]).matches)&&(n=1),r!==l[i]&&(l[i]=r,s=1);s&&(t.revert(),n&&e.push(t))})),gr("matchMediaRevert"),e.forEach((function(t){return t.onMatch(t)})),fr=t,gr("matchMedia"))},yr=function(){function t(t,e){this.selector=e&&ee(e),this.data=[],this._r=[],this.isReverted=!1,this.id=mr++,t&&this.add(t)}var e=t.prototype;return e.add=function(t,e,r){C(t)&&(r=e,e=t,t=C);var i=this,s=function(){var t,s=n,a=i.selector;return s&&s!==i&&s.data.push(i),r&&(i.selector=ee(r)),n=i,t=e.apply(i,arguments),C(t)&&i._r.push(t),n=s,i.selector=a,i.isReverted=!1,t};return i.last=s,t===C?s(i):t?i[t]=s:s},e.ignore=function(t){var e=n;n=null,t(this),n=e},e.getTweens=function(){var e=[];return this.data.forEach((function(r){return r instanceof t?e.push.apply(e,r.getTweens()):r instanceof $e&&!(r.parent&&"nested"===r.parent.data)&&e.push(r)})),e},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(t,e){var r=this;if(t){var i=this.getTweens();this.data.forEach((function(t){"isFlip"===t.data&&(t.revert(),t.getChildren(!0,!0,!1).forEach((function(t){return i.splice(i.indexOf(t),1)})))})),i.map((function(t){return{g:t.globalTime(0),t:t}})).sort((function(t,e){return e.g-t.g||-1/0})).forEach((function(e){return e.t.revert(t)})),this.data.forEach((function(e){return!(e instanceof $e)&&e.revert&&e.revert(t)})),this._r.forEach((function(e){return e(t,r)})),this.isReverted=!0}else this.data.forEach((function(t){return t.kill&&t.kill()}));if(this.clear(),e)for(var n=cr.length;n--;)cr[n].id===this.id&&cr.splice(n,1)},e.revert=function(t){this.kill(t||{})},t}(),xr=function(){function t(t){this.contexts=[],this.scope=t}var e=t.prototype;return e.add=function(t,e,r){k(t)||(t={matches:t});var i,s,o,l=new yr(0,r||this.scope),h=l.conditions={};for(s in n&&!l.selector&&(l.selector=n.selector),this.contexts.push(l),e=l.add("onMatch",e),l.queries=t,t)"all"===s?o=1:(i=a.matchMedia(t[s]))&&(cr.indexOf(l)<0&&cr.push(l),(h[s]=i.matches)&&(o=1),i.addListener?i.addListener(vr):i.addEventListener("change",vr));return o&&e(l),this},e.revert=function(t){this.kill(t||{})},e.kill=function(t){this.contexts.forEach((function(e){return e.kill(t,!0)}))},t}(),_r={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e.forEach((function(t){return fe(t)}))},timeline:function(t){return new Ve(t)},getTweensOf:function(t,e){return s.getTweensOf(t,e)},getProperty:function(t,e,r,i){P(t)&&(t=te(t)[0]);var n=ht(t||{}).get,s=r?xt:yt;return"native"===r&&(r=""),t?e?s((it[e]&&it[e].get||n)(t,e,r,i)):function(e,r,i){return s((it[e]&&it[e].get||n)(t,e,r,i))}:t},quickSetter:function(t,e,r){if((t=te(t)).length>1){var i=t.map((function(t){return Sr.quickSetter(t,e,r)})),n=i.length;return function(t){for(var e=n;e--;)i[e](t)}}t=t[0]||{};var s=it[e],a=ht(t),o=a.harness&&(a.harness.aliases||{})[e]||e,l=s?function(e){var i=new s;c._pt=0,i.init(t,r?e+r:e,c,0,[t]),i.render(1,i),c._pt&&sr(1,c)}:a.set(t,o);return s?l:function(e){return l(t,o,r?e+r:e,a,1)}},quickTo:function(t,e,r){var i,n=Sr.to(t,bt(((i={})[e]="+=0.1",i.paused=!0,i),r||{})),s=function(t,r,i){return n.resetTo(e,t,r,i)};return s.tween=n,s},isTweening:function(t){return s.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Re(t.ease,y.ease)),wt(y,t||{})},config:function(t){return wt(v,t||{})},registerEffect:function(t){var e=t.name,r=t.effect,i=t.plugins,n=t.defaults,s=t.extendTimeline;(i||"").split(",").forEach((function(t){return t&&!it[t]&&!U[t]&&Y(e+" effect requires "+t+" plugin.")})),nt[e]=function(t,e,i){return r(te(t),_t(e||{},n),i)},s&&(Ve.prototype[e]=function(t,r,i){return this.add(nt[e](t,k(r)?r:(i=r)&&{},this),i)})},registerEase:function(t,e){Ee[t]=Re(e)},parseEase:function(t,e){return arguments.length?Re(t,e):Ee},getById:function(t){return s.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var r,i,n=new Ve(t);for(n.smoothChildTiming=R(t.smoothChildTiming),s.remove(n),n._dp=0,n._time=n._tTime=s._time,r=s._first;r;)i=r._next,!e&&!r._dur&&r instanceof $e&&r.vars.onComplete===r._targets[0]||Bt(n,r,r._start-r._delay),r=i;return Bt(s,n,0),n},context:function(t,e){return t?new yr(t,e):n},matchMedia:function(t){return new xr(t)},matchMediaRefresh:function(){return cr.forEach((function(t){var e,r,i=t.conditions;for(r in i)i[r]&&(i[r]=!1,e=1);e&&t.revert()}))||vr()},addEventListener:function(t,e){var r=pr[t]||(pr[t]=[]);~r.indexOf(e)||r.push(e)},removeEventListener:function(t,e){var r=pr[t],i=r&&r.indexOf(e);i>=0&&r.splice(i,1)},utils:{wrap:function t(e,r,i){var n=r-e;return O(e)?oe(e,t(0,e.length),r):Yt(i,(function(t){return(n+(t-e)%n)%n+e}))},wrapYoyo:function t(e,r,i){var n=r-e,s=2*n;return O(e)?oe(e,t(0,e.length-1),r):Yt(i,(function(t){return e+((t=(s+(t-e)%s)%s||0)>n?s-t:t)}))},distribute:ie,random:ae,snap:se,normalize:function(t,e,r){return he(t,e,0,1,r)},getUnit:$t,clamp:function(t,e,r){return Yt(r,(function(r){return Zt(t,e,r)}))},splitColor:ye,toArray:te,selector:ee,mapRange:he,pipe:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},unitize:function(t,e){return function(r){return t(parseFloat(r))+(e||$t(r))}},interpolate:function t(e,r,i,n){var s=isNaN(e+r)?0:function(t){return(1-t)*e+t*r};if(!s){var a,o,l,h,u,c=P(e),p={};if(!0===i&&(n=1)&&(i=null),c)e={p:e},r={p:r};else if(O(e)&&!O(r)){for(l=[],h=e.length,u=h-2,o=1;o<h;o++)l.push(t(e[o-1],e[o]));h--,s=function(t){t*=h;var e=Math.min(u,~~t);return l[e](t-e)},i=r}else n||(e=bt(O(e)?[]:{},e));if(!l){for(a in r)He.call(p,e,a,"get",r[a]);s=function(t){return sr(t,p)||(c?e.p:e)}}}return Yt(i,s)},shuffle:re},install:X,effects:nt,ticker:Me,updateRoot:Ve.updateRoot,plugins:it,globalTimeline:s,core:{PropTween:ur,globals:Z,Tween:$e,Timeline:Ve,Animation:Be,getCache:ht,_removeLinkedListItem:Et,reverting:function(){return i},context:function(t){return t&&n&&(n.data.push(t),t._ctx=n),n},suppressOverwrites:function(t){return r=t}}};ct("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return _r[t]=$e[t]})),Me.add(Ve.updateRoot),c=_r.to({},{duration:0});var br=function(t,e){for(var r=t._pt;r&&r.p!==e&&r.op!==e&&r.fp!==e;)r=r._next;return r},wr=function(t,e){return{name:t,rawVars:1,init:function(t,r,i){i._onInit=function(t){var i,n;if(P(r)&&(i={},ct(r,(function(t){return i[t]=1})),r=i),e){for(n in i={},r)i[n]=e(r[n]);r=i}!function(t,e){var r,i,n,s=t._targets;for(r in e)for(i=s.length;i--;)(n=t._ptLookup[i][r])&&(n=n.d)&&(n._pt&&(n=br(n,r)),n&&n.modifier&&n.modifier(e[r],t,s[i],r))}(t,r)}}}},Sr=_r.registerPlugin({name:"attr",init:function(t,e,r,i,n){var s,a,o;for(s in this.tween=r,e)o=t.getAttribute(s)||"",(a=this.add(t,"setAttribute",(o||0)+"",e[s],i,n,0,0,s)).op=s,a.b=o,this._props.push(s)},render:function(t,e){for(var r=e._pt;r;)i?r.set(r.t,r.p,r.b,r):r.r(t,r.d),r=r._next}},{name:"endArray",init:function(t,e){for(var r=e.length;r--;)this.add(t,r,t[r]||0,e[r],0,0,0,0,0,1)}},wr("roundProps",ne),wr("modifiers"),wr("snap",se))||_r;$e.version=Ve.version=Sr.version="3.12.2",h=1,I()&&Te();Ee.Power0,Ee.Power1,Ee.Power2,Ee.Power3,Ee.Power4,Ee.Linear,Ee.Quad,Ee.Cubic,Ee.Quart,Ee.Quint,Ee.Strong,Ee.Elastic,Ee.Back,Ee.SteppedEase,Ee.Bounce,Ee.Sine,Ee.Expo,Ee.Circ;var Mr,Tr,Er,Pr,Cr,Ar,Dr,kr,Rr={},Ir=180/Math.PI,Lr=Math.PI/180,Fr=Math.atan2,Or=/([A-Z])/g,zr=/(left|right|width|margin|padding|x)/i,Br=/[\s,\(]\S/,Vr={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Nr=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Gr=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Wr=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},Hr=function(t,e){var r=e.s+e.c*t;e.set(e.t,e.p,~~(r+(r<0?-.5:.5))+e.u,e)},Ur=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},jr=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},Xr=function(t,e,r){return t.style[e]=r},qr=function(t,e,r){return t.style.setProperty(e,r)},Yr=function(t,e,r){return t._gsap[e]=r},Zr=function(t,e,r){return t._gsap.scaleX=t._gsap.scaleY=r},$r=function(t,e,r,i,n){var s=t._gsap;s.scaleX=s.scaleY=r,s.renderTransform(n,s)},Jr=function(t,e,r,i,n){var s=t._gsap;s[e]=r,s.renderTransform(n,s)},Kr="transform",Qr=Kr+"Origin",ti=function t(e,r){var i=this,n=this.target,s=n.style;if(e in Rr&&s){if(this.tfm=this.tfm||{},"transform"===e)return Vr.transform.split(",").forEach((function(e){return t.call(i,e,r)}));if(~(e=Vr[e]||e).indexOf(",")?e.split(",").forEach((function(t){return i.tfm[t]=yi(n,t)})):this.tfm[e]=n._gsap.x?n._gsap[e]:yi(n,e),this.props.indexOf(Kr)>=0)return;n._gsap.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(Qr,r,"")),e=Kr}(s||r)&&this.props.push(e,r,s[e])},ei=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},ri=function(){var t,e,r=this.props,i=this.target,n=i.style,s=i._gsap;for(t=0;t<r.length;t+=3)r[t+1]?i[r[t]]=r[t+2]:r[t+2]?n[r[t]]=r[t+2]:n.removeProperty("--"===r[t].substr(0,2)?r[t]:r[t].replace(Or,"-$1").toLowerCase());if(this.tfm){for(e in this.tfm)s[e]=this.tfm[e];s.svg&&(s.renderTransform(),i.setAttribute("data-svg-origin",this.svgo||"")),(t=Dr())&&t.isStart||n[Kr]||(ei(n),s.uncache=1)}},ii=function(t,e){var r={target:t,props:[],revert:ri,save:ti};return t._gsap||Sr.core.getCache(t),e&&e.split(",").forEach((function(t){return r.save(t)})),r},ni=function(t,e){var r=Tr.createElementNS?Tr.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Tr.createElement(t);return r.style?r:Tr.createElement(t)},si=function t(e,r,i){var n=getComputedStyle(e);return n[r]||n.getPropertyValue(r.replace(Or,"-$1").toLowerCase())||n.getPropertyValue(r)||!i&&t(e,oi(r)||r,1)||""},ai="O,Moz,ms,Ms,Webkit".split(","),oi=function(t,e,r){var i=(e||Cr).style,n=5;if(t in i&&!r)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);n--&&!(ai[n]+t in i););return n<0?null:(3===n?"ms":n>=0?ai[n]:"")+t},li=function(){"undefined"!=typeof window&&window.document&&(Mr=window,Tr=Mr.document,Er=Tr.documentElement,Cr=ni("div")||{style:{}},ni("div"),Kr=oi(Kr),Qr=Kr+"Origin",Cr.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",kr=!!oi("perspective"),Dr=Sr.core.reverting,Pr=1)},hi=function t(e){var r,i=ni("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,s=this.nextSibling,a=this.style.cssText;if(Er.appendChild(i),i.appendChild(this),this.style.display="block",e)try{r=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch(t){}else this._gsapBBox&&(r=this._gsapBBox());return n&&(s?n.insertBefore(this,s):n.appendChild(this)),Er.removeChild(i),this.style.cssText=a,r},ui=function(t,e){for(var r=e.length;r--;)if(t.hasAttribute(e[r]))return t.getAttribute(e[r])},ci=function(t){var e;try{e=t.getBBox()}catch(r){e=hi.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===hi||(e=hi.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+ui(t,["x","cx","x1"])||0,y:+ui(t,["y","cy","y1"])||0,width:0,height:0}},pi=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!ci(t))},di=function(t,e){if(e){var r=t.style;e in Rr&&e!==Qr&&(e=Kr),r.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),r.removeProperty(e.replace(Or,"-$1").toLowerCase())):r.removeAttribute(e)}},fi=function(t,e,r,i,n,s){var a=new ur(t._pt,e,r,0,1,s?jr:Ur);return t._pt=a,a.b=i,a.e=n,t._props.push(r),a},mi={deg:1,rad:1,turn:1},gi={grid:1,flex:1},vi=function t(e,r,i,n){var s,a,o,l,h=parseFloat(i)||0,u=(i+"").trim().substr((h+"").length)||"px",c=Cr.style,p=zr.test(r),d="svg"===e.tagName.toLowerCase(),f=(d?"client":"offset")+(p?"Width":"Height"),m=100,g="px"===n,v="%"===n;return n===u||!h||mi[n]||mi[u]?h:("px"!==u&&!g&&(h=t(e,r,i,"px")),l=e.getCTM&&pi(e),!v&&"%"!==u||!Rr[r]&&!~r.indexOf("adius")?(c[p?"width":"height"]=m+(g?u:n),a=~r.indexOf("adius")||"em"===n&&e.appendChild&&!d?e:e.parentNode,l&&(a=(e.ownerSVGElement||{}).parentNode),a&&a!==Tr&&a.appendChild||(a=Tr.body),(o=a._gsap)&&v&&o.width&&p&&o.time===Me.time&&!o.uncache?pt(h/o.width*m):((v||"%"===u)&&!gi[si(a,"display")]&&(c.position=si(e,"position")),a===e&&(c.position="static"),a.appendChild(Cr),s=Cr[f],a.removeChild(Cr),c.position="absolute",p&&v&&((o=ht(a)).time=Me.time,o.width=a[f]),pt(g?s*h/m:s&&h?m/s*h:0))):(s=l?e.getBBox()[p?"width":"height"]:e[f],pt(v?h/s*m:h/100*s)))},yi=function(t,e,r,i){var n;return Pr||li(),e in Vr&&"transform"!==e&&~(e=Vr[e]).indexOf(",")&&(e=e.split(",")[0]),Rr[e]&&"transform"!==e?(n=Ai(t,i),n="transformOrigin"!==e?n[e]:n.svg?n.origin:Di(si(t,Qr))+" "+n.zOrigin+"px"):(!(n=t.style[e])||"auto"===n||i||~(n+"").indexOf("calc("))&&(n=wi[e]&&wi[e](t,e,r)||si(t,e)||ut(t,e)||("opacity"===e?1:0)),r&&!~(n+"").trim().indexOf(" ")?vi(t,e,n,r)+r:n},xi=function(t,e,r,i){if(!r||"none"===r){var n=oi(e,t,1),s=n&&si(t,n,1);s&&s!==r?(e=n,r=s):"borderColor"===e&&(r=si(t,"borderTopColor"))}var a,o,l,h,u,c,p,d,f,m,g,y=new ur(this._pt,t.style,e,0,1,nr),x=0,_=0;if(y.b=r,y.e=i,r+="","auto"===(i+="")&&(t.style[e]=i,i=si(t,e)||i,t.style[e]=r),Se(a=[r,i]),i=a[1],l=(r=a[0]).match(V)||[],(i.match(V)||[]).length){for(;o=V.exec(i);)p=o[0],f=i.substring(x,o.index),u?u=(u+1)%5:"rgba("!==f.substr(-5)&&"hsla("!==f.substr(-5)||(u=1),p!==(c=l[_++]||"")&&(h=parseFloat(c)||0,g=c.substr((h+"").length),"="===p.charAt(1)&&(p=ft(h,p)+g),d=parseFloat(p),m=p.substr((d+"").length),x=V.lastIndex-m.length,m||(m=m||v.units[e]||g,x===i.length&&(i+=m,y.e+=m)),g!==m&&(h=vi(t,e,c,m)||0),y._pt={_next:y._pt,p:f||1===_?f:",",s:h,c:d-h,m:u&&u<4||"zIndex"===e?Math.round:0});y.c=x<i.length?i.substring(x,i.length):""}else y.r="display"===e&&"none"===i?jr:Ur;return G.test(i)&&(y.e=0),this._pt=y,y},_i={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},bi=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var r,i,n,s=e.t,a=s.style,o=e.u,l=s._gsap;if("all"===o||!0===o)a.cssText="",i=1;else for(n=(o=o.split(",")).length;--n>-1;)r=o[n],Rr[r]&&(i=1,r="transformOrigin"===r?Qr:Kr),di(s,r);i&&(di(s,Kr),l&&(l.svg&&s.removeAttribute("transform"),Ai(s,1),l.uncache=1,ei(a)))}},wi={clearProps:function(t,e,r,i,n){if("isFromStart"!==n.data){var s=t._pt=new ur(t._pt,e,r,0,0,bi);return s.u=i,s.pr=-10,s.tween=n,t._props.push(r),1}}},Si=[1,0,0,1,0,0],Mi={},Ti=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},Ei=function(t){var e=si(t,Kr);return Ti(e)?Si:e.substr(7).match(B).map(pt)},Pi=function(t,e){var r,i,n,s,a=t._gsap||ht(t),o=t.style,l=Ei(t);return a.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(n=t.transform.baseVal.consolidate().matrix).a,n.b,n.c,n.d,n.e,n.f]).join(",")?Si:l:(l!==Si||t.offsetParent||t===Er||a.svg||(n=o.display,o.display="block",(r=t.parentNode)&&t.offsetParent||(s=1,i=t.nextElementSibling,Er.appendChild(t)),l=Ei(t),n?o.display=n:di(t,"display"),s&&(i?r.insertBefore(t,i):r?r.appendChild(t):Er.removeChild(t))),e&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},Ci=function(t,e,r,i,n,s){var a,o,l,h=t._gsap,u=n||Pi(t,!0),c=h.xOrigin||0,p=h.yOrigin||0,d=h.xOffset||0,f=h.yOffset||0,m=u[0],g=u[1],v=u[2],y=u[3],x=u[4],_=u[5],b=e.split(" "),w=parseFloat(b[0])||0,S=parseFloat(b[1])||0;r?u!==Si&&(o=m*y-g*v)&&(l=w*(-g/o)+S*(m/o)-(m*_-g*x)/o,w=w*(y/o)+S*(-v/o)+(v*_-y*x)/o,S=l):(w=(a=ci(t)).x+(~b[0].indexOf("%")?w/100*a.width:w),S=a.y+(~(b[1]||b[0]).indexOf("%")?S/100*a.height:S)),i||!1!==i&&h.smooth?(x=w-c,_=S-p,h.xOffset=d+(x*m+_*v)-x,h.yOffset=f+(x*g+_*y)-_):h.xOffset=h.yOffset=0,h.xOrigin=w,h.yOrigin=S,h.smooth=!!i,h.origin=e,h.originIsAbsolute=!!r,t.style[Qr]="0px 0px",s&&(fi(s,h,"xOrigin",c,w),fi(s,h,"yOrigin",p,S),fi(s,h,"xOffset",d,h.xOffset),fi(s,h,"yOffset",f,h.yOffset)),t.setAttribute("data-svg-origin",w+" "+S)},Ai=function(t,e){var r=t._gsap||new ze(t);if("x"in r&&!e&&!r.uncache)return r;var i,n,s,a,o,l,h,u,c,p,d,f,m,g,y,x,_,b,w,S,M,T,E,P,C,A,D,k,R,I,L,F,O=t.style,z=r.scaleX<0,B="px",V="deg",N=getComputedStyle(t),G=si(t,Qr)||"0";return i=n=s=l=h=u=c=p=d=0,a=o=1,r.svg=!(!t.getCTM||!pi(t)),N.translate&&("none"===N.translate&&"none"===N.scale&&"none"===N.rotate||(O[Kr]=("none"!==N.translate?"translate3d("+(N.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==N.rotate?"rotate("+N.rotate+") ":"")+("none"!==N.scale?"scale("+N.scale.split(" ").join(",")+") ":"")+("none"!==N[Kr]?N[Kr]:"")),O.scale=O.rotate=O.translate="none"),g=Pi(t,r.svg),r.svg&&(r.uncache?(C=t.getBBox(),G=r.xOrigin-C.x+"px "+(r.yOrigin-C.y)+"px",P=""):P=!e&&t.getAttribute("data-svg-origin"),Ci(t,P||G,!!P||r.originIsAbsolute,!1!==r.smooth,g)),f=r.xOrigin||0,m=r.yOrigin||0,g!==Si&&(b=g[0],w=g[1],S=g[2],M=g[3],i=T=g[4],n=E=g[5],6===g.length?(a=Math.sqrt(b*b+w*w),o=Math.sqrt(M*M+S*S),l=b||w?Fr(w,b)*Ir:0,(c=S||M?Fr(S,M)*Ir+l:0)&&(o*=Math.abs(Math.cos(c*Lr))),r.svg&&(i-=f-(f*b+m*S),n-=m-(f*w+m*M))):(F=g[6],I=g[7],D=g[8],k=g[9],R=g[10],L=g[11],i=g[12],n=g[13],s=g[14],h=(y=Fr(F,R))*Ir,y&&(P=T*(x=Math.cos(-y))+D*(_=Math.sin(-y)),C=E*x+k*_,A=F*x+R*_,D=T*-_+D*x,k=E*-_+k*x,R=F*-_+R*x,L=I*-_+L*x,T=P,E=C,F=A),u=(y=Fr(-S,R))*Ir,y&&(x=Math.cos(-y),L=M*(_=Math.sin(-y))+L*x,b=P=b*x-D*_,w=C=w*x-k*_,S=A=S*x-R*_),l=(y=Fr(w,b))*Ir,y&&(P=b*(x=Math.cos(y))+w*(_=Math.sin(y)),C=T*x+E*_,w=w*x-b*_,E=E*x-T*_,b=P,T=C),h&&Math.abs(h)+Math.abs(l)>359.9&&(h=l=0,u=180-u),a=pt(Math.sqrt(b*b+w*w+S*S)),o=pt(Math.sqrt(E*E+F*F)),y=Fr(T,E),c=Math.abs(y)>2e-4?y*Ir:0,d=L?1/(L<0?-L:L):0),r.svg&&(P=t.getAttribute("transform"),r.forceCSS=t.setAttribute("transform","")||!Ti(si(t,Kr)),P&&t.setAttribute("transform",P))),Math.abs(c)>90&&Math.abs(c)<270&&(z?(a*=-1,c+=l<=0?180:-180,l+=l<=0?180:-180):(o*=-1,c+=c<=0?180:-180)),e=e||r.uncache,r.x=i-((r.xPercent=i&&(!e&&r.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-i)?-50:0)))?t.offsetWidth*r.xPercent/100:0)+B,r.y=n-((r.yPercent=n&&(!e&&r.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-n)?-50:0)))?t.offsetHeight*r.yPercent/100:0)+B,r.z=s+B,r.scaleX=pt(a),r.scaleY=pt(o),r.rotation=pt(l)+V,r.rotationX=pt(h)+V,r.rotationY=pt(u)+V,r.skewX=c+V,r.skewY=p+V,r.transformPerspective=d+B,(r.zOrigin=parseFloat(G.split(" ")[2])||0)&&(O[Qr]=Di(G)),r.xOffset=r.yOffset=0,r.force3D=v.force3D,r.renderTransform=r.svg?zi:kr?Oi:Ri,r.uncache=0,r},Di=function(t){return(t=t.split(" "))[0]+" "+t[1]},ki=function(t,e,r){var i=$t(e);return pt(parseFloat(e)+parseFloat(vi(t,"x",r+"px",i)))+i},Ri=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Oi(t,e)},Ii="0deg",Li="0px",Fi=") ",Oi=function(t,e){var r=e||this,i=r.xPercent,n=r.yPercent,s=r.x,a=r.y,o=r.z,l=r.rotation,h=r.rotationY,u=r.rotationX,c=r.skewX,p=r.skewY,d=r.scaleX,f=r.scaleY,m=r.transformPerspective,g=r.force3D,v=r.target,y=r.zOrigin,x="",_="auto"===g&&t&&1!==t||!0===g;if(y&&(u!==Ii||h!==Ii)){var b,w=parseFloat(h)*Lr,S=Math.sin(w),M=Math.cos(w);w=parseFloat(u)*Lr,b=Math.cos(w),s=ki(v,s,S*b*-y),a=ki(v,a,-Math.sin(w)*-y),o=ki(v,o,M*b*-y+y)}m!==Li&&(x+="perspective("+m+Fi),(i||n)&&(x+="translate("+i+"%, "+n+"%) "),(_||s!==Li||a!==Li||o!==Li)&&(x+=o!==Li||_?"translate3d("+s+", "+a+", "+o+") ":"translate("+s+", "+a+Fi),l!==Ii&&(x+="rotate("+l+Fi),h!==Ii&&(x+="rotateY("+h+Fi),u!==Ii&&(x+="rotateX("+u+Fi),c===Ii&&p===Ii||(x+="skew("+c+", "+p+Fi),1===d&&1===f||(x+="scale("+d+", "+f+Fi),v.style[Kr]=x||"translate(0, 0)"},zi=function(t,e){var r,i,n,s,a,o=e||this,l=o.xPercent,h=o.yPercent,u=o.x,c=o.y,p=o.rotation,d=o.skewX,f=o.skewY,m=o.scaleX,g=o.scaleY,v=o.target,y=o.xOrigin,x=o.yOrigin,_=o.xOffset,b=o.yOffset,w=o.forceCSS,S=parseFloat(u),M=parseFloat(c);p=parseFloat(p),d=parseFloat(d),(f=parseFloat(f))&&(d+=f=parseFloat(f),p+=f),p||d?(p*=Lr,d*=Lr,r=Math.cos(p)*m,i=Math.sin(p)*m,n=Math.sin(p-d)*-g,s=Math.cos(p-d)*g,d&&(f*=Lr,a=Math.tan(d-f),n*=a=Math.sqrt(1+a*a),s*=a,f&&(a=Math.tan(f),r*=a=Math.sqrt(1+a*a),i*=a)),r=pt(r),i=pt(i),n=pt(n),s=pt(s)):(r=m,s=g,i=n=0),(S&&!~(u+"").indexOf("px")||M&&!~(c+"").indexOf("px"))&&(S=vi(v,"x",u,"px"),M=vi(v,"y",c,"px")),(y||x||_||b)&&(S=pt(S+y-(y*r+x*n)+_),M=pt(M+x-(y*i+x*s)+b)),(l||h)&&(a=v.getBBox(),S=pt(S+l/100*a.width),M=pt(M+h/100*a.height)),a="matrix("+r+","+i+","+n+","+s+","+S+","+M+")",v.setAttribute("transform",a),w&&(v.style[Kr]=a)},Bi=function(t,e,r,i,n){var s,a,o=360,l=P(n),h=parseFloat(n)*(l&&~n.indexOf("rad")?Ir:1)-i,u=i+h+"deg";return l&&("short"===(s=n.split("_")[1])&&(h%=o)!==h%180&&(h+=h<0?o:-360),"cw"===s&&h<0?h=(h+36e9)%o-~~(h/o)*o:"ccw"===s&&h>0&&(h=(h-36e9)%o-~~(h/o)*o)),t._pt=a=new ur(t._pt,e,r,i,h,Gr),a.e=u,a.u="deg",t._props.push(r),a},Vi=function(t,e){for(var r in e)t[r]=e[r];return t},Ni=function(t,e,r){var i,n,s,a,o,l,h,u=Vi({},r._gsap),c=r.style;for(n in u.svg?(s=r.getAttribute("transform"),r.setAttribute("transform",""),c[Kr]=e,i=Ai(r,1),di(r,Kr),r.setAttribute("transform",s)):(s=getComputedStyle(r)[Kr],c[Kr]=e,i=Ai(r,1),c[Kr]=s),Rr)(s=u[n])!==(a=i[n])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(n)<0&&(o=$t(s)!==(h=$t(a))?vi(r,n,s,h):parseFloat(s),l=parseFloat(a),t._pt=new ur(t._pt,i,n,o,l-o,Nr),t._pt.u=h||0,t._props.push(n));Vi(i,u)};ct("padding,margin,Width,Radius",(function(t,e){var r="Top",i="Right",n="Bottom",s="Left",a=(e<3?[r,i,n,s]:[r+s,r+i,n+i,n+s]).map((function(r){return e<2?t+r:"border"+r+t}));wi[e>1?"border"+t:t]=function(t,e,r,i,n){var s,o;if(arguments.length<4)return s=a.map((function(e){return yi(t,e,r)})),5===(o=s.join(" ")).split(s[0]).length?s[0]:o;s=(i+"").split(" "),o={},a.forEach((function(t,e){return o[t]=s[e]=s[e]||s[(e-1)/2|0]})),t.init(e,o,n)}}));var Gi,Wi,Hi,Ui={name:"css",register:li,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,r,i,n){var s,a,o,l,h,u,c,p,d,f,m,g,y,x,_,b,w,S,M,T,E=this._props,C=t.style,A=r.vars.startAt;for(c in Pr||li(),this.styles=this.styles||ii(t),b=this.styles.props,this.tween=r,e)if("autoRound"!==c&&(a=e[c],!it[c]||!Ue(c,e,r,i,t,n)))if(h=typeof a,u=wi[c],"function"===h&&(h=typeof(a=a.call(r,i,t,n))),"string"===h&&~a.indexOf("random(")&&(a=le(a)),u)u(this,t,c,a,r)&&(_=1);else if("--"===c.substr(0,2))s=(getComputedStyle(t).getPropertyValue(c)+"").trim(),a+="",be.lastIndex=0,be.test(s)||(p=$t(s),d=$t(a)),d?p!==d&&(s=vi(t,c,s,d)+d):p&&(a+=p),this.add(C,"setProperty",s,a,i,n,0,0,c),E.push(c),b.push(c,0,C[c]);else if("undefined"!==h){if(A&&c in A?(s="function"==typeof A[c]?A[c].call(r,i,t,n):A[c],P(s)&&~s.indexOf("random(")&&(s=le(s)),$t(s+"")||(s+=v.units[c]||$t(yi(t,c))||""),"="===(s+"").charAt(1)&&(s=yi(t,c))):s=yi(t,c),l=parseFloat(s),(f="string"===h&&"="===a.charAt(1)&&a.substr(0,2))&&(a=a.substr(2)),o=parseFloat(a),c in Vr&&("autoAlpha"===c&&(1===l&&"hidden"===yi(t,"visibility")&&o&&(l=0),b.push("visibility",0,C.visibility),fi(this,C,"visibility",l?"inherit":"hidden",o?"inherit":"hidden",!o)),"scale"!==c&&"transform"!==c&&~(c=Vr[c]).indexOf(",")&&(c=c.split(",")[0])),m=c in Rr)if(this.styles.save(c),g||((y=t._gsap).renderTransform&&!e.parseTransform||Ai(t,e.parseTransform),x=!1!==e.smoothOrigin&&y.smooth,(g=this._pt=new ur(this._pt,C,Kr,0,1,y.renderTransform,y,0,-1)).dep=1),"scale"===c)this._pt=new ur(this._pt,y,"scaleY",y.scaleY,(f?ft(y.scaleY,f+o):o)-y.scaleY||0,Nr),this._pt.u=0,E.push("scaleY",c),c+="X";else{if("transformOrigin"===c){b.push(Qr,0,C[Qr]),S=void 0,M=void 0,T=void 0,S=(w=a).split(" "),M=S[0],T=S[1]||"50%","top"!==M&&"bottom"!==M&&"left"!==T&&"right"!==T||(w=M,M=T,T=w),S[0]=_i[M]||M,S[1]=_i[T]||T,a=S.join(" "),y.svg?Ci(t,a,0,x,0,this):((d=parseFloat(a.split(" ")[2])||0)!==y.zOrigin&&fi(this,y,"zOrigin",y.zOrigin,d),fi(this,C,c,Di(s),Di(a)));continue}if("svgOrigin"===c){Ci(t,a,1,x,0,this);continue}if(c in Mi){Bi(this,y,c,l,f?ft(l,f+a):a);continue}if("smoothOrigin"===c){fi(this,y,"smooth",y.smooth,a);continue}if("force3D"===c){y[c]=a;continue}if("transform"===c){Ni(this,a,t);continue}}else c in C||(c=oi(c)||c);if(m||(o||0===o)&&(l||0===l)&&!Br.test(a)&&c in C)o||(o=0),(p=(s+"").substr((l+"").length))!==(d=$t(a)||(c in v.units?v.units[c]:p))&&(l=vi(t,c,s,d)),this._pt=new ur(this._pt,m?y:C,c,l,(f?ft(l,f+o):o)-l,m||"px"!==d&&"zIndex"!==c||!1===e.autoRound?Nr:Hr),this._pt.u=d||0,p!==d&&"%"!==d&&(this._pt.b=s,this._pt.r=Wr);else if(c in C)xi.call(this,t,c,s,f?f+a:a);else if(c in t)this.add(t,c,s||t[c],f?f+a:a,i,n);else if("parseTransform"!==c){q(c,a);continue}m||(c in C?b.push(c,0,C[c]):b.push(c,1,s||t[c])),E.push(c)}_&&hr(this)},render:function(t,e){if(e.tween._time||!Dr())for(var r=e._pt;r;)r.r(t,r.d),r=r._next;else e.styles.revert()},get:yi,aliases:Vr,getSetter:function(t,e,r){var i=Vr[e];return i&&i.indexOf(",")<0&&(e=i),e in Rr&&e!==Qr&&(t._gsap.x||yi(t,"x"))?r&&Ar===r?"scale"===e?Zr:Yr:(Ar=r||{})&&("scale"===e?$r:Jr):t.style&&!D(t.style[e])?Xr:~e.indexOf("-")?qr:er(t,e)},core:{_removeProperty:di,_getMatrix:Pi}};Sr.utils.checkPrefix=oi,Sr.core.getStyleSaver=ii,Hi=ct((Gi="x,y,z,scale,scaleX,scaleY,xPercent,yPercent")+","+(Wi="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){Rr[t]=1})),ct(Wi,(function(t){v.units[t]="deg",Mi[t]=1})),Vr[Hi[13]]=Gi+","+Wi,ct("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t.split(":");Vr[e[1]]=Hi[e[0]]})),ct("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){v.units[t]="px"})),Sr.registerPlugin(Ui);var ji=Sr.registerPlugin(Ui)||Sr;ji.core.Tween;const Xi="148",qi=100,Yi=301,Zi=302,$i=306,Ji=1e3,Ki=1001,Qi=1002,tn=1003,en=1005,rn=1006,nn=1008,sn=1009,an=1012,on=1014,ln=1015,hn=1016,un=1020,cn=1023,pn=1026,dn=1027,fn=33776,mn=33777,gn=33778,vn=33779,yn=35840,xn=35841,_n=35842,bn=35843,wn=37492,Sn=37496,Mn=37808,Tn=37809,En=37810,Pn=37811,Cn=37812,An=37813,Dn=37814,kn=37815,Rn=37816,In=37817,Ln=37818,Fn=37819,On=37820,zn=37821,Bn=36492,Vn=3e3,Nn=3001,Gn="srgb",Wn="srgb-linear",Hn=7680,Un=35044,jn="300 es",Xn=1035;class qn{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const r=this._listeners;void 0===r[t]&&(r[t]=[]),-1===r[t].indexOf(e)&&r[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const r=this._listeners;return void 0!==r[t]&&-1!==r[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const r=this._listeners[t];if(void 0!==r){const t=r.indexOf(e);-1!==t&&r.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const r=e.slice(0);for(let e=0,i=r.length;e<i;e++)r[e].call(this,t);t.target=null}}}const Yn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Zn=1234567;const $n=Math.PI/180,Jn=180/Math.PI;function Kn(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Yn[255&t]+Yn[t>>8&255]+Yn[t>>16&255]+Yn[t>>24&255]+"-"+Yn[255&e]+Yn[e>>8&255]+"-"+Yn[e>>16&15|64]+Yn[e>>24&255]+"-"+Yn[63&r|128]+Yn[r>>8&255]+"-"+Yn[r>>16&255]+Yn[r>>24&255]+Yn[255&i]+Yn[i>>8&255]+Yn[i>>16&255]+Yn[i>>24&255]).toLowerCase()}function Qn(t,e,r){return Math.max(e,Math.min(r,t))}function ts(t,e){return(t%e+e)%e}function es(t,e,r){return(1-r)*t+r*e}function rs(t){return 0==(t&t-1)&&0!==t}function is(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function ns(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function ss(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}Object.freeze({__proto__:null,DEG2RAD:$n,RAD2DEG:Jn,generateUUID:Kn,clamp:Qn,euclideanModulo:ts,mapLinear:function(t,e,r,i,n){return i+(t-e)*(n-i)/(r-e)},inverseLerp:function(t,e,r){return t!==e?(r-t)/(e-t):0},lerp:es,damp:function(t,e,r,i){return es(t,e,1-Math.exp(-r*i))},pingpong:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e-Math.abs(ts(t,2*e)-e)},smoothstep:function(t,e,r){return t<=e?0:t>=r?1:(t=(t-e)/(r-e))*t*(3-2*t)},smootherstep:function(t,e,r){return t<=e?0:t>=r?1:(t=(t-e)/(r-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){void 0!==t&&(Zn=t);let e=Zn+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function(t){return t*$n},radToDeg:function(t){return t*Jn},isPowerOfTwo:rs,ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:is,setQuaternionFromProperEuler:function(t,e,r,i,n){const s=Math.cos,a=Math.sin,o=s(r/2),l=a(r/2),h=s((e+i)/2),u=a((e+i)/2),c=s((e-i)/2),p=a((e-i)/2),d=s((i-e)/2),f=a((i-e)/2);switch(n){case"XYX":t.set(o*u,l*c,l*p,o*h);break;case"YZY":t.set(l*p,o*u,l*c,o*h);break;case"ZXZ":t.set(l*c,l*p,o*u,o*h);break;case"XZX":t.set(o*u,l*f,l*d,o*h);break;case"YXY":t.set(l*d,o*u,l*f,o*h);break;case"ZYZ":t.set(l*f,l*d,o*u,o*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}},normalize:ss,denormalize:ns});class as{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;as.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,r=this.y,i=t.elements;return this.x=i[0]*e+i[3]*r+i[6],this.y=i[1]*e+i[4]*r+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(e,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,r=this.y-t.y;return e*e+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,r){return this.x=t.x+(e.x-t.x)*r,this.y=t.y+(e.y-t.y)*r,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const r=Math.cos(e),i=Math.sin(e),n=this.x-t.x,s=this.y-t.y;return this.x=n*r-s*i+t.x,this.y=n*i+s*r+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class os{constructor(){os.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,r,i,n,s,a,o,l){const h=this.elements;return h[0]=t,h[1]=i,h[2]=a,h[3]=e,h[4]=n,h[5]=o,h[6]=r,h[7]=s,h[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,r=t.elements;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],this}extractBasis(t,e,r){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const r=t.elements,i=e.elements,n=this.elements,s=r[0],a=r[3],o=r[6],l=r[1],h=r[4],u=r[7],c=r[2],p=r[5],d=r[8],f=i[0],m=i[3],g=i[6],v=i[1],y=i[4],x=i[7],_=i[2],b=i[5],w=i[8];return n[0]=s*f+a*v+o*_,n[3]=s*m+a*y+o*b,n[6]=s*g+a*x+o*w,n[1]=l*f+h*v+u*_,n[4]=l*m+h*y+u*b,n[7]=l*g+h*x+u*w,n[2]=c*f+p*v+d*_,n[5]=c*m+p*y+d*b,n[8]=c*g+p*x+d*w,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],r=t[1],i=t[2],n=t[3],s=t[4],a=t[5],o=t[6],l=t[7],h=t[8];return e*s*h-e*a*l-r*n*h+r*a*o+i*n*l-i*s*o}invert(){const t=this.elements,e=t[0],r=t[1],i=t[2],n=t[3],s=t[4],a=t[5],o=t[6],l=t[7],h=t[8],u=h*s-a*l,c=a*o-h*n,p=l*n-s*o,d=e*u+r*c+i*p;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);const f=1/d;return t[0]=u*f,t[1]=(i*l-h*r)*f,t[2]=(a*r-i*s)*f,t[3]=c*f,t[4]=(h*e-i*o)*f,t[5]=(i*n-a*e)*f,t[6]=p*f,t[7]=(r*o-l*e)*f,t[8]=(s*e-r*n)*f,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,r,i,n,s,a){const o=Math.cos(n),l=Math.sin(n);return this.set(r*o,r*l,-r*(o*s+l*a)+s+t,-i*l,i*o,-i*(-l*s+o*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(ls.makeScale(t,e)),this}rotate(t){return this.premultiply(ls.makeRotation(-t)),this}translate(t,e){return this.premultiply(ls.makeTranslation(t,e)),this}makeTranslation(t,e){return this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),r=Math.sin(t);return this.set(e,-r,0,r,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,r=t.elements;for(let t=0;t<9;t++)if(e[t]!==r[t])return!1;return!0}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let r=0;r<9;r++)this.elements[r]=t[r+e];return this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=this.elements;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const ls=new os;function hs(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function us(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function cs(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function ps(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}const ds={[Gn]:{[Wn]:cs},[Wn]:{[Gn]:ps}},fs={legacyMode:!0,get workingColorSpace(){return Wn},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,r){if(this.legacyMode||e===r||!e||!r)return t;if(ds[e]&&void 0!==ds[e][r]){const i=ds[e][r];return t.r=i(t.r),t.g=i(t.g),t.b=i(t.b),t}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}},ms={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},gs={r:0,g:0,b:0},vs={h:0,s:0,l:0},ys={h:0,s:0,l:0};function xs(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+6*(e-t)*(2/3-r):t}function _s(t,e){return e.r=t.r,e.g=t.g,e.b=t.b,e}class bs{constructor(t,e,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===e&&void 0===r?this.set(t):this.setRGB(t,e,r)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gn;return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,fs.toWorkingColorSpace(this,e),this}setRGB(t,e,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fs.workingColorSpace;return this.r=t,this.g=e,this.b=r,fs.toWorkingColorSpace(this,i),this}setHSL(t,e,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fs.workingColorSpace;if(t=ts(t,1),e=Qn(e,0,1),r=Qn(r,0,1),0===e)this.r=this.g=this.b=r;else{const i=r<=.5?r*(1+e):r+e-r*e,n=2*r-i;this.r=xs(n,i,t+1/3),this.g=xs(n,i,t),this.b=xs(n,i,t-1/3)}return fs.toWorkingColorSpace(this,i),this}setStyle(t){let e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gn;function i(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}if(e=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let t;const n=e[1],s=e[2];switch(n){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,fs.toWorkingColorSpace(this,r),i(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,fs.toWorkingColorSpace(this,r),i(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s)){const e=parseFloat(t[1])/360,n=parseFloat(t[2])/100,s=parseFloat(t[3])/100;return i(t[4]),this.setHSL(e,n,s,r)}}}else if(e=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=e[1],i=t.length;if(3===i)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,fs.toWorkingColorSpace(this,r),this;if(6===i)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,fs.toWorkingColorSpace(this,r),this}return t&&t.length>0?this.setColorName(t,r):this}setColorName(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gn;const r=ms[t.toLowerCase()];return void 0!==r?this.setHex(r,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=cs(t.r),this.g=cs(t.g),this.b=cs(t.b),this}copyLinearToSRGB(t){return this.r=ps(t.r),this.g=ps(t.g),this.b=ps(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn;return fs.fromWorkingColorSpace(_s(this,gs),t),Qn(255*gs.r,0,255)<<16^Qn(255*gs.g,0,255)<<8^Qn(255*gs.b,0,255)<<0}getHexString(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn;return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fs.workingColorSpace;fs.fromWorkingColorSpace(_s(this,gs),e);const r=gs.r,i=gs.g,n=gs.b,s=Math.max(r,i,n),a=Math.min(r,i,n);let o,l;const h=(a+s)/2;if(a===s)o=0,l=0;else{const t=s-a;switch(l=h<=.5?t/(s+a):t/(2-s-a),s){case r:o=(i-n)/t+(i<n?6:0);break;case i:o=(n-r)/t+2;break;case n:o=(r-i)/t+4}o/=6}return t.h=o,t.s=l,t.l=h,t}getRGB(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fs.workingColorSpace;return fs.fromWorkingColorSpace(_s(this,gs),e),t.r=gs.r,t.g=gs.g,t.b=gs.b,t}getStyle(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn;return fs.fromWorkingColorSpace(_s(this,gs),t),t!==Gn?`color(${t} ${gs.r} ${gs.g} ${gs.b})`:`rgb(${255*gs.r|0},${255*gs.g|0},${255*gs.b|0})`}offsetHSL(t,e,r){return this.getHSL(vs),vs.h+=t,vs.s+=e,vs.l+=r,this.setHSL(vs.h,vs.s,vs.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,r){return this.r=t.r+(e.r-t.r)*r,this.g=t.g+(e.g-t.g)*r,this.b=t.b+(e.b-t.b)*r,this}lerpHSL(t,e){this.getHSL(vs),t.getHSL(ys);const r=es(vs.h,ys.h,e),i=es(vs.s,ys.s,e),n=es(vs.l,ys.l,e);return this.setHSL(r,i,n),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let ws;bs.NAMES=ms;class Ss{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===ws&&(ws=us("canvas")),ws.width=t.width,ws.height=t.height;const r=ws.getContext("2d");t instanceof ImageData?r.putImageData(t,0,0):r.drawImage(t,0,0,t.width,t.height),e=ws}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=us("canvas");e.width=t.width,e.height=t.height;const r=e.getContext("2d");r.drawImage(t,0,0,t.width,t.height);const i=r.getImageData(0,0,t.width,t.height),n=i.data;for(let t=0;t<n.length;t++)n[t]=255*cs(n[t]/255);return r.putImageData(i,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*cs(e[t]/255)):e[t]=cs(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class Ms{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isSource=!0,this.uuid=Kn(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(null!==i){let t;if(Array.isArray(i)){t=[];for(let e=0,r=i.length;e<r;e++)i[e].isDataTexture?t.push(Ts(i[e].image)):t.push(Ts(i[e]))}else t=Ts(i);r.url=t}return e||(t.images[this.uuid]=r),r}}function Ts(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?Ss.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Es=0;class Ps extends qn{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ps.DEFAULT_IMAGE,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ps.DEFAULT_MAPPING,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ki,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ki,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:rn,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:nn,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:cn,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:sn,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Ps.DEFAULT_ANISOTROPY,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Vn;super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Es++}),this.uuid=Kn(),this.name="",this.source=new Ms(t),this.mipmaps=[],this.mapping=e,this.wrapS=r,this.wrapT=i,this.magFilter=n,this.minFilter=s,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=o,this.offset=new as(0,0),this.repeat=new as(1,1),this.center=new as(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new os,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),e||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Ji:t.x=t.x-Math.floor(t.x);break;case Ki:t.x=t.x<0?0:1;break;case Qi:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Ji:t.y=t.y-Math.floor(t.y);break;case Ki:t.y=t.y<0?0:1;break;case Qi:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}Ps.DEFAULT_IMAGE=null,Ps.DEFAULT_MAPPING=300,Ps.DEFAULT_ANISOTROPY=1;class Cs{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Cs.prototype.isVector4=!0,this.x=t,this.y=e,this.z=r,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,r,i){return this.x=t,this.y=e,this.z=r,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,r=this.y,i=this.z,n=this.w,s=t.elements;return this.x=s[0]*e+s[4]*r+s[8]*i+s[12]*n,this.y=s[1]*e+s[5]*r+s[9]*i+s[13]*n,this.z=s[2]*e+s[6]*r+s[10]*i+s[14]*n,this.w=s[3]*e+s[7]*r+s[11]*i+s[15]*n,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,r,i,n;const s=t.elements,a=s[0],o=s[4],l=s[8],h=s[1],u=s[5],c=s[9],p=s[2],d=s[6],f=s[10];if(Math.abs(o-h)<.01&&Math.abs(l-p)<.01&&Math.abs(c-d)<.01){if(Math.abs(o+h)<.1&&Math.abs(l+p)<.1&&Math.abs(c+d)<.1&&Math.abs(a+u+f-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const t=(a+1)/2,s=(u+1)/2,m=(f+1)/2,g=(o+h)/4,v=(l+p)/4,y=(c+d)/4;return t>s&&t>m?t<.01?(r=0,i=.707106781,n=.707106781):(r=Math.sqrt(t),i=g/r,n=v/r):s>m?s<.01?(r=.707106781,i=0,n=.707106781):(i=Math.sqrt(s),r=g/i,n=y/i):m<.01?(r=.707106781,i=.707106781,n=0):(n=Math.sqrt(m),r=v/n,i=y/n),this.set(r,i,n,e),this}let m=Math.sqrt((d-c)*(d-c)+(l-p)*(l-p)+(h-o)*(h-o));return Math.abs(m)<.001&&(m=1),this.x=(d-c)/m,this.y=(l-p)/m,this.z=(h-o)/m,this.w=Math.acos((a+u+f-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(e,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,r){return this.x=t.x+(e.x-t.x)*r,this.y=t.y+(e.y-t.y)*r,this.z=t.z+(e.z-t.z)*r,this.w=t.w+(e.w-t.w)*r,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class As extends qn{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new Cs(0,0,t,e),this.scissorTest=!1,this.viewport=new Cs(0,0,t,e);const i={width:t,height:e,depth:1};this.texture=new Ps(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,this.texture.internalFormat=void 0!==r.internalFormat?r.internalFormat:null,this.texture.minFilter=void 0!==r.minFilter?r.minFilter:rn,this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0!==r.stencilBuffer&&r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null,this.samples=void 0!==r.samples?r.samples:0}setSize(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;(this.width!==t||this.height!==e||this.depth!==r)&&(this.width=t,this.height=e,this.depth=r,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new Ms(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ds extends Ps{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:r,depth:i},this.magFilter=tn,this.minFilter=tn,this.wrapR=Ki,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ks{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.isQuaternion=!0,this._x=t,this._y=e,this._z=r,this._w=i}static slerpFlat(t,e,r,i,n,s,a){let o=r[i+0],l=r[i+1],h=r[i+2],u=r[i+3];const c=n[s+0],p=n[s+1],d=n[s+2],f=n[s+3];if(0===a)return t[e+0]=o,t[e+1]=l,t[e+2]=h,void(t[e+3]=u);if(1===a)return t[e+0]=c,t[e+1]=p,t[e+2]=d,void(t[e+3]=f);if(u!==f||o!==c||l!==p||h!==d){let t=1-a;const e=o*c+l*p+h*d+u*f,r=e>=0?1:-1,i=1-e*e;if(i>Number.EPSILON){const n=Math.sqrt(i),s=Math.atan2(n,e*r);t=Math.sin(t*s)/n,a=Math.sin(a*s)/n}const n=a*r;if(o=o*t+c*n,l=l*t+p*n,h=h*t+d*n,u=u*t+f*n,t===1-a){const t=1/Math.sqrt(o*o+l*l+h*h+u*u);o*=t,l*=t,h*=t,u*=t}}t[e]=o,t[e+1]=l,t[e+2]=h,t[e+3]=u}static multiplyQuaternionsFlat(t,e,r,i,n,s){const a=r[i],o=r[i+1],l=r[i+2],h=r[i+3],u=n[s],c=n[s+1],p=n[s+2],d=n[s+3];return t[e]=a*d+h*u+o*p-l*c,t[e+1]=o*d+h*c+l*u-a*p,t[e+2]=l*d+h*p+a*c-o*u,t[e+3]=h*d-a*u-o*c-l*p,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,r,i){return this._x=t,this._y=e,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const r=t._x,i=t._y,n=t._z,s=t._order,a=Math.cos,o=Math.sin,l=a(r/2),h=a(i/2),u=a(n/2),c=o(r/2),p=o(i/2),d=o(n/2);switch(s){case"XYZ":this._x=c*h*u+l*p*d,this._y=l*p*u-c*h*d,this._z=l*h*d+c*p*u,this._w=l*h*u-c*p*d;break;case"YXZ":this._x=c*h*u+l*p*d,this._y=l*p*u-c*h*d,this._z=l*h*d-c*p*u,this._w=l*h*u+c*p*d;break;case"ZXY":this._x=c*h*u-l*p*d,this._y=l*p*u+c*h*d,this._z=l*h*d+c*p*u,this._w=l*h*u-c*p*d;break;case"ZYX":this._x=c*h*u-l*p*d,this._y=l*p*u+c*h*d,this._z=l*h*d-c*p*u,this._w=l*h*u+c*p*d;break;case"YZX":this._x=c*h*u+l*p*d,this._y=l*p*u+c*h*d,this._z=l*h*d-c*p*u,this._w=l*h*u-c*p*d;break;case"XZY":this._x=c*h*u-l*p*d,this._y=l*p*u-c*h*d,this._z=l*h*d+c*p*u,this._w=l*h*u+c*p*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const r=e/2,i=Math.sin(r);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,r=e[0],i=e[4],n=e[8],s=e[1],a=e[5],o=e[9],l=e[2],h=e[6],u=e[10],c=r+a+u;if(c>0){const t=.5/Math.sqrt(c+1);this._w=.25/t,this._x=(h-o)*t,this._y=(n-l)*t,this._z=(s-i)*t}else if(r>a&&r>u){const t=2*Math.sqrt(1+r-a-u);this._w=(h-o)/t,this._x=.25*t,this._y=(i+s)/t,this._z=(n+l)/t}else if(a>u){const t=2*Math.sqrt(1+a-r-u);this._w=(n-l)/t,this._x=(i+s)/t,this._y=.25*t,this._z=(o+h)/t}else{const t=2*Math.sqrt(1+u-r-a);this._w=(s-i)/t,this._x=(n+l)/t,this._y=(o+h)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let r=t.dot(e)+1;return r<Number.EPSILON?(r=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=r):(this._x=0,this._y=-t.z,this._z=t.y,this._w=r)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=r),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Qn(this.dot(t),-1,1)))}rotateTowards(t,e){const r=this.angleTo(t);if(0===r)return this;const i=Math.min(1,e/r);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const r=t._x,i=t._y,n=t._z,s=t._w,a=e._x,o=e._y,l=e._z,h=e._w;return this._x=r*h+s*a+i*l-n*o,this._y=i*h+s*o+n*a-r*l,this._z=n*h+s*l+r*o-i*a,this._w=s*h-r*a-i*o-n*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const r=this._x,i=this._y,n=this._z,s=this._w;let a=s*t._w+r*t._x+i*t._y+n*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=s,this._x=r,this._y=i,this._z=n,this;const o=1-a*a;if(o<=Number.EPSILON){const t=1-e;return this._w=t*s+e*this._w,this._x=t*r+e*this._x,this._y=t*i+e*this._y,this._z=t*n+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(o),h=Math.atan2(l,a),u=Math.sin((1-e)*h)/l,c=Math.sin(e*h)/l;return this._w=s*u+this._w*c,this._x=r*u+this._x*c,this._y=i*u+this._y*c,this._z=n*u+this._z*c,this._onChangeCallback(),this}slerpQuaternions(t,e,r){return this.copy(t).slerp(e,r)}random(){const t=Math.random(),e=Math.sqrt(1-t),r=Math.sqrt(t),i=2*Math.PI*Math.random(),n=2*Math.PI*Math.random();return this.set(e*Math.cos(i),r*Math.sin(n),r*Math.cos(n),e*Math.sin(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Rs{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Rs.prototype.isVector3=!0,this.x=t,this.y=e,this.z=r}set(t,e,r){return void 0===r&&(r=this.z),this.x=t,this.y=e,this.z=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(Ls.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Ls.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,r=this.y,i=this.z,n=t.elements;return this.x=n[0]*e+n[3]*r+n[6]*i,this.y=n[1]*e+n[4]*r+n[7]*i,this.z=n[2]*e+n[5]*r+n[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,r=this.y,i=this.z,n=t.elements,s=1/(n[3]*e+n[7]*r+n[11]*i+n[15]);return this.x=(n[0]*e+n[4]*r+n[8]*i+n[12])*s,this.y=(n[1]*e+n[5]*r+n[9]*i+n[13])*s,this.z=(n[2]*e+n[6]*r+n[10]*i+n[14])*s,this}applyQuaternion(t){const e=this.x,r=this.y,i=this.z,n=t.x,s=t.y,a=t.z,o=t.w,l=o*e+s*i-a*r,h=o*r+a*e-n*i,u=o*i+n*r-s*e,c=-n*e-s*r-a*i;return this.x=l*o+c*-n+h*-a-u*-s,this.y=h*o+c*-s+u*-n-l*-a,this.z=u*o+c*-a+l*-s-h*-n,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,r=this.y,i=this.z,n=t.elements;return this.x=n[0]*e+n[4]*r+n[8]*i,this.y=n[1]*e+n[5]*r+n[9]*i,this.z=n[2]*e+n[6]*r+n[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(e,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,r){return this.x=t.x+(e.x-t.x)*r,this.y=t.y+(e.y-t.y)*r,this.z=t.z+(e.z-t.z)*r,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const r=t.x,i=t.y,n=t.z,s=e.x,a=e.y,o=e.z;return this.x=i*o-n*a,this.y=n*s-r*o,this.z=r*a-i*s,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const r=t.dot(this)/e;return this.copy(t).multiplyScalar(r)}projectOnPlane(t){return Is.copy(this).projectOnVector(t),this.sub(Is)}reflect(t){return this.sub(Is.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const r=this.dot(t)/e;return Math.acos(Qn(r,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,r=this.y-t.y,i=this.z-t.z;return e*e+r*r+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,r){const i=Math.sin(e)*t;return this.x=i*Math.sin(r),this.y=Math.cos(e)*t,this.z=i*Math.cos(r),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,r){return this.x=t*Math.sin(e),this.y=r,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),r=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=r,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,r=Math.sqrt(1-t**2);return this.x=r*Math.cos(e),this.y=r*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Is=new Rs,Ls=new ks;class Fs{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Rs(1/0,1/0,1/0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rs(-1/0,-1/0,-1/0);this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,r=1/0,i=1/0,n=-1/0,s=-1/0,a=-1/0;for(let o=0,l=t.length;o<l;o+=3){const l=t[o],h=t[o+1],u=t[o+2];l<e&&(e=l),h<r&&(r=h),u<i&&(i=u),l>n&&(n=l),h>s&&(s=h),u>a&&(a=u)}return this.min.set(e,r,i),this.max.set(n,s,a),this}setFromBufferAttribute(t){let e=1/0,r=1/0,i=1/0,n=-1/0,s=-1/0,a=-1/0;for(let o=0,l=t.count;o<l;o++){const l=t.getX(o),h=t.getY(o),u=t.getZ(o);l<e&&(e=l),h<r&&(r=h),u<i&&(i=u),l>n&&(n=l),h>s&&(s=h),u>a&&(a=u)}return this.min.set(e,r,i),this.max.set(n,s,a),this}setFromPoints(t){this.makeEmpty();for(let e=0,r=t.length;e<r;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const r=zs.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}setFromObject(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.updateWorldMatrix(!1,!1);const r=t.geometry;if(void 0!==r)if(e&&null!=r.attributes&&void 0!==r.attributes.position){const e=r.attributes.position;for(let r=0,i=e.count;r<i;r++)zs.fromBufferAttribute(e,r).applyMatrix4(t.matrixWorld),this.expandByPoint(zs)}else null===r.boundingBox&&r.computeBoundingBox(),Bs.copy(r.boundingBox),Bs.applyMatrix4(t.matrixWorld),this.union(Bs);const i=t.children;for(let t=0,r=i.length;t<r;t++)this.expandByObject(i[t],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,zs),zs.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,r;return t.normal.x>0?(e=t.normal.x*this.min.x,r=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,r=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,r+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,r+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,r+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,r+=t.normal.z*this.min.z),e<=-t.constant&&r>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(js),Xs.subVectors(this.max,js),Vs.subVectors(t.a,js),Ns.subVectors(t.b,js),Gs.subVectors(t.c,js),Ws.subVectors(Ns,Vs),Hs.subVectors(Gs,Ns),Us.subVectors(Vs,Gs);let e=[0,-Ws.z,Ws.y,0,-Hs.z,Hs.y,0,-Us.z,Us.y,Ws.z,0,-Ws.x,Hs.z,0,-Hs.x,Us.z,0,-Us.x,-Ws.y,Ws.x,0,-Hs.y,Hs.x,0,-Us.y,Us.x,0];return!(!Zs(e,Vs,Ns,Gs,Xs)||(e=[1,0,0,0,1,0,0,0,1],!Zs(e,Vs,Ns,Gs,Xs)))&&(qs.crossVectors(Ws,Hs),e=[qs.x,qs.y,qs.z],Zs(e,Vs,Ns,Gs,Xs))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return zs.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(zs).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(Os[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Os[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Os[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Os[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Os[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Os[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Os[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Os[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Os)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Os=[new Rs,new Rs,new Rs,new Rs,new Rs,new Rs,new Rs,new Rs],zs=new Rs,Bs=new Fs,Vs=new Rs,Ns=new Rs,Gs=new Rs,Ws=new Rs,Hs=new Rs,Us=new Rs,js=new Rs,Xs=new Rs,qs=new Rs,Ys=new Rs;function Zs(t,e,r,i,n){for(let s=0,a=t.length-3;s<=a;s+=3){Ys.fromArray(t,s);const a=n.x*Math.abs(Ys.x)+n.y*Math.abs(Ys.y)+n.z*Math.abs(Ys.z),o=e.dot(Ys),l=r.dot(Ys),h=i.dot(Ys);if(Math.max(-Math.max(o,l,h),Math.min(o,l,h))>a)return!1}return!0}const $s=new Fs,Js=new Rs,Ks=new Rs;class Qs{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Rs,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const r=this.center;void 0!==e?r.copy(e):$s.setFromPoints(t).getCenter(r);let i=0;for(let e=0,n=t.length;e<n;e++)i=Math.max(i,r.distanceToSquared(t[e]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const r=this.center.distanceToSquared(t);return e.copy(t),r>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Js.subVectors(t,this.center);const e=Js.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),r=.5*(t-this.radius);this.center.addScaledVector(Js,r/t),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(Ks.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Js.copy(t.center).add(Ks)),this.expandByPoint(Js.copy(t.center).sub(Ks))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const ta=new Rs,ea=new Rs,ra=new Rs,ia=new Rs,na=new Rs,sa=new Rs,aa=new Rs;class oa{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Rs,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rs(0,0,-1);this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,ta)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const r=e.dot(this.direction);return r<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=ta.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(ta.copy(this.direction).multiplyScalar(e).add(this.origin),ta.distanceToSquared(t))}distanceSqToSegment(t,e,r,i){ea.copy(t).add(e).multiplyScalar(.5),ra.copy(e).sub(t).normalize(),ia.copy(this.origin).sub(ea);const n=.5*t.distanceTo(e),s=-this.direction.dot(ra),a=ia.dot(this.direction),o=-ia.dot(ra),l=ia.lengthSq(),h=Math.abs(1-s*s);let u,c,p,d;if(h>0)if(u=s*o-a,c=s*a-o,d=n*h,u>=0)if(c>=-d)if(c<=d){const t=1/h;u*=t,c*=t,p=u*(u+s*c+2*a)+c*(s*u+c+2*o)+l}else c=n,u=Math.max(0,-(s*c+a)),p=-u*u+c*(c+2*o)+l;else c=-n,u=Math.max(0,-(s*c+a)),p=-u*u+c*(c+2*o)+l;else c<=-d?(u=Math.max(0,-(-s*n+a)),c=u>0?-n:Math.min(Math.max(-n,-o),n),p=-u*u+c*(c+2*o)+l):c<=d?(u=0,c=Math.min(Math.max(-n,-o),n),p=c*(c+2*o)+l):(u=Math.max(0,-(s*n+a)),c=u>0?n:Math.min(Math.max(-n,-o),n),p=-u*u+c*(c+2*o)+l);else c=s>0?-n:n,u=Math.max(0,-(s*c+a)),p=-u*u+c*(c+2*o)+l;return r&&r.copy(this.direction).multiplyScalar(u).add(this.origin),i&&i.copy(ra).multiplyScalar(c).add(ea),p}intersectSphere(t,e){ta.subVectors(t.center,this.origin);const r=ta.dot(this.direction),i=ta.dot(ta)-r*r,n=t.radius*t.radius;if(i>n)return null;const s=Math.sqrt(n-i),a=r-s,o=r+s;return a<0&&o<0?null:a<0?this.at(o,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const r=-(this.origin.dot(t.normal)+t.constant)/e;return r>=0?r:null}intersectPlane(t,e){const r=this.distanceToPlane(t);return null===r?null:this.at(r,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let r,i,n,s,a,o;const l=1/this.direction.x,h=1/this.direction.y,u=1/this.direction.z,c=this.origin;return l>=0?(r=(t.min.x-c.x)*l,i=(t.max.x-c.x)*l):(r=(t.max.x-c.x)*l,i=(t.min.x-c.x)*l),h>=0?(n=(t.min.y-c.y)*h,s=(t.max.y-c.y)*h):(n=(t.max.y-c.y)*h,s=(t.min.y-c.y)*h),r>s||n>i||((n>r||isNaN(r))&&(r=n),(s<i||isNaN(i))&&(i=s),u>=0?(a=(t.min.z-c.z)*u,o=(t.max.z-c.z)*u):(a=(t.max.z-c.z)*u,o=(t.min.z-c.z)*u),r>o||a>i)||((a>r||r!=r)&&(r=a),(o<i||i!=i)&&(i=o),i<0)?null:this.at(r>=0?r:i,e)}intersectsBox(t){return null!==this.intersectBox(t,ta)}intersectTriangle(t,e,r,i,n){na.subVectors(e,t),sa.subVectors(r,t),aa.crossVectors(na,sa);let s,a=this.direction.dot(aa);if(a>0){if(i)return null;s=1}else{if(!(a<0))return null;s=-1,a=-a}ia.subVectors(this.origin,t);const o=s*this.direction.dot(sa.crossVectors(ia,sa));if(o<0)return null;const l=s*this.direction.dot(na.cross(ia));if(l<0||o+l>a)return null;const h=-s*ia.dot(aa);return h<0?null:this.at(h/a,n)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class la{constructor(){la.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,r,i,n,s,a,o,l,h,u,c,p,d,f,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=r,g[12]=i,g[1]=n,g[5]=s,g[9]=a,g[13]=o,g[2]=l,g[6]=h,g[10]=u,g[14]=c,g[3]=p,g[7]=d,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new la).fromArray(this.elements)}copy(t){const e=this.elements,r=t.elements;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],this}copyPosition(t){const e=this.elements,r=t.elements;return e[12]=r[12],e[13]=r[13],e[14]=r[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,r){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(t,e,r){return this.set(t.x,e.x,r.x,0,t.y,e.y,r.y,0,t.z,e.z,r.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,r=t.elements,i=1/ha.setFromMatrixColumn(t,0).length(),n=1/ha.setFromMatrixColumn(t,1).length(),s=1/ha.setFromMatrixColumn(t,2).length();return e[0]=r[0]*i,e[1]=r[1]*i,e[2]=r[2]*i,e[3]=0,e[4]=r[4]*n,e[5]=r[5]*n,e[6]=r[6]*n,e[7]=0,e[8]=r[8]*s,e[9]=r[9]*s,e[10]=r[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,r=t.x,i=t.y,n=t.z,s=Math.cos(r),a=Math.sin(r),o=Math.cos(i),l=Math.sin(i),h=Math.cos(n),u=Math.sin(n);if("XYZ"===t.order){const t=s*h,r=s*u,i=a*h,n=a*u;e[0]=o*h,e[4]=-o*u,e[8]=l,e[1]=r+i*l,e[5]=t-n*l,e[9]=-a*o,e[2]=n-t*l,e[6]=i+r*l,e[10]=s*o}else if("YXZ"===t.order){const t=o*h,r=o*u,i=l*h,n=l*u;e[0]=t+n*a,e[4]=i*a-r,e[8]=s*l,e[1]=s*u,e[5]=s*h,e[9]=-a,e[2]=r*a-i,e[6]=n+t*a,e[10]=s*o}else if("ZXY"===t.order){const t=o*h,r=o*u,i=l*h,n=l*u;e[0]=t-n*a,e[4]=-s*u,e[8]=i+r*a,e[1]=r+i*a,e[5]=s*h,e[9]=n-t*a,e[2]=-s*l,e[6]=a,e[10]=s*o}else if("ZYX"===t.order){const t=s*h,r=s*u,i=a*h,n=a*u;e[0]=o*h,e[4]=i*l-r,e[8]=t*l+n,e[1]=o*u,e[5]=n*l+t,e[9]=r*l-i,e[2]=-l,e[6]=a*o,e[10]=s*o}else if("YZX"===t.order){const t=s*o,r=s*l,i=a*o,n=a*l;e[0]=o*h,e[4]=n-t*u,e[8]=i*u+r,e[1]=u,e[5]=s*h,e[9]=-a*h,e[2]=-l*h,e[6]=r*u+i,e[10]=t-n*u}else if("XZY"===t.order){const t=s*o,r=s*l,i=a*o,n=a*l;e[0]=o*h,e[4]=-u,e[8]=l*h,e[1]=t*u+n,e[5]=s*h,e[9]=r*u-i,e[2]=i*u-r,e[6]=a*h,e[10]=n*u+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(ca,t,pa)}lookAt(t,e,r){const i=this.elements;return ma.subVectors(t,e),0===ma.lengthSq()&&(ma.z=1),ma.normalize(),da.crossVectors(r,ma),0===da.lengthSq()&&(1===Math.abs(r.z)?ma.x+=1e-4:ma.z+=1e-4,ma.normalize(),da.crossVectors(r,ma)),da.normalize(),fa.crossVectors(ma,da),i[0]=da.x,i[4]=fa.x,i[8]=ma.x,i[1]=da.y,i[5]=fa.y,i[9]=ma.y,i[2]=da.z,i[6]=fa.z,i[10]=ma.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const r=t.elements,i=e.elements,n=this.elements,s=r[0],a=r[4],o=r[8],l=r[12],h=r[1],u=r[5],c=r[9],p=r[13],d=r[2],f=r[6],m=r[10],g=r[14],v=r[3],y=r[7],x=r[11],_=r[15],b=i[0],w=i[4],S=i[8],M=i[12],T=i[1],E=i[5],P=i[9],C=i[13],A=i[2],D=i[6],k=i[10],R=i[14],I=i[3],L=i[7],F=i[11],O=i[15];return n[0]=s*b+a*T+o*A+l*I,n[4]=s*w+a*E+o*D+l*L,n[8]=s*S+a*P+o*k+l*F,n[12]=s*M+a*C+o*R+l*O,n[1]=h*b+u*T+c*A+p*I,n[5]=h*w+u*E+c*D+p*L,n[9]=h*S+u*P+c*k+p*F,n[13]=h*M+u*C+c*R+p*O,n[2]=d*b+f*T+m*A+g*I,n[6]=d*w+f*E+m*D+g*L,n[10]=d*S+f*P+m*k+g*F,n[14]=d*M+f*C+m*R+g*O,n[3]=v*b+y*T+x*A+_*I,n[7]=v*w+y*E+x*D+_*L,n[11]=v*S+y*P+x*k+_*F,n[15]=v*M+y*C+x*R+_*O,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],r=t[4],i=t[8],n=t[12],s=t[1],a=t[5],o=t[9],l=t[13],h=t[2],u=t[6],c=t[10],p=t[14];return t[3]*(+n*o*u-i*l*u-n*a*c+r*l*c+i*a*p-r*o*p)+t[7]*(+e*o*p-e*l*c+n*s*c-i*s*p+i*l*h-n*o*h)+t[11]*(+e*l*u-e*a*p-n*s*u+r*s*p+n*a*h-r*l*h)+t[15]*(-i*a*h-e*o*u+e*a*c+i*s*u-r*s*c+r*o*h)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,r){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=r),this}invert(){const t=this.elements,e=t[0],r=t[1],i=t[2],n=t[3],s=t[4],a=t[5],o=t[6],l=t[7],h=t[8],u=t[9],c=t[10],p=t[11],d=t[12],f=t[13],m=t[14],g=t[15],v=u*m*l-f*c*l+f*o*p-a*m*p-u*o*g+a*c*g,y=d*c*l-h*m*l-d*o*p+s*m*p+h*o*g-s*c*g,x=h*f*l-d*u*l+d*a*p-s*f*p-h*a*g+s*u*g,_=d*u*o-h*f*o-d*a*c+s*f*c+h*a*m-s*u*m,b=e*v+r*y+i*x+n*_;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/b;return t[0]=v*w,t[1]=(f*c*n-u*m*n-f*i*p+r*m*p+u*i*g-r*c*g)*w,t[2]=(a*m*n-f*o*n+f*i*l-r*m*l-a*i*g+r*o*g)*w,t[3]=(u*o*n-a*c*n-u*i*l+r*c*l+a*i*p-r*o*p)*w,t[4]=y*w,t[5]=(h*m*n-d*c*n+d*i*p-e*m*p-h*i*g+e*c*g)*w,t[6]=(d*o*n-s*m*n-d*i*l+e*m*l+s*i*g-e*o*g)*w,t[7]=(s*c*n-h*o*n+h*i*l-e*c*l-s*i*p+e*o*p)*w,t[8]=x*w,t[9]=(d*u*n-h*f*n-d*r*p+e*f*p+h*r*g-e*u*g)*w,t[10]=(s*f*n-d*a*n+d*r*l-e*f*l-s*r*g+e*a*g)*w,t[11]=(h*a*n-s*u*n-h*r*l+e*u*l+s*r*p-e*a*p)*w,t[12]=_*w,t[13]=(h*f*i-d*u*i+d*r*c-e*f*c-h*r*m+e*u*m)*w,t[14]=(d*a*i-s*f*i-d*r*o+e*f*o+s*r*m-e*a*m)*w,t[15]=(s*u*i-h*a*i+h*r*o-e*u*o-s*r*c+e*a*c)*w,this}scale(t){const e=this.elements,r=t.x,i=t.y,n=t.z;return e[0]*=r,e[4]*=i,e[8]*=n,e[1]*=r,e[5]*=i,e[9]*=n,e[2]*=r,e[6]*=i,e[10]*=n,e[3]*=r,e[7]*=i,e[11]*=n,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,r,i))}makeTranslation(t,e,r){return this.set(1,0,0,t,0,1,0,e,0,0,1,r,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),r=Math.sin(t);return this.set(1,0,0,0,0,e,-r,0,0,r,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),r=Math.sin(t);return this.set(e,0,r,0,0,1,0,0,-r,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),r=Math.sin(t);return this.set(e,-r,0,0,r,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const r=Math.cos(e),i=Math.sin(e),n=1-r,s=t.x,a=t.y,o=t.z,l=n*s,h=n*a;return this.set(l*s+r,l*a-i*o,l*o+i*a,0,l*a+i*o,h*a+r,h*o-i*s,0,l*o-i*a,h*o+i*s,n*o*o+r,0,0,0,0,1),this}makeScale(t,e,r){return this.set(t,0,0,0,0,e,0,0,0,0,r,0,0,0,0,1),this}makeShear(t,e,r,i,n,s){return this.set(1,r,n,0,t,1,s,0,e,i,1,0,0,0,0,1),this}compose(t,e,r){const i=this.elements,n=e._x,s=e._y,a=e._z,o=e._w,l=n+n,h=s+s,u=a+a,c=n*l,p=n*h,d=n*u,f=s*h,m=s*u,g=a*u,v=o*l,y=o*h,x=o*u,_=r.x,b=r.y,w=r.z;return i[0]=(1-(f+g))*_,i[1]=(p+x)*_,i[2]=(d-y)*_,i[3]=0,i[4]=(p-x)*b,i[5]=(1-(c+g))*b,i[6]=(m+v)*b,i[7]=0,i[8]=(d+y)*w,i[9]=(m-v)*w,i[10]=(1-(c+f))*w,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,r){const i=this.elements;let n=ha.set(i[0],i[1],i[2]).length();const s=ha.set(i[4],i[5],i[6]).length(),a=ha.set(i[8],i[9],i[10]).length();this.determinant()<0&&(n=-n),t.x=i[12],t.y=i[13],t.z=i[14],ua.copy(this);const o=1/n,l=1/s,h=1/a;return ua.elements[0]*=o,ua.elements[1]*=o,ua.elements[2]*=o,ua.elements[4]*=l,ua.elements[5]*=l,ua.elements[6]*=l,ua.elements[8]*=h,ua.elements[9]*=h,ua.elements[10]*=h,e.setFromRotationMatrix(ua),r.x=n,r.y=s,r.z=a,this}makePerspective(t,e,r,i,n,s){const a=this.elements,o=2*n/(e-t),l=2*n/(r-i),h=(e+t)/(e-t),u=(r+i)/(r-i),c=-(s+n)/(s-n),p=-2*s*n/(s-n);return a[0]=o,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=c,a[14]=p,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,r,i,n,s){const a=this.elements,o=1/(e-t),l=1/(r-i),h=1/(s-n),u=(e+t)*o,c=(r+i)*l,p=(s+n)*h;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-c,a[2]=0,a[6]=0,a[10]=-2*h,a[14]=-p,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,r=t.elements;for(let t=0;t<16;t++)if(e[t]!==r[t])return!1;return!0}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let r=0;r<16;r++)this.elements[r]=t[r+e];return this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=this.elements;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t[e+9]=r[9],t[e+10]=r[10],t[e+11]=r[11],t[e+12]=r[12],t[e+13]=r[13],t[e+14]=r[14],t[e+15]=r[15],t}}const ha=new Rs,ua=new la,ca=new Rs(0,0,0),pa=new Rs(1,1,1),da=new Rs,fa=new Rs,ma=new Rs,ga=new la,va=new ks;class ya{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ya.DefaultOrder;this.isEuler=!0,this._x=t,this._y=e,this._z=r,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=t,this._y=e,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=t.elements,n=i[0],s=i[4],a=i[8],o=i[1],l=i[5],h=i[9],u=i[2],c=i[6],p=i[10];switch(e){case"XYZ":this._y=Math.asin(Qn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-s,n)):(this._x=Math.atan2(c,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Qn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-u,n),this._z=0);break;case"ZXY":this._x=Math.asin(Qn(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(-u,p),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(o,n));break;case"ZYX":this._y=Math.asin(-Qn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(c,p),this._z=Math.atan2(o,n)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(Qn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-u,n)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-Qn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(c,l),this._y=Math.atan2(a,n)):(this._x=Math.atan2(-h,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,e,r){return ga.makeRotationFromQuaternion(t),this.setFromRotationMatrix(ga,e,r)}setFromVector3(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(t.x,t.y,t.z,e)}reorder(t){return va.setFromEuler(this),this.setFromQuaternion(va,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}ya.DefaultOrder="XYZ",ya.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class xa{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let _a=0;const ba=new Rs,wa=new ks,Sa=new la,Ma=new Rs,Ta=new Rs,Ea=new Rs,Pa=new ks,Ca=new Rs(1,0,0),Aa=new Rs(0,1,0),Da=new Rs(0,0,1),ka={type:"added"},Ra={type:"removed"};class Ia extends qn{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_a++}),this.uuid=Kn(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ia.DefaultUp.clone();const t=new Rs,e=new ya,r=new ks,i=new Rs(1,1,1);e._onChange((function(){r.setFromEuler(e,!1)})),r._onChange((function(){e.setFromQuaternion(r,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new la},normalMatrix:{value:new os}}),this.matrix=new la,this.matrixWorld=new la,this.matrixAutoUpdate=Ia.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Ia.DefaultMatrixWorldAutoUpdate,this.layers=new xa,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return wa.setFromAxisAngle(t,e),this.quaternion.multiply(wa),this}rotateOnWorldAxis(t,e){return wa.setFromAxisAngle(t,e),this.quaternion.premultiply(wa),this}rotateX(t){return this.rotateOnAxis(Ca,t)}rotateY(t){return this.rotateOnAxis(Aa,t)}rotateZ(t){return this.rotateOnAxis(Da,t)}translateOnAxis(t,e){return ba.copy(t).applyQuaternion(this.quaternion),this.position.add(ba.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Ca,t)}translateY(t){return this.translateOnAxis(Aa,t)}translateZ(t){return this.translateOnAxis(Da,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Sa.copy(this.matrixWorld).invert())}lookAt(t,e,r){t.isVector3?Ma.copy(t):Ma.set(t,e,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Ta.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Sa.lookAt(Ta,Ma,this.up):Sa.lookAt(Ma,Ta,this.up),this.quaternion.setFromRotationMatrix(Sa),i&&(Sa.extractRotation(i.matrixWorld),wa.setFromRotationMatrix(Sa),this.quaternion.premultiply(wa.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(ka)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Ra)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(Ra)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Sa.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Sa.multiply(t.parent.matrixWorld)),t.applyMatrix4(Sa),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let r=0,i=this.children.length;r<i;r++){const i=this.children[r].getObjectByProperty(t,e);if(void 0!==i)return i}}getObjectsByProperty(t,e){let r=[];this[t]===e&&r.push(this);for(let i=0,n=this.children.length;i<n;i++){const n=this.children[i].getObjectsByProperty(t,e);n.length>0&&(r=r.concat(n))}return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ta,t,Ea),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ta,Pa,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let r=0,i=e.length;r<i;r++)e[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let r=0,i=e.length;r<i;r++)e[r].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let r=0,i=e.length;r<i;r++){const i=e[r];(!0===i.matrixWorldAutoUpdate||!0===t)&&i.updateMatrixWorld(t)}}updateWorldMatrix(t,e){const r=this.parent;if(!0===t&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,r=t.length;e<r;e++){const r=t[e];!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!1,!0)}}}toJSON(t){const e=void 0===t||"string"==typeof t,r={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};function n(e,r){return void 0===e[r.uuid]&&(e[r.uuid]=r.toJSON(t)),r.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=n(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const r=e.shapes;if(Array.isArray(r))for(let e=0,i=r.length;e<i;e++){const i=r[e];n(t.shapes,i)}else n(t.shapes,r)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(n(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let r=0,i=this.material.length;r<i;r++)e.push(n(t.materials,this.material[r]));i.material=e}else i.material=n(t.materials,this.material);if(this.children.length>0){i.children=[];for(let e=0;e<this.children.length;e++)i.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let e=0;e<this.animations.length;e++){const r=this.animations[e];i.animations.push(n(t.animations,r))}}if(e){const e=s(t.geometries),i=s(t.materials),n=s(t.textures),a=s(t.images),o=s(t.shapes),l=s(t.skeletons),h=s(t.animations),u=s(t.nodes);e.length>0&&(r.geometries=e),i.length>0&&(r.materials=i),n.length>0&&(r.textures=n),a.length>0&&(r.images=a),o.length>0&&(r.shapes=o),l.length>0&&(r.skeletons=l),h.length>0&&(r.animations=h),u.length>0&&(r.nodes=u)}return r.object=i,r;function s(t){const e=[];for(const r in t){const i=t[r];delete i.metadata,e.push(i)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const r=t.children[e];this.add(r.clone())}return this}}Ia.DefaultUp=new Rs(0,1,0),Ia.DefaultMatrixAutoUpdate=!0,Ia.DefaultMatrixWorldAutoUpdate=!0;const La=new Rs,Fa=new Rs,Oa=new Rs,za=new Rs,Ba=new Rs,Va=new Rs,Na=new Rs,Ga=new Rs,Wa=new Rs,Ha=new Rs;class Ua{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Rs,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rs,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Rs;this.a=t,this.b=e,this.c=r}static getNormal(t,e,r,i){i.subVectors(r,e),La.subVectors(t,e),i.cross(La);const n=i.lengthSq();return n>0?i.multiplyScalar(1/Math.sqrt(n)):i.set(0,0,0)}static getBarycoord(t,e,r,i,n){La.subVectors(i,e),Fa.subVectors(r,e),Oa.subVectors(t,e);const s=La.dot(La),a=La.dot(Fa),o=La.dot(Oa),l=Fa.dot(Fa),h=Fa.dot(Oa),u=s*l-a*a;if(0===u)return n.set(-2,-1,-1);const c=1/u,p=(l*o-a*h)*c,d=(s*h-a*o)*c;return n.set(1-p-d,d,p)}static containsPoint(t,e,r,i){return this.getBarycoord(t,e,r,i,za),za.x>=0&&za.y>=0&&za.x+za.y<=1}static getUV(t,e,r,i,n,s,a,o){return this.getBarycoord(t,e,r,i,za),o.set(0,0),o.addScaledVector(n,za.x),o.addScaledVector(s,za.y),o.addScaledVector(a,za.z),o}static isFrontFacing(t,e,r,i){return La.subVectors(r,e),Fa.subVectors(t,e),La.cross(Fa).dot(i)<0}set(t,e,r){return this.a.copy(t),this.b.copy(e),this.c.copy(r),this}setFromPointsAndIndices(t,e,r,i){return this.a.copy(t[e]),this.b.copy(t[r]),this.c.copy(t[i]),this}setFromAttributeAndIndices(t,e,r,i){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,r),this.c.fromBufferAttribute(t,i),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return La.subVectors(this.c,this.b),Fa.subVectors(this.a,this.b),.5*La.cross(Fa).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Ua.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Ua.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,r,i,n){return Ua.getUV(t,this.a,this.b,this.c,e,r,i,n)}containsPoint(t){return Ua.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Ua.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const r=this.a,i=this.b,n=this.c;let s,a;Ba.subVectors(i,r),Va.subVectors(n,r),Ga.subVectors(t,r);const o=Ba.dot(Ga),l=Va.dot(Ga);if(o<=0&&l<=0)return e.copy(r);Wa.subVectors(t,i);const h=Ba.dot(Wa),u=Va.dot(Wa);if(h>=0&&u<=h)return e.copy(i);const c=o*u-h*l;if(c<=0&&o>=0&&h<=0)return s=o/(o-h),e.copy(r).addScaledVector(Ba,s);Ha.subVectors(t,n);const p=Ba.dot(Ha),d=Va.dot(Ha);if(d>=0&&p<=d)return e.copy(n);const f=p*l-o*d;if(f<=0&&l>=0&&d<=0)return a=l/(l-d),e.copy(r).addScaledVector(Va,a);const m=h*d-p*u;if(m<=0&&u-h>=0&&p-d>=0)return Na.subVectors(n,i),a=(u-h)/(u-h+(p-d)),e.copy(i).addScaledVector(Na,a);const g=1/(m+f+c);return s=f*g,a=c*g,e.copy(r).addScaledVector(Ba,s).addScaledVector(Va,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let ja=0;class Xa extends qn{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ja++}),this.uuid=Kn(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=qi,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Hn,this.stencilZFail=Hn,this.stencilZPass=Hn,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const r=t[e];if(void 0===r){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}const i=this[e];void 0!==i?i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[e]=r:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(t){const e=[];for(const r in t){const i=t[r];delete i.metadata,e.push(i)}return e}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),void 0!==this.sheen&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearcoat&&(r.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(r.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(r.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(t).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(t).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(t).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(t).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(t).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(r.combine=this.combine)),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(r.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(r.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(r.size=this.size),null!==this.shadowSide&&(r.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(r.blending=this.blending),0!==this.side&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(r.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(r.flatShading=this.flatShading),!1===this.visible&&(r.visible=!1),!1===this.toneMapped&&(r.toneMapped=!1),!1===this.fog&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData),e){const e=i(t.textures),n=i(t.images);e.length>0&&(r.textures=e),n.length>0&&(r.images=n)}return r}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let r=null;if(null!==e){const t=e.length;r=new Array(t);for(let i=0;i!==t;++i)r[i]=e[i].clone()}return this.clippingPlanes=r,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}class qa extends Xa{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new bs(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Ya=new Rs,Za=new as;class $a{constructor(t,e){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=r,this.usage=Un,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,r){t*=this.itemSize,r*=e.itemSize;for(let i=0,n=this.itemSize;i<n;i++)this.array[t+i]=e.array[r+i];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,r=this.count;e<r;e++)Za.fromBufferAttribute(this,e),Za.applyMatrix3(t),this.setXY(e,Za.x,Za.y);else if(3===this.itemSize)for(let e=0,r=this.count;e<r;e++)Ya.fromBufferAttribute(this,e),Ya.applyMatrix3(t),this.setXYZ(e,Ya.x,Ya.y,Ya.z);return this}applyMatrix4(t){for(let e=0,r=this.count;e<r;e++)Ya.fromBufferAttribute(this,e),Ya.applyMatrix4(t),this.setXYZ(e,Ya.x,Ya.y,Ya.z);return this}applyNormalMatrix(t){for(let e=0,r=this.count;e<r;e++)Ya.fromBufferAttribute(this,e),Ya.applyNormalMatrix(t),this.setXYZ(e,Ya.x,Ya.y,Ya.z);return this}transformDirection(t){for(let e=0,r=this.count;e<r;e++)Ya.fromBufferAttribute(this,e),Ya.transformDirection(t),this.setXYZ(e,Ya.x,Ya.y,Ya.z);return this}set(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=ns(e,this.array)),e}setX(t,e){return this.normalized&&(e=ss(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=ns(e,this.array)),e}setY(t,e){return this.normalized&&(e=ss(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=ns(e,this.array)),e}setZ(t,e){return this.normalized&&(e=ss(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=ns(e,this.array)),e}setW(t,e){return this.normalized&&(e=ss(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,r){return t*=this.itemSize,this.normalized&&(e=ss(e,this.array),r=ss(r,this.array)),this.array[t+0]=e,this.array[t+1]=r,this}setXYZ(t,e,r,i){return t*=this.itemSize,this.normalized&&(e=ss(e,this.array),r=ss(r,this.array),i=ss(i,this.array)),this.array[t+0]=e,this.array[t+1]=r,this.array[t+2]=i,this}setXYZW(t,e,r,i,n){return t*=this.itemSize,this.normalized&&(e=ss(e,this.array),r=ss(r,this.array),i=ss(i,this.array),n=ss(n,this.array)),this.array[t+0]=e,this.array[t+1]=r,this.array[t+2]=i,this.array[t+3]=n,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==Un&&(t.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Ja extends $a{constructor(t,e,r){super(new Uint16Array(t),e,r)}}class Ka extends $a{constructor(t,e,r){super(new Uint32Array(t),e,r)}}class Qa extends $a{constructor(t,e,r){super(new Float32Array(t),e,r)}}let to=0;const eo=new la,ro=new Ia,io=new Rs,no=new Fs,so=new Fs,ao=new Rs;class oo extends qn{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:to++}),this.uuid=Kn(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(hs(t)?Ka:Ja)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:t,count:e,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const r=this.attributes.normal;if(void 0!==r){const e=(new os).getNormalMatrix(t);r.applyNormalMatrix(e),r.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return eo.makeRotationFromQuaternion(t),this.applyMatrix4(eo),this}rotateX(t){return eo.makeRotationX(t),this.applyMatrix4(eo),this}rotateY(t){return eo.makeRotationY(t),this.applyMatrix4(eo),this}rotateZ(t){return eo.makeRotationZ(t),this.applyMatrix4(eo),this}translate(t,e,r){return eo.makeTranslation(t,e,r),this.applyMatrix4(eo),this}scale(t,e,r){return eo.makeScale(t,e,r),this.applyMatrix4(eo),this}lookAt(t){return ro.lookAt(t),ro.updateMatrix(),this.applyMatrix4(ro.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(io).negate(),this.translate(io.x,io.y,io.z),this}setFromPoints(t){const e=[];for(let r=0,i=t.length;r<i;r++){const i=t[r];e.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Qa(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Fs);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Rs(-1/0,-1/0,-1/0),new Rs(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,r=e.length;t<r;t++){const r=e[t];no.setFromBufferAttribute(r),this.morphTargetsRelative?(ao.addVectors(this.boundingBox.min,no.min),this.boundingBox.expandByPoint(ao),ao.addVectors(this.boundingBox.max,no.max),this.boundingBox.expandByPoint(ao)):(this.boundingBox.expandByPoint(no.min),this.boundingBox.expandByPoint(no.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Qs);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Rs,1/0);if(t){const r=this.boundingSphere.center;if(no.setFromBufferAttribute(t),e)for(let t=0,r=e.length;t<r;t++){const r=e[t];so.setFromBufferAttribute(r),this.morphTargetsRelative?(ao.addVectors(no.min,so.min),no.expandByPoint(ao),ao.addVectors(no.max,so.max),no.expandByPoint(ao)):(no.expandByPoint(so.min),no.expandByPoint(so.max))}no.getCenter(r);let i=0;for(let e=0,n=t.count;e<n;e++)ao.fromBufferAttribute(t,e),i=Math.max(i,r.distanceToSquared(ao));if(e)for(let n=0,s=e.length;n<s;n++){const s=e[n],a=this.morphTargetsRelative;for(let e=0,n=s.count;e<n;e++)ao.fromBufferAttribute(s,e),a&&(io.fromBufferAttribute(t,e),ao.add(io)),i=Math.max(i,r.distanceToSquared(ao))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const r=t.array,i=e.position.array,n=e.normal.array,s=e.uv.array,a=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new $a(new Float32Array(4*a),4));const o=this.getAttribute("tangent").array,l=[],h=[];for(let t=0;t<a;t++)l[t]=new Rs,h[t]=new Rs;const u=new Rs,c=new Rs,p=new Rs,d=new as,f=new as,m=new as,g=new Rs,v=new Rs;function y(t,e,r){u.fromArray(i,3*t),c.fromArray(i,3*e),p.fromArray(i,3*r),d.fromArray(s,2*t),f.fromArray(s,2*e),m.fromArray(s,2*r),c.sub(u),p.sub(u),f.sub(d),m.sub(d);const n=1/(f.x*m.y-m.x*f.y);isFinite(n)&&(g.copy(c).multiplyScalar(m.y).addScaledVector(p,-f.y).multiplyScalar(n),v.copy(p).multiplyScalar(f.x).addScaledVector(c,-m.x).multiplyScalar(n),l[t].add(g),l[e].add(g),l[r].add(g),h[t].add(v),h[e].add(v),h[r].add(v))}let x=this.groups;0===x.length&&(x=[{start:0,count:r.length}]);for(let t=0,e=x.length;t<e;++t){const e=x[t],i=e.start;for(let t=i,n=i+e.count;t<n;t+=3)y(r[t+0],r[t+1],r[t+2])}const _=new Rs,b=new Rs,w=new Rs,S=new Rs;function M(t){w.fromArray(n,3*t),S.copy(w);const e=l[t];_.copy(e),_.sub(w.multiplyScalar(w.dot(e))).normalize(),b.crossVectors(S,e);const r=b.dot(h[t])<0?-1:1;o[4*t]=_.x,o[4*t+1]=_.y,o[4*t+2]=_.z,o[4*t+3]=r}for(let t=0,e=x.length;t<e;++t){const e=x[t],i=e.start;for(let t=i,n=i+e.count;t<n;t+=3)M(r[t+0]),M(r[t+1]),M(r[t+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let r=this.getAttribute("normal");if(void 0===r)r=new $a(new Float32Array(3*e.count),3),this.setAttribute("normal",r);else for(let t=0,e=r.count;t<e;t++)r.setXYZ(t,0,0,0);const i=new Rs,n=new Rs,s=new Rs,a=new Rs,o=new Rs,l=new Rs,h=new Rs,u=new Rs;if(t)for(let c=0,p=t.count;c<p;c+=3){const p=t.getX(c+0),d=t.getX(c+1),f=t.getX(c+2);i.fromBufferAttribute(e,p),n.fromBufferAttribute(e,d),s.fromBufferAttribute(e,f),h.subVectors(s,n),u.subVectors(i,n),h.cross(u),a.fromBufferAttribute(r,p),o.fromBufferAttribute(r,d),l.fromBufferAttribute(r,f),a.add(h),o.add(h),l.add(h),r.setXYZ(p,a.x,a.y,a.z),r.setXYZ(d,o.x,o.y,o.z),r.setXYZ(f,l.x,l.y,l.z)}else for(let t=0,a=e.count;t<a;t+=3)i.fromBufferAttribute(e,t+0),n.fromBufferAttribute(e,t+1),s.fromBufferAttribute(e,t+2),h.subVectors(s,n),u.subVectors(i,n),h.cross(u),r.setXYZ(t+0,h.x,h.y,h.z),r.setXYZ(t+1,h.x,h.y,h.z),r.setXYZ(t+2,h.x,h.y,h.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,r=t.count;e<r;e++)ao.fromBufferAttribute(t,e),ao.normalize(),t.setXYZ(e,ao.x,ao.y,ao.z)}toNonIndexed(){function t(t,e){const r=t.array,i=t.itemSize,n=t.normalized,s=new r.constructor(e.length*i);let a=0,o=0;for(let n=0,l=e.length;n<l;n++){a=t.isInterleavedBufferAttribute?e[n]*t.data.stride+t.offset:e[n]*i;for(let t=0;t<i;t++)s[o++]=r[a++]}return new $a(s,i,n)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new oo,r=this.index.array,i=this.attributes;for(const n in i){const s=t(i[n],r);e.setAttribute(n,s)}const n=this.morphAttributes;for(const i in n){const s=[],a=n[i];for(let e=0,i=a.length;e<i;e++){const i=t(a[e],r);s.push(i)}e.morphAttributes[i]=s}e.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let t=0,r=s.length;t<r;t++){const r=s[t];e.addGroup(r.start,r.count,r.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const r in e)void 0!==e[r]&&(t[r]=e[r]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const r=this.attributes;for(const e in r){const i=r[e];t.data.attributes[e]=i.toJSON(t.data)}const i={};let n=!1;for(const e in this.morphAttributes){const r=this.morphAttributes[e],s=[];for(let e=0,i=r.length;e<i;e++){const i=r[e];s.push(i.toJSON(t.data))}s.length>0&&(i[e]=s,n=!0)}n&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const r=t.index;null!==r&&this.setIndex(r.clone(e));const i=t.attributes;for(const t in i){const r=i[t];this.setAttribute(t,r.clone(e))}const n=t.morphAttributes;for(const t in n){const r=[],i=n[t];for(let t=0,n=i.length;t<n;t++)r.push(i[t].clone(e));this.morphAttributes[t]=r}this.morphTargetsRelative=t.morphTargetsRelative;const s=t.groups;for(let t=0,e=s.length;t<e;t++){const e=s[t];this.addGroup(e.start,e.count,e.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const o=t.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const lo=new la,ho=new oa,uo=new Qs,co=new Rs,po=new Rs,fo=new Rs,mo=new Rs,go=new Rs,vo=new as,yo=new as,xo=new as,_o=new Rs,bo=new Rs;class wo extends Ia{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new oo,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new qa;super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const r=t[e[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=r.length;t<e;t++){const e=r[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}getVertexPosition(t,e){const r=this.geometry,i=r.attributes.position,n=r.morphAttributes.position,s=r.morphTargetsRelative;e.fromBufferAttribute(i,t);const a=this.morphTargetInfluences;if(n&&a){go.set(0,0,0);for(let r=0,i=n.length;r<i;r++){const i=a[r],o=n[r];0!==i&&(mo.fromBufferAttribute(o,t),s?go.addScaledVector(mo,i):go.addScaledVector(mo.sub(e),i))}e.add(go)}return this.isSkinnedMesh&&this.boneTransform(t,e),e}raycast(t,e){const r=this.geometry,i=this.material,n=this.matrixWorld;if(void 0===i||(null===r.boundingSphere&&r.computeBoundingSphere(),uo.copy(r.boundingSphere),uo.applyMatrix4(n),!1===t.ray.intersectsSphere(uo))||(lo.copy(n).invert(),ho.copy(t.ray).applyMatrix4(lo),null!==r.boundingBox&&!1===ho.intersectsBox(r.boundingBox)))return;let s;const a=r.index,o=r.attributes.position,l=r.attributes.uv,h=r.attributes.uv2,u=r.groups,c=r.drawRange;if(null!==a)if(Array.isArray(i))for(let r=0,n=u.length;r<n;r++){const n=u[r],o=i[n.materialIndex];for(let r=Math.max(n.start,c.start),i=Math.min(a.count,Math.min(n.start+n.count,c.start+c.count));r<i;r+=3){const i=a.getX(r),u=a.getX(r+1),c=a.getX(r+2);s=So(this,o,t,ho,l,h,i,u,c),s&&(s.faceIndex=Math.floor(r/3),s.face.materialIndex=n.materialIndex,e.push(s))}}else{for(let r=Math.max(0,c.start),n=Math.min(a.count,c.start+c.count);r<n;r+=3){const n=a.getX(r),o=a.getX(r+1),u=a.getX(r+2);s=So(this,i,t,ho,l,h,n,o,u),s&&(s.faceIndex=Math.floor(r/3),e.push(s))}}else if(void 0!==o)if(Array.isArray(i))for(let r=0,n=u.length;r<n;r++){const n=u[r],a=i[n.materialIndex];for(let r=Math.max(n.start,c.start),i=Math.min(o.count,Math.min(n.start+n.count,c.start+c.count));r<i;r+=3){s=So(this,a,t,ho,l,h,r,r+1,r+2),s&&(s.faceIndex=Math.floor(r/3),s.face.materialIndex=n.materialIndex,e.push(s))}}else{for(let r=Math.max(0,c.start),n=Math.min(o.count,c.start+c.count);r<n;r+=3){s=So(this,i,t,ho,l,h,r,r+1,r+2),s&&(s.faceIndex=Math.floor(r/3),e.push(s))}}}}function So(t,e,r,i,n,s,a,o,l){t.getVertexPosition(a,co),t.getVertexPosition(o,po),t.getVertexPosition(l,fo);const h=function(t,e,r,i,n,s,a,o){let l;if(l=1===e.side?i.intersectTriangle(a,s,n,!0,o):i.intersectTriangle(n,s,a,0===e.side,o),null===l)return null;bo.copy(o),bo.applyMatrix4(t.matrixWorld);const h=r.ray.origin.distanceTo(bo);return h<r.near||h>r.far?null:{distance:h,point:bo.clone(),object:t}}(t,e,r,i,co,po,fo,_o);if(h){n&&(vo.fromBufferAttribute(n,a),yo.fromBufferAttribute(n,o),xo.fromBufferAttribute(n,l),h.uv=Ua.getUV(_o,co,po,fo,vo,yo,xo,new as)),s&&(vo.fromBufferAttribute(s,a),yo.fromBufferAttribute(s,o),xo.fromBufferAttribute(s,l),h.uv2=Ua.getUV(_o,co,po,fo,vo,yo,xo,new as));const t={a:a,b:o,c:l,normal:new Rs,materialIndex:0};Ua.getNormal(co,po,fo,t.normal),h.face=t}return h}class Mo extends oo{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:r,widthSegments:i,heightSegments:n,depthSegments:s};const a=this;i=Math.floor(i),n=Math.floor(n),s=Math.floor(s);const o=[],l=[],h=[],u=[];let c=0,p=0;function d(t,e,r,i,n,s,d,f,m,g,v){const y=s/m,x=d/g,_=s/2,b=d/2,w=f/2,S=m+1,M=g+1;let T=0,E=0;const P=new Rs;for(let s=0;s<M;s++){const a=s*x-b;for(let o=0;o<S;o++){const c=o*y-_;P[t]=c*i,P[e]=a*n,P[r]=w,l.push(P.x,P.y,P.z),P[t]=0,P[e]=0,P[r]=f>0?1:-1,h.push(P.x,P.y,P.z),u.push(o/m),u.push(1-s/g),T+=1}}for(let t=0;t<g;t++)for(let e=0;e<m;e++){const r=c+e+S*t,i=c+e+S*(t+1),n=c+(e+1)+S*(t+1),s=c+(e+1)+S*t;o.push(r,i,s),o.push(i,n,s),E+=6}a.addGroup(p,E,v),p+=E,c+=T}d("z","y","x",-1,-1,r,e,t,s,n,0),d("z","y","x",1,-1,r,e,-t,s,n,1),d("x","z","y",1,1,t,r,e,i,s,2),d("x","z","y",1,-1,t,r,-e,i,s,3),d("x","y","z",1,-1,t,e,r,i,n,4),d("x","y","z",-1,-1,t,e,-r,i,n,5),this.setIndex(o),this.setAttribute("position",new Qa(l,3)),this.setAttribute("normal",new Qa(h,3)),this.setAttribute("uv",new Qa(u,2))}static fromJSON(t){return new Mo(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function To(t){const e={};for(const r in t){e[r]={};for(const i in t[r]){const n=t[r][i];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?e[r][i]=n.clone():Array.isArray(n)?e[r][i]=n.slice():e[r][i]=n}}return e}function Eo(t){const e={};for(let r=0;r<t.length;r++){const i=To(t[r]);for(const t in i)e[t]=i[t]}return e}function Po(t){return null===t.getRenderTarget()&&t.outputEncoding===Nn?Gn:Wn}const Co={clone:To,merge:Eo};class Ao extends Xa{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=To(t.uniforms),this.uniformsGroups=function(t){const e=[];for(let r=0;r<t.length;r++)e.push(t[r].clone());return e}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const i=this.uniforms[r].value;i&&i.isTexture?e.uniforms[r]={type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?e.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?e.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?e.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?e.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?e.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?e.uniforms[r]={type:"m4",value:i.toArray()}:e.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const r={};for(const t in this.extensions)!0===this.extensions[t]&&(r[t]=!0);return Object.keys(r).length>0&&(e.extensions=r),e}}class Do extends Ia{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new la,this.projectionMatrix=new la,this.projectionMatrixInverse=new la}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class ko extends Do{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*Jn*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*$n*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*Jn*Math.atan(Math.tan(.5*$n*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,r,i,n,s){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=r,this.view.offsetY=i,this.view.width=n,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*$n*this.fov)/this.zoom,r=2*e,i=this.aspect*r,n=-.5*i;const s=this.view;if(null!==this.view&&this.view.enabled){const t=s.fullWidth,a=s.fullHeight;n+=s.offsetX*i/t,e-=s.offsetY*r/a,i*=s.width/t,r*=s.height/a}const a=this.filmOffset;0!==a&&(n+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+i,e,e-r,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const Ro=-90;class Io extends Ia{constructor(t,e,r){super(),this.type="CubeCamera",this.renderTarget=r;const i=new ko(Ro,1,t,e);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);const n=new ko(Ro,1,t,e);n.layers=this.layers,n.up.set(0,1,0),n.lookAt(-1,0,0),this.add(n);const s=new ko(Ro,1,t,e);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(0,1,0),this.add(s);const a=new ko(Ro,1,t,e);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const o=new ko(Ro,1,t,e);o.layers=this.layers,o.up.set(0,1,0),o.lookAt(0,0,1),this.add(o);const l=new ko(Ro,1,t,e);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(t,e){null===this.parent&&this.updateMatrixWorld();const r=this.renderTarget,[i,n,s,a,o,l]=this.children,h=t.getRenderTarget(),u=t.toneMapping,c=t.xr.enabled;t.toneMapping=0,t.xr.enabled=!1;const p=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,t.setRenderTarget(r,0),t.render(e,i),t.setRenderTarget(r,1),t.render(e,n),t.setRenderTarget(r,2),t.render(e,s),t.setRenderTarget(r,3),t.render(e,a),t.setRenderTarget(r,4),t.render(e,o),r.texture.generateMipmaps=p,t.setRenderTarget(r,5),t.render(e,l),t.setRenderTarget(h),t.toneMapping=u,t.xr.enabled=c,r.texture.needsPMREMUpdate=!0}}class Lo extends Ps{constructor(t,e,r,i,n,s,a,o,l,h){super(t=void 0!==t?t:[],e=void 0!==e?e:Yi,r,i,n,s,a,o,l,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Fo extends As{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,t,e),this.isWebGLCubeRenderTarget=!0;const r={width:t,height:t,depth:1},i=[r,r,r,r,r,r];this.texture=new Lo(i,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:rn}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},i=new Mo(5,5,5),n=new Ao({name:"CubemapFromEquirect",uniforms:To(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:1,blending:0});n.uniforms.tEquirect.value=e;const s=new wo(i,n),a=e.minFilter;return e.minFilter===nn&&(e.minFilter=rn),new Io(1,10,this).update(t,s),e.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(t,e,r,i){const n=t.getRenderTarget();for(let n=0;n<6;n++)t.setRenderTarget(this,n),t.clear(e,r,i);t.setRenderTarget(n)}}const Oo=new Rs,zo=new Rs,Bo=new os;class Vo{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Rs(1,0,0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,r,i){return this.normal.set(t,e,r),this.constant=i,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,r){const i=Oo.subVectors(r,e).cross(zo.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const r=t.delta(Oo),i=this.normal.dot(r);if(0===i)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const n=-(t.start.dot(this.normal)+this.constant)/i;return n<0||n>1?null:e.copy(r).multiplyScalar(n).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),r=this.distanceToPoint(t.end);return e<0&&r>0||r<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const r=e||Bo.getNormalMatrix(t),i=this.coplanarPoint(Oo).applyMatrix4(t),n=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(n),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const No=new Qs,Go=new Rs;class Wo{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Vo,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vo,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Vo,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Vo,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Vo,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Vo;this.planes=[t,e,r,i,n,s]}set(t,e,r,i,n,s){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(r),a[3].copy(i),a[4].copy(n),a[5].copy(s),this}copy(t){const e=this.planes;for(let r=0;r<6;r++)e[r].copy(t.planes[r]);return this}setFromProjectionMatrix(t){const e=this.planes,r=t.elements,i=r[0],n=r[1],s=r[2],a=r[3],o=r[4],l=r[5],h=r[6],u=r[7],c=r[8],p=r[9],d=r[10],f=r[11],m=r[12],g=r[13],v=r[14],y=r[15];return e[0].setComponents(a-i,u-o,f-c,y-m).normalize(),e[1].setComponents(a+i,u+o,f+c,y+m).normalize(),e[2].setComponents(a+n,u+l,f+p,y+g).normalize(),e[3].setComponents(a-n,u-l,f-p,y-g).normalize(),e[4].setComponents(a-s,u-h,f-d,y-v).normalize(),e[5].setComponents(a+s,u+h,f+d,y+v).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),No.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(No)}intersectsSprite(t){return No.center.set(0,0,0),No.radius=.7071067811865476,No.applyMatrix4(t.matrixWorld),this.intersectsSphere(No)}intersectsSphere(t){const e=this.planes,r=t.center,i=-t.radius;for(let t=0;t<6;t++)if(e[t].distanceToPoint(r)<i)return!1;return!0}intersectsBox(t){const e=this.planes;for(let r=0;r<6;r++){const i=e[r];if(Go.x=i.normal.x>0?t.max.x:t.min.x,Go.y=i.normal.y>0?t.max.y:t.min.y,Go.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(Go)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let r=0;r<6;r++)if(e[r].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Ho(){let t=null,e=!1,r=null,i=null;function n(e,s){r(e,s),i=t.requestAnimationFrame(n)}return{start:function(){!0!==e&&null!==r&&(i=t.requestAnimationFrame(n),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(t){r=t},setContext:function(e){t=e}}}function Uo(t,e){const r=e.isWebGL2,i=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),i.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const r=i.get(e);r&&(t.deleteBuffer(r.buffer),i.delete(e))},update:function(e,n){if(e.isGLBufferAttribute){const t=i.get(e);return void((!t||t.version<e.version)&&i.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const s=i.get(e);void 0===s?i.set(e,function(e,i){const n=e.array,s=e.usage,a=t.createBuffer();let o;if(t.bindBuffer(i,a),t.bufferData(i,n,s),e.onUploadCallback(),n instanceof Float32Array)o=5126;else if(n instanceof Uint16Array)if(e.isFloat16BufferAttribute){if(!r)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");o=5131}else o=5123;else if(n instanceof Int16Array)o=5122;else if(n instanceof Uint32Array)o=5125;else if(n instanceof Int32Array)o=5124;else if(n instanceof Int8Array)o=5120;else if(n instanceof Uint8Array)o=5121;else{if(!(n instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+n);o=5121}return{buffer:a,type:o,bytesPerElement:n.BYTES_PER_ELEMENT,version:e.version}}(e,n)):s.version<e.version&&(function(e,i,n){const s=i.array,a=i.updateRange;t.bindBuffer(n,e),-1===a.count?t.bufferSubData(n,0,s):(r?t.bufferSubData(n,a.offset*s.BYTES_PER_ELEMENT,s,a.offset,a.count):t.bufferSubData(n,a.offset*s.BYTES_PER_ELEMENT,s.subarray(a.offset,a.offset+a.count)),a.count=-1),i.onUploadCallback()}(s.buffer,e,n),s.version=e.version)}}}class jo extends oo{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:r,heightSegments:i};const n=t/2,s=e/2,a=Math.floor(r),o=Math.floor(i),l=a+1,h=o+1,u=t/a,c=e/o,p=[],d=[],f=[],m=[];for(let t=0;t<h;t++){const e=t*c-s;for(let r=0;r<l;r++){const i=r*u-n;d.push(i,-e,0),f.push(0,0,1),m.push(r/a),m.push(1-t/o)}}for(let t=0;t<o;t++)for(let e=0;e<a;e++){const r=e+l*t,i=e+l*(t+1),n=e+1+l*(t+1),s=e+1+l*t;p.push(r,i,s),p.push(i,n,s)}this.setIndex(p),this.setAttribute("position",new Qa(d,3)),this.setAttribute("normal",new Qa(f,3)),this.setAttribute("uv",new Qa(m,2))}static fromJSON(t){return new jo(t.width,t.height,t.widthSegments,t.heightSegments)}}var Xo={},qo={common:{diffuse:{value:new bs(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new os},uv2Transform:{value:new os},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new as(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new bs(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new bs(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new os}},sprite:{diffuse:{value:new bs(16777215)},opacity:{value:1},center:{value:new as(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new os}}},Yo={basic:{uniforms:Eo([qo.common,qo.specularmap,qo.envmap,qo.aomap,qo.lightmap,qo.fog]),vertexShader:Xo.meshbasic_vert,fragmentShader:Xo.meshbasic_frag},lambert:{uniforms:Eo([qo.common,qo.specularmap,qo.envmap,qo.aomap,qo.lightmap,qo.emissivemap,qo.bumpmap,qo.normalmap,qo.displacementmap,qo.fog,qo.lights,{emissive:{value:new bs(0)}}]),vertexShader:Xo.meshlambert_vert,fragmentShader:Xo.meshlambert_frag},phong:{uniforms:Eo([qo.common,qo.specularmap,qo.envmap,qo.aomap,qo.lightmap,qo.emissivemap,qo.bumpmap,qo.normalmap,qo.displacementmap,qo.fog,qo.lights,{emissive:{value:new bs(0)},specular:{value:new bs(1118481)},shininess:{value:30}}]),vertexShader:Xo.meshphong_vert,fragmentShader:Xo.meshphong_frag},standard:{uniforms:Eo([qo.common,qo.envmap,qo.aomap,qo.lightmap,qo.emissivemap,qo.bumpmap,qo.normalmap,qo.displacementmap,qo.roughnessmap,qo.metalnessmap,qo.fog,qo.lights,{emissive:{value:new bs(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Xo.meshphysical_vert,fragmentShader:Xo.meshphysical_frag},toon:{uniforms:Eo([qo.common,qo.aomap,qo.lightmap,qo.emissivemap,qo.bumpmap,qo.normalmap,qo.displacementmap,qo.gradientmap,qo.fog,qo.lights,{emissive:{value:new bs(0)}}]),vertexShader:Xo.meshtoon_vert,fragmentShader:Xo.meshtoon_frag},matcap:{uniforms:Eo([qo.common,qo.bumpmap,qo.normalmap,qo.displacementmap,qo.fog,{matcap:{value:null}}]),vertexShader:Xo.meshmatcap_vert,fragmentShader:Xo.meshmatcap_frag},points:{uniforms:Eo([qo.points,qo.fog]),vertexShader:Xo.points_vert,fragmentShader:Xo.points_frag},dashed:{uniforms:Eo([qo.common,qo.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Xo.linedashed_vert,fragmentShader:Xo.linedashed_frag},depth:{uniforms:Eo([qo.common,qo.displacementmap]),vertexShader:Xo.depth_vert,fragmentShader:Xo.depth_frag},normal:{uniforms:Eo([qo.common,qo.bumpmap,qo.normalmap,qo.displacementmap,{opacity:{value:1}}]),vertexShader:Xo.meshnormal_vert,fragmentShader:Xo.meshnormal_frag},sprite:{uniforms:Eo([qo.sprite,qo.fog]),vertexShader:Xo.sprite_vert,fragmentShader:Xo.sprite_frag},background:{uniforms:{uvTransform:{value:new os},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Xo.background_vert,fragmentShader:Xo.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Xo.backgroundCube_vert,fragmentShader:Xo.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Xo.cube_vert,fragmentShader:Xo.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Xo.equirect_vert,fragmentShader:Xo.equirect_frag},distanceRGBA:{uniforms:Eo([qo.common,qo.displacementmap,{referencePosition:{value:new Rs},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Xo.distanceRGBA_vert,fragmentShader:Xo.distanceRGBA_frag},shadow:{uniforms:Eo([qo.lights,qo.fog,{color:{value:new bs(0)},opacity:{value:1}}]),vertexShader:Xo.shadow_vert,fragmentShader:Xo.shadow_frag}};const Zo={r:0,b:0,g:0};function $o(t,e,r,i,n,s,a){const o=new bs(0);let l,h,u=!0===s?0:1,c=null,p=0,d=null;function f(e,r){e.getRGB(Zo,Po(t)),i.buffers.color.setClear(Zo.r,Zo.g,Zo.b,r,a)}return{getClearColor:function(){return o},setClearColor:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;o.set(t),u=e,f(o,u)},getClearAlpha:function(){return u},setClearAlpha:function(t){u=t,f(o,u)},render:function(i,s){let a=!1,m=!0===s.isScene?s.background:null;m&&m.isTexture&&(m=(s.backgroundBlurriness>0?r:e).get(m));const g=t.xr,v=g.getSession&&g.getSession();v&&"additive"===v.environmentBlendMode&&(m=null),null===m?f(o,u):m&&m.isColor&&(f(m,1),a=!0),(t.autoClear||a)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),m&&(m.isCubeTexture||m.mapping===$i)?(void 0===h&&(h=new wo(new Mo(1,1,1),new Ao({name:"BackgroundCubeMaterial",uniforms:To(Yo.backgroundCube.uniforms),vertexShader:Yo.backgroundCube.vertexShader,fragmentShader:Yo.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(t,e,r){this.matrixWorld.copyPosition(r.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(h)),h.material.uniforms.envMap.value=m,h.material.uniforms.flipEnvMap.value=m.isCubeTexture&&!1===m.isRenderTargetTexture?-1:1,h.material.uniforms.backgroundBlurriness.value=s.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=s.backgroundIntensity,h.material.toneMapped=m.encoding!==Nn,(c!==m||p!==m.version||d!==t.toneMapping)&&(h.material.needsUpdate=!0,c=m,p=m.version,d=t.toneMapping),h.layers.enableAll(),i.unshift(h,h.geometry,h.material,0,0,null)):m&&m.isTexture&&(void 0===l&&(l=new wo(new jo(2,2),new Ao({name:"BackgroundMaterial",uniforms:To(Yo.background.uniforms),vertexShader:Yo.background.vertexShader,fragmentShader:Yo.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(l)),l.material.uniforms.t2D.value=m,l.material.uniforms.backgroundIntensity.value=s.backgroundIntensity,l.material.toneMapped=m.encoding!==Nn,!0===m.matrixAutoUpdate&&m.updateMatrix(),l.material.uniforms.uvTransform.value.copy(m.matrix),(c!==m||p!==m.version||d!==t.toneMapping)&&(l.material.needsUpdate=!0,c=m,p=m.version,d=t.toneMapping),l.layers.enableAll(),i.unshift(l,l.geometry,l.material,0,0,null))}}}function Jo(t,e,r,i){const n=t.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),a=i.isWebGL2||null!==s,o={},l=d(null);let h=l,u=!1;function c(e){return i.isWebGL2?t.bindVertexArray(e):s.bindVertexArrayOES(e)}function p(e){return i.isWebGL2?t.deleteVertexArray(e):s.deleteVertexArrayOES(e)}function d(t){const e=[],r=[],i=[];for(let t=0;t<n;t++)e[t]=0,r[t]=0,i[t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:r,attributeDivisors:i,object:t,attributes:{},index:null}}function f(){const t=h.newAttributes;for(let e=0,r=t.length;e<r;e++)t[e]=0}function m(t){g(t,0)}function g(r,n){const s=h.newAttributes,a=h.enabledAttributes,o=h.attributeDivisors;s[r]=1,0===a[r]&&(t.enableVertexAttribArray(r),a[r]=1),o[r]!==n&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](r,n),o[r]=n)}function v(){const e=h.newAttributes,r=h.enabledAttributes;for(let i=0,n=r.length;i<n;i++)r[i]!==e[i]&&(t.disableVertexAttribArray(i),r[i]=0)}function y(e,r,n,s,a,o){!0!==i.isWebGL2||5124!==n&&5125!==n?t.vertexAttribPointer(e,r,n,s,a,o):t.vertexAttribIPointer(e,r,n,a,o)}function x(){_(),u=!0,h!==l&&(h=l,c(h.object))}function _(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(n,l,p,x,_){let b=!1;if(a){const e=function(e,r,n){const a=!0===n.wireframe;let l=o[e.id];void 0===l&&(l={},o[e.id]=l);let h=l[r.id];void 0===h&&(h={},l[r.id]=h);let u=h[a];return void 0===u&&(u=d(i.isWebGL2?t.createVertexArray():s.createVertexArrayOES()),h[a]=u),u}(x,p,l);h!==e&&(h=e,c(h.object)),b=function(t,e,r,i){const n=h.attributes,s=e.attributes;let a=0;const o=r.getAttributes();for(const e in o)if(o[e].location>=0){const r=n[e];let i=s[e];if(void 0===i&&("instanceMatrix"===e&&t.instanceMatrix&&(i=t.instanceMatrix),"instanceColor"===e&&t.instanceColor&&(i=t.instanceColor)),void 0===r||r.attribute!==i||i&&r.data!==i.data)return!0;a++}return h.attributesNum!==a||h.index!==i}(n,x,p,_),b&&function(t,e,r,i){const n={},s=e.attributes;let a=0;const o=r.getAttributes();for(const e in o)if(o[e].location>=0){let r=s[e];void 0===r&&("instanceMatrix"===e&&t.instanceMatrix&&(r=t.instanceMatrix),"instanceColor"===e&&t.instanceColor&&(r=t.instanceColor));const i={};i.attribute=r,r&&r.data&&(i.data=r.data),n[e]=i,a++}h.attributes=n,h.attributesNum=a,h.index=i}(n,x,p,_)}else{const t=!0===l.wireframe;(h.geometry!==x.id||h.program!==p.id||h.wireframe!==t)&&(h.geometry=x.id,h.program=p.id,h.wireframe=t,b=!0)}null!==_&&r.update(_,34963),(b||u)&&(u=!1,function(n,s,a,o){if(!1===i.isWebGL2&&(n.isInstancedMesh||o.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;f();const l=o.attributes,h=a.getAttributes(),u=s.defaultAttributeValues;for(const e in h){const i=h[e];if(i.location>=0){let s=l[e];if(void 0===s&&("instanceMatrix"===e&&n.instanceMatrix&&(s=n.instanceMatrix),"instanceColor"===e&&n.instanceColor&&(s=n.instanceColor)),void 0!==s){const e=s.normalized,a=s.itemSize,l=r.get(s);if(void 0===l)continue;const h=l.buffer,u=l.type,c=l.bytesPerElement;if(s.isInterleavedBufferAttribute){const r=s.data,l=r.stride,p=s.offset;if(r.isInstancedInterleavedBuffer){for(let t=0;t<i.locationSize;t++)g(i.location+t,r.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=r.meshPerAttribute*r.count)}else for(let t=0;t<i.locationSize;t++)m(i.location+t);t.bindBuffer(34962,h);for(let t=0;t<i.locationSize;t++)y(i.location+t,a/i.locationSize,u,e,l*c,(p+a/i.locationSize*t)*c)}else{if(s.isInstancedBufferAttribute){for(let t=0;t<i.locationSize;t++)g(i.location+t,s.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let t=0;t<i.locationSize;t++)m(i.location+t);t.bindBuffer(34962,h);for(let t=0;t<i.locationSize;t++)y(i.location+t,a/i.locationSize,u,e,a*c,a/i.locationSize*t*c)}}else if(void 0!==u){const r=u[e];if(void 0!==r)switch(r.length){case 2:t.vertexAttrib2fv(i.location,r);break;case 3:t.vertexAttrib3fv(i.location,r);break;case 4:t.vertexAttrib4fv(i.location,r);break;default:t.vertexAttrib1fv(i.location,r)}}}}v()}(n,l,p,x),null!==_&&t.bindBuffer(34963,r.get(_).buffer))},reset:x,resetDefaultState:_,dispose:function(){x();for(const t in o){const e=o[t];for(const t in e){const r=e[t];for(const t in r)p(r[t].object),delete r[t];delete e[t]}delete o[t]}},releaseStatesOfGeometry:function(t){if(void 0===o[t.id])return;const e=o[t.id];for(const t in e){const r=e[t];for(const t in r)p(r[t].object),delete r[t];delete e[t]}delete o[t.id]},releaseStatesOfProgram:function(t){for(const e in o){const r=o[e];if(void 0===r[t.id])continue;const i=r[t.id];for(const t in i)p(i[t].object),delete i[t];delete r[t.id]}},initAttributes:f,enableAttribute:m,disableUnusedAttributes:v}}function Ko(t,e,r,i){const n=i.isWebGL2;let s;this.setMode=function(t){s=t},this.render=function(e,i){t.drawArrays(s,e,i),r.update(i,s,1)},this.renderInstances=function(i,a,o){if(0===o)return;let l,h;if(n)l=t,h="drawArraysInstanced";else if(l=e.get("ANGLE_instanced_arrays"),h="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[h](s,i,a,o),r.update(a,s,o)}}function Qo(t,e,r){let i;function n(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s=typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&t instanceof WebGL2ComputeRenderingContext;let a=void 0!==r.precision?r.precision:"highp";const o=n(a);o!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",o,"instead."),a=o);const l=s||e.has("WEBGL_draw_buffers"),h=!0===r.logarithmicDepthBuffer,u=t.getParameter(34930),c=t.getParameter(35660),p=t.getParameter(3379),d=t.getParameter(34076),f=t.getParameter(34921),m=t.getParameter(36347),g=t.getParameter(36348),v=t.getParameter(36349),y=c>0,x=s||e.has("OES_texture_float");return{isWebGL2:s,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const r=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:n,precision:a,logarithmicDepthBuffer:h,maxTextures:u,maxVertexTextures:c,maxTextureSize:p,maxCubemapSize:d,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:x,floatVertexTextures:y&&x,maxSamples:s?t.getParameter(36183):0}}function tl(t){const e=this;let r=null,i=0,n=!1,s=!1;const a=new Vo,o=new os,l={value:null,needsUpdate:!1};function h(){l.value!==r&&(l.value=r,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(t,r,i,n){const s=null!==t?t.length:0;let h=null;if(0!==s){if(h=l.value,!0!==n||null===h){const e=i+4*s,n=r.matrixWorldInverse;o.getNormalMatrix(n),(null===h||h.length<e)&&(h=new Float32Array(e));for(let e=0,r=i;e!==s;++e,r+=4)a.copy(t[e]).applyMatrix4(n,o),a.normal.toArray(h,r),h[r+3]=a.constant}l.value=h,l.needsUpdate=!0}return e.numPlanes=s,e.numIntersection=0,h}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,s){const a=0!==t.length||e||0!==i||n;return n=e,r=u(t,s,0),i=t.length,a},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,h()},this.setState=function(e,a,o){const c=e.clippingPlanes,p=e.clipIntersection,d=e.clipShadows,f=t.get(e);if(!n||null===c||0===c.length||s&&!d)s?u(null):h();else{const t=s?0:i,e=4*t;let n=f.clippingState||null;l.value=n,n=u(c,a,e,o);for(let t=0;t!==e;++t)n[t]=r[t];f.clippingState=n,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=t}}}function el(t){let e=new WeakMap;function r(t,e){return 303===e?t.mapping=Yi:304===e&&(t.mapping=Zi),t}function i(t){const r=t.target;r.removeEventListener("dispose",i);const n=e.get(r);void 0!==n&&(e.delete(r),n.dispose())}return{get:function(n){if(n&&n.isTexture&&!1===n.isRenderTargetTexture){const s=n.mapping;if(303===s||304===s){if(e.has(n)){return r(e.get(n).texture,n.mapping)}{const s=n.image;if(s&&s.height>0){const a=new Fo(s.height/2);return a.fromEquirectangularTexture(t,n),e.set(n,a),n.addEventListener("dispose",i),r(a.texture,n.mapping)}return null}}}return n},dispose:function(){e=new WeakMap}}}const rl=[.125,.215,.35,.446,.526,.582],il=20,nl=new class extends Do{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=r,this.bottom=i,this.near=n,this.far=s,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,r,i,n,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=r,this.view.offsetY=i,this.view.width=n,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let n=r-t,s=r+t,a=i+e,o=i-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;n+=t*this.view.offsetX,s=n+t*this.view.width,a-=e*this.view.offsetY,o=a-e*this.view.height}this.projectionMatrix.makeOrthographic(n,s,a,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}},sl=new bs;let al=null;const ol=(1+Math.sqrt(5))/2,ll=1/ol,hl=[new Rs(1,1,1),new Rs(-1,1,1),new Rs(1,1,-1),new Rs(-1,1,-1),new Rs(0,ol,ll),new Rs(0,ol,-ll),new Rs(ll,0,ol),new Rs(-ll,0,ol),new Rs(ol,ll,0),new Rs(-ol,ll,0)];class ul{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;al=this._renderer.getRenderTarget(),this._setSize(256);const n=this._allocateTargets();return n.depthBuffer=!0,this._sceneToCubeUV(t,r,i,n),e>0&&this._blur(n,0,0,e),this._applyPMREM(n),this._cleanup(n),n}fromEquirectangular(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(t,e)}fromCubemap(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=fl(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=dl(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(al),t.scissorTest=!1,pl(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===Yi||t.mapping===Zi?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),al=this._renderer.getRenderTarget();const r=e||this._allocateTargets();return this._textureToCubeUV(t,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,r={magFilter:rn,minFilter:rn,generateMipmaps:!1,type:hn,format:cn,encoding:Vn,depthBuffer:!1},i=cl(t,e,r);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=cl(t,e,r);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(t){const e=[],r=[],i=[];let n=t;const s=t-4+1+rl.length;for(let a=0;a<s;a++){const s=Math.pow(2,n);r.push(s);let o=1/s;a>t-4?o=rl[a-t+4-1]:0===a&&(o=0),i.push(o);const l=1/(s-2),h=-l,u=1+l,c=[h,h,u,h,u,u,h,h,u,u,h,u],p=6,d=6,f=3,m=2,g=1,v=new Float32Array(f*d*p),y=new Float32Array(m*d*p),x=new Float32Array(g*d*p);for(let t=0;t<p;t++){const e=t%3*2/3-1,r=t>2?0:-1,i=[e,r,0,e+2/3,r,0,e+2/3,r+1,0,e,r,0,e+2/3,r+1,0,e,r+1,0];v.set(i,f*d*t),y.set(c,m*d*t);const n=[t,t,t,t,t,t];x.set(n,g*d*t)}const _=new oo;_.setAttribute("position",new $a(v,f)),_.setAttribute("uv",new $a(y,m)),_.setAttribute("faceIndex",new $a(x,g)),e.push(_),n>4&&n--}return{lodPlanes:e,sizeLods:r,sigmas:i}}(i)),this._blurMaterial=function(t,e,r){const i=new Float32Array(il),n=new Rs(0,1,0);return new Ao({name:"SphericalGaussianBlur",defines:{n:il,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n}},vertexShader:ml(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(i,t,e)}return i}_compileMaterial(t){const e=new wo(this._lodPlanes[0],t);this._renderer.compile(e,nl)}_sceneToCubeUV(t,e,r,i){const n=new ko(90,1,e,r),s=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,h=o.toneMapping;o.getClearColor(sl),o.toneMapping=0,o.autoClear=!1;const u=new qa({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),c=new wo(new Mo,u);let p=!1;const d=t.background;d?d.isColor&&(u.color.copy(d),t.background=null,p=!0):(u.color.copy(sl),p=!0);for(let e=0;e<6;e++){const r=e%3;0===r?(n.up.set(0,s[e],0),n.lookAt(a[e],0,0)):1===r?(n.up.set(0,0,s[e]),n.lookAt(0,a[e],0)):(n.up.set(0,s[e],0),n.lookAt(0,0,a[e]));const l=this._cubeSize;pl(i,r*l,e>2?l:0,l,l),o.setRenderTarget(i),p&&o.render(c,n),o.render(t,n)}c.geometry.dispose(),c.material.dispose(),o.toneMapping=h,o.autoClear=l,t.background=d}_textureToCubeUV(t,e){const r=this._renderer,i=t.mapping===Yi||t.mapping===Zi;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=fl()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=dl());const n=i?this._cubemapMaterial:this._equirectMaterial,s=new wo(this._lodPlanes[0],n);n.uniforms.envMap.value=t;const a=this._cubeSize;pl(e,0,0,3*a,2*a),r.setRenderTarget(e),r.render(s,nl)}_applyPMREM(t){const e=this._renderer,r=e.autoClear;e.autoClear=!1;for(let e=1;e<this._lodPlanes.length;e++){const r=Math.sqrt(this._sigmas[e]*this._sigmas[e]-this._sigmas[e-1]*this._sigmas[e-1]),i=hl[(e-1)%hl.length];this._blur(t,e-1,e,r,i)}e.autoClear=r}_blur(t,e,r,i,n){const s=this._pingPongRenderTarget;this._halfBlur(t,s,e,r,i,"latitudinal",n),this._halfBlur(s,t,r,r,i,"longitudinal",n)}_halfBlur(t,e,r,i,n,s,a){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const h=new wo(this._lodPlanes[i],l),u=l.uniforms,c=this._sizeLods[r]-1,p=isFinite(n)?Math.PI/(2*c):2*Math.PI/39,d=n/p,f=isFinite(n)?1+Math.floor(3*d):il;f>il&&console.warn(`sigmaRadians, ${n}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);const m=[];let g=0;for(let t=0;t<il;++t){const e=t/d,r=Math.exp(-e*e/2);m.push(r),0===t?g+=r:t<f&&(g+=2*r)}for(let t=0;t<m.length;t++)m[t]=m[t]/g;u.envMap.value=t.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===s,a&&(u.poleAxis.value=a);const{_lodMax:v}=this;u.dTheta.value=p,u.mipInt.value=v-r;const y=this._sizeLods[i];pl(e,3*y*(i>v-4?i-v+4:0),4*(this._cubeSize-y),3*y,2*y),o.setRenderTarget(e),o.render(h,nl)}}function cl(t,e,r){const i=new As(t,e,r);return i.texture.mapping=$i,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function pl(t,e,r,i,n){t.viewport.set(e,r,i,n),t.scissor.set(e,r,i,n)}function dl(){return new Ao({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:ml(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function fl(){return new Ao({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:ml(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function ml(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function gl(t){let e=new WeakMap,r=null;function i(t){const r=t.target;r.removeEventListener("dispose",i);const n=e.get(r);void 0!==n&&(e.delete(r),n.dispose())}return{get:function(n){if(n&&n.isTexture){const s=n.mapping,a=303===s||304===s,o=s===Yi||s===Zi;if(a||o){if(n.isRenderTargetTexture&&!0===n.needsPMREMUpdate){n.needsPMREMUpdate=!1;let i=e.get(n);return null===r&&(r=new ul(t)),i=a?r.fromEquirectangular(n,i):r.fromCubemap(n,i),e.set(n,i),i.texture}if(e.has(n))return e.get(n).texture;{const s=n.image;if(a&&s&&s.height>0||o&&s&&function(t){let e=0;const r=6;for(let i=0;i<r;i++)void 0!==t[i]&&e++;return e===r}(s)){null===r&&(r=new ul(t));const s=a?r.fromEquirectangular(n):r.fromCubemap(n);return e.set(n,s),n.addEventListener("dispose",i),s.texture}return null}}}return n},dispose:function(){e=new WeakMap,null!==r&&(r.dispose(),r=null)}}}function vl(t){const e={};function r(r){if(void 0!==e[r])return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(t){return null!==r(t)},init:function(t){t.isWebGL2?r("EXT_color_buffer_float"):(r("WEBGL_depth_texture"),r("OES_texture_float"),r("OES_texture_half_float"),r("OES_texture_half_float_linear"),r("OES_standard_derivatives"),r("OES_element_index_uint"),r("OES_vertex_array_object"),r("ANGLE_instanced_arrays")),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture")},get:function(t){const e=r(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function yl(t,e,r,i){const n={},s=new WeakMap;function a(t){const o=t.target;null!==o.index&&e.remove(o.index);for(const t in o.attributes)e.remove(o.attributes[t]);o.removeEventListener("dispose",a),delete n[o.id];const l=s.get(o);l&&(e.remove(l),s.delete(o)),i.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,r.memory.geometries--}function o(t){const r=[],i=t.index,n=t.attributes.position;let a=0;if(null!==i){const t=i.array;a=i.version;for(let e=0,i=t.length;e<i;e+=3){const i=t[e+0],n=t[e+1],s=t[e+2];r.push(i,n,n,s,s,i)}}else{const t=n.array;a=n.version;for(let e=0,i=t.length/3-1;e<i;e+=3){const t=e+0,i=e+1,n=e+2;r.push(t,i,i,n,n,t)}}const o=new(hs(r)?Ka:Ja)(r,1);o.version=a;const l=s.get(t);l&&e.remove(l),s.set(t,o)}return{get:function(t,e){return!0===n[e.id]||(e.addEventListener("dispose",a),n[e.id]=!0,r.memory.geometries++),e},update:function(t){const r=t.attributes;for(const t in r)e.update(r[t],34962);const i=t.morphAttributes;for(const t in i){const r=i[t];for(let t=0,i=r.length;t<i;t++)e.update(r[t],34962)}},getWireframeAttribute:function(t){const e=s.get(t);if(e){const r=t.index;null!==r&&e.version<r.version&&o(t)}else o(t);return s.get(t)}}}function xl(t,e,r,i){const n=i.isWebGL2;let s,a,o;this.setMode=function(t){s=t},this.setIndex=function(t){a=t.type,o=t.bytesPerElement},this.render=function(e,i){t.drawElements(s,i,a,e*o),r.update(i,s,1)},this.renderInstances=function(i,l,h){if(0===h)return;let u,c;if(n)u=t,c="drawElementsInstanced";else if(u=e.get("ANGLE_instanced_arrays"),c="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[c](s,l,a,i*o,h),r.update(l,s,h)}}function _l(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,r,i){switch(e.calls++,r){case 4:e.triangles+=i*(t/3);break;case 1:e.lines+=i*(t/2);break;case 3:e.lines+=i*(t-1);break;case 2:e.lines+=i*t;break;case 0:e.points+=i*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function bl(t,e){return t[0]-e[0]}function wl(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Sl(t,e,r){const i={},n=new Float32Array(8),s=new WeakMap,a=new Cs,o=[];for(let t=0;t<8;t++)o[t]=[t,0];return{update:function(l,h,u,c){const p=l.morphTargetInfluences;if(!0===e.isWebGL2){const i=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,n=void 0!==i?i.length:0;let o=s.get(h);if(void 0===o||o.count!==n){let t=function(){v.dispose(),s.delete(h),h.removeEventListener("dispose",t)};void 0!==o&&o.texture.dispose();const r=void 0!==h.morphAttributes.position,i=void 0!==h.morphAttributes.normal,l=void 0!==h.morphAttributes.color,u=h.morphAttributes.position||[],c=h.morphAttributes.normal||[],p=h.morphAttributes.color||[];let d=0;!0===r&&(d=1),!0===i&&(d=2),!0===l&&(d=3);let f=h.attributes.position.count*d,m=1;f>e.maxTextureSize&&(m=Math.ceil(f/e.maxTextureSize),f=e.maxTextureSize);const g=new Float32Array(f*m*4*n),v=new Ds(g,f,m,n);v.type=ln,v.needsUpdate=!0;const y=4*d;for(let t=0;t<n;t++){const e=u[t],n=c[t],s=p[t],o=f*m*4*t;for(let t=0;t<e.count;t++){const h=t*y;!0===r&&(a.fromBufferAttribute(e,t),g[o+h+0]=a.x,g[o+h+1]=a.y,g[o+h+2]=a.z,g[o+h+3]=0),!0===i&&(a.fromBufferAttribute(n,t),g[o+h+4]=a.x,g[o+h+5]=a.y,g[o+h+6]=a.z,g[o+h+7]=0),!0===l&&(a.fromBufferAttribute(s,t),g[o+h+8]=a.x,g[o+h+9]=a.y,g[o+h+10]=a.z,g[o+h+11]=4===s.itemSize?a.w:1)}}o={count:n,texture:v,size:new as(f,m)},s.set(h,o),h.addEventListener("dispose",t)}let l=0;for(let t=0;t<p.length;t++)l+=p[t];const u=h.morphTargetsRelative?1:1-l;c.getUniforms().setValue(t,"morphTargetBaseInfluence",u),c.getUniforms().setValue(t,"morphTargetInfluences",p),c.getUniforms().setValue(t,"morphTargetsTexture",o.texture,r),c.getUniforms().setValue(t,"morphTargetsTextureSize",o.size)}else{const e=void 0===p?0:p.length;let r=i[h.id];if(void 0===r||r.length!==e){r=[];for(let t=0;t<e;t++)r[t]=[t,0];i[h.id]=r}for(let t=0;t<e;t++){const e=r[t];e[0]=t,e[1]=p[t]}r.sort(wl);for(let t=0;t<8;t++)t<e&&r[t][1]?(o[t][0]=r[t][0],o[t][1]=r[t][1]):(o[t][0]=Number.MAX_SAFE_INTEGER,o[t][1]=0);o.sort(bl);const s=h.morphAttributes.position,a=h.morphAttributes.normal;let l=0;for(let t=0;t<8;t++){const e=o[t],r=e[0],i=e[1];r!==Number.MAX_SAFE_INTEGER&&i?(s&&h.getAttribute("morphTarget"+t)!==s[r]&&h.setAttribute("morphTarget"+t,s[r]),a&&h.getAttribute("morphNormal"+t)!==a[r]&&h.setAttribute("morphNormal"+t,a[r]),n[t]=i,l+=i):(s&&!0===h.hasAttribute("morphTarget"+t)&&h.deleteAttribute("morphTarget"+t),a&&!0===h.hasAttribute("morphNormal"+t)&&h.deleteAttribute("morphNormal"+t),n[t]=0)}const u=h.morphTargetsRelative?1:1-l;c.getUniforms().setValue(t,"morphTargetBaseInfluence",u),c.getUniforms().setValue(t,"morphTargetInfluences",n)}}}}function Ml(t,e,r,i){let n=new WeakMap;function s(t){const e=t.target;e.removeEventListener("dispose",s),r.remove(e.instanceMatrix),null!==e.instanceColor&&r.remove(e.instanceColor)}return{update:function(t){const a=i.render.frame,o=t.geometry,l=e.get(t,o);return n.get(l)!==a&&(e.update(l),n.set(l,a)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",s)&&t.addEventListener("dispose",s),r.update(t.instanceMatrix,34962),null!==t.instanceColor&&r.update(t.instanceColor,34962)),l},dispose:function(){n=new WeakMap}}}const Tl=new Ps,El=new Ds,Pl=new class extends Ps{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:r,depth:i},this.magFilter=tn,this.minFilter=tn,this.wrapR=Ki,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},Cl=new Lo,Al=[],Dl=[],kl=new Float32Array(16),Rl=new Float32Array(9),Il=new Float32Array(4);function Ll(t,e,r){const i=t[0];if(i<=0||i>0)return t;const n=e*r;let s=Al[n];if(void 0===s&&(s=new Float32Array(n),Al[n]=s),0!==e){i.toArray(s,0);for(let i=1,n=0;i!==e;++i)n+=r,t[i].toArray(s,n)}return s}function Fl(t,e){if(t.length!==e.length)return!1;for(let r=0,i=t.length;r<i;r++)if(t[r]!==e[r])return!1;return!0}function Ol(t,e){for(let r=0,i=e.length;r<i;r++)t[r]=e[r]}function zl(t,e){let r=Dl[e];void 0===r&&(r=new Int32Array(e),Dl[e]=r);for(let i=0;i!==e;++i)r[i]=t.allocateTextureUnit();return r}function Bl(t,e){const r=this.cache;r[0]!==e&&(t.uniform1f(this.addr,e),r[0]=e)}function Vl(t,e){const r=this.cache;if(void 0!==e.x)(r[0]!==e.x||r[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(Fl(r,e))return;t.uniform2fv(this.addr,e),Ol(r,e)}}function Nl(t,e){const r=this.cache;if(void 0!==e.x)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else if(void 0!==e.r)(r[0]!==e.r||r[1]!==e.g||r[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),r[0]=e.r,r[1]=e.g,r[2]=e.b);else{if(Fl(r,e))return;t.uniform3fv(this.addr,e),Ol(r,e)}}function Gl(t,e){const r=this.cache;if(void 0!==e.x)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(Fl(r,e))return;t.uniform4fv(this.addr,e),Ol(r,e)}}function Wl(t,e){const r=this.cache,i=e.elements;if(void 0===i){if(Fl(r,e))return;t.uniformMatrix2fv(this.addr,!1,e),Ol(r,e)}else{if(Fl(r,i))return;Il.set(i),t.uniformMatrix2fv(this.addr,!1,Il),Ol(r,i)}}function Hl(t,e){const r=this.cache,i=e.elements;if(void 0===i){if(Fl(r,e))return;t.uniformMatrix3fv(this.addr,!1,e),Ol(r,e)}else{if(Fl(r,i))return;Rl.set(i),t.uniformMatrix3fv(this.addr,!1,Rl),Ol(r,i)}}function Ul(t,e){const r=this.cache,i=e.elements;if(void 0===i){if(Fl(r,e))return;t.uniformMatrix4fv(this.addr,!1,e),Ol(r,e)}else{if(Fl(r,i))return;kl.set(i),t.uniformMatrix4fv(this.addr,!1,kl),Ol(r,i)}}function jl(t,e){const r=this.cache;r[0]!==e&&(t.uniform1i(this.addr,e),r[0]=e)}function Xl(t,e){const r=this.cache;if(void 0!==e.x)(r[0]!==e.x||r[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(Fl(r,e))return;t.uniform2iv(this.addr,e),Ol(r,e)}}function ql(t,e){const r=this.cache;if(void 0!==e.x)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else{if(Fl(r,e))return;t.uniform3iv(this.addr,e),Ol(r,e)}}function Yl(t,e){const r=this.cache;if(void 0!==e.x)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(Fl(r,e))return;t.uniform4iv(this.addr,e),Ol(r,e)}}function Zl(t,e){const r=this.cache;r[0]!==e&&(t.uniform1ui(this.addr,e),r[0]=e)}function $l(t,e){const r=this.cache;if(void 0!==e.x)(r[0]!==e.x||r[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(Fl(r,e))return;t.uniform2uiv(this.addr,e),Ol(r,e)}}function Jl(t,e){const r=this.cache;if(void 0!==e.x)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else{if(Fl(r,e))return;t.uniform3uiv(this.addr,e),Ol(r,e)}}function Kl(t,e){const r=this.cache;if(void 0!==e.x)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(Fl(r,e))return;t.uniform4uiv(this.addr,e),Ol(r,e)}}function Ql(t,e,r){const i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(t.uniform1i(this.addr,n),i[0]=n),r.setTexture2D(e||Tl,n)}function th(t,e,r){const i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(t.uniform1i(this.addr,n),i[0]=n),r.setTexture3D(e||Pl,n)}function eh(t,e,r){const i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(t.uniform1i(this.addr,n),i[0]=n),r.setTextureCube(e||Cl,n)}function rh(t,e,r){const i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(t.uniform1i(this.addr,n),i[0]=n),r.setTexture2DArray(e||El,n)}function ih(t,e){t.uniform1fv(this.addr,e)}function nh(t,e){const r=Ll(e,this.size,2);t.uniform2fv(this.addr,r)}function sh(t,e){const r=Ll(e,this.size,3);t.uniform3fv(this.addr,r)}function ah(t,e){const r=Ll(e,this.size,4);t.uniform4fv(this.addr,r)}function oh(t,e){const r=Ll(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,r)}function lh(t,e){const r=Ll(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,r)}function hh(t,e){const r=Ll(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,r)}function uh(t,e){t.uniform1iv(this.addr,e)}function ch(t,e){t.uniform2iv(this.addr,e)}function ph(t,e){t.uniform3iv(this.addr,e)}function dh(t,e){t.uniform4iv(this.addr,e)}function fh(t,e){t.uniform1uiv(this.addr,e)}function mh(t,e){t.uniform2uiv(this.addr,e)}function gh(t,e){t.uniform3uiv(this.addr,e)}function vh(t,e){t.uniform4uiv(this.addr,e)}function yh(t,e,r){const i=this.cache,n=e.length,s=zl(r,n);Fl(i,s)||(t.uniform1iv(this.addr,s),Ol(i,s));for(let t=0;t!==n;++t)r.setTexture2D(e[t]||Tl,s[t])}function xh(t,e,r){const i=this.cache,n=e.length,s=zl(r,n);Fl(i,s)||(t.uniform1iv(this.addr,s),Ol(i,s));for(let t=0;t!==n;++t)r.setTexture3D(e[t]||Pl,s[t])}function _h(t,e,r){const i=this.cache,n=e.length,s=zl(r,n);Fl(i,s)||(t.uniform1iv(this.addr,s),Ol(i,s));for(let t=0;t!==n;++t)r.setTextureCube(e[t]||Cl,s[t])}function bh(t,e,r){const i=this.cache,n=e.length,s=zl(r,n);Fl(i,s)||(t.uniform1iv(this.addr,s),Ol(i,s));for(let t=0;t!==n;++t)r.setTexture2DArray(e[t]||El,s[t])}class wh{constructor(t,e,r){this.id=t,this.addr=r,this.cache=[],this.setValue=function(t){switch(t){case 5126:return Bl;case 35664:return Vl;case 35665:return Nl;case 35666:return Gl;case 35674:return Wl;case 35675:return Hl;case 35676:return Ul;case 5124:case 35670:return jl;case 35667:case 35671:return Xl;case 35668:case 35672:return ql;case 35669:case 35673:return Yl;case 5125:return Zl;case 36294:return $l;case 36295:return Jl;case 36296:return Kl;case 35678:case 36198:case 36298:case 36306:case 35682:return Ql;case 35679:case 36299:case 36307:return th;case 35680:case 36300:case 36308:case 36293:return eh;case 36289:case 36303:case 36311:case 36292:return rh}}(e.type)}}class Sh{constructor(t,e,r){this.id=t,this.addr=r,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return ih;case 35664:return nh;case 35665:return sh;case 35666:return ah;case 35674:return oh;case 35675:return lh;case 35676:return hh;case 5124:case 35670:return uh;case 35667:case 35671:return ch;case 35668:case 35672:return ph;case 35669:case 35673:return dh;case 5125:return fh;case 36294:return mh;case 36295:return gh;case 36296:return vh;case 35678:case 36198:case 36298:case 36306:case 35682:return yh;case 35679:case 36299:case 36307:return xh;case 35680:case 36300:case 36308:case 36293:return _h;case 36289:case 36303:case 36311:case 36292:return bh}}(e.type)}}class Mh{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,r){const i=this.seq;for(let n=0,s=i.length;n!==s;++n){const s=i[n];s.setValue(t,e[s.id],r)}}}const Th=/(\w+)(\])?(\[|\.)?/g;function Eh(t,e){t.seq.push(e),t.map[e.id]=e}function Ph(t,e,r){const i=t.name,n=i.length;for(Th.lastIndex=0;;){const s=Th.exec(i),a=Th.lastIndex;let o=s[1];const l="]"===s[2],h=s[3];if(l&&(o|=0),void 0===h||"["===h&&a+2===n){Eh(r,void 0===h?new wh(o,t,e):new Sh(o,t,e));break}{let t=r.map[o];void 0===t&&(t=new Mh(o),Eh(r,t)),r=t}}}class Ch{constructor(t,e){this.seq=[],this.map={};const r=t.getProgramParameter(e,35718);for(let i=0;i<r;++i){const r=t.getActiveUniform(e,i);Ph(r,t.getUniformLocation(e,r.name),this)}}setValue(t,e,r,i){const n=this.map[e];void 0!==n&&n.setValue(t,r,i)}setOptional(t,e,r){const i=e[r];void 0!==i&&this.setValue(t,r,i)}static upload(t,e,r,i){for(let n=0,s=e.length;n!==s;++n){const s=e[n],a=r[s.id];!1!==a.needsUpdate&&s.setValue(t,a.value,i)}}static seqWithValue(t,e){const r=[];for(let i=0,n=t.length;i!==n;++i){const n=t[i];n.id in e&&r.push(n)}return r}}function Ah(t,e,r){const i=t.createShader(e);return t.shaderSource(i,r),t.compileShader(i),i}let Dh=0;function kh(t,e,r){const i=t.getShaderParameter(e,35713),n=t.getShaderInfoLog(e).trim();if(i&&""===n)return"";const s=/ERROR: 0:(\d+)/.exec(n);if(s){const i=parseInt(s[1]);return r.toUpperCase()+"\n\n"+n+"\n\n"+function(t,e){const r=t.split("\n"),i=[],n=Math.max(e-6,0),s=Math.min(e+6,r.length);for(let t=n;t<s;t++){const n=t+1;i.push(`${n===e?">":" "} ${n}: ${r[t]}`)}return i.join("\n")}(t.getShaderSource(e),i)}return n}function Rh(t,e){const r=function(t){switch(t){case Vn:return["Linear","( value )"];case Nn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function Ih(t,e){let r;switch(e){case 1:r="Linear";break;case 2:r="Reinhard";break;case 3:r="OptimizedCineon";break;case 4:r="ACESFilmic";break;case 5:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),r="Linear"}return"vec3 "+t+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function Lh(t){return""!==t}function Fh(t,e){const r=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,r).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Oh(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const zh=/^[ \t]*#include +<([\w\d./]+)>/gm;function Bh(t){return t.replace(zh,Vh)}function Vh(t,e){const r=Xo[e];if(void 0===r)throw new Error("Can not resolve #include <"+e+">");return Bh(r)}const Nh=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Gh(t){return t.replace(Nh,Wh)}function Wh(t,e,r,i){let n="";for(let t=parseInt(e);t<parseInt(r);t++)n+=i.replace(/\[\s*i\s*\]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return n}function Hh(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function Uh(t,e,r,i){const n=t.getContext(),s=r.defines;let a=r.vertexShader,o=r.fragmentShader;const l=function(t){let e="SHADOWMAP_TYPE_BASIC";return 1===t.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===t.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===t.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(r),h=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Yi:case Zi:e="ENVMAP_TYPE_CUBE";break;case $i:e="ENVMAP_TYPE_CUBE_UV"}return e}(r),u=function(t){let e="ENVMAP_MODE_REFLECTION";t.envMap&&t.envMapMode===Zi&&(e="ENVMAP_MODE_REFRACTION");return e}(r),c=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(r),p=function(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const r=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,r),112)),texelHeight:i,maxMip:r}}(r),d=r.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Lh).join("\n")}(r),f=function(t){const e=[];for(const r in t){const i=t[r];!1!==i&&e.push("#define "+r+" "+i)}return e.join("\n")}(s),m=n.createProgram();let g,v,y=r.glslVersion?"#version "+r.glslVersion+"\n":"";r.isRawShaderMaterial?(g=[f].filter(Lh).join("\n"),g.length>0&&(g+="\n"),v=[d,f].filter(Lh).join("\n"),v.length>0&&(v+="\n")):(g=[Hh(r),"#define SHADER_NAME "+r.shaderName,f,r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.supportsVertexTextures?"#define VERTEX_TEXTURES":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+u:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&!1===r.flatShading?"#define USE_MORPHNORMALS":"",r.morphColors&&r.isWebGL2?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Lh).join("\n"),v=[d,Hh(r),"#define SHADER_NAME "+r.shaderName,f,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+h:"",r.envMap?"#define "+u:"",r.envMap?"#define "+c:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==r.toneMapping?"#define TONE_MAPPING":"",0!==r.toneMapping?Xo.tonemapping_pars_fragment:"",0!==r.toneMapping?Ih("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",Xo.encodings_pars_fragment,Rh("linearToOutputTexel",r.outputEncoding),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(Lh).join("\n")),a=Bh(a),a=Fh(a,r),a=Oh(a,r),o=Bh(o),o=Fh(o,r),o=Oh(o,r),a=Gh(a),o=Gh(o),r.isWebGL2&&!0!==r.isRawShaderMaterial&&(y="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",r.glslVersion===jn?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===jn?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const x=y+v+o,_=Ah(n,35633,y+g+a),b=Ah(n,35632,x);if(n.attachShader(m,_),n.attachShader(m,b),void 0!==r.index0AttributeName?n.bindAttribLocation(m,0,r.index0AttributeName):!0===r.morphTargets&&n.bindAttribLocation(m,0,"position"),n.linkProgram(m),t.debug.checkShaderErrors){const t=n.getProgramInfoLog(m).trim(),e=n.getShaderInfoLog(_).trim(),r=n.getShaderInfoLog(b).trim();let i=!0,s=!0;if(!1===n.getProgramParameter(m,35714)){i=!1;const e=kh(n,_,"vertex"),r=kh(n,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+n.getError()+" - VALIDATE_STATUS "+n.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+t+"\n"+e+"\n"+r)}else""!==t?console.warn("THREE.WebGLProgram: Program Info Log:",t):(""===e||""===r)&&(s=!1);s&&(this.diagnostics={runnable:i,programLog:t,vertexShader:{log:e,prefix:g},fragmentShader:{log:r,prefix:v}})}let w,S;return n.deleteShader(_),n.deleteShader(b),this.getUniforms=function(){return void 0===w&&(w=new Ch(n,m)),w},this.getAttributes=function(){return void 0===S&&(S=function(t,e){const r={},i=t.getProgramParameter(e,35721);for(let n=0;n<i;n++){const i=t.getActiveAttrib(e,n),s=i.name;let a=1;35674===i.type&&(a=2),35675===i.type&&(a=3),35676===i.type&&(a=4),r[s]={type:i.type,location:t.getAttribLocation(e,s),locationSize:a}}return r}(n,m)),S},this.destroy=function(){i.releaseStatesOfProgram(this),n.deleteProgram(m),this.program=void 0},this.name=r.shaderName,this.id=Dh++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=_,this.fragmentShader=b,this}let jh=0;class Xh{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,r=t.fragmentShader,i=this._getShaderStage(e),n=this._getShaderStage(r),s=this._getShaderCacheForMaterial(t);return!1===s.has(i)&&(s.add(i),i.usedTimes++),!1===s.has(n)&&(s.add(n),n.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const t of e)t.usedTimes--,0===t.usedTimes&&this.shaderCache.delete(t.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let r=e.get(t);return void 0===r&&(r=new Set,e.set(t,r)),r}_getShaderStage(t){const e=this.shaderCache;let r=e.get(t);return void 0===r&&(r=new qh(t),e.set(t,r)),r}}class qh{constructor(t){this.id=jh++,this.code=t,this.usedTimes=0}}function Yh(t,e,r,i,n,s,a){const o=new xa,l=new Xh,h=[],u=n.isWebGL2,c=n.logarithmicDepthBuffer,p=n.vertexTextures;let d=n.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(s,o,h,m,g){const v=m.fog,y=g.geometry,x=s.isMeshStandardMaterial?m.environment:null,_=(s.isMeshStandardMaterial?r:e).get(s.envMap||x),b=_&&_.mapping===$i?_.image.height:null,w=f[s.type];null!==s.precision&&(d=n.getMaxPrecision(s.precision),d!==s.precision&&console.warn("THREE.WebGLProgram.getParameters:",s.precision,"not supported, using",d,"instead."));const S=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,M=void 0!==S?S.length:0;let T,E,P,C,A=0;if(void 0!==y.morphAttributes.position&&(A=1),void 0!==y.morphAttributes.normal&&(A=2),void 0!==y.morphAttributes.color&&(A=3),w){const t=Yo[w];T=t.vertexShader,E=t.fragmentShader}else T=s.vertexShader,E=s.fragmentShader,l.update(s),P=l.getVertexShaderID(s),C=l.getFragmentShaderID(s);const D=t.getRenderTarget(),k=s.alphaTest>0,R=s.clearcoat>0,I=s.iridescence>0;return{isWebGL2:u,shaderID:w,shaderName:s.type,vertexShader:T,fragmentShader:E,defines:s.defines,customVertexShaderID:P,customFragmentShaderID:C,isRawShaderMaterial:!0===s.isRawShaderMaterial,glslVersion:s.glslVersion,precision:d,instancing:!0===g.isInstancedMesh,instancingColor:!0===g.isInstancedMesh&&null!==g.instanceColor,supportsVertexTextures:p,outputEncoding:null===D?t.outputEncoding:!0===D.isXRRenderTarget?D.texture.encoding:Vn,map:!!s.map,matcap:!!s.matcap,envMap:!!_,envMapMode:_&&_.mapping,envMapCubeUVHeight:b,lightMap:!!s.lightMap,aoMap:!!s.aoMap,emissiveMap:!!s.emissiveMap,bumpMap:!!s.bumpMap,normalMap:!!s.normalMap,objectSpaceNormalMap:1===s.normalMapType,tangentSpaceNormalMap:0===s.normalMapType,decodeVideoTexture:!!s.map&&!0===s.map.isVideoTexture&&s.map.encoding===Nn,clearcoat:R,clearcoatMap:R&&!!s.clearcoatMap,clearcoatRoughnessMap:R&&!!s.clearcoatRoughnessMap,clearcoatNormalMap:R&&!!s.clearcoatNormalMap,iridescence:I,iridescenceMap:I&&!!s.iridescenceMap,iridescenceThicknessMap:I&&!!s.iridescenceThicknessMap,displacementMap:!!s.displacementMap,roughnessMap:!!s.roughnessMap,metalnessMap:!!s.metalnessMap,specularMap:!!s.specularMap,specularIntensityMap:!!s.specularIntensityMap,specularColorMap:!!s.specularColorMap,opaque:!1===s.transparent&&1===s.blending,alphaMap:!!s.alphaMap,alphaTest:k,gradientMap:!!s.gradientMap,sheen:s.sheen>0,sheenColorMap:!!s.sheenColorMap,sheenRoughnessMap:!!s.sheenRoughnessMap,transmission:s.transmission>0,transmissionMap:!!s.transmissionMap,thicknessMap:!!s.thicknessMap,combine:s.combine,vertexTangents:!!s.normalMap&&!!y.attributes.tangent,vertexColors:s.vertexColors,vertexAlphas:!0===s.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,vertexUvs:!!(s.map||s.bumpMap||s.normalMap||s.specularMap||s.alphaMap||s.emissiveMap||s.roughnessMap||s.metalnessMap||s.clearcoatMap||s.clearcoatRoughnessMap||s.clearcoatNormalMap||s.iridescenceMap||s.iridescenceThicknessMap||s.displacementMap||s.transmissionMap||s.thicknessMap||s.specularIntensityMap||s.specularColorMap||s.sheenColorMap||s.sheenRoughnessMap),uvsVertexOnly:!(s.map||s.bumpMap||s.normalMap||s.specularMap||s.alphaMap||s.emissiveMap||s.roughnessMap||s.metalnessMap||s.clearcoatNormalMap||s.iridescenceMap||s.iridescenceThicknessMap||s.transmission>0||s.transmissionMap||s.thicknessMap||s.specularIntensityMap||s.specularColorMap||s.sheen>0||s.sheenColorMap||s.sheenRoughnessMap||!s.displacementMap),fog:!!v,useFog:!0===s.fog,fogExp2:v&&v.isFogExp2,flatShading:!!s.flatShading,sizeAttenuation:s.sizeAttenuation,logarithmicDepthBuffer:c,skinning:!0===g.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:M,morphTextureStride:A,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:s.dithering,shadowMapEnabled:t.shadowMap.enabled&&h.length>0,shadowMapType:t.shadowMap.type,toneMapping:s.toneMapped?t.toneMapping:0,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:s.premultipliedAlpha,doubleSided:2===s.side,flipSided:1===s.side,useDepthPacking:!!s.depthPacking,depthPacking:s.depthPacking||0,index0AttributeName:s.index0AttributeName,extensionDerivatives:s.extensions&&s.extensions.derivatives,extensionFragDepth:s.extensions&&s.extensions.fragDepth,extensionDrawBuffers:s.extensions&&s.extensions.drawBuffers,extensionShaderTextureLOD:s.extensions&&s.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:s.customProgramCacheKey()}},getProgramCacheKey:function(e){const r=[];if(e.shaderID?r.push(e.shaderID):(r.push(e.customVertexShaderID),r.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)r.push(t),r.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(function(t,e){t.push(e.precision),t.push(e.outputEncoding),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.combine),t.push(e.vertexUvs),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numSpotLightMaps),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.numSpotLightShadowsWithMaps),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}(r,e),function(t,e){o.disableAll(),e.isWebGL2&&o.enable(0),e.supportsVertexTextures&&o.enable(1),e.instancing&&o.enable(2),e.instancingColor&&o.enable(3),e.map&&o.enable(4),e.matcap&&o.enable(5),e.envMap&&o.enable(6),e.lightMap&&o.enable(7),e.aoMap&&o.enable(8),e.emissiveMap&&o.enable(9),e.bumpMap&&o.enable(10),e.normalMap&&o.enable(11),e.objectSpaceNormalMap&&o.enable(12),e.tangentSpaceNormalMap&&o.enable(13),e.clearcoat&&o.enable(14),e.clearcoatMap&&o.enable(15),e.clearcoatRoughnessMap&&o.enable(16),e.clearcoatNormalMap&&o.enable(17),e.iridescence&&o.enable(18),e.iridescenceMap&&o.enable(19),e.iridescenceThicknessMap&&o.enable(20),e.displacementMap&&o.enable(21),e.specularMap&&o.enable(22),e.roughnessMap&&o.enable(23),e.metalnessMap&&o.enable(24),e.gradientMap&&o.enable(25),e.alphaMap&&o.enable(26),e.alphaTest&&o.enable(27),e.vertexColors&&o.enable(28),e.vertexAlphas&&o.enable(29),e.vertexUvs&&o.enable(30),e.vertexTangents&&o.enable(31),e.uvsVertexOnly&&o.enable(32),t.push(o.mask),o.disableAll(),e.fog&&o.enable(0),e.useFog&&o.enable(1),e.flatShading&&o.enable(2),e.logarithmicDepthBuffer&&o.enable(3),e.skinning&&o.enable(4),e.morphTargets&&o.enable(5),e.morphNormals&&o.enable(6),e.morphColors&&o.enable(7),e.premultipliedAlpha&&o.enable(8),e.shadowMapEnabled&&o.enable(9),e.physicallyCorrectLights&&o.enable(10),e.doubleSided&&o.enable(11),e.flipSided&&o.enable(12),e.useDepthPacking&&o.enable(13),e.dithering&&o.enable(14),e.specularIntensityMap&&o.enable(15),e.specularColorMap&&o.enable(16),e.transmission&&o.enable(17),e.transmissionMap&&o.enable(18),e.thicknessMap&&o.enable(19),e.sheen&&o.enable(20),e.sheenColorMap&&o.enable(21),e.sheenRoughnessMap&&o.enable(22),e.decodeVideoTexture&&o.enable(23),e.opaque&&o.enable(24),t.push(o.mask)}(r,e),r.push(t.outputEncoding)),r.push(e.customProgramCacheKey),r.join()},getUniforms:function(t){const e=f[t.type];let r;if(e){const t=Yo[e];r=Co.clone(t.uniforms)}else r=t.uniforms;return r},acquireProgram:function(e,r){let i;for(let t=0,e=h.length;t<e;t++){const e=h[t];if(e.cacheKey===r){i=e,++i.usedTimes;break}}return void 0===i&&(i=new Uh(t,r,e,s),h.push(i)),i},releaseProgram:function(t){if(0==--t.usedTimes){const e=h.indexOf(t);h[e]=h[h.length-1],h.pop(),t.destroy()}},releaseShaderCache:function(t){l.remove(t)},programs:h,dispose:function(){l.dispose()}}}function Zh(){let t=new WeakMap;return{get:function(e){let r=t.get(e);return void 0===r&&(r={},t.set(e,r)),r},remove:function(e){t.delete(e)},update:function(e,r,i){t.get(e)[r]=i},dispose:function(){t=new WeakMap}}}function $h(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Jh(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Kh(){const t=[];let e=0;const r=[],i=[],n=[];function s(r,i,n,s,a,o){let l=t[e];return void 0===l?(l={id:r.id,object:r,geometry:i,material:n,groupOrder:s,renderOrder:r.renderOrder,z:a,group:o},t[e]=l):(l.id=r.id,l.object=r,l.geometry=i,l.material=n,l.groupOrder=s,l.renderOrder=r.renderOrder,l.z=a,l.group=o),e++,l}return{opaque:r,transmissive:i,transparent:n,init:function(){e=0,r.length=0,i.length=0,n.length=0},push:function(t,e,a,o,l,h){const u=s(t,e,a,o,l,h);a.transmission>0?i.push(u):!0===a.transparent?n.push(u):r.push(u)},unshift:function(t,e,a,o,l,h){const u=s(t,e,a,o,l,h);a.transmission>0?i.unshift(u):!0===a.transparent?n.unshift(u):r.unshift(u)},finish:function(){for(let r=e,i=t.length;r<i;r++){const e=t[r];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}},sort:function(t,e){r.length>1&&r.sort(t||$h),i.length>1&&i.sort(e||Jh),n.length>1&&n.sort(e||Jh)}}}function Qh(){let t=new WeakMap;return{get:function(e,r){const i=t.get(e);let n;return void 0===i?(n=new Kh,t.set(e,[n])):r>=i.length?(n=new Kh,i.push(n)):n=i[r],n},dispose:function(){t=new WeakMap}}}function tu(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let r;switch(e.type){case"DirectionalLight":r={direction:new Rs,color:new bs};break;case"SpotLight":r={position:new Rs,direction:new Rs,color:new bs,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new Rs,color:new bs,distance:0,decay:0};break;case"HemisphereLight":r={direction:new Rs,skyColor:new bs,groundColor:new bs};break;case"RectAreaLight":r={color:new bs,position:new Rs,halfWidth:new Rs,halfHeight:new Rs}}return t[e.id]=r,r}}}let eu=0;function ru(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function iu(t,e){const r=new tu,i=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let r;switch(e.type){case"DirectionalLight":case"SpotLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new as};break;case"PointLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new as,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=r,r}}}(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let t=0;t<9;t++)n.probe.push(new Rs);const s=new Rs,a=new la,o=new la;return{setup:function(s,a){let o=0,l=0,h=0;for(let t=0;t<9;t++)n.probe[t].set(0,0,0);let u=0,c=0,p=0,d=0,f=0,m=0,g=0,v=0,y=0,x=0;s.sort(ru);const _=!0!==a?Math.PI:1;for(let t=0,e=s.length;t<e;t++){const e=s[t],a=e.color,b=e.intensity,w=e.distance,S=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)o+=a.r*b*_,l+=a.g*b*_,h+=a.b*b*_;else if(e.isLightProbe)for(let t=0;t<9;t++)n.probe[t].addScaledVector(e.sh.coefficients[t],b);else if(e.isDirectionalLight){const t=r.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*_),e.castShadow){const t=e.shadow,r=i.get(e);r.shadowBias=t.bias,r.shadowNormalBias=t.normalBias,r.shadowRadius=t.radius,r.shadowMapSize=t.mapSize,n.directionalShadow[u]=r,n.directionalShadowMap[u]=S,n.directionalShadowMatrix[u]=e.shadow.matrix,m++}n.directional[u]=t,u++}else if(e.isSpotLight){const t=r.get(e);t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(a).multiplyScalar(b*_),t.distance=w,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,n.spot[p]=t;const s=e.shadow;if(e.map&&(n.spotLightMap[y]=e.map,y++,s.updateMatrices(e),e.castShadow&&x++),n.spotLightMatrix[p]=s.matrix,e.castShadow){const t=i.get(e);t.shadowBias=s.bias,t.shadowNormalBias=s.normalBias,t.shadowRadius=s.radius,t.shadowMapSize=s.mapSize,n.spotShadow[p]=t,n.spotShadowMap[p]=S,v++}p++}else if(e.isRectAreaLight){const t=r.get(e);t.color.copy(a).multiplyScalar(b),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),n.rectArea[d]=t,d++}else if(e.isPointLight){const t=r.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*_),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,r=i.get(e);r.shadowBias=t.bias,r.shadowNormalBias=t.normalBias,r.shadowRadius=t.radius,r.shadowMapSize=t.mapSize,r.shadowCameraNear=t.camera.near,r.shadowCameraFar=t.camera.far,n.pointShadow[c]=r,n.pointShadowMap[c]=S,n.pointShadowMatrix[c]=e.shadow.matrix,g++}n.point[c]=t,c++}else if(e.isHemisphereLight){const t=r.get(e);t.skyColor.copy(e.color).multiplyScalar(b*_),t.groundColor.copy(e.groundColor).multiplyScalar(b*_),n.hemi[f]=t,f++}}d>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(n.rectAreaLTC1=qo.LTC_FLOAT_1,n.rectAreaLTC2=qo.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(n.rectAreaLTC1=qo.LTC_HALF_1,n.rectAreaLTC2=qo.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),n.ambient[0]=o,n.ambient[1]=l,n.ambient[2]=h;const b=n.hash;(b.directionalLength!==u||b.pointLength!==c||b.spotLength!==p||b.rectAreaLength!==d||b.hemiLength!==f||b.numDirectionalShadows!==m||b.numPointShadows!==g||b.numSpotShadows!==v||b.numSpotMaps!==y)&&(n.directional.length=u,n.spot.length=p,n.rectArea.length=d,n.point.length=c,n.hemi.length=f,n.directionalShadow.length=m,n.directionalShadowMap.length=m,n.pointShadow.length=g,n.pointShadowMap.length=g,n.spotShadow.length=v,n.spotShadowMap.length=v,n.directionalShadowMatrix.length=m,n.pointShadowMatrix.length=g,n.spotLightMatrix.length=v+y-x,n.spotLightMap.length=y,n.numSpotLightShadowsWithMaps=x,b.directionalLength=u,b.pointLength=c,b.spotLength=p,b.rectAreaLength=d,b.hemiLength=f,b.numDirectionalShadows=m,b.numPointShadows=g,b.numSpotShadows=v,b.numSpotMaps=y,n.version=eu++)},setupView:function(t,e){let r=0,i=0,l=0,h=0,u=0;const c=e.matrixWorldInverse;for(let e=0,p=t.length;e<p;e++){const p=t[e];if(p.isDirectionalLight){const t=n.directional[r];t.direction.setFromMatrixPosition(p.matrixWorld),s.setFromMatrixPosition(p.target.matrixWorld),t.direction.sub(s),t.direction.transformDirection(c),r++}else if(p.isSpotLight){const t=n.spot[l];t.position.setFromMatrixPosition(p.matrixWorld),t.position.applyMatrix4(c),t.direction.setFromMatrixPosition(p.matrixWorld),s.setFromMatrixPosition(p.target.matrixWorld),t.direction.sub(s),t.direction.transformDirection(c),l++}else if(p.isRectAreaLight){const t=n.rectArea[h];t.position.setFromMatrixPosition(p.matrixWorld),t.position.applyMatrix4(c),o.identity(),a.copy(p.matrixWorld),a.premultiply(c),o.extractRotation(a),t.halfWidth.set(.5*p.width,0,0),t.halfHeight.set(0,.5*p.height,0),t.halfWidth.applyMatrix4(o),t.halfHeight.applyMatrix4(o),h++}else if(p.isPointLight){const t=n.point[i];t.position.setFromMatrixPosition(p.matrixWorld),t.position.applyMatrix4(c),i++}else if(p.isHemisphereLight){const t=n.hemi[u];t.direction.setFromMatrixPosition(p.matrixWorld),t.direction.transformDirection(c),u++}}},state:n}}function nu(t,e){const r=new iu(t,e),i=[],n=[];return{init:function(){i.length=0,n.length=0},state:{lightsArray:i,shadowsArray:n,lights:r},setupLights:function(t){r.setup(i,t)},setupLightsView:function(t){r.setupView(i,t)},pushLight:function(t){i.push(t)},pushShadow:function(t){n.push(t)}}}function su(t,e){let r=new WeakMap;return{get:function(i){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const s=r.get(i);let a;return void 0===s?(a=new nu(t,e),r.set(i,[a])):n>=s.length?(a=new nu(t,e),s.push(a)):a=s[n],a},dispose:function(){r=new WeakMap}}}class au extends Xa{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class ou extends Xa{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Rs,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function lu(t,e,r){let i=new Wo;const n=new as,s=new as,a=new Cs,o=new au({depthPacking:3201}),l=new ou,h={},u=r.maxTextureSize,c={0:1,1:0,2:2},p=new Ao({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new as},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=p.clone();d.defines.HORIZONTAL_PASS=1;const f=new oo;f.setAttribute("position",new $a(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new wo(f,p),g=this;function v(r,i){const s=e.update(m);p.defines.VSM_SAMPLES!==r.blurSamples&&(p.defines.VSM_SAMPLES=r.blurSamples,d.defines.VSM_SAMPLES=r.blurSamples,p.needsUpdate=!0,d.needsUpdate=!0),null===r.mapPass&&(r.mapPass=new As(n.x,n.y)),p.uniforms.shadow_pass.value=r.map.texture,p.uniforms.resolution.value=r.mapSize,p.uniforms.radius.value=r.radius,t.setRenderTarget(r.mapPass),t.clear(),t.renderBufferDirect(i,null,s,p,m,null),d.uniforms.shadow_pass.value=r.mapPass.texture,d.uniforms.resolution.value=r.mapSize,d.uniforms.radius.value=r.radius,t.setRenderTarget(r.map),t.clear(),t.renderBufferDirect(i,null,s,d,m,null)}function y(e,r,i,n,s,a){let u=null;const p=!0===i.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(void 0!==p)u=p;else if(u=!0===i.isPointLight?l:o,t.localClippingEnabled&&!0===r.clipShadows&&Array.isArray(r.clippingPlanes)&&0!==r.clippingPlanes.length||r.displacementMap&&0!==r.displacementScale||r.alphaMap&&r.alphaTest>0||r.map&&r.alphaTest>0){const t=u.uuid,e=r.uuid;let i=h[t];void 0===i&&(i={},h[t]=i);let n=i[e];void 0===n&&(n=u.clone(),i[e]=n),u=n}return u.visible=r.visible,u.wireframe=r.wireframe,u.side=3===a?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:c[r.side],u.alphaMap=r.alphaMap,u.alphaTest=r.alphaTest,u.map=r.map,u.clipShadows=r.clipShadows,u.clippingPlanes=r.clippingPlanes,u.clipIntersection=r.clipIntersection,u.displacementMap=r.displacementMap,u.displacementScale=r.displacementScale,u.displacementBias=r.displacementBias,u.wireframeLinewidth=r.wireframeLinewidth,u.linewidth=r.linewidth,!0===i.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(i.matrixWorld),u.nearDistance=n,u.farDistance=s),u}function x(r,n,s,a,o){if(!1===r.visible)return;if(r.layers.test(n.layers)&&(r.isMesh||r.isLine||r.isPoints)&&(r.castShadow||r.receiveShadow&&3===o)&&(!r.frustumCulled||i.intersectsObject(r))){r.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,r.matrixWorld);const i=e.update(r),n=r.material;if(Array.isArray(n)){const e=i.groups;for(let l=0,h=e.length;l<h;l++){const h=e[l],u=n[h.materialIndex];if(u&&u.visible){const e=y(r,u,a,s.near,s.far,o);t.renderBufferDirect(s,null,i,e,r,h)}}}else if(n.visible){const e=y(r,n,a,s.near,s.far,o);t.renderBufferDirect(s,null,i,e,r,null)}}const l=r.children;for(let t=0,e=l.length;t<e;t++)x(l[t],n,s,a,o)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(e,r,o){if(!1===g.enabled||!1===g.autoUpdate&&!1===g.needsUpdate||0===e.length)return;const l=t.getRenderTarget(),h=t.getActiveCubeFace(),c=t.getActiveMipmapLevel(),p=t.state;p.setBlending(0),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);for(let l=0,h=e.length;l<h;l++){const h=e[l],c=h.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",h,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;n.copy(c.mapSize);const d=c.getFrameExtents();if(n.multiply(d),s.copy(c.mapSize),(n.x>u||n.y>u)&&(n.x>u&&(s.x=Math.floor(u/d.x),n.x=s.x*d.x,c.mapSize.x=s.x),n.y>u&&(s.y=Math.floor(u/d.y),n.y=s.y*d.y,c.mapSize.y=s.y)),null===c.map){const t=3!==this.type?{minFilter:tn,magFilter:tn}:{};c.map=new As(n.x,n.y,t),c.map.texture.name=h.name+".shadowMap",c.camera.updateProjectionMatrix()}t.setRenderTarget(c.map),t.clear();const f=c.getViewportCount();for(let t=0;t<f;t++){const e=c.getViewport(t);a.set(s.x*e.x,s.y*e.y,s.x*e.z,s.y*e.w),p.viewport(a),c.updateMatrices(h,t),i=c.getFrustum(),x(r,o,c.camera,h,this.type)}!0!==c.isPointLightShadow&&3===this.type&&v(c,o),c.needsUpdate=!1}g.needsUpdate=!1,t.setRenderTarget(l,h,c)}}function hu(t,e,r){const i=r.isWebGL2;const n=new function(){let e=!1;const r=new Cs;let i=null;const n=new Cs(0,0,0,0);return{setMask:function(r){i!==r&&!e&&(t.colorMask(r,r,r,r),i=r)},setLocked:function(t){e=t},setClear:function(e,i,s,a,o){!0===o&&(e*=a,i*=a,s*=a),r.set(e,i,s,a),!1===n.equals(r)&&(t.clearColor(e,i,s,a),n.copy(r))},reset:function(){e=!1,i=null,n.set(-1,0,0,0)}}},s=new function(){let e=!1,r=null,i=null,n=null;return{setTest:function(t){t?N(2929):G(2929)},setMask:function(i){r!==i&&!e&&(t.depthMask(i),r=i)},setFunc:function(e){if(i!==e){switch(e){case 0:t.depthFunc(512);break;case 1:t.depthFunc(519);break;case 2:t.depthFunc(513);break;case 3:default:t.depthFunc(515);break;case 4:t.depthFunc(514);break;case 5:t.depthFunc(518);break;case 6:t.depthFunc(516);break;case 7:t.depthFunc(517)}i=e}},setLocked:function(t){e=t},setClear:function(e){n!==e&&(t.clearDepth(e),n=e)},reset:function(){e=!1,r=null,i=null,n=null}}},a=new function(){let e=!1,r=null,i=null,n=null,s=null,a=null,o=null,l=null,h=null;return{setTest:function(t){e||(t?N(2960):G(2960))},setMask:function(i){r!==i&&!e&&(t.stencilMask(i),r=i)},setFunc:function(e,r,a){(i!==e||n!==r||s!==a)&&(t.stencilFunc(e,r,a),i=e,n=r,s=a)},setOp:function(e,r,i){(a!==e||o!==r||l!==i)&&(t.stencilOp(e,r,i),a=e,o=r,l=i)},setLocked:function(t){e=t},setClear:function(e){h!==e&&(t.clearStencil(e),h=e)},reset:function(){e=!1,r=null,i=null,n=null,s=null,a=null,o=null,l=null,h=null}}},o=new WeakMap,l=new WeakMap;let h={},u={},c=new WeakMap,p=[],d=null,f=!1,m=null,g=null,v=null,y=null,x=null,_=null,b=null,w=!1,S=null,M=null,T=null,E=null,P=null;const C=t.getParameter(35661);let A=!1,D=0;const k=t.getParameter(7938);-1!==k.indexOf("WebGL")?(D=parseFloat(/^WebGL (\d)/.exec(k)[1]),A=D>=1):-1!==k.indexOf("OpenGL ES")&&(D=parseFloat(/^OpenGL ES (\d)/.exec(k)[1]),A=D>=2);let R=null,I={};const L=t.getParameter(3088),F=t.getParameter(2978),O=(new Cs).fromArray(L),z=(new Cs).fromArray(F);function B(e,r,i){const n=new Uint8Array(4),s=t.createTexture();t.bindTexture(e,s),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let e=0;e<i;e++)t.texImage2D(r+e,0,6408,1,1,0,6408,5121,n);return s}const V={};function N(e){!0!==h[e]&&(t.enable(e),h[e]=!0)}function G(e){!1!==h[e]&&(t.disable(e),h[e]=!1)}V[3553]=B(3553,3553,1),V[34067]=B(34067,34069,6),n.setClear(0,0,0,1),s.setClear(1),a.setClear(0),N(2929),s.setFunc(3),j(!1),X(1),N(2884),U(0);const W={[qi]:32774,101:32778,102:32779};if(i)W[103]=32775,W[104]=32776;else{const t=e.get("EXT_blend_minmax");null!==t&&(W[103]=t.MIN_EXT,W[104]=t.MAX_EXT)}const H={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function U(e,r,i,n,s,a,o,l){if(0!==e){if(!1===f&&(N(3042),f=!0),5===e)s=s||r,a=a||i,o=o||n,(r!==g||s!==x)&&(t.blendEquationSeparate(W[r],W[s]),g=r,x=s),(i!==v||n!==y||a!==_||o!==b)&&(t.blendFuncSeparate(H[i],H[n],H[a],H[o]),v=i,y=n,_=a,b=o),m=e,w=!1;else if(e!==m||l!==w){if((g!==qi||x!==qi)&&(t.blendEquation(32774),g=qi,x=qi),l)switch(e){case 1:t.blendFuncSeparate(1,771,1,771);break;case 2:t.blendFunc(1,1);break;case 3:t.blendFuncSeparate(0,769,0,1);break;case 4:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:t.blendFuncSeparate(770,771,1,771);break;case 2:t.blendFunc(770,1);break;case 3:t.blendFuncSeparate(0,769,0,1);break;case 4:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}v=null,y=null,_=null,b=null,m=e,w=l}}else!0===f&&(G(3042),f=!1)}function j(e){S!==e&&(e?t.frontFace(2304):t.frontFace(2305),S=e)}function X(e){0!==e?(N(2884),e!==M&&(1===e?t.cullFace(1029):2===e?t.cullFace(1028):t.cullFace(1032))):G(2884),M=e}function q(e,r,i){e?(N(32823),(E!==r||P!==i)&&(t.polygonOffset(r,i),E=r,P=i)):G(32823)}return{buffers:{color:n,depth:s,stencil:a},enable:N,disable:G,bindFramebuffer:function(e,r){return u[e]!==r&&(t.bindFramebuffer(e,r),u[e]=r,i&&(36009===e&&(u[36160]=r),36160===e&&(u[36009]=r)),!0)},drawBuffers:function(i,n){let s=p,a=!1;if(i)if(s=c.get(n),void 0===s&&(s=[],c.set(n,s)),i.isWebGLMultipleRenderTargets){const t=i.texture;if(s.length!==t.length||36064!==s[0]){for(let e=0,r=t.length;e<r;e++)s[e]=36064+e;s.length=t.length,a=!0}}else 36064!==s[0]&&(s[0]=36064,a=!0);else 1029!==s[0]&&(s[0]=1029,a=!0);a&&(r.isWebGL2?t.drawBuffers(s):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(s))},useProgram:function(e){return d!==e&&(t.useProgram(e),d=e,!0)},setBlending:U,setMaterial:function(t,e){2===t.side?G(2884):N(2884);let r=1===t.side;e&&(r=!r),j(r),1===t.blending&&!1===t.transparent?U(0):U(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),s.setFunc(t.depthFunc),s.setTest(t.depthTest),s.setMask(t.depthWrite),n.setMask(t.colorWrite);const i=t.stencilWrite;a.setTest(i),i&&(a.setMask(t.stencilWriteMask),a.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),a.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),q(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?N(32926):G(32926)},setFlipSided:j,setCullFace:X,setLineWidth:function(e){e!==T&&(A&&t.lineWidth(e),T=e)},setPolygonOffset:q,setScissorTest:function(t){t?N(3089):G(3089)},activeTexture:function(e){void 0===e&&(e=33984+C-1),R!==e&&(t.activeTexture(e),R=e)},bindTexture:function(e,r,i){void 0===i&&(i=null===R?33984+C-1:R);let n=I[i];void 0===n&&(n={type:void 0,texture:void 0},I[i]=n),(n.type!==e||n.texture!==r)&&(R!==i&&(t.activeTexture(i),R=i),t.bindTexture(e,r||V[e]),n.type=e,n.texture=r)},unbindTexture:function(){const e=I[R];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{t.compressedTexImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(e,r){let i=l.get(r);void 0===i&&(i=new WeakMap,l.set(r,i));let n=i.get(e);void 0===n&&(n=t.getUniformBlockIndex(r,e.name),i.set(e,n))},uniformBlockBinding:function(e,r){const i=l.get(r).get(e);o.get(r)!==i&&(t.uniformBlockBinding(r,i,e.__bindingPointIndex),o.set(r,i))},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===O.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),O.copy(e))},viewport:function(e){!1===z.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),z.copy(e))},reset:function(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===i&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),h={},R=null,I={},u={},c=new WeakMap,p=[],d=null,f=!1,m=null,g=null,v=null,y=null,x=null,_=null,b=null,w=!1,S=null,M=null,T=null,E=null,P=null,O.set(0,0,t.canvas.width,t.canvas.height),z.set(0,0,t.canvas.width,t.canvas.height),n.reset(),s.reset(),a.reset()}}}function uu(t,e,r,i,n,s,a){const o=n.isWebGL2,l=n.maxTextures,h=n.maxCubemapSize,u=n.maxTextureSize,c=n.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),f=new WeakMap;let m;const g=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function y(t,e){return v?new OffscreenCanvas(t,e):us("canvas")}function x(t,e,r,i){let n=1;if((t.width>i||t.height>i)&&(n=i/Math.max(t.width,t.height)),n<1||!0===e){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const i=e?is:Math.floor,s=i(n*t.width),a=i(n*t.height);void 0===m&&(m=y(s,a));const o=r?y(s,a):m;return o.width=s,o.height=a,o.getContext("2d").drawImage(t,0,0,s,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+s+"x"+a+")."),o}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function _(t){return rs(t.width)&&rs(t.height)}function b(t,e){return t.generateMipmaps&&e&&t.minFilter!==tn&&t.minFilter!==rn}function w(e){t.generateMipmap(e)}function S(r,i,n,s){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===o)return i;if(null!==r){if(void 0!==t[r])return t[r];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+r+"'")}let l=i;return 6403===i&&(5126===n&&(l=33326),5131===n&&(l=33325),5121===n&&(l=33321)),33319===i&&(5126===n&&(l=33328),5131===n&&(l=33327),5121===n&&(l=33323)),6408===i&&(5126===n&&(l=34836),5131===n&&(l=34842),5121===n&&(l=s===Nn&&!1===a?35907:32856),32819===n&&(l=32854),32820===n&&(l=32855)),(33325===l||33326===l||33327===l||33328===l||34842===l||34836===l)&&e.get("EXT_color_buffer_float"),l}function M(t,e,r){return!0===b(t,r)||t.isFramebufferTexture&&t.minFilter!==tn&&t.minFilter!==rn?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function T(t){return t===tn||1004===t||t===en?9728:9729}function E(t){const e=t.target;e.removeEventListener("dispose",E),function(t){const e=i.get(t);if(void 0===e.__webglInit)return;const r=t.source,n=g.get(r);if(n){const i=n[e.__cacheKey];i.usedTimes--,0===i.usedTimes&&C(t),0===Object.keys(n).length&&g.delete(r)}i.remove(t)}(e),e.isVideoTexture&&f.delete(e)}function P(e){const r=e.target;r.removeEventListener("dispose",P),function(e){const r=e.texture,n=i.get(e),s=i.get(r);if(void 0!==s.__webglTexture&&(t.deleteTexture(s.__webglTexture),a.memory.textures--),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(let e=0;e<6;e++)t.deleteFramebuffer(n.__webglFramebuffer[e]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[e]);else{if(t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&t.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let e=0;e<n.__webglColorRenderbuffer.length;e++)n.__webglColorRenderbuffer[e]&&t.deleteRenderbuffer(n.__webglColorRenderbuffer[e]);n.__webglDepthRenderbuffer&&t.deleteRenderbuffer(n.__webglDepthRenderbuffer)}if(e.isWebGLMultipleRenderTargets)for(let e=0,n=r.length;e<n;e++){const n=i.get(r[e]);n.__webglTexture&&(t.deleteTexture(n.__webglTexture),a.memory.textures--),i.remove(r[e])}i.remove(r),i.remove(e)}(r)}function C(e){const r=i.get(e);t.deleteTexture(r.__webglTexture);const n=e.source;delete g.get(n)[r.__cacheKey],a.memory.textures--}let A=0;function D(t,e){const n=i.get(t);if(t.isVideoTexture&&function(t){const e=a.render.frame;f.get(t)!==e&&(f.set(t,e),t.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&n.__version!==t.version){const r=t.image;if(null===r)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==r.complete)return void F(n,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}r.bindTexture(3553,n.__webglTexture,33984+e)}const k={[Ji]:10497,[Ki]:33071,[Qi]:33648},R={[tn]:9728,1004:9984,[en]:9986,[rn]:9729,1007:9985,[nn]:9987};function I(r,s,a){if(a?(t.texParameteri(r,10242,k[s.wrapS]),t.texParameteri(r,10243,k[s.wrapT]),(32879===r||35866===r)&&t.texParameteri(r,32882,k[s.wrapR]),t.texParameteri(r,10240,R[s.magFilter]),t.texParameteri(r,10241,R[s.minFilter])):(t.texParameteri(r,10242,33071),t.texParameteri(r,10243,33071),(32879===r||35866===r)&&t.texParameteri(r,32882,33071),(s.wrapS!==Ki||s.wrapT!==Ki)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(r,10240,T(s.magFilter)),t.texParameteri(r,10241,T(s.minFilter)),s.minFilter!==tn&&s.minFilter!==rn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const a=e.get("EXT_texture_filter_anisotropic");if(s.magFilter===tn||s.minFilter!==en&&s.minFilter!==nn||s.type===ln&&!1===e.has("OES_texture_float_linear")||!1===o&&s.type===hn&&!1===e.has("OES_texture_half_float_linear"))return;(s.anisotropy>1||i.get(s).__currentAnisotropy)&&(t.texParameterf(r,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,n.getMaxAnisotropy())),i.get(s).__currentAnisotropy=s.anisotropy)}}function L(e,r){let i=!1;void 0===e.__webglInit&&(e.__webglInit=!0,r.addEventListener("dispose",E));const n=r.source;let s=g.get(n);void 0===s&&(s={},g.set(n,s));const o=function(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.wrapR||0),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.encoding),e.join()}(r);if(o!==e.__cacheKey){void 0===s[o]&&(s[o]={texture:t.createTexture(),usedTimes:0},a.memory.textures++,i=!0),s[o].usedTimes++;const n=s[e.__cacheKey];void 0!==n&&(s[e.__cacheKey].usedTimes--,0===n.usedTimes&&C(r)),e.__cacheKey=o,e.__webglTexture=s[o].texture}return i}function F(e,n,a){let l=3553;(n.isDataArrayTexture||n.isCompressedArrayTexture)&&(l=35866),n.isData3DTexture&&(l=32879);const h=L(e,n),c=n.source;r.bindTexture(l,e.__webglTexture,33984+a);const p=i.get(c);if(c.version!==p.__version||!0===h){r.activeTexture(33984+a),t.pixelStorei(37440,n.flipY),t.pixelStorei(37441,n.premultiplyAlpha),t.pixelStorei(3317,n.unpackAlignment),t.pixelStorei(37443,0);const e=function(t){return!o&&(t.wrapS!==Ki||t.wrapT!==Ki||t.minFilter!==tn&&t.minFilter!==rn)}(n)&&!1===_(n.image);let i=x(n.image,e,!1,u);i=G(n,i);const d=_(i)||o,f=s.convert(n.format,n.encoding);let m,g=s.convert(n.type),v=S(n.internalFormat,f,g,n.encoding,n.isVideoTexture);I(l,n,d);const y=n.mipmaps,T=o&&!0!==n.isVideoTexture,E=void 0===p.__version||!0===h,P=M(n,i,d);if(n.isDepthTexture)v=6402,o?v=n.type===ln?36012:n.type===on?33190:n.type===un?35056:33189:n.type===ln&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),n.format===pn&&6402===v&&n.type!==an&&n.type!==on&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=on,g=s.convert(n.type)),n.format===dn&&6402===v&&(v=34041,n.type!==un&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=un,g=s.convert(n.type))),E&&(T?r.texStorage2D(3553,1,v,i.width,i.height):r.texImage2D(3553,0,v,i.width,i.height,0,f,g,null));else if(n.isDataTexture)if(y.length>0&&d){T&&E&&r.texStorage2D(3553,P,v,y[0].width,y[0].height);for(let t=0,e=y.length;t<e;t++)m=y[t],T?r.texSubImage2D(3553,t,0,0,m.width,m.height,f,g,m.data):r.texImage2D(3553,t,v,m.width,m.height,0,f,g,m.data);n.generateMipmaps=!1}else T?(E&&r.texStorage2D(3553,P,v,i.width,i.height),r.texSubImage2D(3553,0,0,0,i.width,i.height,f,g,i.data)):r.texImage2D(3553,0,v,i.width,i.height,0,f,g,i.data);else if(n.isCompressedTexture)if(n.isCompressedArrayTexture){T&&E&&r.texStorage3D(35866,P,v,y[0].width,y[0].height,i.depth);for(let t=0,e=y.length;t<e;t++)m=y[t],n.format!==cn?null!==f?T?r.compressedTexSubImage3D(35866,t,0,0,0,m.width,m.height,i.depth,f,m.data,0,0):r.compressedTexImage3D(35866,t,v,m.width,m.height,i.depth,0,m.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):T?r.texSubImage3D(35866,t,0,0,0,m.width,m.height,i.depth,f,g,m.data):r.texImage3D(35866,t,v,m.width,m.height,i.depth,0,f,g,m.data)}else{T&&E&&r.texStorage2D(3553,P,v,y[0].width,y[0].height);for(let t=0,e=y.length;t<e;t++)m=y[t],n.format!==cn?null!==f?T?r.compressedTexSubImage2D(3553,t,0,0,m.width,m.height,f,m.data):r.compressedTexImage2D(3553,t,v,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):T?r.texSubImage2D(3553,t,0,0,m.width,m.height,f,g,m.data):r.texImage2D(3553,t,v,m.width,m.height,0,f,g,m.data)}else if(n.isDataArrayTexture)T?(E&&r.texStorage3D(35866,P,v,i.width,i.height,i.depth),r.texSubImage3D(35866,0,0,0,0,i.width,i.height,i.depth,f,g,i.data)):r.texImage3D(35866,0,v,i.width,i.height,i.depth,0,f,g,i.data);else if(n.isData3DTexture)T?(E&&r.texStorage3D(32879,P,v,i.width,i.height,i.depth),r.texSubImage3D(32879,0,0,0,0,i.width,i.height,i.depth,f,g,i.data)):r.texImage3D(32879,0,v,i.width,i.height,i.depth,0,f,g,i.data);else if(n.isFramebufferTexture){if(E)if(T)r.texStorage2D(3553,P,v,i.width,i.height);else{let t=i.width,e=i.height;for(let i=0;i<P;i++)r.texImage2D(3553,i,v,t,e,0,f,g,null),t>>=1,e>>=1}}else if(y.length>0&&d){T&&E&&r.texStorage2D(3553,P,v,y[0].width,y[0].height);for(let t=0,e=y.length;t<e;t++)m=y[t],T?r.texSubImage2D(3553,t,0,0,f,g,m):r.texImage2D(3553,t,v,f,g,m);n.generateMipmaps=!1}else T?(E&&r.texStorage2D(3553,P,v,i.width,i.height),r.texSubImage2D(3553,0,0,0,f,g,i)):r.texImage2D(3553,0,v,f,g,i);b(n,d)&&w(l),p.__version=c.version,n.onUpdate&&n.onUpdate(n)}e.__version=n.version}function O(e,n,a,o,l){const h=s.convert(a.format,a.encoding),u=s.convert(a.type),c=S(a.internalFormat,h,u,a.encoding);i.get(n).__hasExternalTextures||(32879===l||35866===l?r.texImage3D(l,0,c,n.width,n.height,n.depth,0,h,u,null):r.texImage2D(l,0,c,n.width,n.height,0,h,u,null)),r.bindFramebuffer(36160,e),N(n)?p.framebufferTexture2DMultisampleEXT(36160,o,l,i.get(a).__webglTexture,0,V(n)):(3553===l||l>=34069&&l<=34074)&&t.framebufferTexture2D(36160,o,l,i.get(a).__webglTexture,0),r.bindFramebuffer(36160,null)}function z(e,r,i){if(t.bindRenderbuffer(36161,e),r.depthBuffer&&!r.stencilBuffer){let n=33189;if(i||N(r)){const e=r.depthTexture;e&&e.isDepthTexture&&(e.type===ln?n=36012:e.type===on&&(n=33190));const i=V(r);N(r)?p.renderbufferStorageMultisampleEXT(36161,i,n,r.width,r.height):t.renderbufferStorageMultisample(36161,i,n,r.width,r.height)}else t.renderbufferStorage(36161,n,r.width,r.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(r.depthBuffer&&r.stencilBuffer){const n=V(r);i&&!1===N(r)?t.renderbufferStorageMultisample(36161,n,35056,r.width,r.height):N(r)?p.renderbufferStorageMultisampleEXT(36161,n,35056,r.width,r.height):t.renderbufferStorage(36161,34041,r.width,r.height),t.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=!0===r.isWebGLMultipleRenderTargets?r.texture:[r.texture];for(let n=0;n<e.length;n++){const a=e[n],o=s.convert(a.format,a.encoding),l=s.convert(a.type),h=S(a.internalFormat,o,l,a.encoding),u=V(r);i&&!1===N(r)?t.renderbufferStorageMultisample(36161,u,h,r.width,r.height):N(r)?p.renderbufferStorageMultisampleEXT(36161,u,h,r.width,r.height):t.renderbufferStorage(36161,h,r.width,r.height)}}t.bindRenderbuffer(36161,null)}function B(e){const n=i.get(e),s=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!n.__autoAllocateDepthBuffer){if(s)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(36160,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(n.depthTexture).__webglTexture||n.depthTexture.image.width!==n.width||n.depthTexture.image.height!==n.height)&&(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),D(n.depthTexture,0);const s=i.get(n.depthTexture).__webglTexture,a=V(n);if(n.depthTexture.format===pn)N(n)?p.framebufferTexture2DMultisampleEXT(36160,36096,3553,s,0,a):t.framebufferTexture2D(36160,36096,3553,s,0);else{if(n.depthTexture.format!==dn)throw new Error("Unknown depthTexture format");N(n)?p.framebufferTexture2DMultisampleEXT(36160,33306,3553,s,0,a):t.framebufferTexture2D(36160,33306,3553,s,0)}}(n.__webglFramebuffer,e)}else if(s){n.__webglDepthbuffer=[];for(let i=0;i<6;i++)r.bindFramebuffer(36160,n.__webglFramebuffer[i]),n.__webglDepthbuffer[i]=t.createRenderbuffer(),z(n.__webglDepthbuffer[i],e,!1)}else r.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),z(n.__webglDepthbuffer,e,!1);r.bindFramebuffer(36160,null)}function V(t){return Math.min(c,t.samples)}function N(t){const r=i.get(t);return o&&t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==r.__useRenderToTexture}function G(t,r){const i=t.encoding,n=t.format,s=t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||t.format===Xn||i!==Vn&&(i===Nn?!1===o?!0===e.has("EXT_sRGB")&&n===cn?(t.format=Xn,t.minFilter=rn,t.generateMipmaps=!1):r=Ss.sRGBToLinear(r):(n!==cn||s!==sn)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",i)),r}this.allocateTextureUnit=function(){const t=A;return t>=l&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+l),A+=1,t},this.resetTextureUnits=function(){A=0},this.setTexture2D=D,this.setTexture2DArray=function(t,e){const n=i.get(t);t.version>0&&n.__version!==t.version?F(n,t,e):r.bindTexture(35866,n.__webglTexture,33984+e)},this.setTexture3D=function(t,e){const n=i.get(t);t.version>0&&n.__version!==t.version?F(n,t,e):r.bindTexture(32879,n.__webglTexture,33984+e)},this.setTextureCube=function(e,n){const a=i.get(e);e.version>0&&a.__version!==e.version?function(e,n,a){if(6!==n.image.length)return;const l=L(e,n),u=n.source;r.bindTexture(34067,e.__webglTexture,33984+a);const c=i.get(u);if(u.version!==c.__version||!0===l){r.activeTexture(33984+a),t.pixelStorei(37440,n.flipY),t.pixelStorei(37441,n.premultiplyAlpha),t.pixelStorei(3317,n.unpackAlignment),t.pixelStorei(37443,0);const e=n.isCompressedTexture||n.image[0].isCompressedTexture,i=n.image[0]&&n.image[0].isDataTexture,p=[];for(let t=0;t<6;t++)p[t]=e||i?i?n.image[t].image:n.image[t]:x(n.image[t],!1,!0,h),p[t]=G(n,p[t]);const d=p[0],f=_(d)||o,m=s.convert(n.format,n.encoding),g=s.convert(n.type),v=S(n.internalFormat,m,g,n.encoding),y=o&&!0!==n.isVideoTexture,T=void 0===c.__version||!0===l;let E,P=M(n,d,f);if(I(34067,n,f),e){y&&T&&r.texStorage2D(34067,P,v,d.width,d.height);for(let t=0;t<6;t++){E=p[t].mipmaps;for(let e=0;e<E.length;e++){const i=E[e];n.format!==cn?null!==m?y?r.compressedTexSubImage2D(34069+t,e,0,0,i.width,i.height,m,i.data):r.compressedTexImage2D(34069+t,e,v,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):y?r.texSubImage2D(34069+t,e,0,0,i.width,i.height,m,g,i.data):r.texImage2D(34069+t,e,v,i.width,i.height,0,m,g,i.data)}}}else{E=n.mipmaps,y&&T&&(E.length>0&&P++,r.texStorage2D(34067,P,v,p[0].width,p[0].height));for(let t=0;t<6;t++)if(i){y?r.texSubImage2D(34069+t,0,0,0,p[t].width,p[t].height,m,g,p[t].data):r.texImage2D(34069+t,0,v,p[t].width,p[t].height,0,m,g,p[t].data);for(let e=0;e<E.length;e++){const i=E[e].image[t].image;y?r.texSubImage2D(34069+t,e+1,0,0,i.width,i.height,m,g,i.data):r.texImage2D(34069+t,e+1,v,i.width,i.height,0,m,g,i.data)}}else{y?r.texSubImage2D(34069+t,0,0,0,m,g,p[t]):r.texImage2D(34069+t,0,v,m,g,p[t]);for(let e=0;e<E.length;e++){const i=E[e];y?r.texSubImage2D(34069+t,e+1,0,0,m,g,i.image[t]):r.texImage2D(34069+t,e+1,v,m,g,i.image[t])}}}b(n,f)&&w(34067),c.__version=u.version,n.onUpdate&&n.onUpdate(n)}e.__version=n.version}(a,e,n):r.bindTexture(34067,a.__webglTexture,33984+n)},this.rebindTextures=function(t,e,r){const n=i.get(t);void 0!==e&&O(n.__webglFramebuffer,t,t.texture,36064,3553),void 0!==r&&B(t)},this.setupRenderTarget=function(e){const l=e.texture,h=i.get(e),u=i.get(l);e.addEventListener("dispose",P),!0!==e.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=t.createTexture()),u.__version=l.version,a.memory.textures++);const c=!0===e.isWebGLCubeRenderTarget,p=!0===e.isWebGLMultipleRenderTargets,d=_(e)||o;if(c){h.__webglFramebuffer=[];for(let e=0;e<6;e++)h.__webglFramebuffer[e]=t.createFramebuffer()}else{if(h.__webglFramebuffer=t.createFramebuffer(),p)if(n.drawBuffers){const r=e.texture;for(let e=0,n=r.length;e<n;e++){const n=i.get(r[e]);void 0===n.__webglTexture&&(n.__webglTexture=t.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&e.samples>0&&!1===N(e)){const i=p?l:[l];h.__webglMultisampledFramebuffer=t.createFramebuffer(),h.__webglColorRenderbuffer=[],r.bindFramebuffer(36160,h.__webglMultisampledFramebuffer);for(let r=0;r<i.length;r++){const n=i[r];h.__webglColorRenderbuffer[r]=t.createRenderbuffer(),t.bindRenderbuffer(36161,h.__webglColorRenderbuffer[r]);const a=s.convert(n.format,n.encoding),o=s.convert(n.type),l=S(n.internalFormat,a,o,n.encoding,!0===e.isXRRenderTarget),u=V(e);t.renderbufferStorageMultisample(36161,u,l,e.width,e.height),t.framebufferRenderbuffer(36160,36064+r,36161,h.__webglColorRenderbuffer[r])}t.bindRenderbuffer(36161,null),e.depthBuffer&&(h.__webglDepthRenderbuffer=t.createRenderbuffer(),z(h.__webglDepthRenderbuffer,e,!0)),r.bindFramebuffer(36160,null)}}if(c){r.bindTexture(34067,u.__webglTexture),I(34067,l,d);for(let t=0;t<6;t++)O(h.__webglFramebuffer[t],e,l,36064,34069+t);b(l,d)&&w(34067),r.unbindTexture()}else if(p){const t=e.texture;for(let n=0,s=t.length;n<s;n++){const s=t[n],a=i.get(s);r.bindTexture(3553,a.__webglTexture),I(3553,s,d),O(h.__webglFramebuffer,e,s,36064+n,3553),b(s,d)&&w(3553)}r.unbindTexture()}else{let t=3553;(e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(o?t=e.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),r.bindTexture(t,u.__webglTexture),I(t,l,d),O(h.__webglFramebuffer,e,l,36064,t),b(l,d)&&w(t),r.unbindTexture()}e.depthBuffer&&B(e)},this.updateRenderTargetMipmap=function(t){const e=_(t)||o,n=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let s=0,a=n.length;s<a;s++){const a=n[s];if(b(a,e)){const e=t.isWebGLCubeRenderTarget?34067:3553,n=i.get(a).__webglTexture;r.bindTexture(e,n),w(e),r.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(o&&e.samples>0&&!1===N(e)){const n=e.isWebGLMultipleRenderTargets?e.texture:[e.texture],s=e.width,a=e.height;let o=16384;const l=[],h=e.stencilBuffer?33306:36096,u=i.get(e),c=!0===e.isWebGLMultipleRenderTargets;if(c)for(let e=0;e<n.length;e++)r.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+e,36161,null),r.bindFramebuffer(36160,u.__webglFramebuffer),t.framebufferTexture2D(36009,36064+e,3553,null,0);r.bindFramebuffer(36008,u.__webglMultisampledFramebuffer),r.bindFramebuffer(36009,u.__webglFramebuffer);for(let r=0;r<n.length;r++){l.push(36064+r),e.depthBuffer&&l.push(h);const p=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===p&&(e.depthBuffer&&(o|=256),e.stencilBuffer&&(o|=1024)),c&&t.framebufferRenderbuffer(36008,36064,36161,u.__webglColorRenderbuffer[r]),!0===p&&(t.invalidateFramebuffer(36008,[h]),t.invalidateFramebuffer(36009,[h])),c){const e=i.get(n[r]).__webglTexture;t.framebufferTexture2D(36009,36064,3553,e,0)}t.blitFramebuffer(0,0,s,a,0,0,s,a,o,9728),d&&t.invalidateFramebuffer(36008,l)}if(r.bindFramebuffer(36008,null),r.bindFramebuffer(36009,null),c)for(let e=0;e<n.length;e++){r.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+e,36161,u.__webglColorRenderbuffer[e]);const s=i.get(n[e]).__webglTexture;r.bindFramebuffer(36160,u.__webglFramebuffer),t.framebufferTexture2D(36009,36064+e,3553,s,0)}r.bindFramebuffer(36009,u.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=B,this.setupFrameBufferTexture=O,this.useMultisampledRTT=N}function cu(t,e,r){const i=r.isWebGL2;return{convert:function(r){let n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(r===sn)return 5121;if(1017===r)return 32819;if(1018===r)return 32820;if(1010===r)return 5120;if(1011===r)return 5122;if(r===an)return 5123;if(1013===r)return 5124;if(r===on)return 5125;if(r===ln)return 5126;if(r===hn)return i?5131:(n=e.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(1021===r)return 6406;if(r===cn)return 6408;if(1024===r)return 6409;if(1025===r)return 6410;if(r===pn)return 6402;if(r===dn)return 34041;if(1022===r)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(r===Xn)return n=e.get("EXT_sRGB"),null!==n?n.SRGB_ALPHA_EXT:null;if(1028===r)return 6403;if(1029===r)return 36244;if(1030===r)return 33319;if(1031===r)return 33320;if(1033===r)return 36249;if(r===fn||r===mn||r===gn||r===vn)if(s===Nn){if(n=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===n)return null;if(r===fn)return n.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===mn)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===gn)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===vn)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(n=e.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(r===fn)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===mn)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===gn)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===vn)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(r===yn||r===xn||r===_n||r===bn){if(n=e.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(r===yn)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===xn)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===_n)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===bn)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===r)return n=e.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if(r===wn||r===Sn){if(n=e.get("WEBGL_compressed_texture_etc"),null===n)return null;if(r===wn)return s===Nn?n.COMPRESSED_SRGB8_ETC2:n.COMPRESSED_RGB8_ETC2;if(r===Sn)return s===Nn?n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:n.COMPRESSED_RGBA8_ETC2_EAC}if(r===Mn||r===Tn||r===En||r===Pn||r===Cn||r===An||r===Dn||r===kn||r===Rn||r===In||r===Ln||r===Fn||r===On||r===zn){if(n=e.get("WEBGL_compressed_texture_astc"),null===n)return null;if(r===Mn)return s===Nn?n.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:n.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===Tn)return s===Nn?n.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:n.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===En)return s===Nn?n.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:n.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===Pn)return s===Nn?n.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:n.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===Cn)return s===Nn?n.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:n.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===An)return s===Nn?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:n.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===Dn)return s===Nn?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:n.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===kn)return s===Nn?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:n.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===Rn)return s===Nn?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:n.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===In)return s===Nn?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:n.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===Ln)return s===Nn?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:n.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===Fn)return s===Nn?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:n.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===On)return s===Nn?n.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:n.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===zn)return s===Nn?n.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:n.COMPRESSED_RGBA_ASTC_12x12_KHR}if(r===Bn){if(n=e.get("EXT_texture_compression_bptc"),null===n)return null;if(r===Bn)return s===Nn?n.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:n.COMPRESSED_RGBA_BPTC_UNORM_EXT}return r===un?i?34042:(n=e.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0!==t[r]?t[r]:null}}}class pu extends ko{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isArrayCamera=!0,this.cameras=t}}class du extends Ia{constructor(){super(),this.isGroup=!0,this.type="Group"}}const fu={type:"move"};class mu{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new du,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new du,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Rs,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Rs),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new du,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Rs,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Rs),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const r of t.hand.values())this._getHandJoint(e,r)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,r){let i=null,n=null,s=null;const a=this._targetRay,o=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(l&&t.hand){s=!0;for(const i of t.hand.values()){const t=e.getJointPose(i,r),n=this._getHandJoint(l,i);null!==t&&(n.matrix.fromArray(t.transform.matrix),n.matrix.decompose(n.position,n.rotation,n.scale),n.jointRadius=t.radius),n.visible=null!==t}const i=l.joints["index-finger-tip"],n=l.joints["thumb-tip"],a=i.position.distanceTo(n.position),o=.02,h=.005;l.inputState.pinching&&a>o+h?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&a<=o-h&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==o&&t.gripSpace&&(n=e.getPose(t.gripSpace,r),null!==n&&(o.matrix.fromArray(n.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),n.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(n.linearVelocity)):o.hasLinearVelocity=!1,n.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(n.angularVelocity)):o.hasAngularVelocity=!1));null!==a&&(i=e.getPose(t.targetRaySpace,r),null===i&&null!==n&&(i=n),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(fu)))}return null!==a&&(a.visible=null!==i),null!==o&&(o.visible=null!==n),null!==l&&(l.visible=null!==s),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){const r=new du;r.matrixAutoUpdate=!1,r.visible=!1,t.joints[e.jointName]=r,t.add(r)}return t.joints[e.jointName]}}class gu extends Ps{constructor(t,e,r,i,n,s,a,o,l,h){if((h=void 0!==h?h:pn)!==pn&&h!==dn)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&h===pn&&(r=on),void 0===r&&h===dn&&(r=un),super(null,i,n,s,a,o,h,r,l),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==a?a:tn,this.minFilter=void 0!==o?o:tn,this.flipY=!1,this.generateMipmaps=!1}}class vu extends qn{constructor(t,e){super();const r=this;let i=null,n=1,s=null,a="local-floor",o=null,l=null,h=null,u=null,c=null,p=null;const d=e.getContextAttributes();let f=null,m=null;const g=[],v=[],y=new Set,x=new Map,_=new ko;_.layers.enable(1),_.viewport=new Cs;const b=new ko;b.layers.enable(2),b.viewport=new Cs;const w=[_,b],S=new pu;S.layers.enable(1),S.layers.enable(2);let M=null,T=null;function E(t){const e=v.indexOf(t.inputSource);if(-1===e)return;const r=g[e];void 0!==r&&r.dispatchEvent({type:t.type,data:t.inputSource})}function P(){i.removeEventListener("select",E),i.removeEventListener("selectstart",E),i.removeEventListener("selectend",E),i.removeEventListener("squeeze",E),i.removeEventListener("squeezestart",E),i.removeEventListener("squeezeend",E),i.removeEventListener("end",P),i.removeEventListener("inputsourceschange",C);for(let t=0;t<g.length;t++){const e=v[t];null!==e&&(v[t]=null,g[t].disconnect(e))}M=null,T=null,t.setRenderTarget(f),c=null,u=null,h=null,i=null,m=null,I.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}function C(t){for(let e=0;e<t.removed.length;e++){const r=t.removed[e],i=v.indexOf(r);i>=0&&(v[i]=null,g[i].disconnect(r))}for(let e=0;e<t.added.length;e++){const r=t.added[e];let i=v.indexOf(r);if(-1===i){for(let t=0;t<g.length;t++){if(t>=v.length){v.push(r),i=t;break}if(null===v[t]){v[t]=r,i=t;break}}if(-1===i)break}const n=g[i];n&&n.connect(r)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=g[t];return void 0===e&&(e=new mu,g[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=g[t];return void 0===e&&(e=new mu,g[t]=e),e.getGripSpace()},this.getHand=function(t){let e=g[t];return void 0===e&&(e=new mu,g[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){n=t,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){a=t,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o||s},this.setReferenceSpace=function(t){o=t},this.getBaseLayer=function(){return null!==u?u:c},this.getBinding=function(){return h},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(l){if(i=l,null!==i){if(f=t.getRenderTarget(),i.addEventListener("select",E),i.addEventListener("selectstart",E),i.addEventListener("selectend",E),i.addEventListener("squeeze",E),i.addEventListener("squeezestart",E),i.addEventListener("squeezeend",E),i.addEventListener("end",P),i.addEventListener("inputsourceschange",C),!0!==d.xrCompatible&&await e.makeXRCompatible(),void 0===i.renderState.layers||!1===t.capabilities.isWebGL2){const r={antialias:void 0!==i.renderState.layers||d.antialias,alpha:d.alpha,depth:d.depth,stencil:d.stencil,framebufferScaleFactor:n};c=new XRWebGLLayer(i,e,r),i.updateRenderState({baseLayer:c}),m=new As(c.framebufferWidth,c.framebufferHeight,{format:cn,type:sn,encoding:t.outputEncoding,stencilBuffer:d.stencil})}else{let r=null,s=null,a=null;d.depth&&(a=d.stencil?35056:33190,r=d.stencil?dn:pn,s=d.stencil?un:on);const o={colorFormat:32856,depthFormat:a,scaleFactor:n};h=new XRWebGLBinding(i,e),u=h.createProjectionLayer(o),i.updateRenderState({layers:[u]}),m=new As(u.textureWidth,u.textureHeight,{format:cn,type:sn,depthTexture:new gu(u.textureWidth,u.textureHeight,s,void 0,void 0,void 0,void 0,void 0,void 0,r),stencilBuffer:d.stencil,encoding:t.outputEncoding,samples:d.antialias?4:0});t.properties.get(m).__ignoreDepthValues=u.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),o=null,s=await i.requestReferenceSpace(a),I.setContext(i),I.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};const A=new Rs,D=new Rs;function k(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===i)return;S.near=b.near=_.near=t.near,S.far=b.far=_.far=t.far,(M!==S.near||T!==S.far)&&(i.updateRenderState({depthNear:S.near,depthFar:S.far}),M=S.near,T=S.far);const e=t.parent,r=S.cameras;k(S,e);for(let t=0;t<r.length;t++)k(r[t],e);S.matrixWorld.decompose(S.position,S.quaternion,S.scale),t.matrix.copy(S.matrix),t.matrix.decompose(t.position,t.quaternion,t.scale);const n=t.children;for(let t=0,e=n.length;t<e;t++)n[t].updateMatrixWorld(!0);2===r.length?function(t,e,r){A.setFromMatrixPosition(e.matrixWorld),D.setFromMatrixPosition(r.matrixWorld);const i=A.distanceTo(D),n=e.projectionMatrix.elements,s=r.projectionMatrix.elements,a=n[14]/(n[10]-1),o=n[14]/(n[10]+1),l=(n[9]+1)/n[5],h=(n[9]-1)/n[5],u=(n[8]-1)/n[0],c=(s[8]+1)/s[0],p=a*u,d=a*c,f=i/(-u+c),m=f*-u;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const g=a+f,v=o+f,y=p-m,x=d+(i-m),_=l*o/v*g,b=h*o/v*g;t.projectionMatrix.makePerspective(y,x,_,b,g,v)}(S,_,b):S.projectionMatrix.copy(_.projectionMatrix)},this.getCamera=function(){return S},this.getFoveation=function(){return null!==u?u.fixedFoveation:null!==c?c.fixedFoveation:void 0},this.setFoveation=function(t){null!==u&&(u.fixedFoveation=t),null!==c&&void 0!==c.fixedFoveation&&(c.fixedFoveation=t)},this.getPlanes=function(){return y};let R=null;const I=new Ho;I.setAnimationLoop((function(e,i){if(l=i.getViewerPose(o||s),p=i,null!==l){const e=l.views;null!==c&&(t.setRenderTargetFramebuffer(m,c.framebuffer),t.setRenderTarget(m));let r=!1;e.length!==S.cameras.length&&(S.cameras.length=0,r=!0);for(let i=0;i<e.length;i++){const n=e[i];let s=null;if(null!==c)s=c.getViewport(n);else{const e=h.getViewSubImage(u,n);s=e.viewport,0===i&&(t.setRenderTargetTextures(m,e.colorTexture,u.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(m))}let a=w[i];void 0===a&&(a=new ko,a.layers.enable(i),a.viewport=new Cs,w[i]=a),a.matrix.fromArray(n.transform.matrix),a.projectionMatrix.fromArray(n.projectionMatrix),a.viewport.set(s.x,s.y,s.width,s.height),0===i&&S.matrix.copy(a.matrix),!0===r&&S.cameras.push(a)}}for(let t=0;t<g.length;t++){const e=v[t],r=g[t];null!==e&&void 0!==r&&r.update(e,i,o||s)}if(R&&R(e,i),i.detectedPlanes){r.dispatchEvent({type:"planesdetected",data:i.detectedPlanes});let t=null;for(const e of y)i.detectedPlanes.has(e)||(null===t&&(t=[]),t.push(e));if(null!==t)for(const e of t)y.delete(e),x.delete(e),r.dispatchEvent({type:"planeremoved",data:e});for(const t of i.detectedPlanes)if(y.has(t)){const e=x.get(t);t.lastChangedTime>e&&(x.set(t,t.lastChangedTime),r.dispatchEvent({type:"planechanged",data:t}))}else y.add(t),x.set(t,i.lastChangedTime),r.dispatchEvent({type:"planeadded",data:t})}p=null})),this.setAnimationLoop=function(t){R=t},this.dispose=function(){}}}function yu(t,e){function r(r,i){r.opacity.value=i.opacity,i.color&&r.diffuse.value.copy(i.color),i.emissive&&r.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(r.map.value=i.map),i.alphaMap&&(r.alphaMap.value=i.alphaMap),i.bumpMap&&(r.bumpMap.value=i.bumpMap,r.bumpScale.value=i.bumpScale,1===i.side&&(r.bumpScale.value*=-1)),i.displacementMap&&(r.displacementMap.value=i.displacementMap,r.displacementScale.value=i.displacementScale,r.displacementBias.value=i.displacementBias),i.emissiveMap&&(r.emissiveMap.value=i.emissiveMap),i.normalMap&&(r.normalMap.value=i.normalMap,r.normalScale.value.copy(i.normalScale),1===i.side&&r.normalScale.value.negate()),i.specularMap&&(r.specularMap.value=i.specularMap),i.alphaTest>0&&(r.alphaTest.value=i.alphaTest);const n=e.get(i).envMap;if(n&&(r.envMap.value=n,r.flipEnvMap.value=n.isCubeTexture&&!1===n.isRenderTargetTexture?-1:1,r.reflectivity.value=i.reflectivity,r.ior.value=i.ior,r.refractionRatio.value=i.refractionRatio),i.lightMap){r.lightMap.value=i.lightMap;const e=!0!==t.physicallyCorrectLights?Math.PI:1;r.lightMapIntensity.value=i.lightMapIntensity*e}let s,a;i.aoMap&&(r.aoMap.value=i.aoMap,r.aoMapIntensity.value=i.aoMapIntensity),i.map?s=i.map:i.specularMap?s=i.specularMap:i.displacementMap?s=i.displacementMap:i.normalMap?s=i.normalMap:i.bumpMap?s=i.bumpMap:i.roughnessMap?s=i.roughnessMap:i.metalnessMap?s=i.metalnessMap:i.alphaMap?s=i.alphaMap:i.emissiveMap?s=i.emissiveMap:i.clearcoatMap?s=i.clearcoatMap:i.clearcoatNormalMap?s=i.clearcoatNormalMap:i.clearcoatRoughnessMap?s=i.clearcoatRoughnessMap:i.iridescenceMap?s=i.iridescenceMap:i.iridescenceThicknessMap?s=i.iridescenceThicknessMap:i.specularIntensityMap?s=i.specularIntensityMap:i.specularColorMap?s=i.specularColorMap:i.transmissionMap?s=i.transmissionMap:i.thicknessMap?s=i.thicknessMap:i.sheenColorMap?s=i.sheenColorMap:i.sheenRoughnessMap&&(s=i.sheenRoughnessMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),r.uvTransform.value.copy(s.matrix)),i.aoMap?a=i.aoMap:i.lightMap&&(a=i.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),r.uv2Transform.value.copy(a.matrix))}return{refreshFogUniforms:function(e,r){r.color.getRGB(e.fogColor.value,Po(t)),r.isFog?(e.fogNear.value=r.near,e.fogFar.value=r.far):r.isFogExp2&&(e.fogDensity.value=r.density)},refreshMaterialUniforms:function(t,i,n,s,a){i.isMeshBasicMaterial||i.isMeshLambertMaterial?r(t,i):i.isMeshToonMaterial?(r(t,i),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(t,i)):i.isMeshPhongMaterial?(r(t,i),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}(t,i)):i.isMeshStandardMaterial?(r(t,i),function(t,r){t.roughness.value=r.roughness,t.metalness.value=r.metalness,r.roughnessMap&&(t.roughnessMap.value=r.roughnessMap),r.metalnessMap&&(t.metalnessMap.value=r.metalnessMap),e.get(r).envMap&&(t.envMapIntensity.value=r.envMapIntensity)}(t,i),i.isMeshPhysicalMaterial&&function(t,e,r){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap)),e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,1===e.side&&t.clearcoatNormalScale.value.negate())),e.iridescence>0&&(t.iridescence.value=e.iridescence,t.iridescenceIOR.value=e.iridescenceIOR,t.iridescenceThicknessMinimum.value=e.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=e.iridescenceThicknessRange[1],e.iridescenceMap&&(t.iridescenceMap.value=e.iridescenceMap),e.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=e.iridescenceThicknessMap)),e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=r.texture,t.transmissionSamplerSize.value.set(r.width,r.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor)),t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap)}(t,i,a)):i.isMeshMatcapMaterial?(r(t,i),function(t,e){e.matcap&&(t.matcap.value=e.matcap)}(t,i)):i.isMeshDepthMaterial?r(t,i):i.isMeshDistanceMaterial?(r(t,i),function(t,e){t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,i)):i.isMeshNormalMaterial?r(t,i):i.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,i),i.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,i)):i.isPointsMaterial?function(t,e,r,i){let n;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*r,t.scale.value=.5*i,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest),e.map?n=e.map:e.alphaMap&&(n=e.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,i,n,s):i.isSpriteMaterial?function(t,e){let r;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest),e.map?r=e.map:e.alphaMap&&(r=e.alphaMap),void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix))}(t,i):i.isShadowMaterial?(t.color.value.copy(i.color),t.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function xu(t,e,r,i){let n={},s={},a=[];const o=r.isWebGL2?t.getParameter(35375):0;function l(t,e,r){const i=t.value;if(void 0===r[e]){if("number"==typeof i)r[e]=i;else{const t=Array.isArray(i)?i:[i],n=[];for(let e=0;e<t.length;e++)n.push(t[e].clone());r[e]=n}return!0}if("number"==typeof i){if(r[e]!==i)return r[e]=i,!0}else{const t=Array.isArray(r[e])?r[e]:[r[e]],n=Array.isArray(i)?i:[i];for(let e=0;e<t.length;e++){const r=t[e];if(!1===r.equals(n[e]))return r.copy(n[e]),!0}}return!1}function h(t){const e={boundary:0,storage:0};return"number"==typeof t?(e.boundary=4,e.storage=4):t.isVector2?(e.boundary=8,e.storage=8):t.isVector3||t.isColor?(e.boundary=16,e.storage=12):t.isVector4?(e.boundary=16,e.storage=16):t.isMatrix3?(e.boundary=48,e.storage=48):t.isMatrix4?(e.boundary=64,e.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),e}function u(e){const r=e.target;r.removeEventListener("dispose",u);const i=a.indexOf(r.__bindingPointIndex);a.splice(i,1),t.deleteBuffer(n[r.id]),delete n[r.id],delete s[r.id]}return{bind:function(t,e){const r=e.program;i.uniformBlockBinding(t,r)},update:function(r,c){let p=n[r.id];void 0===p&&(function(t){const e=t.uniforms;let r=0;const i=16;let n=0;for(let t=0,s=e.length;t<s;t++){const s=e[t],a={boundary:0,storage:0},o=Array.isArray(s.value)?s.value:[s.value];for(let t=0,e=o.length;t<e;t++){const e=h(o[t]);a.boundary+=e.boundary,a.storage+=e.storage}if(s.__data=new Float32Array(a.storage/Float32Array.BYTES_PER_ELEMENT),s.__offset=r,t>0){n=r%i;0!==n&&i-n-a.boundary<0&&(r+=i-n,s.__offset=r)}r+=a.storage}n=r%i,n>0&&(r+=i-n),t.__size=r,t.__cache={}}(r),p=function(e){const r=function(){for(let t=0;t<o;t++)if(-1===a.indexOf(t))return a.push(t),t;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();e.__bindingPointIndex=r;const i=t.createBuffer(),n=e.__size,s=e.usage;return t.bindBuffer(35345,i),t.bufferData(35345,n,s),t.bindBuffer(35345,null),t.bindBufferBase(35345,r,i),i}(r),n[r.id]=p,r.addEventListener("dispose",u));const d=c.program;i.updateUBOMapping(r,d);const f=e.render.frame;s[r.id]!==f&&(function(e){const r=n[e.id],i=e.uniforms,s=e.__cache;t.bindBuffer(35345,r);for(let e=0,r=i.length;e<r;e++){const r=i[e];if(!0===l(r,e,s)){const e=r.__offset,i=Array.isArray(r.value)?r.value:[r.value];let n=0;for(let s=0;s<i.length;s++){const a=i[s],o=h(a);"number"==typeof a?(r.__data[0]=a,t.bufferSubData(35345,e+n,r.__data)):a.isMatrix3?(r.__data[0]=a.elements[0],r.__data[1]=a.elements[1],r.__data[2]=a.elements[2],r.__data[3]=a.elements[0],r.__data[4]=a.elements[3],r.__data[5]=a.elements[4],r.__data[6]=a.elements[5],r.__data[7]=a.elements[0],r.__data[8]=a.elements[6],r.__data[9]=a.elements[7],r.__data[10]=a.elements[8],r.__data[11]=a.elements[0]):(a.toArray(r.__data,n),n+=o.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(35345,e,r.__data)}}t.bindBuffer(35345,null)}(r),s[r.id]=f)},dispose:function(){for(const e in n)t.deleteBuffer(n[e]);a=[],n={},s={}}}}function _u(){const t=us("canvas");return t.style.display="block",t}function bu(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isWebGLRenderer=!0;const e=void 0!==t.canvas?t.canvas:_u(),r=void 0!==t.context?t.context:null,i=void 0===t.depth||t.depth,n=void 0===t.stencil||t.stencil,s=void 0!==t.antialias&&t.antialias,a=void 0===t.premultipliedAlpha||t.premultipliedAlpha,o=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,l=void 0!==t.powerPreference?t.powerPreference:"default",h=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let u;u=null!==r?r.getContextAttributes().alpha:void 0!==t.alpha&&t.alpha;let c=null,p=null;const d=[],f=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Vn,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const m=this;let g=!1,v=0,y=0,x=null,_=-1,b=null;const w=new Cs,S=new Cs;let M=null,T=e.width,E=e.height,P=1,C=null,A=null;const D=new Cs(0,0,T,E),k=new Cs(0,0,T,E);let R=!1;const I=new Wo;let L=!1,F=!1,O=null;const z=new la,B=new as,V=new Rs,N={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function G(){return null===x?P:1}let W,H,U,j,X,q,Y,Z,$,J,K,Q,tt,et,rt,it,nt,st,at,ot,lt,ht,ut,ct,pt=r;function dt(t,r){for(let i=0;i<t.length;i++){const n=t[i],s=e.getContext(n,r);if(null!==s)return s}return null}try{const t={alpha:!0,depth:i,stencil:n,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:o,powerPreference:l,failIfMajorPerformanceCaveat:h};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Xi}`),e.addEventListener("webglcontextlost",gt,!1),e.addEventListener("webglcontextrestored",vt,!1),e.addEventListener("webglcontextcreationerror",yt,!1),null===pt){const e=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&e.shift(),pt=dt(e,t),null===pt)throw dt(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===pt.getShaderPrecisionFormat&&(pt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function ft(){W=new vl(pt),H=new Qo(pt,W,t),W.init(H),ht=new cu(pt,W,H),U=new hu(pt,W,H),j=new _l,X=new Zh,q=new uu(pt,W,U,X,H,ht,j),Y=new el(m),Z=new gl(m),$=new Uo(pt,H),ut=new Jo(pt,W,$,H),J=new yl(pt,$,j,ut),K=new Ml(pt,J,$,j),at=new Sl(pt,H,q),it=new tl(X),Q=new Yh(m,Y,Z,W,H,ut,it),tt=new yu(m,X),et=new Qh,rt=new su(W,H),st=new $o(m,Y,Z,U,K,u,a),nt=new lu(m,K,H),ct=new xu(pt,j,H,U),ot=new Ko(pt,W,j,H),lt=new xl(pt,W,j,H),j.programs=Q.programs,m.capabilities=H,m.extensions=W,m.properties=X,m.renderLists=et,m.shadowMap=nt,m.state=U,m.info=j}ft();const mt=new vu(m,pt);function gt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function vt(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const t=j.autoReset,e=nt.enabled,r=nt.autoUpdate,i=nt.needsUpdate,n=nt.type;ft(),j.autoReset=t,nt.enabled=e,nt.autoUpdate=r,nt.needsUpdate=i,nt.type=n}function yt(t){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",t.statusMessage)}function xt(t){const e=t.target;e.removeEventListener("dispose",xt),_t(e)}function _t(t){bt(t),X.remove(t)}function bt(t){const e=X.get(t).programs;void 0!==e&&(e.forEach((function(t){Q.releaseProgram(t)})),t.isShaderMaterial&&Q.releaseShaderCache(t))}this.xr=mt,this.getContext=function(){return pt},this.getContextAttributes=function(){return pt.getContextAttributes()},this.forceContextLoss=function(){const t=W.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=W.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return P},this.setPixelRatio=function(t){void 0!==t&&(P=t,this.setSize(T,E,!1))},this.getSize=function(t){return t.set(T,E)},this.setSize=function(t,r,i){mt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(T=t,E=r,e.width=Math.floor(t*P),e.height=Math.floor(r*P),!1!==i&&(e.style.width=t+"px",e.style.height=r+"px"),this.setViewport(0,0,t,r))},this.getDrawingBufferSize=function(t){return t.set(T*P,E*P).floor()},this.setDrawingBufferSize=function(t,r,i){T=t,E=r,P=i,e.width=Math.floor(t*i),e.height=Math.floor(r*i),this.setViewport(0,0,t,r)},this.getCurrentViewport=function(t){return t.copy(w)},this.getViewport=function(t){return t.copy(D)},this.setViewport=function(t,e,r,i){t.isVector4?D.set(t.x,t.y,t.z,t.w):D.set(t,e,r,i),U.viewport(w.copy(D).multiplyScalar(P).floor())},this.getScissor=function(t){return t.copy(k)},this.setScissor=function(t,e,r,i){t.isVector4?k.set(t.x,t.y,t.z,t.w):k.set(t,e,r,i),U.scissor(S.copy(k).multiplyScalar(P).floor())},this.getScissorTest=function(){return R},this.setScissorTest=function(t){U.setScissorTest(R=t)},this.setOpaqueSort=function(t){C=t},this.setTransparentSort=function(t){A=t},this.getClearColor=function(t){return t.copy(st.getClearColor())},this.setClearColor=function(){st.setClearColor.apply(st,arguments)},this.getClearAlpha=function(){return st.getClearAlpha()},this.setClearAlpha=function(){st.setClearAlpha.apply(st,arguments)},this.clear=function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=0;t&&(i|=16384),e&&(i|=256),r&&(i|=1024),pt.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",gt,!1),e.removeEventListener("webglcontextrestored",vt,!1),e.removeEventListener("webglcontextcreationerror",yt,!1),et.dispose(),rt.dispose(),X.dispose(),Y.dispose(),Z.dispose(),K.dispose(),ut.dispose(),ct.dispose(),Q.dispose(),mt.dispose(),mt.removeEventListener("sessionstart",Mt),mt.removeEventListener("sessionend",Tt),O&&(O.dispose(),O=null),Et.stop()},this.renderBufferDirect=function(t,e,r,i,n,s){null===e&&(e=N);const a=n.isMesh&&n.matrixWorld.determinant()<0,o=Lt(t,e,r,i,n);U.setMaterial(i,a);let l=r.index,h=1;!0===i.wireframe&&(l=J.getWireframeAttribute(r),h=2);const u=r.drawRange,c=r.attributes.position;let p=u.start*h,d=(u.start+u.count)*h;null!==s&&(p=Math.max(p,s.start*h),d=Math.min(d,(s.start+s.count)*h)),null!==l?(p=Math.max(p,0),d=Math.min(d,l.count)):null!=c&&(p=Math.max(p,0),d=Math.min(d,c.count));const f=d-p;if(f<0||f===1/0)return;ut.setup(n,i,o,r,l);let m,g=ot;if(null!==l&&(m=$.get(l),g=lt,g.setIndex(m)),n.isMesh)!0===i.wireframe?(U.setLineWidth(i.wireframeLinewidth*G()),g.setMode(1)):g.setMode(4);else if(n.isLine){let t=i.linewidth;void 0===t&&(t=1),U.setLineWidth(t*G()),n.isLineSegments?g.setMode(1):n.isLineLoop?g.setMode(2):g.setMode(3)}else n.isPoints?g.setMode(0):n.isSprite&&g.setMode(4);if(n.isInstancedMesh)g.renderInstances(p,f,n.count);else if(r.isInstancedBufferGeometry){const t=void 0!==r._maxInstanceCount?r._maxInstanceCount:1/0,e=Math.min(r.instanceCount,t);g.renderInstances(p,f,e)}else g.render(p,f)},this.compile=function(t,e){function r(t,e,r){!0===t.transparent&&3===t.side?(t.side=1,t.needsUpdate=!0,Rt(t,e,r),t.side=0,t.needsUpdate=!0,Rt(t,e,r),t.side=3):Rt(t,e,r)}p=rt.get(t),p.init(),f.push(p),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(p.pushLight(t),t.castShadow&&p.pushShadow(t))})),p.setupLights(m.physicallyCorrectLights),t.traverse((function(e){const i=e.material;if(i)if(Array.isArray(i))for(let n=0;n<i.length;n++){r(i[n],t,e)}else r(i,t,e)})),f.pop(),p=null};let wt=null;function St(t){wt&&wt(t)}function Mt(){Et.stop()}function Tt(){Et.start()}const Et=new Ho;function Pt(t,e,r,i){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)r=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)p.pushLight(t),t.castShadow&&p.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||I.intersectsSprite(t)){i&&V.setFromMatrixPosition(t.matrixWorld).applyMatrix4(z);const e=K.update(t),n=t.material;n.visible&&c.push(t,e,n,r,V.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==j.render.frame&&(t.skeleton.update(),t.skeleton.frame=j.render.frame),!t.frustumCulled||I.intersectsObject(t))){i&&V.setFromMatrixPosition(t.matrixWorld).applyMatrix4(z);const e=K.update(t),n=t.material;if(Array.isArray(n)){const i=e.groups;for(let s=0,a=i.length;s<a;s++){const a=i[s],o=n[a.materialIndex];o&&o.visible&&c.push(t,e,o,r,V.z,a)}}else n.visible&&c.push(t,e,n,r,V.z,null)}const n=t.children;for(let t=0,s=n.length;t<s;t++)Pt(n[t],e,r,i)}function Ct(t,e,r,i){const n=t.opaque,s=t.transmissive,a=t.transparent;p.setupLightsView(r),s.length>0&&At(n,e,r),i&&U.viewport(w.copy(i)),n.length>0&&Dt(n,e,r),s.length>0&&Dt(s,e,r),a.length>0&&Dt(a,e,r),U.buffers.depth.setTest(!0),U.buffers.depth.setMask(!0),U.buffers.color.setMask(!0),U.setPolygonOffset(!1)}function At(t,e,r){const i=H.isWebGL2;null===O&&(O=new As(1,1,{generateMipmaps:!0,type:W.has("EXT_color_buffer_half_float")?hn:sn,minFilter:nn,samples:i&&!0===s?4:0})),m.getDrawingBufferSize(B),i?O.setSize(B.x,B.y):O.setSize(is(B.x),is(B.y));const n=m.getRenderTarget();m.setRenderTarget(O),m.clear();const a=m.toneMapping;m.toneMapping=0,Dt(t,e,r),m.toneMapping=a,q.updateMultisampleRenderTarget(O),q.updateRenderTargetMipmap(O),m.setRenderTarget(n)}function Dt(t,e,r){const i=!0===e.isScene?e.overrideMaterial:null;for(let n=0,s=t.length;n<s;n++){const s=t[n],a=s.object,o=s.geometry,l=null===i?s.material:i,h=s.group;a.layers.test(r.layers)&&kt(a,e,r,o,l,h)}}function kt(t,e,r,i,n,s){t.onBeforeRender(m,e,r,i,n,s),t.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),n.onBeforeRender(m,e,r,i,t,s),!0===n.transparent&&3===n.side?(n.side=1,n.needsUpdate=!0,m.renderBufferDirect(r,e,i,n,t,s),n.side=0,n.needsUpdate=!0,m.renderBufferDirect(r,e,i,n,t,s),n.side=3):m.renderBufferDirect(r,e,i,n,t,s),t.onAfterRender(m,e,r,i,n,s)}function Rt(t,e,r){!0!==e.isScene&&(e=N);const i=X.get(t),n=p.state.lights,s=p.state.shadowsArray,a=n.state.version,o=Q.getParameters(t,n.state,s,e,r),l=Q.getProgramCacheKey(o);let h=i.programs;i.environment=t.isMeshStandardMaterial?e.environment:null,i.fog=e.fog,i.envMap=(t.isMeshStandardMaterial?Z:Y).get(t.envMap||i.environment),void 0===h&&(t.addEventListener("dispose",xt),h=new Map,i.programs=h);let u=h.get(l);if(void 0!==u){if(i.currentProgram===u&&i.lightsStateVersion===a)return It(t,o),u}else o.uniforms=Q.getUniforms(t),t.onBuild(r,o,m),t.onBeforeCompile(o,m),u=Q.acquireProgram(o,l),h.set(l,u),i.uniforms=o.uniforms;const c=i.uniforms;(!t.isShaderMaterial&&!t.isRawShaderMaterial||!0===t.clipping)&&(c.clippingPlanes=it.uniform),It(t,o),i.needsLights=Ot(t),i.lightsStateVersion=a,i.needsLights&&(c.ambientLightColor.value=n.state.ambient,c.lightProbe.value=n.state.probe,c.directionalLights.value=n.state.directional,c.directionalLightShadows.value=n.state.directionalShadow,c.spotLights.value=n.state.spot,c.spotLightShadows.value=n.state.spotShadow,c.rectAreaLights.value=n.state.rectArea,c.ltc_1.value=n.state.rectAreaLTC1,c.ltc_2.value=n.state.rectAreaLTC2,c.pointLights.value=n.state.point,c.pointLightShadows.value=n.state.pointShadow,c.hemisphereLights.value=n.state.hemi,c.directionalShadowMap.value=n.state.directionalShadowMap,c.directionalShadowMatrix.value=n.state.directionalShadowMatrix,c.spotShadowMap.value=n.state.spotShadowMap,c.spotLightMatrix.value=n.state.spotLightMatrix,c.spotLightMap.value=n.state.spotLightMap,c.pointShadowMap.value=n.state.pointShadowMap,c.pointShadowMatrix.value=n.state.pointShadowMatrix);const d=u.getUniforms(),f=Ch.seqWithValue(d.seq,c);return i.currentProgram=u,i.uniformsList=f,u}function It(t,e){const r=X.get(t);r.outputEncoding=e.outputEncoding,r.instancing=e.instancing,r.skinning=e.skinning,r.morphTargets=e.morphTargets,r.morphNormals=e.morphNormals,r.morphColors=e.morphColors,r.morphTargetsCount=e.morphTargetsCount,r.numClippingPlanes=e.numClippingPlanes,r.numIntersection=e.numClipIntersection,r.vertexAlphas=e.vertexAlphas,r.vertexTangents=e.vertexTangents,r.toneMapping=e.toneMapping}function Lt(t,e,r,i,n){!0!==e.isScene&&(e=N),q.resetTextureUnits();const s=e.fog,a=i.isMeshStandardMaterial?e.environment:null,o=null===x?m.outputEncoding:!0===x.isXRRenderTarget?x.texture.encoding:Vn,l=(i.isMeshStandardMaterial?Z:Y).get(i.envMap||a),h=!0===i.vertexColors&&!!r.attributes.color&&4===r.attributes.color.itemSize,u=!!i.normalMap&&!!r.attributes.tangent,c=!!r.morphAttributes.position,d=!!r.morphAttributes.normal,f=!!r.morphAttributes.color,g=i.toneMapped?m.toneMapping:0,v=r.morphAttributes.position||r.morphAttributes.normal||r.morphAttributes.color,y=void 0!==v?v.length:0,w=X.get(i),S=p.state.lights;if(!0===L&&(!0===F||t!==b)){const e=t===b&&i.id===_;it.setState(i,t,e)}let M=!1;i.version===w.__version?(w.needsLights&&w.lightsStateVersion!==S.state.version||w.outputEncoding!==o||n.isInstancedMesh&&!1===w.instancing||!n.isInstancedMesh&&!0===w.instancing||n.isSkinnedMesh&&!1===w.skinning||!n.isSkinnedMesh&&!0===w.skinning||w.envMap!==l||!0===i.fog&&w.fog!==s||void 0!==w.numClippingPlanes&&(w.numClippingPlanes!==it.numPlanes||w.numIntersection!==it.numIntersection)||w.vertexAlphas!==h||w.vertexTangents!==u||w.morphTargets!==c||w.morphNormals!==d||w.morphColors!==f||w.toneMapping!==g||!0===H.isWebGL2&&w.morphTargetsCount!==y)&&(M=!0):(M=!0,w.__version=i.version);let T=w.currentProgram;!0===M&&(T=Rt(i,e,n));let C=!1,A=!1,D=!1;const k=T.getUniforms(),R=w.uniforms;if(U.useProgram(T.program)&&(C=!0,A=!0,D=!0),i.id!==_&&(_=i.id,A=!0),C||b!==t){if(k.setValue(pt,"projectionMatrix",t.projectionMatrix),H.logarithmicDepthBuffer&&k.setValue(pt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),b!==t&&(b=t,A=!0,D=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){const e=k.map.cameraPosition;void 0!==e&&e.setValue(pt,V.setFromMatrixPosition(t.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&k.setValue(pt,"isOrthographic",!0===t.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||n.isSkinnedMesh)&&k.setValue(pt,"viewMatrix",t.matrixWorldInverse)}if(n.isSkinnedMesh){k.setOptional(pt,n,"bindMatrix"),k.setOptional(pt,n,"bindMatrixInverse");const t=n.skeleton;t&&(H.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),k.setValue(pt,"boneTexture",t.boneTexture,q),k.setValue(pt,"boneTextureSize",t.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const I=r.morphAttributes;if((void 0!==I.position||void 0!==I.normal||void 0!==I.color&&!0===H.isWebGL2)&&at.update(n,r,i,T),(A||w.receiveShadow!==n.receiveShadow)&&(w.receiveShadow=n.receiveShadow,k.setValue(pt,"receiveShadow",n.receiveShadow)),i.isMeshGouraudMaterial&&null!==i.envMap&&(R.envMap.value=l,R.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),A&&(k.setValue(pt,"toneMappingExposure",m.toneMappingExposure),w.needsLights&&Ft(R,D),s&&!0===i.fog&&tt.refreshFogUniforms(R,s),tt.refreshMaterialUniforms(R,i,P,E,O),Ch.upload(pt,w.uniformsList,R,q)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(Ch.upload(pt,w.uniformsList,R,q),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&k.setValue(pt,"center",n.center),k.setValue(pt,"modelViewMatrix",n.modelViewMatrix),k.setValue(pt,"normalMatrix",n.normalMatrix),k.setValue(pt,"modelMatrix",n.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial){const t=i.uniformsGroups;for(let e=0,r=t.length;e<r;e++)if(H.isWebGL2){const r=t[e];ct.update(r,T),ct.bind(r,T)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return T}function Ft(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.directionalLightShadows.needsUpdate=e,t.pointLights.needsUpdate=e,t.pointLightShadows.needsUpdate=e,t.spotLights.needsUpdate=e,t.spotLightShadows.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function Ot(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}Et.setAnimationLoop(St),typeof self<"u"&&Et.setContext(self),this.setAnimationLoop=function(t){wt=t,mt.setAnimationLoop(t),null===t?Et.stop():Et.start()},mt.addEventListener("sessionstart",Mt),mt.addEventListener("sessionend",Tt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===g)return;!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),!0===mt.enabled&&!0===mt.isPresenting&&(!0===mt.cameraAutoUpdate&&mt.updateCamera(e),e=mt.getCamera()),!0===t.isScene&&t.onBeforeRender(m,t,e,x),p=rt.get(t,f.length),p.init(),f.push(p),z.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),I.setFromProjectionMatrix(z),F=this.localClippingEnabled,L=it.init(this.clippingPlanes,F,e),c=et.get(t,d.length),c.init(),d.push(c),Pt(t,e,0,m.sortObjects),c.finish(),!0===m.sortObjects&&c.sort(C,A),!0===L&&it.beginShadows();const r=p.state.shadowsArray;if(nt.render(r,t,e),!0===L&&it.endShadows(),!0===this.info.autoReset&&this.info.reset(),st.render(c,t),p.setupLights(m.physicallyCorrectLights),e.isArrayCamera){const r=e.cameras;for(let e=0,i=r.length;e<i;e++){const i=r[e];Ct(c,t,i,i.viewport)}}else Ct(c,t,e);null!==x&&(q.updateMultisampleRenderTarget(x),q.updateRenderTargetMipmap(x)),!0===t.isScene&&t.onAfterRender(m,t,e),ut.resetDefaultState(),_=-1,b=null,f.pop(),p=f.length>0?f[f.length-1]:null,d.pop(),c=d.length>0?d[d.length-1]:null},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(t,e,r){X.get(t.texture).__webglTexture=e,X.get(t.depthTexture).__webglTexture=r;const i=X.get(t);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===r,i.__autoAllocateDepthBuffer||!0===W.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(t,e){const r=X.get(t);r.__webglFramebuffer=e,r.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;x=t,v=e,y=r;let i=!0,n=null,s=!1,a=!1;if(t){const r=X.get(t);void 0!==r.__useDefaultFramebuffer?(U.bindFramebuffer(36160,null),i=!1):void 0===r.__webglFramebuffer?q.setupRenderTarget(t):r.__hasExternalTextures&&q.rebindTextures(t,X.get(t.texture).__webglTexture,X.get(t.depthTexture).__webglTexture);const o=t.texture;(o.isData3DTexture||o.isDataArrayTexture||o.isCompressedArrayTexture)&&(a=!0);const l=X.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(n=l[e],s=!0):n=H.isWebGL2&&t.samples>0&&!1===q.useMultisampledRTT(t)?X.get(t).__webglMultisampledFramebuffer:l,w.copy(t.viewport),S.copy(t.scissor),M=t.scissorTest}else w.copy(D).multiplyScalar(P).floor(),S.copy(k).multiplyScalar(P).floor(),M=R;if(U.bindFramebuffer(36160,n)&&H.drawBuffers&&i&&U.drawBuffers(t,n),U.viewport(w),U.scissor(S),U.setScissorTest(M),s){const i=X.get(t.texture);pt.framebufferTexture2D(36160,36064,34069+e,i.__webglTexture,r)}else if(a){const i=X.get(t.texture),n=e||0;pt.framebufferTextureLayer(36160,36064,i.__webglTexture,r||0,n)}_=-1},this.readRenderTargetPixels=function(t,e,r,i,n,s,a){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=X.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==a&&(o=o[a]),o){U.bindFramebuffer(36160,o);try{const a=t.texture,o=a.format,l=a.type;if(o!==cn&&ht.convert(o)!==pt.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const h=l===hn&&(W.has("EXT_color_buffer_half_float")||H.isWebGL2&&W.has("EXT_color_buffer_float"));if(!(l===sn||ht.convert(l)===pt.getParameter(35738)||l===ln&&(H.isWebGL2||W.has("OES_texture_float")||W.has("WEBGL_color_buffer_float"))||h))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-i&&r>=0&&r<=t.height-n&&pt.readPixels(e,r,i,n,ht.convert(o),ht.convert(l),s)}finally{const t=null!==x?X.get(x).__webglFramebuffer:null;U.bindFramebuffer(36160,t)}}},this.copyFramebufferToTexture=function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=Math.pow(2,-r),n=Math.floor(e.image.width*i),s=Math.floor(e.image.height*i);q.setTexture2D(e,0),pt.copyTexSubImage2D(3553,r,0,0,t.x,t.y,n,s),U.unbindTexture()},this.copyTextureToTexture=function(t,e,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const n=e.image.width,s=e.image.height,a=ht.convert(r.format),o=ht.convert(r.type);q.setTexture2D(r,0),pt.pixelStorei(37440,r.flipY),pt.pixelStorei(37441,r.premultiplyAlpha),pt.pixelStorei(3317,r.unpackAlignment),e.isDataTexture?pt.texSubImage2D(3553,i,t.x,t.y,n,s,a,o,e.image.data):e.isCompressedTexture?pt.compressedTexSubImage2D(3553,i,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,a,e.mipmaps[0].data):pt.texSubImage2D(3553,i,t.x,t.y,a,o,e.image),0===i&&r.generateMipmaps&&pt.generateMipmap(3553),U.unbindTexture()},this.copyTextureToTexture3D=function(t,e,r,i){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const s=t.max.x-t.min.x+1,a=t.max.y-t.min.y+1,o=t.max.z-t.min.z+1,l=ht.convert(i.format),h=ht.convert(i.type);let u;if(i.isData3DTexture)q.setTexture3D(i,0),u=32879;else{if(!i.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");q.setTexture2DArray(i,0),u=35866}pt.pixelStorei(37440,i.flipY),pt.pixelStorei(37441,i.premultiplyAlpha),pt.pixelStorei(3317,i.unpackAlignment);const c=pt.getParameter(3314),p=pt.getParameter(32878),d=pt.getParameter(3316),f=pt.getParameter(3315),g=pt.getParameter(32877),v=r.isCompressedTexture?r.mipmaps[0]:r.image;pt.pixelStorei(3314,v.width),pt.pixelStorei(32878,v.height),pt.pixelStorei(3316,t.min.x),pt.pixelStorei(3315,t.min.y),pt.pixelStorei(32877,t.min.z),r.isDataTexture||r.isData3DTexture?pt.texSubImage3D(u,n,e.x,e.y,e.z,s,a,o,l,h,v.data):r.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),pt.compressedTexSubImage3D(u,n,e.x,e.y,e.z,s,a,o,l,v.data)):pt.texSubImage3D(u,n,e.x,e.y,e.z,s,a,o,l,h,v),pt.pixelStorei(3314,c),pt.pixelStorei(32878,p),pt.pixelStorei(3316,d),pt.pixelStorei(3315,f),pt.pixelStorei(32877,g),0===n&&i.generateMipmaps&&pt.generateMipmap(u),U.unbindTexture()},this.initTexture=function(t){t.isCubeTexture?q.setTextureCube(t,0):t.isData3DTexture?q.setTexture3D(t,0):t.isDataArrayTexture||t.isCompressedArrayTexture?q.setTexture2DArray(t,0):q.setTexture2D(t,0),U.unbindTexture()},this.resetState=function(){v=0,y=0,x=null,U.reset(),ut.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class extends bu{}).prototype.isWebGL1Renderer=!0;class wu extends Ia{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.backgroundIntensity=this.backgroundIntensity),e}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}}new Rs;class Su extends Ps{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(null,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:tn,arguments.length>9&&void 0!==arguments[9]?arguments[9]:tn,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>10?arguments[10]:void 0,arguments.length>11?arguments[11]:void 0),this.isDataTexture=!0,this.image={data:t,width:e,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}new Rs,new Rs,new la,new oa,new Qs;new Rs,new Rs;new la,new oa,new Qs,new Rs;class Mu{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const r=this.getUtoTmapping(t);return this.getPoint(r,e)}getPoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const e=[];for(let r=0;r<=t;r++)e.push(this.getPoint(r/t));return e}getSpacedPoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const e=[];for(let r=0;r<=t;r++)e.push(this.getPointAt(r/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let r,i=this.getPoint(0),n=0;e.push(0);for(let s=1;s<=t;s++)r=this.getPoint(s/t),n+=r.distanceTo(i),e.push(n),i=r;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const r=this.getLengths();let i=0;const n=r.length;let s;s=e||t*r[n-1];let a,o=0,l=n-1;for(;o<=l;)if(i=Math.floor(o+(l-o)/2),a=r[i]-s,a<0)o=i+1;else{if(!(a>0)){l=i;break}l=i-1}if(i=l,r[i]===s)return i/(n-1);const h=r[i];return(i+(s-h)/(r[i+1]-h))/(n-1)}getTangent(t,e){let r=t-1e-4,i=t+1e-4;r<0&&(r=0),i>1&&(i=1);const n=this.getPoint(r),s=this.getPoint(i),a=e||(n.isVector2?new as:new Rs);return a.copy(s).sub(n).normalize(),a}getTangentAt(t,e){const r=this.getUtoTmapping(t);return this.getTangent(r,e)}computeFrenetFrames(t,e){const r=new Rs,i=[],n=[],s=[],a=new Rs,o=new la;for(let e=0;e<=t;e++){const r=e/t;i[e]=this.getTangentAt(r,new Rs)}n[0]=new Rs,s[0]=new Rs;let l=Number.MAX_VALUE;const h=Math.abs(i[0].x),u=Math.abs(i[0].y),c=Math.abs(i[0].z);h<=l&&(l=h,r.set(1,0,0)),u<=l&&(l=u,r.set(0,1,0)),c<=l&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),n[0].crossVectors(i[0],a),s[0].crossVectors(i[0],n[0]);for(let e=1;e<=t;e++){if(n[e]=n[e-1].clone(),s[e]=s[e-1].clone(),a.crossVectors(i[e-1],i[e]),a.length()>Number.EPSILON){a.normalize();const t=Math.acos(Qn(i[e-1].dot(i[e]),-1,1));n[e].applyMatrix4(o.makeRotationAxis(a,t))}s[e].crossVectors(i[e],n[e])}if(!0===e){let e=Math.acos(Qn(n[0].dot(n[t]),-1,1));e/=t,i[0].dot(a.crossVectors(n[0],n[t]))>0&&(e=-e);for(let r=1;r<=t;r++)n[r].applyMatrix4(o.makeRotationAxis(i[r],e*r)),s[r].crossVectors(i[r],n[r])}return{tangents:i,normals:n,binormals:s}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class Tu extends Mu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=r,this.yRadius=i,this.aStartAngle=n,this.aEndAngle=s,this.aClockwise=a,this.aRotation=o}getPoint(t,e){const r=e||new as,i=2*Math.PI;let n=this.aEndAngle-this.aStartAngle;const s=Math.abs(n)<Number.EPSILON;for(;n<0;)n+=i;for(;n>i;)n-=i;n<Number.EPSILON&&(n=s?0:i),!0===this.aClockwise&&!s&&(n===i?n=-i:n-=i);const a=this.aStartAngle+t*n;let o=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),r=o-this.aX,i=l-this.aY;o=r*t-i*e+this.aX,l=r*e+i*t+this.aY}return r.set(o,l)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}function Eu(){let t=0,e=0,r=0,i=0;function n(n,s,a,o){t=n,e=a,r=-3*n+3*s-2*a-o,i=2*n-2*s+a+o}return{initCatmullRom:function(t,e,r,i,s){n(e,r,s*(r-t),s*(i-e))},initNonuniformCatmullRom:function(t,e,r,i,s,a,o){let l=(e-t)/s-(r-t)/(s+a)+(r-e)/a,h=(r-e)/a-(i-e)/(a+o)+(i-r)/o;l*=a,h*=a,n(e,r,l,h)},calc:function(n){const s=n*n;return t+e*n+r*s+i*(s*n)}}}const Pu=new Rs,Cu=new Eu,Au=new Eu,Du=new Eu;function ku(t,e,r,i,n){const s=.5*(i-e),a=.5*(n-r),o=t*t;return(2*r-2*i+s+a)*(t*o)+(-3*r+3*i-2*s-a)*o+s*t+r}function Ru(t,e,r,i){return function(t,e){const r=1-t;return r*r*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,r)+function(t,e){return t*t*e}(t,i)}function Iu(t,e,r,i,n){return function(t,e){const r=1-t;return r*r*r*e}(t,e)+function(t,e){const r=1-t;return 3*r*r*t*e}(t,r)+function(t,e){return 3*(1-t)*t*t*e}(t,i)+function(t,e){return t*t*t*e}(t,n)}class Lu extends Mu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new as,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new as,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new as,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new as;super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=r,this.v3=i}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new as,r=this.v0,i=this.v1,n=this.v2,s=this.v3;return e.set(Iu(t,r.x,i.x,n.x,s.x),Iu(t,r.y,i.y,n.y,s.y)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Fu extends Mu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new as,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new as;super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new as;return 1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const r=e||new as;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Ou extends Mu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new as,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new as,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new as;super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=r}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new as,r=this.v0,i=this.v1,n=this.v2;return e.set(Ru(t,r.x,i.x,n.x),Ru(t,r.y,i.y,n.y)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class zu extends Mu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new as,r=this.points,i=(r.length-1)*t,n=Math.floor(i),s=i-n,a=r[0===n?n:n-1],o=r[n],l=r[n>r.length-2?r.length-1:n+1],h=r[n>r.length-3?r.length-1:n+2];return e.set(ku(s,a.x,o.x,l.x,h.x),ku(s,a.y,o.y,l.y,h.y)),e}copy(t){super.copy(t),this.points=[];for(let e=0,r=t.points.length;e<r;e++){const r=t.points[e];this.points.push(r.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,r=this.points.length;e<r;e++){const r=this.points[e];t.points.push(r.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,r=t.points.length;e<r;e++){const r=t.points[e];this.points.push((new as).fromArray(r))}return this}}Object.freeze({__proto__:null,ArcCurve:class extends Tu{constructor(t,e,r,i,n,s){super(t,e,r,r,i,n,s),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class extends Mu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=r,this.tension=i}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rs,r=this.points,i=r.length,n=(i-(this.closed?0:1))*t;let s,a,o=Math.floor(n),l=n-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/i)+1)*i:0===l&&o===i-1&&(o=i-2,l=1),this.closed||o>0?s=r[(o-1)%i]:(Pu.subVectors(r[0],r[1]).add(r[0]),s=Pu);const h=r[o%i],u=r[(o+1)%i];if(this.closed||o+2<i?a=r[(o+2)%i]:(Pu.subVectors(r[i-1],r[i-2]).add(r[i-1]),a=Pu),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(s.distanceToSquared(h),t),r=Math.pow(h.distanceToSquared(u),t),i=Math.pow(u.distanceToSquared(a),t);r<1e-4&&(r=1),e<1e-4&&(e=r),i<1e-4&&(i=r),Cu.initNonuniformCatmullRom(s.x,h.x,u.x,a.x,e,r,i),Au.initNonuniformCatmullRom(s.y,h.y,u.y,a.y,e,r,i),Du.initNonuniformCatmullRom(s.z,h.z,u.z,a.z,e,r,i)}else"catmullrom"===this.curveType&&(Cu.initCatmullRom(s.x,h.x,u.x,a.x,this.tension),Au.initCatmullRom(s.y,h.y,u.y,a.y,this.tension),Du.initCatmullRom(s.z,h.z,u.z,a.z,this.tension));return e.set(Cu.calc(l),Au.calc(l),Du.calc(l)),e}copy(t){super.copy(t),this.points=[];for(let e=0,r=t.points.length;e<r;e++){const r=t.points[e];this.points.push(r.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,r=this.points.length;e<r;e++){const r=this.points[e];t.points.push(r.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,r=t.points.length;e<r;e++){const r=t.points[e];this.points.push((new Rs).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}},CubicBezierCurve:Lu,CubicBezierCurve3:class extends Mu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Rs,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rs,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Rs,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Rs;super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=r,this.v3=i}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rs,r=this.v0,i=this.v1,n=this.v2,s=this.v3;return e.set(Iu(t,r.x,i.x,n.x,s.x),Iu(t,r.y,i.y,n.y,s.y),Iu(t,r.z,i.z,n.z,s.z)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},EllipseCurve:Tu,LineCurve:Fu,LineCurve3:class extends Mu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Rs,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rs;super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rs;return 1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},QuadraticBezierCurve:Ou,QuadraticBezierCurve3:class extends Mu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Rs,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rs,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Rs;super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=r}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rs,r=this.v0,i=this.v1,n=this.v2;return e.set(Ru(t,r.x,i.x,n.x),Ru(t,r.y,i.y,n.y),Ru(t,r.z,i.z,n.z)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},SplineCurve:zu});class Bu extends Ao{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}new class{constructor(t,e,r){const i=this;let n,s=!1,a=0,o=0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=r,this.itemStart=function(t){o++,!1===s&&void 0!==i.onStart&&i.onStart(t,a,o),s=!0},this.itemEnd=function(t){a++,void 0!==i.onProgress&&i.onProgress(t,a,o),a===o&&(s=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return n?n(t):t},this.setURLModifier=function(t){return n=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,r=l.length;e<r;e+=2){const r=l[e],i=l[e+1];if(r.global&&(r.lastIndex=0),r.test(t))return i}return null}}};new Rs,new ks,new Rs,new Rs,new as;const Vu=function(){const t=new ArrayBuffer(4),e=new Float32Array(t),r=new Uint32Array(t),i=new Uint32Array(512),n=new Uint32Array(512);for(let t=0;t<256;++t){const e=t-127;e<-27?(i[t]=0,i[256|t]=32768,n[t]=24,n[256|t]=24):e<-14?(i[t]=1024>>-e-14,i[256|t]=1024>>-e-14|32768,n[t]=-e-1,n[256|t]=-e-1):e<=15?(i[t]=e+15<<10,i[256|t]=e+15<<10|32768,n[t]=13,n[256|t]=13):e<128?(i[t]=31744,i[256|t]=64512,n[t]=24,n[256|t]=24):(i[t]=31744,i[256|t]=64512,n[t]=13,n[256|t]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let t=1;t<1024;++t){let e=t<<13,r=0;for(;!(8388608&e);)e<<=1,r-=8388608;e&=-8388609,r+=947912704,s[t]=e|r}for(let t=1024;t<2048;++t)s[t]=939524096+(t-1024<<13);for(let t=1;t<31;++t)a[t]=t<<23;a[31]=1199570944,a[32]=2147483648;for(let t=33;t<63;++t)a[t]=2147483648+(t-32<<23);a[63]=3347054592;for(let t=1;t<64;++t)32!==t&&(o[t]=1024);return{floatView:e,uint32View:r,baseTable:i,shiftTable:n,mantissaTable:s,exponentTable:a,offsetTable:o}}();Object.freeze({__proto__:null,toHalfFloat:function(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Qn(t,-65504,65504),Vu.floatView[0]=t;const e=Vu.uint32View[0],r=e>>23&511;return Vu.baseTable[r]+((8388607&e)>>Vu.shiftTable[r])},fromHalfFloat:function(t){const e=t>>10;return Vu.uint32View[0]=Vu.mantissaTable[Vu.offsetTable[e]+(1023&t)]+Vu.exponentTable[e],Vu.floatView[0]}});typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Xi}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Xi);const Nu=new class{PI=Math.PI;PI2=2*this.PI;HALF_PI=.5*this.PI;DEG2RAD=this.PI/180;RAD2DEG=180/this.PI;linearStep(t,e,r){return this.clamp((r-t)/(e-t),0,1)}step(t,e){return e<t?0:1}clamp(t,e,r){return t<e?e:t>r?r:t}mod(t,e){return t-e*Math.floor(t/e)}mix(t,e,r){return t+(e-t)*r}cMix(t,e,r){return t+(e-t)*this.clamp(r,0,1)}unMix(t,e,r){return(r-t)/(e-t)}cUnMix(t,e,r){return this.clamp((r-t)/(e-t),0,1)}saturate(t){return this.clamp(t,0,1)}fit(t,e,r,i,n,s){return t=this.cUnMix(e,r,t),s&&(t=s(t)),i+t*(n-i)}unClampedFit(t,e,r,i,n,s){return t=this.unMix(e,r,t),s&&(t=s(t)),i+t*(n-i)}lerp(t,e,r){return t*(1-r)+e*r}loop(t,e,r){return r-=e,((t-=e)<0?(r-Math.abs(t)%r)%r:t%r)+e}normalize(t,e,r){return Math.max(0,Math.min(1,t-e/r-e))}smoothstep(t,e,r){return(r=this.cUnMix(t,e,r))*r*(3-2*r)}fract(t){return t-Math.floor(t)}hash(t){return this.fract(43758.5453123*Math.sin(t))}hash2(t,e){return this.fract(43758.5453*Math.sin(12.9898*t+4.1414*e))}sign(t){return t?t<0?-1:1:0}isPowerOfTwo(t){return(t&-t)===t}powerTwoCeilingBase(t){return Math.ceil(Math.log(t)/Math.log(2))}powerTwoCeiling(t){return this.isPowerOfTwo(t)?t:1<<this.powerTwoCeilingBase(t)}powerTwoFloorBase(t){return Math.floor(Math.log(t)/Math.log(2))}powerTwoFloor(t){return this.isPowerOfTwo(t)?t:1<<this.powerTwoFloorBase(t)}latLngBearing(t,e,r,i){let n=Math.sin(i-e)*Math.cos(r),s=Math.cos(t)*Math.sin(r)-Math.sin(t)*Math.cos(r)*Math.cos(i-e);return Math.atan2(n,s)}distanceTo(t,e){return Math.sqrt(t*t+e*e)}distanceSqrTo(t,e){return t*t+e*e}distanceTo3(t,e,r){return Math.sqrt(t*t+e*e+r*r)}distanceSqrTo3(t,e,r){return t*t+e*e+r*r}latLngDistance(t,e,r,i){let n=Math.sin((r-t)/2),s=Math.sin((i-e)/2),a=n*n+Math.cos(t)*Math.cos(r)*s*s;return 2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}cubicBezier(t,e,r,i,n){let s=3*(e-t),a=3*(r-e)-s,o=n*n;return(i-t-s-a)*(o*n)+a*o+s*n+t}cubicBezierFn(t,e,r,i){let n=3*(e-t),s=3*(r-e)-n,a=i-t-n-s;return e=>{let r=e*e;return a*(r*e)+s*r+n*e+t}}normalizeAngle(t){return t=(t+=this.PI)<0?this.PI2-Math.abs(t%PI2):t%this.PI2,t-=this.PI}closestAngleTo(t,e){return t+this.normalizeAngle(e-t)}randomRange(t,e){return t+Math.random()*(e-t)}randomRangeInt(t,e){return Math.floor(this.randomRange(t,e+1))}padZero(t,e){return t.toString().length>=e?t:(Math.pow(10,e)+Math.floor(t)).toString().substring(1)}lerpColor(t,e,r){const i=t>>16,n=t>>8&255,s=255&t;return(i+r*((e>>16)-i)<<16)+(n+r*((e>>8&255)-n)<<8)+(0|s+r*((255&e)-s))}getSeedRandomFn(t){let e=1779033703,r=3144134277,i=1013904242,n=2773480762;for(let s,a=0;a<t.length;a++)s=t.charCodeAt(a),e=r^Math.imul(e^s,597399067),r=i^Math.imul(r^s,2869860233),i=n^Math.imul(i^s,951274213),n=e^Math.imul(n^s,2716044179);return function(t,e,r,i){return function(){var n=((t|=0)+(e|=0)|0)+(i|=0)|0;return i=i+1|0,t=e^e>>>9,e=(r|=0)+(r<<3)|0,r=(r=r<<21|r>>>11)+n|0,(n>>>0)/4294967296}}(Math.imul(i^e>>>18,597399067),Math.imul(n^r>>>22,2869860233),Math.imul(e^i>>>17,951274213),Math.imul(r^n>>>19,2716044179))}};var Gu=typeof window>"u",Wu=function(){function t(t){this.userAgent=t||(!Gu&&window.navigator?window.navigator.userAgent:""),this.isAndroidDevice=!/like android/i.test(this.userAgent)&&/android/i.test(this.userAgent),this.iOSDevice=this.match(1,/(iphone|ipod|ipad)/i).toLowerCase(),!Gu&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>2&&!window.MSStream&&(this.iOSDevice="ipad")}return t.prototype.match=function(t,e){var r=this.userAgent.match(e);return r&&r.length>1&&r[t]||""},Object.defineProperty(t.prototype,"isMobile",{get:function(){return!this.isTablet&&(/[^-]mobi/i.test(this.userAgent)||"iphone"===this.iOSDevice||"ipod"===this.iOSDevice||this.isAndroidDevice||/nexus\s*[0-6]\s*/i.test(this.userAgent))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTablet",{get:function(){return/tablet/i.test(this.userAgent)&&!/tablet pc/i.test(this.userAgent)||"ipad"===this.iOSDevice||this.isAndroidDevice&&!/[^-]mobi/i.test(this.userAgent)||!/nexus\s*[0-6]\s*/i.test(this.userAgent)&&/nexus\s*[0-9]+/i.test(this.userAgent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDesktop",{get:function(){return!this.isMobile&&!this.isTablet},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMacOS",{get:function(){return/macintosh/i.test(this.userAgent)&&{version:this.match(1,/mac os x (\d+(\.?_?\d+)+)/i).replace(/[_\s]/g,".").split(".").map((function(t){return t}))[1]}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isWindows",{get:function(){return/windows /i.test(this.userAgent)&&{version:this.match(1,/Windows ((NT|XP)( \d\d?.\d)?)/i)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isiOS",{get:function(){return!!this.iOSDevice&&{version:this.match(1,/os (\d+([_\s]\d+)*) like mac os x/i).replace(/[_\s]/g,".")||this.match(1,/version\/(\d+(\.\d+)?)/i)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAndroid",{get:function(){return this.isAndroidDevice&&{version:this.match(1,/android[ \/-](\d+(\.\d+)*)/i)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"browser",{get:function(){var t=this.match(1,/version\/(\d+(\.\d+)?)/i);return/opera/i.test(this.userAgent)?{name:"Opera",version:t||this.match(1,/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(this.userAgent)?{name:"Opera",version:this.match(1,/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||t}:/SamsungBrowser/i.test(this.userAgent)?{name:"Samsung Internet for Android",version:t||this.match(1,/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(this.userAgent)?{name:"Yandex Browser",version:t||this.match(1,/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(this.userAgent)?{name:"UC Browser",version:this.match(1,/(?:ucbrowser)[\s\/](\d+(\.\d+)?)/i)}:/msie|trident/i.test(this.userAgent)?{name:"Internet Explorer",version:this.match(1,/(?:msie |rv:)(\d+(\.\d+)?)/i)}:/(edge|edgios|edga|edg)/i.test(this.userAgent)?{name:"Microsoft Edge",version:this.match(2,/(edge|edgios|edga|edg)\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(this.userAgent)?{name:"Firefox",version:this.match(1,/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)}:/chromium/i.test(this.userAgent)?{name:"Chromium",version:this.match(1,/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||t}:/chrome|crios|crmo/i.test(this.userAgent)?{name:"Chrome",version:this.match(1,/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/safari|applewebkit/i.test(this.userAgent)?{name:"Safari",version:t}:{name:this.match(1,/^(.*)\/(.*) /),version:this.match(2,/^(.*)\/(.*) /)}},enumerable:!1,configurable:!0}),t}();let Hu=new Wu,Uu=(navigator.userAgent||navigator.vendor).toLowerCase(),ju=Hu.browser.name,Xu=document.createElement("audio");const qu=new class{isMobile=Hu.isMobile||Hu.isTablet;isDesktop=Hu.isDesktop;device=this.isMobile?"mobile":"desktop";isAndroid=!!Hu.isAndroid;isIOS=!!Hu.isiOS;isMacOS=!!Hu.isMacOS;isWindows=null!==Hu.isWindows.version;isLinux=-1!=Uu.indexOf("linux");ua=Uu;isEdge="Microsoft Edge"===ju;isIE="Internet Explorer"===ju;isFirefox="Firefox"===ju;isChrome="Chrome"===ju;isOpera="Opera"===ju;isSafari="Safari"===ju;isSupportMSAA=!Uu.match("version/15.4 ");isSupportOgg=!!Xu.canPlayType("audio/ogg");isRetina=window.devicePixelRatio&&window.devicePixelRatio>=1.5;devicePixelRatio=window.devicePixelRatio||1;cpuCoreCount=navigator.hardwareConcurrency||1;baseUrl=document.location.origin;isIFrame=window.self!==window.top;constructor(){}};const Yu=new class{CDN_PATH="";TEAM_PATH="/assets/team/";TEAM_PATH="/assets/team/";PROJECT_PATH="/assets/projects/";MODEL_PATH="/assets/models/";IMAGE_PATH="/assets/images/";TEXTURE_PATH="/assets/textures/";AUDIO_PATH="/assets/audios/";SPRITE_PATH="/assets/sprites/";RENDER_TARGET_FLOAT_TYPE=null;DATA_FLOAT_TYPE=null;USE_FLOAT_PACKING=!1;USE_WEBGL2=!0;DPR=Math.min(1.5,qu.devicePixelRatio)||1;USE_PIXEL_LIMIT=!0;MAX_PIXEL_COUNT=3686400;MOBILE_WIDTH=812;IS_SMALL_SCREEN=Math.min(window.screen.width,window.screen.height)<=820;JUMP_SECTION="";JUMP_OFFSET=0;USE_HD=!1;SHOW_DETAILS="";IS_DEV=!1;LOG=!1;SKIP_ANIMATION=!1;WEBGL_OFF=!1;LOOK_DEV_MODE=!1;TEST_TUNNEL=!1;HOME_TEST=!1;OPEN_CONTACT=!1;TEST_BALLOONS=!1;BALLOON_COLOR="";USE_AUDIO=qu.isSupportOgg&&!qu.isMobile;constructor(){}override(t){for(const e in t)if(void 0!==this[e]){const r=t[e].toString();"boolean"==typeof this[e]?this[e]=!("0"===r||!1===r):"number"==typeof this[e]?this[e]=parseFloat(r):"string"==typeof this[e]&&(this[e]=r)}this.USE_HD&&(this.USE_PIXEL_LIMIT=!1)}};typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"&&self;function Zu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $u,Ju={exports:{}};$u=Ju,function(t){function e(){this._listeners=[],this.dispatchCount=0}var r=e.prototype;r.add=a,r.addOnce=function(e,r,s,o){if(!e)throw i;var l=this,h=function(){return l.remove.call(l,e,r),e.apply(r,n.call(arguments,0))};1===(o=n.call(arguments,0)).length&&o.push(t),o.splice(2,0,h),a.apply(l,o)},r.remove=function(t,e){if(!t)return this._listeners.length=0,!0;for(var r,i=this._listeners,n=i.length;n--;)if((r=i[n]).f===t&&(!e||r.c===e))return r.j=0,i.splice(n,1),!0;return!1},r.dispatch=function(t){t=n.call(arguments,0),this.dispatchCount++;for(var e,r,i=this.dispatchCount,s=this._listeners,a=s.length;a--;)if((e=s[a])&&e.j<i&&(e.j=i,!1===e.r.apply(e.c,e.a.concat(t)))){r=e;break}for(s=this._listeners,a=s.length;a--;)s[a].j=0;return r};var i="Callback function is missing!",n=Array.prototype.slice;function s(t){t.sort((function(t,e){return t=t.p,(e=e.p)<t?1:e>t?-1:0}))}function a(t,e,r,a){if(!t)throw i;r=r||0;for(var o,l,h,u=this._listeners,c=u.length;c--;)if((o=u[c]).f===t&&o.c===e)return!1;"function"==typeof r&&(l=r,r=a,h=4),u.unshift({f:t,c:e,p:r,r:l||t,a:n.call(arguments,h||3),j:0}),s(u)}$u.exports=e}();const Ku=Zu(Ju.exports);var Qu={exports:{}},tc={exports:{}};!function(t){!function(e){function r(){this._listeners=[],this.dispatchCount=0}var i=r.prototype;i.add=o,i.addOnce=function(t,r,i,a){if(!t)throw n;var l=this,h=function(){return l.remove.call(l,t,r),t.apply(r,s.call(arguments,0))};a=s.call(arguments,0),1===a.length&&a.push(e),a.splice(2,0,h),o.apply(l,a)},i.remove=function(t,e){if(!t)return this._listeners.length=0,!0;for(var r,i=this._listeners,n=i.length;n--;)if((r=i[n]).f===t&&(!e||r.c===e))return r.j=0,i.splice(n,1),!0;return!1},i.dispatch=function(t){t=s.call(arguments,0),this.dispatchCount++;for(var e,r,i=this.dispatchCount,n=this._listeners,a=n.length;a--;)if((e=n[a])&&e.j<i&&(e.j=i,!1===e.r.apply(e.c,e.a.concat(t)))){r=e;break}for(n=this._listeners,a=n.length;a--;)n[a].j=0;return r};var n="Callback function is missing!",s=Array.prototype.slice;function a(t){t.sort((function(t,e){return t=t.p,(e=e.p)<t?1:t>e?-1:0}))}function o(t,e,r,i){if(!t)throw n;r=r||0;for(var o,l,h,u=this._listeners,c=u.length;c--;)if((o=u[c]).f===t&&o.c===e)return!1;"function"==typeof r&&(l=r,r=i,h=4),u.unshift({f:t,c:e,p:r,r:l||t,a:s.call(arguments,h||3),j:0}),a(u)}t.exports=r}()}(tc);var ec,rc=tc.exports,ic=rc;function nc(){this.isLoading=!1,this.totalWeight=0,this.loadedWeight=0,this.itemUrls={},this.itemList=[],this.loadingSignal=new ic,this.crossOriginMap={},this.queue=[],this.activeItems=[],this.maxActiveItems=4}var sc=nc.prototype;sc.addChunk=function(t,e){var r,i,n,s,a,o=fc(t,e);for(r=0,n=o.length;r<n;r++)for(a=o[r],i=0,s=a.items.length;i<s;i++)this.add(a.items[i],{type:a.type});return o},sc.setCrossOrigin=function(t,e){this.crossOriginMap[t]=e},sc.add=function(t,e){var r=ac[t];return r||(r=this._createItem(t,e&&e.type?e.type:mc(t).type,e)),e&&e.onLoad&&r.onLoaded.addOnce(e.onLoad),this.itemUrls[t]||(this.itemUrls[t]=r,this.itemList.push(r),this.totalWeight+=r.weight),r},sc.load=function(t,e){var r=ac[t];return r||(r=this._createItem(t,e&&e.type?e.type:mc(t).type,e)),e&&e.onLoad&&r.onLoaded.addOnce(e.onLoad),oc[t]?r.dispatch():r.isStartLoaded||r.load(),r},sc.start=function(t){t&&this.loadingSignal.add(t),this.isLoading=!0;var e=this.itemList.length;if(e){var r,i=this.itemList.splice(0,this.itemList.length);for(var n in this.itemUrls)delete this.itemUrls[n];for(var s=0;s<e;s++){r=i[s];var a=!!oc[r.url];r.onLoaded.addOnce(pc,this,-1024,r,i,a),r.hasLoading&&r.loadingSignal.add(uc,this,-1024,r,i,ec),a?r.dispatch(pc):r.isStartLoaded||this.queue.push(r)}this.queue.length&&this.loadNext()}else pc.call(this,ec,this.itemList)},sc.loadNext=function(){if(this.queue.length&&this.activeItems.length<this.maxActiveItems){var t=this.queue.shift();this.activeItems.push(t),this.loadNext(),t.load()}},sc._createItem=function(t,e,r){if(!(r=r||{}).crossOrigin)for(var i in this.crossOriginMap)if(0===t.indexOf(i)){r.crossOrigin=this.crossOriginMap[i];break}return new hc[e](t,r)},sc._onLoading=uc,sc.VERSION="0.1.17",sc.register=function(t){hc[t.type]||(lc.push(t),hc[t.type]=t)},sc.retrieveAll=fc,sc.retrieve=mc,sc.testExtensions=gc,sc.create=vc,sc.check=function(){var t=[],e=[];for(var r in ac)t.push(r),oc[r]||e.push(ac[r]);console.log({added:t,notLoaded:e})};var ac=sc.addedItems={},oc=sc.loadedItems={},lc=sc.ITEM_CLASS_LIST=[],hc=sc.ITEM_CLASSES={};function uc(t,e,r,i,n){t&&!t.isLoaded&&1===t.getCombinedPercent(i)||(n===ec&&(this.loadedWeight=cc(e),n=this.loadedWeight/this.totalWeight),(r=r||this.loadingSignal).dispatch(n,t))}function cc(t){for(var e=0,r=0,i=t.length;r<i;r++)e+=t[r].loadedWeight;return e}function pc(t,e,r){if(this.loadedWeight=cc(e),!r)for(var i=this.activeItems,n=i.length;n--;)if(i[n]===t){i.splice(n,1);break}var s=this.loadingSignal;this.loadedWeight===this.totalWeight?(this.isLoading=!1,this.loadedWeight=0,this.totalWeight=0,this.loadingSignal=new ic,this._onLoading(t,e,s,1,1),t&&t.noCache&&dc(t)):(this._onLoading(t,e,s,1,this.loadedWeight/this.totalWeight),t&&t.noCache&&dc(t),r||this.loadNext())}function dc(t){var e=t.url;t.content=ec,ac[e]=ec,oc[e]=ec}function fc(t,e){var r,i,n=t.length,s=[];if(n&&"string"!=typeof t)for(r=0;r<n;r++)(i=mc(t[r],e))&&(s=s.concat(i));else(i=mc(t,e))&&(s=s.concat(i));return s}function mc(t,e){var r,i,n,s,a;if(e)n=(s=hc[e]).retrieve(t);else for(r=0,i=lc.length;r<i;r++){if(a=(s=lc[r]).type,"string"==typeof t){if(gc(t,s)){n=[t];break}}else if((n=s.retrieve(t))&&n.length&&"string"==typeof n[0]&&gc(n[0],s))break;n=ec,a=ec}if(n)return{type:e||a,items:n}}function gc(t,e){if(t){for(var r=function(t){return t.split(".").pop().split(/#|\?/)[0]}(t),i=e.extensions,n=i.length;n--;)if(r===i[n])return!0;return!1}}function vc(){return new nc}Qu.exports=vc();var yc=Qu.exports,xc=rc,_c=yc;function bc(t,e){if(t){for(var r in this.url=t,this.loadedWeight=0,this.weight=1,this.postPercent=0,e)this[r]=e[r];this.type||(this.type=this.constructor.type),this.hasLoading&&(this.loadingSignal=new xc,this.loadingSignal.add(Mc,this),this.onLoading&&this.loadingSignal.add(this.onLoading)),this.onPost?(this.onPostLoadingSignal=new xc,this.onPostLoadingSignal.add(this._onPostLoading,this),this.postWeightRatio=this.postWeightRatio||.1):this.postWeightRatio=0;var i=this;this.boundOnLoad=function(){i._onLoad()},this.onLoaded=new xc,_c.addedItems[t]=this}}var wc=bc,Sc=bc.prototype;function Mc(t){this.loadedWeight=this.weight*this.getCombinedPercent(t)}Sc.load=function(){this.isStartLoaded=!0},Sc._onLoad=function(){this.onPost?this.onPost.call(this,this.content,this.onPostLoadingSignal):this._onLoadComplete()},Sc._onLoading=Mc,Sc._onPostLoading=function(t){this.postPercent=t,this.hasLoading&&this.loadingSignal.dispatch(1),1===t&&this._onLoadComplete()},Sc._onLoadComplete=function(){this.isLoaded=!0,this.loadedWeight=this.weight,_c.loadedItems[this.url]=this,this.onLoaded.dispatch(this.content)},Sc.getCombinedPercent=function(t){return t*(1-this.postWeightRatio)+this.postWeightRatio*this.postPercent},Sc.dispatch=function(){this.hasLoading&&this.loadingSignal.remove(),this.onLoaded.dispatch(this.content)},bc.extensions=[],bc.retrieve=function(){return!1};var Tc=wc,Ec=yc;function Pc(){return"_jsonp"+(new Date).getTime()+~~(1e8*Math.random())}function Cc(t){t&&Ac.constructor.apply(this,arguments)}Cc.type="jsonp",Cc.extensions=[],Ec.register(Cc),Cc.retrieve=function(t){return"string"==typeof t&&t.indexOf("=")>-1&&[t]};var Ac=Tc.prototype,Dc=Cc.prototype=new Tc;Dc.constructor=Cc,Dc.load=function(t){Ac.load.apply(this,arguments);var e=this,r=this.url.lastIndexOf("=")+1,i=this.url.substr(0,r),n=this.url.substr(r);0===n.length?(n=Pc(),this.jsonpCallback=t):this.jsonpCallback=this.jsonpCallback||window[n],window[n]=function(t){s.parentNode&&s.parentNode.removeChild(s),e.content=t,e._onLoad()};var s=document.createElement("script");s.type="text/javascript",s.src=i+n,document.getElementsByTagName("head")[0].appendChild(s)};var kc=wc,Rc=yc,Ic=!!window.XMLHttpRequest;function Lc(t){t&&(Fc.constructor.apply(this,arguments),this.responseType=this.responseType||"",this.method=this.method||"GET")}Lc.type="xhr",Lc.extensions=[],Rc.register(Lc),Lc.retrieve=function(){return!1};var Fc=kc.prototype,Oc=Lc.prototype=new kc;Oc.constructor=Lc,Oc.load=function(){Fc.load.apply(this,arguments);var t,e=this;t=this.xmlhttp=Ic?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),this.hasLoading&&(t.onprogress=function(t){e._onXmlHttpProgress(t)}),t.onreadystatechange=function(){e._onXmlHttpChange()},t.open(this.method,this.url,!0),this.xmlhttp.responseType=this.responseType,Ic?t.send(null):t.send()},Oc._onXmlHttpChange=function(){4===this.xmlhttp.readyState&&200===this.xmlhttp.status&&this._onLoad(this.xmlhttp)},Oc._onXmlHttpProgress=function(t){this.loadingSignal.dispatch(t.loaded/t.total)},Oc._onLoad=function(){this.content||(this.content=this.xmlhttp.response),this.xmlhttp=undefined,Fc._onLoad.call(this)};var zc=wc,Bc=yc;function Vc(t,e){t&&(Nc.constructor.call(this,t,e),!this.loadFunc&&console&&console[console.error||console.log]("require loadFunc in the config object."))}Vc.type="any",Vc.extensions=[],Bc.register(Vc),Vc.retrieve=function(){return!1};var Nc=zc.prototype,Gc=Vc.prototype=new zc;Gc.constructor=Vc,Gc.load=function(){var t=this;this.loadFunc(this.url,(function(e){t.content=e,Nc._onLoad.call(t)}),this.loadingSignal)};var Wc=function(t,e,r,i){if(i=(r=window.getComputedStyle)?r(t):t.currentStyle)return i[e.replace(/-(\w)/gi,(function(t,e){return e.toUpperCase()}))]},Hc=wc,Uc=Wc,jc=yc;function Xc(t,e){t&&(qc.constructor.apply(this,arguments),this.content=this.content||new Image,this.crossOrigin&&(this.content.crossOrigin=this.crossOrigin))}var qc=Hc.prototype,Yc=Xc.prototype=new Hc;function Zc(t){return 0!==t.indexOf("data:")}Yc.constructor=Xc,Yc.load=function(){qc.load.apply(this,arguments);var t=this.content;t.onload=this.boundOnLoad,t.src=this.url},Yc._onLoad=function(){delete this.content.onload,this.width=this.content.width,this.height=this.content.height,qc._onLoad.call(this)},Xc.retrieve=function(t){if(t.nodeType&&t.style){var e=[];"img"===t.nodeName.toLowerCase()&&t.src.indexOf(";")<0&&e.push(t.src),Uc(t,"background-image").replace(/s?url\(\s*?['"]?([^;]*?)['"]?\s*?\)/g,(function(t,r){e.push(r)}));for(var r=e.length;r--;)Zc(e[r])||e.splice(r,1);return!!e.length&&e}return"string"==typeof t&&[t]},Xc.type="image",Xc.extensions=["jpg","gif","png"],jc.register(Xc);const $c=Zu(yc);const Jc=new class{win=window;isSecureConnection="https:"===window.location.protocol;loader=$c.create();percent=0;easedPercent=0;domRoot=document.querySelector(":root");_isSupportedDevice=!1;_isSupportedBrowser=!1;_isSupportedWebGL=!1;_isSupportedMobileOrientation=!1;_isSupported=!1;time=0;deltaTime=0;hasInitialized=!1;hasStarted=!1;startTime=0;viewportWidth=0;viewportHeight=0;width=0;height=0;useMobileLayout=!1;renderer=null;scene=null;camera=null;cameraDirection=new Rs(0,0,1);postprocessing=null;resolution=new as;viewportResolution=new as;bgColor=new bs;bgColorHex="#F4F4F4";canvas=null;gl=null;webglDPR=1;webglOpts={antialias:!1,alpha:!1,xrCompatible:!1,powerPreference:"high-performance"};sharedUniforms={u_aspect:{value:1},u_cameraDirection:{value:this.cameraDirection},u_dpr:{value:1},u_time:{value:0},u_deltaTime:{value:1},u_resolution:{value:this.resolution},u_viewportResolution:{value:this.viewportResolution},u_bgColor:{value:this.bgColor},u_globalRadius:{value:0}};initTaskList=[];changeCamera=new Ku;smaa=null;fxaa=null;aboutPageHeroEfxPrepass=null;cameraMotionBlur=null;aboutPageHeroEfx=null;gtao=null;bloom=null;screenPaintDistortion=null;final=null;opacity=1;cameraLookX=0;cameraLookY=0;defaults={defaultCameraPosition:new Rs(0,0,5),defaultLookAtPosition:new Rs(0,0,0),autoScrollSpeed:0,cameraNear:.1,cameraFar:200,clearAlpha:1,cameraFov:45,cameraUsePhysical:!1,cameraFilmGauge:35,cameraFocalLength:35,screenPaintOffsetRatio:1,cameraViewportOffsetX:0,cameraViewportOffsetY:0,cameraDistance:5,cameraLookStrength:0,cameraLookEaseDamp:.1,cameraShakePositionStrength:0,cameraShakePositionSpeed:.15,cameraShakeRotationStrength:0,cameraShakeRotationSpeed:.3,cameraDollyZoomFovOffset:0,bloomAmount:0,bloomRadius:0,bloomThreshold:0,bloomSmoothWidth:0,bloomSaturation:1,bloomHighPassMultiplier:1,haloWidth:.6,haloRGBShift:.02,haloStrength:0,haloMaskInner:.3,haloMaskOuter:.5,useFinal:!1,vignetteFrom:2,vignetteTo:5,vignetteColorHex:"#000000",saturation:1,contrast:0,brightness:1,tintColorHex:"#000000",tintOpacity:0,screenPaintNeedsMouseDown:!1,screenPaintMinRadius:0,screenPaintMaxRadius:100,screenPaintRadiusDistanceRange:200,screenPaintPushStrength:5,screenPaintVelocityDissipation:.975,screenPaintWeight1Dissipation:.97,screenPaintWeight2Dissipation:.8,screenPaintUseNoise:!0,screenPaintCurlScale:.03,screenPaintCurlStrength:3,screenPaintDistortionAmount:3,screenPaintDistortionRGBShift:.5,screenPaintDistortionColorMultiplier:15,screenPaintDistortionMultiplier:5,upscalerAmount:1,upscalerSharpness:1,isSmaaEnabled:!Yu.USE_HD};onFirstClicked=new Ku;isPreloaderFinished=!1;balloonsColorIndex=0;globalRadius=0;isContactFromProjectPage=!1;constructor(){}reset(){for(let t in this.defaults)this[t]=this.defaults[t];this.smaa&&(this.smaa.enabled=!0)}};var Kc,Qc,tp,ep,rp,ip,np,sp,ap,op,lp,hp,up,cp,pp,dp=!1;function fp(){if(!dp){dp=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),r=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(hp=/\b(iPhone|iP[ao]d)/.exec(t),up=/\b(iP[ao]d)/.exec(t),op=/Android/i.exec(t),cp=/FBAN\/\w+;/i.exec(t),pp=/Mobile/i.exec(t),lp=!!/Win64/.exec(t),e){(Kc=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN)&&document&&document.documentMode&&(Kc=document.documentMode);var i=/(?:Trident\/(\d+.\d+))/.exec(t);ip=i?parseFloat(i[1])+4:Kc,Qc=e[2]?parseFloat(e[2]):NaN,tp=e[3]?parseFloat(e[3]):NaN,(ep=e[4]?parseFloat(e[4]):NaN)?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t),rp=e&&e[1]?parseFloat(e[1]):NaN):rp=NaN}else Kc=Qc=tp=rp=ep=NaN;if(r){if(r[1]){var n=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);np=!n||parseFloat(n[1].replace("_","."))}else np=!1;sp=!!r[2],ap=!!r[3]}else np=sp=ap=!1}}var mp,gp={ie:function(){return fp()||Kc},ieCompatibilityMode:function(){return fp()||ip>Kc},ie64:function(){return gp.ie()&&lp},firefox:function(){return fp()||Qc},opera:function(){return fp()||tp},webkit:function(){return fp()||ep},safari:function(){return gp.webkit()},chrome:function(){return fp()||rp},windows:function(){return fp()||sp},osx:function(){return fp()||np},linux:function(){return fp()||ap},iphone:function(){return fp()||hp},mobile:function(){return fp()||hp||up||op||pp},nativeApp:function(){return fp()||cp},android:function(){return fp()||op},ipad:function(){return fp()||up}},vp=gp,yp=!!(typeof window<"u"&&window.document&&window.document.createElement),xp={canUseDOM:yp,canUseWorkers:typeof Worker<"u",canUseEventListeners:yp&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:yp&&!!window.screen,isInWorker:!yp};xp.canUseDOM&&(mp=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""));var _p=function(t,e){if(!xp.canUseDOM||e&&!("addEventListener"in document))return!1;var r="on"+t,i=r in document;if(!i){var n=document.createElement("div");n.setAttribute(r,"return;"),i="function"==typeof n[r]}return!i&&mp&&"wheel"===t&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i},bp=vp,wp=_p;function Sp(t){var e=0,r=0,i=0,n=0;return"detail"in t&&(r=t.detail),"wheelDelta"in t&&(r=-t.wheelDelta/120),"wheelDeltaY"in t&&(r=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=r,r=0),i=10*e,n=10*r,"deltaY"in t&&(n=t.deltaY),"deltaX"in t&&(i=t.deltaX),(i||n)&&t.deltaMode&&(1==t.deltaMode?(i*=40,n*=40):(i*=800,n*=800)),i&&!e&&(e=i<1?-1:1),n&&!r&&(r=n<1?-1:1),{spinX:e,spinY:r,pixelX:i,pixelY:n}}Sp.getEventType=function(){return bp.firefox()?"DOMMouseScroll":wp("wheel")?"wheel":"mousewheel"};const Mp=Zu(Sp);class Tp{target0=null;target=null;prevTarget=null;value=null;valueVel=null;k1;k2;k3;_f;_z;_r;_w;_z;_d;_targetVelCache;_cache1;_cache2;_k1Stable;_k2Stable;isVector=null;isRobust=null;constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.isRobust=n,this.isVector="object"==typeof t,this.setFZR(e,r,i),this.isVector?(this.target=t,this.target0=t.clone(),this.prevTarget=t.clone(),this.value=t.clone(),this.valueVel=t.clone().setScalar(0),this._targetVelCache=this.valueVel.clone(),this._cache1=this.valueVel.clone(),this._cache2=this.valueVel.clone(),this.update=this._updateVector,this.reset=this._resetVector):(this.target0=t,this.prevTarget=t,this.value=t,this.valueVel=0,this.update=this._updateNumber,this.reset=this._resetNumber),this.computeStableCoefficients=n?this._computeRobustStableCoefficients:this._computeStableCoefficients}update(t){}reset(){}_resetVector(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.target0;this.valueVel.setScalar(0),this.prevTarget.copy(t),this.target.copy(t),this.value.copy(t)}_resetNumber(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.target0;this.valueVel=0,this.prevTarget=t,this.target=t,this.value=t}setFZR(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._f,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._z,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._r,i=2*Math.PI*t;this.isRobust&&(this._w=i,this._z=e,this._d=this._w*Math.sqrt(Math.abs(this._z*this._z-1))),this.k1=e/(Math.PI*t),this.k2=1/(i*i),this.k3=r*e/i}_computeStableCoefficients(t){this._k1Stable=this.k1,this._k2Stable=Math.max(this.k2,1.1*t*t/4+t*this.k1/2)}_computeRobustStableCoefficients(t){if(this._w*t<this._z)this._k1Stable=this.k1,this._k2Stable=Math.max(this.k2,t*t/2+t*this.k1/2,t*this.k1);else{let e=Math.exp(-this._z*this._w*t),r=e*e,i=t/(1+r-2*e*(this._z<=1?Math.cos(t*this._d):Math.cosh(t*this._d)));this._k1Stable=(1-r)*i,this._k2Stable=t*i}}_updateVector(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.target;t>0&&(this._targetVelCache.copy(e).sub(this.prevTarget).divideScalar(t),this.prevTarget.copy(e),this.computeStableCoefficients(t),this.value.add(this._cache1.copy(this.valueVel).multiplyScalar(t)),this._cache1.copy(e).add(this._targetVelCache.multiplyScalar(this.k3)).sub(this.value).sub(this._cache2.copy(this.valueVel).multiplyScalar(this._k1Stable)).multiplyScalar(t/this._k2Stable),this.valueVel.add(this._cache1))}_updateNumber(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.target;if(t>0){let r=(e-this.prevTarget)/t;this.prevTarget=e,this.computeStableCoefficients(t),this.valueVel+=(e+this.k3*r-this.value-this._k1Stable*this.valueVel)*(t/this._k2Stable),this.value+=this.valueVel*t}}}const Ep=new class{onDowned=new Ku;onMoved=new Ku;onUped=new Ku;onClicked=new Ku;onWheeled=new Ku;onXScrolled=new Ku;onYScrolled=new Ku;wasDown=!1;isDown=!1;downTime=0;hasClicked=!1;hasMoved=!1;hadMoved=!1;justClicked=!1;mouseXY=new as;_prevMouseXY=new as;prevMouseXY=new as;mousePixelXY=new as;_prevMousePixelXY=new as;prevMousePixelXY=new as;downXY=new as;downPixelXY=new as;deltaXY=new as;deltaPixelXY=new as;deltaDownXY=new as;deltaDownPixelXY=new as;deltaDownPixelDistance=0;deltaWheel=0;deltaDragScrollX=0;deltaScrollX=0;deltaDragScrollY=0;deltaScrollY=0;isDragScrollingX=!1;isDragScrollingY=!1;isWheelScrolling=!1;dragScrollXMomentum=0;dragScrollYMomentum=0;dragScrollMomentumMultiplier=10;canDesktopDragScroll=!1;needsCheckDragScrollDirection=!1;lastScrollXDirection=0;lastScrollYDirection=0;easedMouseDynamics={};dragScrollDynamic;downThroughElems=[];currThroughElems=[];prevThroughElems=[];clickThroughElems=[];preInit(){const t=document;t.addEventListener("mousedown",this._onDown.bind(this)),t.addEventListener("touchstart",this._getTouchBound(this,this._onDown)),t.addEventListener("mousemove",this._onMove.bind(this)),t.addEventListener("touchmove",this._getTouchBound(this,this._onMove)),t.addEventListener("mouseup",this._onUp.bind(this)),t.addEventListener("touchend",this._getTouchBound(this,this._onUp)),t.addEventListener("wheel",this._onWheel.bind(this)),t.addEventListener("mousewheel",this._onWheel.bind(this)),this.addEasedInput("default",1.35,.5,1.25),this.dragScrollDynamic=this.addEasedInput("dragScroll",2,1,1),this.onUped.addOnce((()=>{Jc.onFirstClicked.dispatch()}))}init(){}resize(){for(let t in this.easedMouseDynamics)this.easedMouseDynamics[t].reset()}update(t){for(let e in this.easedMouseDynamics){let r=this.easedMouseDynamics[e];r.target.copy(this.mouseXY),r.update(t)}}addEasedInput(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;return this.easedMouseDynamics[t]=new Tp(new as,e,r,i)}postUpdate(t){this.prevThroughElems.length=0,this.prevThroughElems.concat(this.currThroughElems),this.deltaWheel=0,this.deltaDragScrollX=0,this.deltaDragScrollY=0,this.deltaScrollX=0,this.deltaScrollY=0,this.dragScrollXMomentum=0,this.dragScrollYMomentum=0,this.deltaXY.set(0,0),this.deltaPixelXY.set(0,0),this.prevMouseXY.copy(this.mouseXY),this.prevMousePixelXY.copy(this.mousePixelXY),this.hadMoved=this.hasMoved,this.wasDown=this.isDown,this.justClicked=!1,this.isWheelScrolling=!1}_onWheel(t){let e=Mp(t).pixelY;e=Nu.clamp(e,-200,200),this.deltaWheel+=e,this.deltaScrollX=this.deltaDragScrollX+this.deltaWheel,this.deltaScrollY=this.deltaDragScrollY+this.deltaWheel,this.lastScrollXDirection=this.deltaWheel>0?1:-1,this.lastScrollYDirection=this.deltaWheel>0?1:-1,this.isWheelScrolling=!0,this.onWheeled.dispatch(t.target),this.onXScrolled.dispatch(t.target),this.onYScrolled.dispatch(t.target)}_onDown(t){this.isDown=!0,this.downTime=+new Date,this.prevThroughElems.length=0,this._setThroughElementsByEvent(t,this.downThroughElems),this._getInputXY(t,this.downXY),this._getInputPixelXY(t,this.downPixelXY),this._prevMouseXY.copy(this.downXY),this._prevMousePixelXY.copy(this.downPixelXY),this.deltaXY.set(0,0),this.deltaPixelXY.set(0,0),this._getInputXY(t,this.mouseXY),this.dragScrollDynamic.reset(this.mouseXY),this.isDragScrollingX=!1,this.isDragScrollingY=!1,this.needsCheckDragScrollDirection=!1,this._onMove(t),this.onDowned.dispatch(t),this.needsCheckDragScrollDirection=!0}_onMove(t){this._getInputXY(t,this.mouseXY),this._getInputPixelXY(t,this.mousePixelXY),this.deltaXY.copy(this.mouseXY).sub(this._prevMouseXY),this.deltaPixelXY.copy(this.mousePixelXY).sub(this._prevMousePixelXY),this._prevMouseXY.copy(this.mouseXY),this._prevMousePixelXY.copy(this.mousePixelXY),this.hasMoved=this.deltaXY.length()>0,this.isDown&&(this.deltaDownXY.copy(this.mouseXY).sub(this.downXY),this.deltaDownPixelXY.copy(this.mousePixelXY).sub(this.downPixelXY),this.deltaDownPixelDistance=this.deltaDownPixelXY.length(),(qu.isMobile||this.canDesktopDragScroll)&&(this.needsCheckDragScrollDirection&&(this.isDragScrollingX=Math.abs(this.deltaPixelXY.x)>Math.abs(this.deltaPixelXY.y),this.isDragScrollingY=!this.isDragScrollingX,this.needsCheckDragScrollDirection=!1),this.isDragScrollingX&&(this.deltaDragScrollX+=-this.deltaPixelXY.x,this.deltaScrollX+=-this.deltaPixelXY.x+this.deltaWheel,this.lastScrollXDirection=this.deltaDragScrollX>0?1:-1,this.onXScrolled.dispatch(t.target)),this.isDragScrollingY&&(this.deltaDragScrollY+=-this.deltaPixelXY.y,this.deltaScrollY+=-this.deltaPixelXY.y+this.deltaWheel,this.lastScrollYDirection=this.deltaDragScrollY>0?1:-1,this.onYScrolled.dispatch(t.target)))),this._setThroughElementsByEvent(t,this.currThroughElems),this.onMoved.dispatch(t)}_onUp(t){const e=t.clientX-this.downPixelXY.x,r=t.clientY-this.downPixelXY.y;Math.sqrt(e*e+r*r)<40&&+new Date-this.downTime<300&&(this._setThroughElementsByEvent(t,this.clickThroughElems),this._getInputXY(t,this.mouseXY),this.hasClicked=!0,this.justClicked=!0,this.onClicked.dispatch(t)),this.deltaDownXY.set(0,0),this.deltaDownPixelXY.set(0,0),this.deltaDownPixelDistance=0,this.dragScrollXMomentum=this.dragScrollDynamic.valueVel.y*Jc.viewportWidth*this.dragScrollMomentumMultiplier*Jc.deltaTime,this.dragScrollYMomentum=this.dragScrollDynamic.valueVel.y*Jc.viewportHeight*this.dragScrollMomentumMultiplier*Jc.deltaTime,this.isDown=!1,this.needsCheckDragScrollDirection=!1,this.onUped.dispatch(t)}_getTouchBound(t,e,r){return function(i){r&&i.preventDefault&&i.preventDefault(),e.call(t,i.changedTouches[0]||i.touches[0])}}_getInputXY(t,e){return e.set(t.clientX/Jc.viewportWidth*2-1,1-t.clientY/Jc.viewportHeight*2),e}_getInputPixelXY(t,e){e.set(t.clientX,t.clientY)}_setThroughElementsByEvent(t,e){let r=t.target;for(e.length=0;r.parentNode;)e.push(r),r=r.parentNode}hasThroughElem(t,e){let r=this[e+"ThroughElems"]||this.currThroughElems,i=r.length;for(;i--;)if(r[i]===t)return!0;return!1}hasThroughElemWithClass(t,e){let r=this[e+"ThroughElems"]||this.currThroughElems,i=r.length;for(;i--;)if(r[i].classList.contains(t))return r[i];return null}};class Pp{constructor(t,e){this.dom=t,this.isVertical=e,this.needsUpdate=!0,this.forcedUpdate=!0,this.screenX=0,this.screenY=0,this.ratio=0,this.screenRatio=0,this.isActive=!1,this._left=0,this._right=0,this._top=0,this._bottom=0,this.left=0,this.right=0,this.top=0,this.bottom=0,this.width=0,this.height=0,this.showScreenOffset=0,this.hideScreenOffset=0}update(t,e,r,i){if(i=i||this.needsUpdate){let e=this.dom.getBoundingClientRect();this.needsUpdate=!1,this._left=e.left,this._right=e.right,this._top=e.top,this._bottom=e.bottom,this.width=e.width,this.height=e.height,this.forcedUpdate=!1,this.isVertical?(this._top+=t,this._bottom+=t):(this._left+=t,this._right+=t)}let n;this.left=this._left,this.right=this._right,this.top=this._top,this.bottom=this._bottom,this.isVertical?(this.top+=r,this.bottom+=r):(this.left+=r,this.right+=r),this.screenX=this.left,this.screenY=this.top,n=this.isVertical?this.screenY-=t:this.screenX-=t;let s=this.isVertical?this.height:this.width;this.ratio=Math.min(0,Nu.unClampedFit(n,e,e-s,-1,0)),this.ratio+=Math.max(0,Nu.unClampedFit(n,0,-s,0,1)),this.screenRatio=Nu.fit(n,e,-s,-1,1),this.showScreenOffset=-(n-e)/e,this.hideScreenOffset=-(n+s)/e,this.isActive=this.ratio>=-1&&this.ratio<=1}}const Cp="#define GLSLIFY 1\nattribute vec2 position;varying vec2 v_uv;void main(){v_uv=position*0.5+0.5;gl_Position=vec4(position,0.0,1.0);}",Ap="#define GLSLIFY 1\nuniform sampler2D u_texture;varying vec2 v_uv;void main(){gl_FragColor=texture2D(u_texture,v_uv);}";const Dp=new class{isWebGL2;renderer;quadGeom;triGeom;floatType;precisionPrefix;precisionPrefix2;vertexShader;_scene;_camera;_tri;copyMaterial;uvCopyMaterial;clearMaterial;_debugScene;_debugMesh;_debugMaterial;init(t,e){this.renderer=t,this.floatType=e,this.isWebGL2=this.renderer.capabilities.isWebGL2,this._scene=new wu,this._camera=new Do,this._camera.position.z=1,this.triGeom=new oo,this.triGeom.setAttribute("position",new $a(new Float32Array([-1,-1,0,4,-1,0,-1,4,0]),3)),this.quadGeom=new jo(2,2),this._tri=new wo(this.triGeom),this._tri.frustumCulled=!1,this._scene.add(this._tri),this.precisionPrefix=`precision ${this.renderer.capabilities.precision} float;\n`,this.precisionPrefix2=`#version 300 es\n\t\t\tprecision ${this.renderer.capabilities.precision} float;\n\t\t\tprecision ${this.renderer.capabilities.precision} int;\n\t\t\t#define IS_WEBGL2 true\n\t\t`,this.isWebGL2?(this.vertexPrefix=`${this.precisionPrefix2}\n\t\t\t\tprecision mediump sampler2DArray;\n\t\t\t\t#define attribute in\n\t\t\t\t#define varying out\n\t\t\t\t#define texture2D texture\n\t\t\t`,this.fragmentPrefix=`${this.precisionPrefix2}\n\t\t\t\t#define varying in\n\t\t\t\tout highp vec4 pc_fragColor;\n\t\t\t\t#define gl_FragColor pc_fragColor\n\t\t\t\t#define gl_FragDepthEXT gl_FragDepth\n\t\t\t\t#define texture2D texture\n\t\t\t\t#define textureCube texture\n\t\t\t\t#define texture2DProj textureProj\n\t\t\t\t#define texture2DLodEXT textureLod\n\t\t\t\t#define texture2DProjLodEXT textureProjLod\n\t\t\t\t#define textureCubeLodEXT textureLod\n\t\t\t\t#define texture2DGradEXT textureGrad\n\t\t\t\t#define texture2DProjGradEXT textureProjGrad\n\t\t\t\t#define textureCubeGradEXT textureGrad\n\t\t\t`):(this.vertexPrefix=this.precisionPrefix,this.fragmentPrefix=this.precisionPrefix),this.renderer.getContext().getExtension("OES_standard_derivatives"),this.vertexShader=this.precisionPrefix+Cp,this.copyMaterial=new Bu({uniforms:{u_texture:{value:null}},vertexShader:this.vertexShader,fragmentShader:this.precisionPrefix+Ap,depthTest:!1,depthWrite:!1,blending:0}),this.uvCopyMaterial=new Bu({uniforms:{u_texture:{value:null}},vertexShader:this.precisionPrefix+"#define GLSLIFY 1\nattribute vec2 position;attribute vec2 uv;varying vec2 v_uv;void main(){v_uv=uv;gl_Position=vec4(position,0.0,1.0);}",fragmentShader:this.precisionPrefix+Ap,depthTest:!1,depthWrite:!1,blending:0}),this.clearMaterial=new Bu({uniforms:{u_color:{value:new Cs(1,1,1,1)}},vertexShader:this.vertexShader,fragmentShader:this.precisionPrefix+"#define GLSLIFY 1\nuniform vec4 u_color;varying vec2 v_uv;void main(){gl_FragColor=u_color;}",depthTest:!1,depthWrite:!1,blending:0});const r=new jo(1,1);r.translate(.5,-.5,0),this._debugMaterial=new Bu({uniforms:{u_texture:{value:null},u_transform:{value:new Cs(0,0,1,1)}},vertexShader:this.precisionPrefix+"#define GLSLIFY 1\nattribute vec3 position;attribute vec2 uv;uniform vec4 u_transform;varying vec2 v_uv;void main(){v_uv=uv;gl_Position=vec4(position.xy*u_transform.zw+u_transform.xy,0.0,1.0);}",fragmentShader:this.precisionPrefix+Ap,depthTest:!1,depthWrite:!1,blending:0}),this._debugMesh=new wo(r,this._debugMaterial),this._debugScene=new wu,this._debugScene.frustumCulled=!1,this._debugScene.add(this._debugMesh)}copy(t,e){const r=this.copyMaterial;r&&(r.uniforms.u_texture.value=t,this.render(r,e))}uvCopy(t,e){const r=this.uvCopyMaterial;r&&(r.uniforms.u_texture.value=t,this.render(r,e))}render(t,e){this._tri&&this.renderer&&this._scene&&this._camera&&(this._tri.material=t,e&&this.renderer.setRenderTarget(e),this.renderer.render(this._scene,this._camera))}renderGeometry(t,e,r){this._tri&&this.triGeom&&(this._tri.geometry=t,this.render(e,r),this._tri.geometry=this.triGeom)}renderMesh(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._camera;this._tri&&this.renderer&&this._scene&&r&&(this._tri.visible=!1,this._scene.add(t),e&&this.renderer.setRenderTarget(e||null),this.renderer.render(this._scene,r),e&&this.renderer.setRenderTarget(null),this._scene.remove(t),this._tri.visible=!0)}debugTo(t,e,r,i,n){if(!(this.renderer&&this._debugMaterial&&this._debugScene&&this._camera))return;e=e||t.width||t.image.width,r=r||t.height||t.image.height,i=i||0,n=n||0;const s=this.renderer.getSize(new as);i=i/s.width*2-1,n=1-n/s.height*2,e=e/s.width*2,r=r/s.height*2,this._debugMaterial.uniforms.u_texture.value=t,this._debugMaterial.uniforms.u_transform.value.set(i,n,e,r);const a=this.getColorState();this.renderer.autoClearColor=!1,this.renderer.setRenderTarget(null),this.renderer.render(this._debugScene,this._camera),this.setColorState(a)}parseDefines(t){let e="";for(const r in t){const i=t[r];e+=!0===i?`#define ${r}\n`:`#define ${r} ${i}\n`}return e}clearColor(t,e,r,i,n){this.clearMaterial&&(this.clearMaterial.uniforms.u_color.value.set(t,e,r,i),this.render(this.clearMaterial,n))}getColorState(){if(!this.renderer)return{autoClear:!0,autoClearColor:!0,autoClearStencil:!0,autoClearDepth:!0,clearColor:0,clearAlpha:1};const t=new bs;return this.renderer.getClearColor(t),{autoClear:this.renderer.autoClear,autoClearColor:this.renderer.autoClearColor,autoClearStencil:this.renderer.autoClearStencil,autoClearDepth:this.renderer.autoClearDepth,clearColor:t.getHex(),clearAlpha:this.renderer.getClearAlpha()}}setColorState(t){this.renderer&&(this.renderer.setClearColor(t.clearColor,t.clearAlpha),this.renderer.autoClear=t.autoClear,this.renderer.autoClearColor=t.autoClearColor,this.renderer.autoClearStencil=t.autoClearStencil,this.renderer.autoClearDepth=t.autoClearDepth)}createRawShaderMaterial(t){(t=Object.assign({depthTest:!1,depthWrite:!1,blending:0,vertexShader:Cp,fragmentShader:Ap,derivatives:!1},t)).vertexShader=(t.vertexShaderPrefix?t.vertexShaderPrefix:t.derivatives?this.vertexPrefix:this.precisionPrefix)+t.vertexShader,t.fragmentShader=(t.fragmentShaderPrefix?t.fragmentShaderPrefix:t.derivatives?this.fragmentPrefix:this.precisionPrefix)+t.fragmentShader,delete t.vertexShaderPrefix,delete t.fragmentShaderPrefix,delete t.derivatives;let e=new Bu(t);return Rp.add(e),e}createDataTexture(t,e,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],n=new Su(t,e,r,cn,arguments.length>3&&void 0!==arguments[3]&&arguments[3]?ln:sn,300,Ki,Ki,i?tn:rn,i?tn:rn,0);return n.needsUpdate=!0,n}createRenderTarget(t,e){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return new As(t,e,{wrapS:Ki,wrapT:Ki,magFilter:r?tn:rn,minFilter:r?tn:rn,type:"boolean"==typeof i?i?this.floatType:sn:i,anisotropy:0,encoding:Vn,depthBuffer:!1,stencilBuffer:!1,samples:qu.isSupportMSAA?n:0})}createMultisampleRenderTarget(t,e){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:8;return this.renderer&&this.isWebGL2&&qu.isSupportMSAA?new As(t,e,{wrapS:Ki,wrapT:Ki,magFilter:r?tn:rn,minFilter:r?tn:rn,type:i?this.floatType:sn,anisotropy:0,encoding:Vn,depthBuffer:!1,stencilBuffer:!1,samples:n}):this.createRenderTarget(t,e,r,i)}clearMultisampleRenderTargetState(t){if((t=t||this.renderer.getRenderTarget())&&t.samples>0){const e=this.renderer.properties.get(t);let r=this.renderer.getContext();r.bindFramebuffer(r.READ_FRAMEBUFFER,e.__webglMultisampledFramebuffer),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,e.__webglFramebuffer);const i=t.width,n=t.height;let s=r.COLOR_BUFFER_BIT;t.depthBuffer&&(s|=r.DEPTH_BUFFER_BIT),t.stencilBuffer&&(s|=r.STENCIL_BUFFER_BIT),r.blitFramebuffer(0,0,i,n,0,0,i,n,s,r.NEAREST),r.bindFramebuffer(r.FRAMEBUFFER,e.__webglMultisampledFramebuffer)}}};class kp{constructor(t){Array.isArray(t)?this.run=this.createMultiCallbackFunc(t):this.run=this.createCallbackFunc(t)}run(){}createMultiCallbackFunc(t){let e=[];for(let r=0;r<t.length;r++)e.push(this.createCallbackFunc(t[r]));return function(){for(let t=0;t<e.length;t++)e[t]()}}createCallbackFunc(t){let e;return e=t.isRawShaderMaterial||t.isShaderMaterial?this.createShaderMaterialFunc(t):t.isObject3D?this.createCompileSceneFunc(t):t.isTexture?this.createInitTextureFunc(t):t,e}createShaderMaterialFunc(t){return function(){Dp._tri.material=t,Jc.renderer.compile(Dp._tri,Jc.camera)}}createCompileSceneFunc(t){return function(){t.traverse((t=>{t._tmpVisible=t.visible,t.visible=!0}));let e=t.visible;t.visible=!0,Jc.renderer.compile(t,Jc.camera),t.traverse((t=>{t.visible=t._tmpVisible})),t.visible=e}}createInitTextureFunc(t){return function(){Jc.renderer.initTexture(t)}}}const Rp=new class{percent=1;taskList=[];_activeTaskList=[];_activeTaskIndex=0;_needsStart=!1;onCompleted=new Ku;start(){this._needsStart=!0,this.percent=0}_start(){this._needsStart=!1,this._activeTaskList=this.taskList.splice(0,this.taskList.length),this._activeTaskIndex=0}add(t){Yu.SKIP_ANIMATION||this.taskList.push(new kp(t))}update(){if(this._needsStart&&this._start(),this._activeTaskList.length){let t=this._activeTaskList[this._activeTaskIndex];t&&(this._activeTaskIndex++,this.percent=this._activeTaskIndex/this._activeTaskList.length,t.run())}else{let t=this.percent;this.percent=1,t<1&&this.onCompleted.dispatch()}}};let Ip;Ip=new class{quadIn(t){return t*t}quadOut(t){return t*(2-t)}quadOutIn(t){return t<.5?.5*Ip.quadOut(t+t):.5*Ip.quadIn(t+t-1)+.5}quadInOut(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}cubicIn(t){return t*t*t}cubicOut(t){return--t*t*t+1}cubicOutIn(t){return t<.5?.5*Ip.cubicOut(t+t):.5*Ip.cubicIn(t+t-1)+.5}cubicInOut(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}quartIn(t){return t*t*t*t}quartOut(t){return 1- --t*t*t*t}quartOutIn(t){return t<.5?.5*Ip.quartOut(t+t):.5*Ip.quartIn(t+t-1)+.5}quartInOut(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}quintIn(t){return t*t*t*t*t}quintOut(t){return--t*t*t*t*t+1}quintOutIn(t){return t<.5?.5*Ip.quintOut(t+t):.5*Ip.quintIn(t+t-1)+.5}quintInOut(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}sineIn(t){return 1-Math.cos(t*Math.PI/2)}sineOut(t){return Math.sin(t*Math.PI/2)}sineOutIn(t){return t<.5?.5*Ip.sineOut(t+t):.5*Ip.sineIn(t+t-1)+.5}sineInOut(t){return.5*(1-Math.cos(Math.PI*t))}expoIn(t){return 0===t?0:Math.pow(1024,t-1)}expoOut(t){return 1===t?1:1-Math.pow(2,-10*t)}expoOutIn(t){return t<.5?.5*Ip.expoOut(t+t):.5*Ip.expoIn(t+t-1)+.5}expoInOut(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}circIn(t){return 1-Math.sqrt(1-t*t)}circOut(t){return Math.sqrt(1- --t*t)}circOutIn(t){return t<.5?.5*Ip.circOut(t+t):.5*Ip.circIn(t+t-1)+.5}circInOut(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}elasticIn(t){let e,r=.1;return 0===t?0:1===t?1:(!r||r<1?(r=1,e=.1):e=.4*Math.asin(1/r)/(2*Math.PI),-r*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/.4))}elasticOut(t){let e,r=.1;return 0===t?0:1===t?1:(!r||r<1?(r=1,e=.1):e=.4*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/.4)+1)}elasticOutIn(t){return t<.5?.5*Ip.elasticOut(t+t):.5*Ip.elasticIn(t+t-1)+.5}elasticInOut(t){let e,r=.1,i=.4;return 0===t?0:1===t?1:(!r||r<1?(r=1,e=.1):e=i*Math.asin(1/r)/(2*Math.PI),(t*=2)<1?-.5*r*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i):r*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i)*.5+1)}backIn(t){let e=1.70158;return t*t*((e+1)*t-e)}backOut(t){let e=1.70158;return--t*t*((e+1)*t+e)+1}backOutIn(t){return t<.5?.5*Ip.backOut(t+t):.5*Ip.backIn(t+t-1)+.5}backInOut(t){let e=2.5949095;return(t*=2)<1?.5*t*t*((e+1)*t-e):.5*((t-=2)*t*((e+1)*t+e)+2)}bounceIn(t){return 1-Ip.bounceOut(1-t)}bounceOut(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}bounceOutIn(t){return t<.5?.5*Ip.bounceOut(t+t):.5*Ip.bounceIn(t+t-1)+.5}bounceInOut(t){return t<.5?.5*Ip.bounceIn(2*t):.5*Ip.bounceOut(2*t-1)+.5}cubicBezier(t,e,r,i,n){if(t<=0)return 0;if(t>=1)return 1;if(e===r&&i===n)return t;const s=(t,e,r,i)=>1/(3*e*t*t+2*r*t+i);let a,o,l,h=1-3*i+3*e-0,u=3*i-6*e+0,c=3*e-0,p=1-3*n+3*r-0,d=3*n-6*r+0,f=3*r-0,m=t;for(a=0;a<100;a++)o=h*((g=m)*g*g)+u*(g*g)+c*g+0,l=s(m,h,u,c),l===1/0&&(l=t),m-=(o-t)*l,m=Math.min(Math.max(m,0),1);var g;return((t,e,r,i,n)=>{let s=t*t;return e*(s*t)+r*s+i*t+n})(m,p,d,f,0)}};class Lp extends wu{wasActive=null;isActive=null;constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),Object.assign(this,{defaultCameraPosition:new Rs(0,0,5),defaultLookAtPosition:new Rs(0,0,0),properties:{}},t)}preInit(){}init(){}resize(t,e){}syncProperties(t){}update(t){}}const Fp=new class{material=null;getBlur9Material(){let t=Dp.MAX_VARYING_VECTORS>8;return this.blur9Material||(this.blur9Material=new Bu({uniforms:{u_texture:{value:null},u_delta:{value:new as}},vertexShader:t?Dp.precisionPrefix+"#define GLSLIFY 1\nattribute vec3 position;uniform vec2 u_delta;varying vec2 v_uv[9];void main(){vec2 uv=position.xy*0.5+0.5;v_uv[0]=uv;vec2 delta=u_delta;v_uv[1]=uv-delta;v_uv[2]=uv+delta;delta+=u_delta;v_uv[3]=uv-delta;v_uv[4]=uv+delta;delta+=u_delta;v_uv[5]=uv-delta;v_uv[6]=uv+delta;delta+=u_delta;v_uv[7]=uv-delta;v_uv[8]=uv+delta;gl_Position=vec4(position,1.0);}":Dp.vertexShader,fragmentShader:Dp.precisionPrefix+(t?"#define GLSLIFY 1\nuniform sampler2D u_texture;varying vec2 v_uv[9];void main(){vec4 color=texture2D(u_texture,v_uv[0])*0.1633;color+=texture2D(u_texture,v_uv[1])*0.1531;color+=texture2D(u_texture,v_uv[2])*0.1531;color+=texture2D(u_texture,v_uv[3])*0.12245;color+=texture2D(u_texture,v_uv[4])*0.12245;color+=texture2D(u_texture,v_uv[5])*0.0918;color+=texture2D(u_texture,v_uv[6])*0.0918;color+=texture2D(u_texture,v_uv[7])*0.051;color+=texture2D(u_texture,v_uv[8])*0.051;gl_FragColor=color;}":"#define GLSLIFY 1\nuniform sampler2D u_texture;uniform vec2 u_delta;varying vec2 v_uv;void main(){vec4 color=texture2D(u_texture,v_uv)*0.1633;vec2 delta=u_delta;color+=texture2D(u_texture,v_uv-delta)*0.1531;color+=texture2D(u_texture,v_uv+delta)*0.1531;delta+=u_delta;color+=texture2D(u_texture,v_uv-delta)*0.12245;color+=texture2D(u_texture,v_uv+delta)*0.12245;delta+=u_delta;color+=texture2D(u_texture,v_uv-delta)*0.0918;color+=texture2D(u_texture,v_uv+delta)*0.0918;delta+=u_delta;color+=texture2D(u_texture,v_uv-delta)*0.051;color+=texture2D(u_texture,v_uv+delta)*0.051;gl_FragColor=color;}"),depthWrite:!1,depthTest:!1})),this.blur9Material}blur(t,e,r,i,n,s){let a=Math.ceil(r.width*e)||0,o=Math.ceil(r.height*e)||0;this.material||(this.material=this.getBlur9Material()),i||console.warn("You have to pass intermediateRenderTarget to blur"),(a!==i.width||o!==i.height)&&i.setSize(a,o),n?s||n.setSize(r.width,r.height):n=r,this.material.uniforms.u_texture.value=r.texture||r,this.material.uniforms.u_delta.value.set(t/a*.25,0),Dp.render(this.material,i),this.material.uniforms.u_texture.value=i.texture||i,this.material.uniforms.u_delta.value.set(0,t/o*.25),Dp.render(this.material,n)}};const Op=new class{glslifyStrip(t){return t.replace(/#define\sGLSLIFY\s./,"")}addChunk(t,e){Xo[t]=this.glslifyStrip(e)}_wrapInclude(t){return"#include <"+t+">"}insertBefore(t,e,r,i){const n=i?this._wrapInclude(e):e;return t.replace(e,this.glslifyStrip(r)+"\n"+n)}insertAfter(t,e,r,i){const n=i?this._wrapInclude(e):e;return t.replace(n,n+"\n"+this.glslifyStrip(r)+"\n")}replace(t,e,r,i){const n=i?this._wrapInclude(e):e;return t.replace(n,"\n"+this.glslifyStrip(r)+"\n")}};const zp=new class{sharedUniforms={u_blueNoiseTexture:{value:null},u_blueNoiseLinearTexture:{value:null},u_blueNoiseTexelSize:{value:null},u_blueNoiseCoordOffset:{value:new as}};TEXTURE_SIZE=128;preInit(){let t=new Ps;t.generateMipmaps=!1,t.minFilter=t.magFilter=rn,t.wrapS=t.wrapT=Ji;let e=new Ps(Jc.loader.add(Yu.TEXTURE_PATH+"LDR_RGB1_0.png",{weight:55,onLoad:function(){e.needsUpdate=!0,t.needsUpdate=!0}}).content);t.image=e.image,e.generateMipmaps=!1,e.minFilter=e.magFilter=tn,e.wrapS=e.wrapT=Ji,this.sharedUniforms.u_blueNoiseTexture.value=e,this.sharedUniforms.u_blueNoiseLinearTexture.value=t,this.sharedUniforms.u_blueNoiseTexelSize.value=new as(1/this.TEXTURE_SIZE,1/this.TEXTURE_SIZE),Op.addChunk("getBlueNoise","#define GLSLIFY 1\nuniform sampler2D u_blueNoiseTexture;uniform vec2 u_blueNoiseTexelSize;uniform vec2 u_blueNoiseCoordOffset;vec3 getBlueNoise(vec2 coord){return texture2D(u_blueNoiseTexture,coord*u_blueNoiseTexelSize+u_blueNoiseCoordOffset).rgb;}vec3 getStaticBlueNoise(vec2 coord){return texture2D(u_blueNoiseTexture,coord*u_blueNoiseTexelSize).rgb;}")}update(t){this.sharedUniforms.u_blueNoiseCoordOffset.value.set(Math.random(),Math.random())}};let Bp=new as;const Vp=new class{_lowRenderTarget;_lowBlurRenderTarget;_prevPaintRenderTarget;_currPaintRenderTarget;_material;_material2;_distortionMaterial;_fromDrawData;_toDrawData;drawEnabled=!0;needsMouseDown=!1;enabled=!0;minRadius=0;maxRadius=100;radiusDistanceRange=100;pushStrength=25;accelerationDissipation=.8;velocityDissipation=.985;weight1Dissipation=.985;weight2Dissipation=.5;useNoise=!1;curlScale=.1;curlStrength=5;_prevUseNoise=null;sharedUniforms={u_paintTexelSize:{value:new as},u_paintTextureSize:{value:new as},u_prevPaintTexture:{value:null},u_currPaintTexture:{value:null},u_lowPaintTexture:{value:null}};init(){this._lowRenderTarget=Dp.createRenderTarget(1,1),this._lowBlurRenderTarget=Dp.createRenderTarget(1,1),this._prevPaintRenderTarget=Dp.createRenderTarget(1,1),this._currPaintRenderTarget=Dp.createRenderTarget(1,1),this.sharedUniforms.u_lowPaintTexture.value=this._lowRenderTarget.texture,this._material=Dp.createRawShaderMaterial({uniforms:{u_lowPaintTexture:{value:this._lowRenderTarget.texture},u_prevPaintTexture:this.sharedUniforms.u_prevPaintTexture,u_paintTexelSize:this.sharedUniforms.u_paintTexelSize,u_drawFrom:{value:this._fromDrawData=new Cs(0,0,0,0)},u_drawTo:{value:this._toDrawData=new Cs(0,0,0,0)},u_pushStrength:{value:0},u_curlScale:{value:0},u_curlStrength:{value:0},u_vel:{value:new as},u_dissipations:{value:new Rs},u_scrollOffset:{value:new as}},fragmentShader:"#define GLSLIFY 1\nuniform sampler2D u_lowPaintTexture;uniform sampler2D u_prevPaintTexture;uniform vec2 u_paintTexelSize;uniform vec2 u_scrollOffset;uniform vec4 u_drawFrom;uniform vec4 u_drawTo;uniform float u_pushStrength;uniform vec3 u_dissipations;uniform vec2 u_vel;varying vec2 v_uv;vec2 sdSegment(in vec2 p,in vec2 a,in vec2 b){vec2 pa=p-a,ba=b-a;float h=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return vec2(length(pa-ba*h),h);}\n#ifdef USE_NOISE\nuniform float u_curlScale;uniform float u_curlStrength;vec2 hash(vec2 p){vec3 p3=fract(vec3(p.xyx)*vec3(.1031,.1030,.0973));p3+=dot(p3,p3.yzx+33.33);return fract((p3.xx+p3.yz)*p3.zy)*2.0-1.0;}vec3 noised(in vec2 p){vec2 i=floor(p);vec2 f=fract(p);vec2 u=f*f*f*(f*(f*6.0-15.0)+10.0);vec2 du=30.0*f*f*(f*(f-2.0)+1.0);vec2 ga=hash(i+vec2(0.0,0.0));vec2 gb=hash(i+vec2(1.0,0.0));vec2 gc=hash(i+vec2(0.0,1.0));vec2 gd=hash(i+vec2(1.0,1.0));float va=dot(ga,f-vec2(0.0,0.0));float vb=dot(gb,f-vec2(1.0,0.0));float vc=dot(gc,f-vec2(0.0,1.0));float vd=dot(gd,f-vec2(1.0,1.0));return vec3(va+u.x*(vb-va)+u.y*(vc-va)+u.x*u.y*(va-vb-vc+vd),ga+u.x*(gb-ga)+u.y*(gc-ga)+u.x*u.y*(ga-gb-gc+gd)+du*(u.yx*(va-vb-vc+vd)+vec2(vb,vc)-va));}\n#endif\nvoid main(){vec2 res=sdSegment(gl_FragCoord.xy,u_drawFrom.xy,u_drawTo.xy);vec2 radiusWeight=mix(u_drawFrom.zw,u_drawTo.zw,res.y);float d=1.0-smoothstep(-0.01,radiusWeight.x,res.x);vec4 lowData=texture2D(u_lowPaintTexture,v_uv-u_scrollOffset);vec2 velInv=(0.5-lowData.xy)*u_pushStrength;\n#ifdef USE_NOISE\nvec3 noise3=noised(gl_FragCoord.xy*u_curlScale*(1.0-lowData.xy));vec2 noise=noised(gl_FragCoord.xy*u_curlScale*(2.0-lowData.xy*(0.5+noise3.x)+noise3.yz*0.1)).yz;velInv+=noise*(lowData.z+lowData.w)*u_curlStrength;\n#endif\nvec4 data=texture2D(u_prevPaintTexture,v_uv-u_scrollOffset+velInv*u_paintTexelSize);data.xy-=0.5;vec4 delta=(u_dissipations.xxyz-1.0)*data;vec2 newVel=u_vel*d;delta+=vec4(newVel,radiusWeight.yy*d);delta.zw=sign(delta.zw)*max(vec2(0.004),abs(delta.zw));data+=delta;data.xy+=0.5;gl_FragColor=clamp(data,vec4(0.0),vec4(1.0));}"})}resize(t,e){let r=t>>2,i=e>>2,n=t>>3,s=e>>3;(r!==this._currPaintRenderTarget.width||i!==this._currPaintRenderTarget.height)&&(this._currPaintRenderTarget.setSize(r,i),this._prevPaintRenderTarget.setSize(r,i),this._lowRenderTarget.setSize(n,s),this._lowBlurRenderTarget.setSize(n,s),this.sharedUniforms.u_paintTexelSize.value.set(1/r,1/i),this.sharedUniforms.u_paintTextureSize.value.set(r,i),this.clear())}clear=()=>{Dp.clearColor(.5,.5,0,0,this._lowRenderTarget),Dp.clearColor(.5,.5,0,0,this._lowBlurRenderTarget),Dp.clearColor(.5,.5,0,0,this._currPaintRenderTarget),this._material.uniforms.u_vel.value.set(0,0)};update(t){if(!this.enabled)return;this.useNoise!==this._prevUseNoise&&(this._material.defines.USE_NOISE=this.useNoise,this._material.needsUpdate=!0,this._prevUseNoise=this.useNoise);let e=this._currPaintRenderTarget.width,r=this._currPaintRenderTarget.height,i=this._prevPaintRenderTarget;this._prevPaintRenderTarget=this._currPaintRenderTarget,this._currPaintRenderTarget=i,this.sharedUniforms.u_prevPaintTexture.value=this._prevPaintRenderTarget.texture,this.sharedUniforms.u_currPaintTexture.value=this._currPaintRenderTarget.texture;let n=Hp.scrollViewDelta*Jc.screenPaintOffsetRatio,s=Hp.isVertical?0:n,a=Hp.isVertical?n:0;Bp.copy(Ep.mousePixelXY),Bp.x+=s*Jc.viewportWidth*3,Bp.y+=a*Jc.viewportHeight*3;let o=Bp.distanceTo(Ep.prevMousePixelXY),l=Nu.fit(o,0,this.radiusDistanceRange,this.minRadius,this.maxRadius);0==Math.abs(Hp.scrollViewDelta)&&(!Ep.hadMoved||!this.drawEnabled||(this.needsMouseDown||qu.isMobile)&&(!Ep.isDown||!Ep.wasDown))&&(l=0),l=l/Jc.viewportHeight*r,this._material.uniforms.u_pushStrength.value=this.pushStrength,this._material.uniforms.u_curlScale.value=this.curlScale,this._material.uniforms.u_curlStrength.value=this.curlStrength,this._material.uniforms.u_dissipations.value.set(this.velocityDissipation,this.weight1Dissipation,this.weight2Dissipation),this._fromDrawData.copy(this._toDrawData),Bp.copy(Ep.mouseXY),Bp.x+=s,Bp.y+=a,this._toDrawData.set((Bp.x+1)*e/2,(Bp.y+1)*r/2,l,1),Bp.set(this._toDrawData.x-this._fromDrawData.x,this._toDrawData.y-this._fromDrawData.y).multiplyScalar(.8*t),this._material.uniforms.u_vel.value.multiplyScalar(this.accelerationDissipation).add(Bp),this._material.uniforms.u_scrollOffset.value.y=s,this._material.uniforms.u_scrollOffset.value.y=a,Dp.render(this._material,this._currPaintRenderTarget),Dp.copy(this._currPaintRenderTarget.texture,this._lowRenderTarget),Fp.blur(8,1,this._lowRenderTarget,this._lowBlurRenderTarget)}};const Np=new class{defaultStage3D=new Lp;currentStage3D=null;stage3DList=[];preInit(){}init(){}start(){}resize(t,e){}deactivateAll(){for(let t=0;t<this.stage3DList.length;t++){this.stage3DList[t].isActive=!1}}syncProperties(t){this.currentStage3D=this.defaultStage3D;for(let e=0;e<this.stage3DList.length;e++){let r=this.stage3DList[e];if(!0===r.isActive){this.currentStage3D=r,r.syncProperties(t);for(let t in r.properties)Jc[t]=r.properties[t]}else r.isActive=!1}}update(t){this.currentStage3D.update(t),this.currentStage3D.visible=!0;for(let t=0;t<this.stage3DList.length;t++){let e=this.stage3DList[t];e.wasActive=e.isActive}}};class Gp{sharedUniforms={};enabled=!0;material=null;renderOrder=0;_hasShownWarning=!1;init(t){Object.assign(this,t)}needsRender(){return!0}warn(t){this._hasShownWarning||(console.warn(t),this._hasShownWarning=!0)}setPostprocessing(t){}render(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.material.uniforms.u_texture&&(this.material.uniforms.u_texture.value=t.fromTexture),Dp.render(this.material,e?null:t.toRenderTarget),t.swap()}}class Wp{static scrollPaneCount=0;static domCount=0;id=0;isActive=!1;x;y;viewDom;contentDom;isVertical=!0;canOvershoot=!1;targetScrollPixel=0;scrollViewDelta=0;viewWidth=0;viewHeight=0;totalViewSize=0;scrollView=0;progress=0;scrollMotion=null;scrollMotionF=3;scrollMotionZ=1;scrollMotionR=.2;minScrollPixel=.1;viewPixelSize=1;scrollMultiplier=(qu.isMobile,1);domRanges=[];hashIdx=-1;autoScrollSpeed=0;useResizeObserver=!0;tick=-1;lastResizeTick=-1;resizeObserveTick=-1;hasResizeObserved=!1;autoScrollRatio=0;skipAutoScroll=!1;constructor(){this.id=Wp.scrollPaneCount++}init(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this,t),this.scrollMotion=new Tp(0,this.scrollMotionF,this.scrollMotionZ,this.scrollMotionR,!0),this.contentDom&&this.useResizeObserver&&window.ResizeObserver&&new ResizeObserver(this._onResizeObserve.bind(this)).observe(this.contentDom)}_onResizeObserve(){this.hasResizeObserved=!0,this.resizeObserveTick=this.tick}getDomRange(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];void 0===t._scrollDomRangeId&&(t._scrollDomRangeId=Wp.domCount++);let i=this.id+t._scrollDomRangeId,n=this.domRanges[i];return n||(n=this.domRanges[i]=new Pp(t,this.isVertical)),n.update(this.scrollPixel,this.viewPixelSize,e,r),n}scrollTo(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t="string"==typeof t?document.getElementById(t):t){let i=this.getDomRange(t);this.scrollToPixel(i.top+e*this.viewPixelSize,r)}}scrollToPixel(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t=Nu.clamp(t,0,this.viewPixelSize*this.totalViewSize),this.scrollMotion.reset(this.scrollMotion.value),this.targetScrollPixel=t,e)this.scrollMotion.reset(this.targetScrollPixel),this.progress=t/this.totalViewSize/this.viewPixelSize;else{let t=Math.abs(this.targetScrollPixel-this.scrollPixel),e=Math.exp(-t/this.totalViewSize/800);this.scrollMotion.setFZR(this.scrollMotionF*e,Nu.mix(1,this.scrollMotionZ,e),Nu.mix(1,this.scrollMotionR,e)),this.skipAutoScroll=!0}this.syncDom()}get scrollPixel(){return this.scrollMotion.value}getEaseInOutOffset(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=1.5+(arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5),n=2*(i-1)+r,s=i,a=s+r,o=a+i,l=e*o/n,h=t+.5*l-.5*e,u=Math.min(1,h/l);if(u>0){let t=u*o;var c=t;if(t>0&&t<=s){let e=(t-0)/(s-0);c=Nu.cubicBezier(0,(s-0)/3+0,1,1,e)}else if(t>s&&t<=a)c=1;else if(t>a&&t<=o){let e=(t-a)/(o-a);c=Nu.cubicBezier(1,1,-(o-a)/3+2,2,e)}else t>o&&(c=t-n);return(t-c)/n*e}return 0}resize(t,e,r){for(let t=0;t<this.domRanges.length;t++)this.domRanges[t].needsUpdate=!0;if(this.viewDom){let r=this.viewDom.getBoundingClientRect();t=r.width,e=r.height}this.viewWidth=t,this.viewHeight=e;let i=this.isVertical?e:t;if(this.contentDom){let t=this.contentDom.getBoundingClientRect();this.totalViewSize=Math.max(0,(this.isVertical?t.height:t.width)/i-1)}this.targetScrollPixel=this.totalViewSize*i*this.progress,this.scrollMotion.reset(this.targetScrollPixel),this.viewPixelSize=i,this.lastResizeTick=this.tick,this.syncDom()}update(t,e){this.hasResizeObserved&&(this.hasResizeObserved=!1,this.resizeObserveTick!==this.lastResizeTick&&this.resize(this.viewWidth,this.viewHeight));let r=this.scrollView,i=Math.floor(this.totalViewSize*this.viewPixelSize);if(this.isMoveable){let e=this.isVertical?Ep.isDragScrollingY?Ep.deltaScrollY:0:Ep.isDragScrollingX?Ep.deltaScrollX:0,r=(this.isVertical?Ep.isDragScrollingY||Ep.isWheelScrolling?Ep.deltaScrollY+Ep.dragScrollYMomentum:0:Ep.isDragScrollingX||Ep.isWheelScrolling?Ep.deltaScrollX+Ep.dragScrollXMomentum:0)*this.scrollMultiplier;0!==e&&(this.skipAutoScroll=!1),this.autoScrollRatio=Nu.saturate(this.autoScrollRatio+(Math.abs(this.autoScrollSpeed)>0&&0==e?t:-1)),r+=this.autoScrollSpeed*this.viewPixelSize*t*(this.skipAutoScroll?0:this.autoScrollRatio),Math.abs(e)>0&&this.scrollMotion.setFZR(this.scrollMotionF,this.scrollMotionZ,this.scrollMotionR),this.targetScrollPixel=this.targetScrollPixel+r,this.targetScrollPixel=Nu.clamp(this.targetScrollPixel,0,i)}if(0==this.totalViewSize&&(this.targetScrollPixel=0,this.scrollMotion.reset(this.targetScrollPixel)),this.targetScrollPixel!==this.scrollPixel){let e=this.targetScrollPixel-this.scrollPixel;Ep.isDown&&this.isVertical&&Ep.isDragScrollingY||!this.isVertical&&Ep.isDragScrollingX?this.scrollMotion.reset(this.scrollPixel+e):this.scrollMotion.update(t,this.scrollPixel+e),Math.abs(this.scrollPixel-this.targetScrollPixel)<this.minScrollPixel&&Math.abs(this.scrollPixel+this.scrollMotion.valueVel*t-this.targetScrollPixel)<this.minScrollPixel&&this.scrollMotion.reset(this.targetScrollPixel)}!this.canOvershoot&&this.isMoveable&&(this.scrollPixel<0?this.scrollMotion.value=0:this.scrollPixel>i&&(this.scrollMotion.value=i)),this.scrollView=this.scrollPixel/this.viewPixelSize,this.scrollViewDelta=this.scrollView-r,this.progress=this.totalViewSize>0?this.scrollPixel/(this.totalViewSize*this.viewPixelSize):0,this.isScrolling=0!==this.scrollMotion.valueVel,this.syncDom(),this.tick++}syncDom(){this.contentDom&&(this.x=0,this.y=0,this.isVertical?this.y=-this.scrollPixel:this.x=-this.scrollPixel,this.contentDom.style.transform=`translate3d(${this.x}px, ${this.y}px, 0px)`)}get isMoveable(){return this.isActive&&!videoOverlay.isOpened&&pagesManager.isIdle&&!header.menu.opened&&this.totalViewSize>0&&(!this.viewDom||Ep.hasThroughElem(this.viewDom,"down"))}}const Hp=new class extends Wp{domScrollIndicator;domScrollIndicatorHeight=1;domScrollIndicatorBar;scrollIndicatorActiveRatio=0;lastMouseInteractiveTime=-1/0;isIndicatorActive=void 0;easedScrollStrength=0;frameIdx=-1;MIN_BAR_SCALE_Y=.2;init(){super.init({contentDom:document.getElementById("page-container"),domScrollIndicator:document.getElementById("scroll-indicator"),domScrollIndicatorBar:document.getElementById("scroll-indicator-bar"),canOvershoot:!1})}resize(t,e){super.resize(t,e),this.domScrollIndicatorHeight=this.domScrollIndicator.getBoundingClientRect().height}update(t){super.update(t,this.scrollValue),this.easedScrollStrength+=Math.abs(this.scrollViewDelta),this.easedScrollStrength+=(0-this.easedScrollStrength)*(1-Math.exp(-10*t)),this.easedScrollStrength=Math.min(this.easedScrollStrength,1),Math.abs(this.scrollViewDelta)>0?(this.lastMouseInteractiveTime=Jc.time,this.isIndicatorActive=!0):Jc.time>this.lastMouseInteractiveTime+.5&&(this.isIndicatorActive=!1),this.scrollIndicatorActiveRatio=Nu.clamp(this.scrollIndicatorActiveRatio+(this.isIndicatorActive?2:-2)*t,0,1),this.domScrollIndicator.style.opacity=this.scrollIndicatorActiveRatio;let e=1,r=0;this.totalViewSize>0&&(e=Math.max(this.MIN_BAR_SCALE_Y,1/(1+this.totalViewSize)),r=this.scrollView/this.totalViewSize*(1-e)),this.domScrollIndicatorBar.style.height=this.domScrollIndicatorHeight*e+"px",this.domScrollIndicatorBar.style.transform="translate3d(0,"+this.domScrollIndicatorHeight*r+"px,0)",this.frameIdx++}get isMoveable(){return super.isMoveable}};let Up;class jp{width=1;height=1;scene=null;camera=null;resolution=new as(0,0);texelSize=new as(0,0);aspect=new as(1,1);onBeforeSceneRendered=new Ku;onAfterSceneRendered=new Ku;onAfterRendered=new Ku;sceneRenderTarget=null;fromRenderTarget=null;toRenderTarget=null;useDepthTexture=!0;depthTexture=null;fromTexture=null;toTexture=null;sceneTexture=null;mesh=null;queue=[];sharedUniforms={};geom;hasSizeChanged=!0;init(t){if(Object.assign(this,t),Up?this.geom=Up:(this.geom=Up=new oo,this.geom.setAttribute("position",new $a(new Float32Array([-1,-1,0,4,-1,0,-1,4,0]),3)),this.geom.setAttribute("a_uvClamp",new $a(new Float32Array([0,0,1,1,0,0,1,1,0,0,1,1]),4))),this.sceneFlatRenderTarget=Dp.createRenderTarget(1,1),this.sceneFlatRenderTarget.depthBuffer=!0,this.sceneMsRenderTarget=Dp.createMultisampleRenderTarget(1,1),this.sceneMsRenderTarget.depthBuffer=!0,this.fromRenderTarget=Dp.createRenderTarget(1,1),this.toRenderTarget=this.fromRenderTarget.clone(),this.useDepthTexture=!!this.useDepthTexture&&Dp.renderer&&(Dp.renderer.capabilities.isWebGL2||Dp.renderer.extensions.get("WEBGL_depth_texture")),this.fromTexture=this.fromRenderTarget.texture,this.toTexture=this.toRenderTarget.texture,this.sceneRenderTarget=this.sceneMsRenderTarget,this.sceneTexture=this.sceneMsRenderTarget.texture,this.mesh=new wo,this.sharedUniforms=Object.assign(this.sharedUniforms,{u_sceneTexture:{value:this.sceneTexture},u_fromTexture:{value:null},u_toTexture:{value:null},u_sceneDepthTexture:{value:null},u_cameraNear:{value:0},u_cameraFar:{value:1},u_cameraFovRad:{value:1},u_resolution:{value:this.resolution},u_texelSize:{value:this.texelSize},u_aspect:{value:this.aspect}}),this.useDepthTexture&&Dp.renderer){const t=new gu(this.resolution.width,this.resolution.height);Dp.renderer.capabilities.isWebGL2?t.type=on:(t.format=dn,t.type=un),t.minFilter=tn,t.magFilter=tn,this.sceneFlatRenderTarget.depthTexture=t,this.sceneMsRenderTarget.depthTexture=t,this.depthTexture=this.sharedUniforms.u_sceneDepthTexture.value=t}}swap(){const t=this.fromRenderTarget;this.fromRenderTarget=this.toRenderTarget,this.toRenderTarget=t,this.fromTexture=this.fromRenderTarget.texture,this.toTexture=this.toRenderTarget.texture,this.sharedUniforms.u_fromTexture.value=this.fromTexture,this.sharedUniforms.u_toTexture.value=this.toTexture}setSize(t,e){if(this.width!==t||this.height!==e){this.hasSizeChanged=!0,this.width=t,this.height=e,this.resolution.set(t,e),this.texelSize.set(1/t,1/e);const r=e/Math.sqrt(t*t+e*e)*2;this.aspect.set(t/e*r,r),this.sceneFlatRenderTarget.setSize(t,e),this.sceneMsRenderTarget.setSize(t,e),this.fromRenderTarget.setSize(t,e),this.toRenderTarget.setSize(t,e)}}dispose(){this.fromRenderTarget&&this.fromRenderTarget.dispose(),this.toRenderTarget&&this.toRenderTarget.dispose(),this.sceneMsRenderTarget&&this.sceneMsRenderTarget.dispose(),this.sceneFlatRenderTarget&&this.sceneFlatRenderTarget.dispose()}_filterQueue(t){return t.enabled&&t.needsRender()}renderMaterial(t,e){this.mesh.material=t,Dp.renderMesh(this.mesh,e)}checkSceneRt(){this.sceneRenderTarget=Jc.isSmaaEnabled?this.sceneFlatRenderTarget:this.sceneMsRenderTarget,this.sceneTexture=this.sceneRenderTarget.texture,this.sharedUniforms.u_sceneTexture.value=this.sceneTexture}render(t,e,r){if(!Dp.renderer)return;this.scene=t,this.camera=e,this.mesh.geometry=this.geom;const i=this.queue.filter(this._filterQueue),n=this.sharedUniforms;if(i.sort(((t,e)=>t.renderOrder==e.renderOrder?0:t.renderOrder-e.renderOrder)),this.checkSceneRt(),n.u_cameraNear.value=e.near,n.u_cameraFar.value=e.far,n.u_cameraFovRad.value=e.fov/180*Math.PI,this.onBeforeSceneRendered.dispatch(),i.length){Dp.renderer.setRenderTarget(this.sceneRenderTarget),Dp.renderer.render(t,e),Dp.renderer.setRenderTarget(null),Dp.copy(this.sceneRenderTarget.texture,this.fromRenderTarget),this.onAfterSceneRendered.dispatch(this.sceneRenderTarget);const n=Dp.getColorState();Dp.renderer.autoClear=!1;for(let t=0,e=i.length;t<e;t++){const n=t===e-1&&r,s=i[t];s.setPostprocessing(this),s.render(this,n)}Dp.setColorState(n)}else Dp.renderer.render(t,e),this.onAfterSceneRendered.dispatch();this.onAfterRendered.dispatch(),this.hasSizeChanged=!1}}class Xp extends Gp{edgesRenderTarget=null;weightsRenderTarget=null;edgesMaterial=null;weightsMaterial=null;renderOrder=500;init(t){Object.assign(this,{sharedUniforms:{u_areaTexture:{value:null},u_searchTexture:{value:null}}},t),super.init(),this.weightsRenderTarget=Dp.createRenderTarget(1,1),this.edgesRenderTarget=Dp.createRenderTarget(1,1),this.edgesMaterial=new Bu({uniforms:{u_texture:{value:null},u_texelSize:null},vertexShader:Dp.precisionPrefix+"#define GLSLIFY 1\nattribute vec3 position;uniform vec2 u_texelSize;varying vec2 v_uv;varying vec4 v_offsets[3];void SMAAEdgeDetectionVS(vec2 texcoord){v_offsets[0]=texcoord.xyxy+u_texelSize.xyxy*vec4(-1.0,0.0,0.0,1.0);v_offsets[1]=texcoord.xyxy+u_texelSize.xyxy*vec4(1.0,0.0,0.0,-1.0);v_offsets[2]=texcoord.xyxy+u_texelSize.xyxy*vec4(-2.0,0.0,0.0,2.0);}void main(){v_uv=position.xy*0.5+0.5;SMAAEdgeDetectionVS(v_uv);gl_Position=vec4(position,1.0);}",fragmentShader:Dp.precisionPrefix+"#define GLSLIFY 1\nuniform sampler2D u_texture;varying vec2 v_uv;varying vec4 v_offsets[3];vec4 SMAAColorEdgeDetectionPS(vec2 texcoord,vec4 offset[3],sampler2D colorTex){vec2 threshold=vec2(SMAA_THRESHOLD,SMAA_THRESHOLD);vec4 delta;vec3 C=texture2D(colorTex,texcoord).rgb;vec3 Cleft=texture2D(colorTex,offset[0].xy).rgb;vec3 t=abs(C-Cleft);delta.x=max(max(t.r,t.g),t.b);vec3 Ctop=texture2D(colorTex,offset[0].zw).rgb;t=abs(C-Ctop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0,1.0))==0.0)discard;vec3 Cright=texture2D(colorTex,offset[1].xy).rgb;t=abs(C-Cright);delta.z=max(max(t.r,t.g),t.b);vec3 Cbottom=texture2D(colorTex,offset[1].zw).rgb;t=abs(C-Cbottom);delta.w=max(max(t.r,t.g),t.b);float maxDelta=max(max(max(delta.x,delta.y),delta.z),delta.w);vec3 Cleftleft=texture2D(colorTex,offset[2].xy).rgb;t=abs(C-Cleftleft);delta.z=max(max(t.r,t.g),t.b);vec3 Ctoptop=texture2D(colorTex,offset[2].zw).rgb;t=abs(C-Ctoptop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(max(maxDelta,delta.z),delta.w);edges.xy*=step(0.5*maxDelta,delta.xy);return vec4(edges,0.0,0.0);}void main(){gl_FragColor=SMAAColorEdgeDetectionPS(v_uv,v_offsets,u_texture);}",defines:{SMAA_THRESHOLD:"0.1"},blending:0,depthTest:!1,depthWrite:!1}),this.weightsMaterial=new Bu({uniforms:{u_edgesTexture:{value:this.edgesRenderTarget.texture},u_areaTexture:this.sharedUniforms.u_areaTexture,u_searchTexture:this.sharedUniforms.u_searchTexture,u_texelSize:null},vertexShader:Dp.precisionPrefix+"#define GLSLIFY 1\nattribute vec3 position;uniform vec2 u_texelSize;varying vec2 v_uv;varying vec4 v_offsets[3];varying vec2 v_pixcoord;void SMAABlendingWeightCalculationVS(vec2 texcoord){v_pixcoord=texcoord/u_texelSize;v_offsets[0]=texcoord.xyxy+u_texelSize.xyxy*vec4(-0.25,0.125,1.25,0.125);v_offsets[1]=texcoord.xyxy+u_texelSize.xyxy*vec4(-0.125,0.25,-0.125,-1.25);v_offsets[2]=vec4(v_offsets[0].xz,v_offsets[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*u_texelSize.xxyy*float(SMAA_MAX_SEARCH_STEPS);}void main(){v_uv=position.xy*0.5+0.5;SMAABlendingWeightCalculationVS(v_uv);gl_Position=vec4(position,1.0);}",fragmentShader:Dp.precisionPrefix+"#define GLSLIFY 1\n#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * u_texelSize, 0.0 )\nuniform sampler2D u_edgesTexture;uniform sampler2D u_areaTexture;uniform sampler2D u_searchTexture;uniform vec2 u_texelSize;varying vec2 v_uv;varying vec4 v_offsets[3];varying vec2 v_pixcoord;vec2 round(vec2 x){return sign(x)*floor(abs(x)+0.5);}float SMAASearchLength(sampler2D searchTex,vec2 e,float bias,float scale){e.r=bias+e.r*scale;return 255.0*texture2D(searchTex,e,0.0).r;}float SMAASearchXLeft(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord-=vec2(2.0,0.0)*u_texelSize;if(!(texcoord.x>end&&e.g>0.8281&&e.r==0.0))break;}texcoord.x+=0.25*u_texelSize.x;texcoord.x+=u_texelSize.x;texcoord.x+=2.0*u_texelSize.x;texcoord.x-=u_texelSize.x*SMAASearchLength(searchTex,e,0.0,0.5);return texcoord.x;}float SMAASearchXRight(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord+=vec2(2.0,0.0)*u_texelSize;if(!(texcoord.x<end&&e.g>0.8281&&e.r==0.0))break;}texcoord.x-=0.25*u_texelSize.x;texcoord.x-=u_texelSize.x;texcoord.x-=2.0*u_texelSize.x;texcoord.x+=u_texelSize.x*SMAASearchLength(searchTex,e,0.5,0.5);return texcoord.x;}float SMAASearchYUp(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord+=vec2(0.0,2.0)*u_texelSize;if(!(texcoord.y>end&&e.r>0.8281&&e.g==0.0))break;}texcoord.y-=0.25*u_texelSize.y;texcoord.y-=u_texelSize.y;texcoord.y-=2.0*u_texelSize.y;texcoord.y+=u_texelSize.y*SMAASearchLength(searchTex,e.gr,0.0,0.5);return texcoord.y;}float SMAASearchYDown(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord-=vec2(0.0,2.0)*u_texelSize;if(!(texcoord.y<end&&e.r>0.8281&&e.g==0.0))break;}texcoord.y+=0.25*u_texelSize.y;texcoord.y+=u_texelSize.y;texcoord.y+=2.0*u_texelSize.y;texcoord.y-=u_texelSize.y*SMAASearchLength(searchTex,e.gr,0.5,0.5);return texcoord.y;}vec2 SMAAArea(sampler2D areaTex,vec2 dist,float e1,float e2,float offset){vec2 texcoord=float(SMAA_AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texcoord=SMAA_AREATEX_PIXEL_SIZE*texcoord+(0.5*SMAA_AREATEX_PIXEL_SIZE);texcoord.y+=SMAA_AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTex,texcoord,0.0).rg;}vec4 SMAABlendingWeightCalculationPS(vec2 texcoord,vec2 pixcoord,vec4 offset[3],sampler2D edgesTex,sampler2D areaTex,sampler2D searchTex,ivec4 subsampleIndices){vec4 weights=vec4(0.0,0.0,0.0,0.0);vec2 e=texture2D(edgesTex,texcoord).rg;if(e.g>0.0){vec2 d;vec2 coords;coords.x=SMAASearchXLeft(edgesTex,searchTex,offset[0].xy,offset[2].x);coords.y=offset[1].y;d.x=coords.x;float e1=texture2D(edgesTex,coords,0.0).r;coords.x=SMAASearchXRight(edgesTex,searchTex,offset[0].zw,offset[2].y);d.y=coords.x;d=d/u_texelSize.x-pixcoord.x;vec2 sqrt_d=sqrt(abs(d));coords.y-=1.0*u_texelSize.y;float e2=SMAASampleLevelZeroOffset(edgesTex,coords,ivec2(1,0)).r;weights.rg=SMAAArea(areaTex,sqrt_d,e1,e2,float(subsampleIndices.y));}if(e.r>0.0){vec2 d;vec2 coords;coords.y=SMAASearchYUp(edgesTex,searchTex,offset[1].xy,offset[2].z);coords.x=offset[0].x;d.x=coords.y;float e1=texture2D(edgesTex,coords,0.0).g;coords.y=SMAASearchYDown(edgesTex,searchTex,offset[1].zw,offset[2].w);d.y=coords.y;d=d/u_texelSize.y-pixcoord.y;vec2 sqrt_d=sqrt(abs(d));coords.y-=1.0*u_texelSize.y;float e2=SMAASampleLevelZeroOffset(edgesTex,coords,ivec2(0,1)).g;weights.ba=SMAAArea(areaTex,sqrt_d,e1,e2,float(subsampleIndices.x));}return weights;}void main(){gl_FragColor=SMAABlendingWeightCalculationPS(v_uv,v_pixcoord,v_offsets,u_edgesTexture,u_areaTexture,u_searchTexture,ivec4(0.0));}",defines:{SMAA_MAX_SEARCH_STEPS:"8",SMAA_AREATEX_MAX_DISTANCE:"16",SMAA_AREATEX_PIXEL_SIZE:"( 1.0 / vec2( 160.0, 560.0 ) )",SMAA_AREATEX_SUBTEX_SIZE:"( 1.0 / 7.0 )"},transparent:!0,blending:0,depthTest:!1,depthWrite:!1}),this.material=Dp.createRawShaderMaterial({uniforms:{u_texture:{value:null},u_weightsTexture:{value:this.weightsRenderTarget.texture},u_texelSize:null},vertexShader:Dp.precisionPrefix+"#define GLSLIFY 1\nattribute vec3 position;uniform vec2 u_texelSize;varying vec2 v_uv;varying vec4 v_offsets[2];void SMAANeighborhoodBlendingVS(vec2 texcoord){v_offsets[0]=texcoord.xyxy+u_texelSize.xyxy*vec4(-1.0,0.0,0.0,1.0);v_offsets[1]=texcoord.xyxy+u_texelSize.xyxy*vec4(1.0,0.0,0.0,-1.0);}void main(){v_uv=position.xy*0.5+0.5;SMAANeighborhoodBlendingVS(v_uv);gl_Position=vec4(position,1.0);}",fragmentShader:Dp.precisionPrefix+"#define GLSLIFY 1\nuniform sampler2D u_weightsTexture;uniform sampler2D u_texture;uniform vec2 u_texelSize;varying vec2 v_uv;varying vec4 v_offsets[2];vec4 SMAANeighborhoodBlendingPS(vec2 texcoord,vec4 offset[2],sampler2D colorTex,sampler2D blendTex){vec4 a;a.xz=texture2D(blendTex,texcoord).xz;a.y=texture2D(blendTex,offset[1].zw).g;a.w=texture2D(blendTex,offset[1].xy).a;if(dot(a,vec4(1.0,1.0,1.0,1.0))<1e-5){return texture2D(colorTex,texcoord,0.0);}else{vec2 offset;offset.x=a.a>a.b ? a.a :-a.b;offset.y=a.g>a.r ?-a.g : a.r;if(abs(offset.x)>abs(offset.y)){offset.y=0.0;}else{offset.x=0.0;}vec4 C=texture2D(colorTex,texcoord,0.0);texcoord+=sign(offset)*u_texelSize;vec4 Cop=texture2D(colorTex,texcoord,0.0);float s=abs(offset.x)>abs(offset.y)? abs(offset.x): abs(offset.y);C.xyz=pow(abs(C.xyz),vec3(2.2));Cop.xyz=pow(abs(Cop.xyz),vec3(2.2));vec4 mixed=mix(C,Cop,s);mixed.xyz=pow(abs(mixed.xyz),vec3(1.0/2.2));return mixed;}}void main(){gl_FragColor=SMAANeighborhoodBlendingPS(v_uv,v_offsets,u_texture,u_weightsTexture);}"})}setTextures(t,e){(this.sharedUniforms.u_areaTexture.value=this._createTexture(t)).minFilter=rn;const r=this.sharedUniforms.u_searchTexture.value=this._createTexture(e);r.magFilter=tn,r.minFilter=tn}updateTextures(){this.sharedUniforms.u_areaTexture.value.needsUpdate=!0,this.sharedUniforms.u_searchTexture.value.needsUpdate=!0}setPostprocessing(t){super.setPostprocessing(t);const e=t.width,r=t.height;this.edgesRenderTarget.setSize(e,r),this.weightsRenderTarget.setSize(e,r)}dispose(){this.edgesRenderTarget&&this.edgesRenderTarget.dispose(),this.weightsRenderTarget&&this.weightsRenderTarget.dispose()}needsRender(){return this.enabled&&!this.sharedUniforms.u_areaTexture.value.needsUpdate&&Jc.isSmaaEnabled}render(t,e){const r=Dp.getColorState();this.sharedUniforms.u_searchTexture.value||console.warn("You need to use Smaa.setImages() to set the smaa textures manually and assign to this class.");const i=Dp.renderer;i&&(i.autoClear=!0,i.setClearColor(0,0)),this.edgesMaterial.uniforms.u_texelSize=this.weightsMaterial.uniforms.u_texelSize=this.material.uniforms.u_texelSize=t.sharedUniforms.u_texelSize,this.edgesMaterial.uniforms.u_texture.value=t.fromTexture,t.renderMaterial(this.edgesMaterial,this.edgesRenderTarget),t.renderMaterial(this.weightsMaterial,this.weightsRenderTarget),Dp.setColorState(r),this.material.uniforms.u_texture.value=t.fromTexture,super.render(t,e)}_createTexture(t){const e=new Ps(t);return e.generateMipmaps=!1,e.flipY=!1,e}}class qp extends Gp{screenPaint=null;amount=20;rgbShift=1;multiplier=1.25;colorMultiplier=1;shade=1.25;renderOrder=75;init(t){if(Object.assign(this,t),super.init(),!this.screenPaint)throw new Error("screenPaint is required");this.material=Dp.createRawShaderMaterial({uniforms:Object.assign({u_texture:{value:null},u_screenPaintTexture:this.screenPaint.sharedUniforms.u_currPaintTexture,u_screenPaintTexelSize:this.screenPaint.sharedUniforms.u_paintTexelSize,u_amount:{value:0},u_rgbShift:{value:0},u_multiplier:{value:0},u_colorMultiplier:{value:0},u_shade:{value:0}},zp.sharedUniforms),fragmentShader:"\n        #define GLSLIFY 1\n        uniform sampler2D u_texture;\n        uniform sampler2D u_screenPaintTexture;\n        uniform vec2 u_screenPaintTexelSize;\n        uniform float u_amount;\n        uniform float u_rgbShift;\n        uniform float u_multiplier;\n        uniform float u_colorMultiplier;\n        uniform float u_shade;\n        varying vec2 v_uv;\n        #include <getBlueNoise>\n        void main(){\n            vec3 bnoise=getBlueNoise(gl_FragCoord.xy+vec2(20.,30.));\n            vec4 data=texture2D(u_screenPaintTexture,v_uv);\n            float weight=(data.z*0.75+data.w*2.0);\n            vec2 vel=(-data.zz)*0.5*weight;\n            vec4 color=vec4(0.0);\n            vec2 velocity=vel*u_amount/4.0*u_screenPaintTexelSize*u_multiplier;\n            vec2 uv=v_uv+bnoise.xy*velocity;\n            for(int i=0;i<9;i++) {\n                color+=texture2D(u_texture,uv);\n                uv+=velocity;\n            }\n            color/=9.;\n            // color.rgb+=sin(vec3(vel.x+vel.y)*40.0+vec3(0.0,2.0,4.0)*u_rgbShift)*smoothstep(0.5,-0.0001,weight)*max(abs(vel.x),abs(vel.y))*u_colorMultiplier;\n            color.rgb+=sin(vec3(vel.x+vel.y)*30.0+vec3(0.0,2.0,4.0)*u_rgbShift)*smoothstep(0.4,-0.1,weight)*max(abs(vel.x*1.0),abs(vel.y*1.0))*u_colorMultiplier;\n            gl_FragColor=color;\n        }\n    "})}needsRender(t){return this.amount>0}syncCamera(t){this.needsSync=!0,t&&(t.matrixWorldInverse.decompose(this._position,this._quaternion,this._scale),this.projectionViewMatrix.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this.projectionViewInverseMatrix.copy(this.projectionViewMatrix).invert()),this.prevProjectionViewMatrix.copy(this.projectionViewMatrix)}render(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.material.uniforms.u_amount.value=this.amount,this.material.uniforms.u_rgbShift.value=this.rgbShift,this.material.uniforms.u_multiplier.value=this.multiplier,this.material.uniforms.u_colorMultiplier.value=this.colorMultiplier,this.material.uniforms.u_shade.value=this.shade,super.render(t,e)}}const Yp=new class{isSupported(){return Jc._isSupportedDevice=!0,Jc._isSupportedBrowser=(qu.isChrome||qu.isSafari||qu.isEdge||qu.isFirefox||qu.isOpera)&&!qu.isIE,Jc._isSupportedWebGL=this.checkSupportWebGL(),Jc._isSupportedWebGL}checkSupportWebGL(){if(!(Jc.canvas instanceof HTMLCanvasElement))return!1;if(Yu.USE_WEBGL2&&window.WebGL2RenderingContext)try{return Jc.gl=Jc.canvas.getContext("webgl2",Jc.webglOpts),Yu.RENDER_TARGET_FLOAT_TYPE=hn,Yu.DATA_FLOAT_TYPE=ln,!0}catch(t){return console.error(t),!1}if(Yu.USE_WEBGL2=!1,window.WebGLRenderingContext)try{let t=Jc.gl=Jc.canvas.getContext("webgl",Jc.webglOpts)||Jc.canvas.getContext("experimental-webgl",Jc.webglOpts);return(t.getExtension("OES_texture_float")||t.getExtension("OES_texture_half_float"))&&t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS)?(Yu.RENDER_TARGET_FLOAT_TYPE=qu.isIOS||t.getExtension("OES_texture_half_float")?hn:ln,Yu.DATA_FLOAT_TYPE=ln,!0):(Yu.USE_FLOAT_PACKING=!0,Yu.RENDER_TARGET_FLOAT_TYPE=Yu.DATA_FLOAT_TYPE=sn,!1)}catch(t){return console.error(t),!1}return!1}};const Zp=new class{initEngine(){if(Jc.canvas=document.querySelector(".wave-bg"),Jc.isSupported=Yp.isSupported(),Jc.isSupported){Jc.renderer=new bu({canvas:Jc.canvas,context:Jc.gl,premultipliedAlpha:!1}),Jc.scene=new wu,Jc.camera=new ko(45,1,.1,200),Jc.scene.add(Jc.camera),Jc.sharedUniforms.u_resolution.value=Jc.resolution=new as,Jc.sharedUniforms.u_viewportResolution.value=Jc.viewportResolution=new as,Jc.sharedUniforms.u_bgColor.value=Jc.bgColor=new bs,Op.addChunk("textureBicubic","#define GLSLIFY 1\nvec4 cubic(float v){vec4 n=vec4(1.0,2.0,3.0,4.0)-v;vec4 s=n*n*n;float x=s.x;float y=s.y-4.0*s.x;float z=s.z-4.0*s.y+6.0*s.x;float w=6.0-x-y-z;return vec4(x,y,z,w);}vec4 textureBicubic(sampler2D t,vec2 texCoords,vec2 textureSize){vec2 invTexSize=1.0/textureSize;texCoords=texCoords*textureSize-0.5;vec2 fxy=fract(texCoords);texCoords-=fxy;vec4 xcubic=cubic(fxy.x);vec4 ycubic=cubic(fxy.y);vec4 c=texCoords.xxyy+vec2(-0.5,1.5).xyxy;vec4 s=vec4(xcubic.xz+xcubic.yw,ycubic.xz+ycubic.yw);vec4 offset=c+vec4(xcubic.yw,ycubic.yw)/s;offset*=invTexSize.xxyy;vec4 sample0=texture2D(t,offset.xz);vec4 sample1=texture2D(t,offset.yz);vec4 sample2=texture2D(t,offset.xw);vec4 sample3=texture2D(t,offset.yw);float sx=s.x/(s.x+s.y);float sy=s.z/(s.z+s.w);return mix(mix(sample3,sample2,sx),mix(sample1,sample0,sx),sy);}vec4 textureBicubic(sampler2D t,vec2 texCoords,vec2 textureSize,vec4 clampRect){vec2 invTexSize=1.0/textureSize;texCoords=texCoords*textureSize-0.5;vec2 fxy=fract(texCoords);texCoords-=fxy;vec4 xcubic=cubic(fxy.x);vec4 ycubic=cubic(fxy.y);vec4 c=texCoords.xxyy+vec2(-0.5,1.5).xyxy;vec4 s=vec4(xcubic.xz+xcubic.yw,ycubic.xz+ycubic.yw);vec4 offset=c+vec4(xcubic.yw,ycubic.yw)/s;offset*=invTexSize.xxyy;vec4 sample0=texture2D(t,clamp(offset.xz,clampRect.xy,clampRect.zw));vec4 sample1=texture2D(t,clamp(offset.yz,clampRect.xy,clampRect.zw));vec4 sample2=texture2D(t,clamp(offset.xw,clampRect.xy,clampRect.zw));vec4 sample3=texture2D(t,clamp(offset.yw,clampRect.xy,clampRect.zw));float sx=s.x/(s.x+s.y);float sy=s.z/(s.z+s.w);return mix(mix(sample3,sample2,sx),mix(sample1,sample0,sx),sy);}"),Dp.init(Jc.renderer,Yu.RENDER_TARGET_FLOAT_TYPE),Jc.postprocessing=new jp,Jc.postprocessing.init(),zp.preInit(),Vp.init(),Jc.smaa=new Xp,Jc.smaa.init(),Jc.smaa.setTextures(Jc.loader.add(Yu.TEXTURE_PATH+"mock-area.png",{weight:32}).content,Jc.loader.add(Yu.TEXTURE_PATH+"mock.png",{weight:.1}).content),Jc.postprocessing.queue.push(Jc.smaa);!qu.isMobile||Yu.USE_HD;Jc.screenPaintDistortion=new qp,Jc.screenPaintDistortion.init({screenPaint:Vp}),Jc.postprocessing.queue.push(Jc.screenPaintDistortion),Yu.UP_SCALE>1&&(Jc.upscaler=new Fsr,Jc.upscaler.init(),Jc.postprocessing.queue.push(Jc.upscaler))}}preInit(){Yu.WEBGL_OFF||Np.preInit()}init(){Yu.WEBGL_OFF||(Jc.smaa&&Jc.smaa.updateTextures(),Np.init())}start(){Np.start()}resize(t,e){Yu.WEBGL_OFF||(Jc.renderer.setSize(t,e),Jc.canvas.style.width=`${Jc.viewportWidth}px`,Jc.canvas.style.height=`${Jc.viewportHeight}px`,Jc.camera.aspect=Jc.width/Jc.height,Jc.sharedUniforms.u_aspect.value=Jc.camera.aspect,Jc.camera.updateProjectionMatrix(),Jc.postprocessing.setSize(Jc.width,Jc.height),Vp.resize(Jc.width,Jc.height),Np.resize(Jc.width,Jc.height))}preUpdate(){Np.deactivateAll()}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Yu.WEBGL_OFF||(Jc.time=Jc.sharedUniforms.u_time.value+=t,Jc.deltaTime=Jc.sharedUniforms.u_deltaTime.value=t,Np.syncProperties(t),zp.update(t),Vp.update(t),Np.update(t),Jc.renderer.setClearColor(Jc.bgColor,Jc.clearAlpha),Jc.bgColor.setStyle(Jc.bgColorHex),Vp.needsMouseDown=Jc.screenPaintNeedsMouseDown,Vp.minRadius=0,Vp.maxRadius=Math.max(40,Jc.viewportWidth/20),Vp.pushStrength=Jc.screenPaintPushStrength,Vp.velocityDissipation=Jc.screenPaintVelocityDissipation,Vp.weight1Dissipation=Jc.screenPaintWeight1Dissipation,Vp.weight2Dissipation=Jc.screenPaintWeight2Dissipation,Vp.useNoise=Jc.screenPaintUseNoise,Vp.curlScale=Jc.screenPaintCurlScale,Vp.curlStrength=Jc.screenPaintCurlStrength,Jc.screenPaintDistortion.amount=Jc.screenPaintDistortionAmount,Jc.screenPaintDistortion.rgbShift=Jc.screenPaintDistortionRGBShift,Jc.screenPaintDistortion.colorMultiplier=Jc.screenPaintDistortionColorMultiplier,Jc.screenPaintDistortion.multiplier=Jc.screenPaintDistortionMultiplier,Jc.upscaler&&(Jc.upscaler.sharpness=Jc.upscalerSharpness),Jc.postprocessing.render(Np.currentStage3D,Jc.camera,!0)),Hu.isMobile?Vp.radiusDistanceRange=100:Vp.radiusDistanceRange=1e3}};let $p,Jp=performance.now(),Kp=!1;function Qp(){Kp=!0}function td(t){let e=Jc.viewportWidth=window.innerWidth,r=Jc.viewportHeight=window.innerHeight;Jc.viewportResolution.set(e,window.innerHeight),Jc.useMobileLayout=e<=Yu.MOBILE_WIDTH;let i=e*Yu.DPR,n=r*Yu.DPR;if(!0===Yu.USE_PIXEL_LIMIT&&i*n>Yu.MAX_PIXEL_COUNT){let t=i/n;n=Math.sqrt(Yu.MAX_PIXEL_COUNT/t),i=Math.ceil(n*t),n=Math.ceil(n)}Jc.width=i,Jc.height=n,Jc.webglDPR=Jc.width/e,Jc.resolution.set(Jc.width,Jc.height),t||Ep.resize(),Zp.resize(Math.ceil(i*Jc.upscalerAmount),Math.ceil(n*Jc.upscalerAmount))}function ed(){$p=window.requestAnimationFrame(ed);let t=performance.now(),e=(t-Jp)/1e3;Jp=t,e=Math.min(e,.05),Kp&&td(),Jc.hasStarted&&(Jc.startTime+=e),function(t){Rp.update(),Jc.reset(),Zp.preUpdate(t),Ep.update(t),Zp.update(t),Ep.postUpdate(t)}(e),Kp=!1}Jc.loader.start((t=>{1===t&&function(){let t=Jc.viewportWidth=window.innerWidth,e=Jc.viewportHeight=window.innerHeight;Jc.viewportResolution=new as(t,e),Jc.width=t,Jc.height=e,Zp.initEngine(),Ep.preInit(),Zp.preInit(),window.addEventListener("resize",Qp),td(),ed()}()})),Jc.reset(),window.cancelAnimationFrame($p);ji.matchMedia().add("(min-width: 768px)",(()=>(Kp=!0,ed(),()=>{window.cancelAnimationFrame($p)})));var rd=__webpack_require__(349);function id(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var nd,sd,ad,od,ld,hd,ud,cd,pd,dd,fd,md,gd,vd=function(){return nd||"undefined"!=typeof window&&(nd=window.gsap)&&nd.registerPlugin&&nd},yd=1,xd=[],_d=[],bd=[],wd=Date.now,Sd=function(t,e){return e},Md=function(t,e){return~bd.indexOf(t)&&bd[bd.indexOf(t)+1][e]},Td=function(t){return!!~dd.indexOf(t)},Ed=function(t,e,r,i,n){return t.addEventListener(e,r,{passive:!i,capture:!!n})},Pd=function(t,e,r,i){return t.removeEventListener(e,r,!!i)},Cd="scrollLeft",Ad="scrollTop",Dd=function(){return fd&&fd.isPressed||_d.cache++},kd=function(t,e){var r=function r(i){if(i||0===i){yd&&(ad.history.scrollRestoration="manual");var n=fd&&fd.isPressed;i=r.v=Math.round(i)||(fd&&fd.iOS?1:0),t(i),r.cacheID=_d.cache,n&&Sd("ss",i)}else(e||_d.cache!==r.cacheID||Sd("ref"))&&(r.cacheID=_d.cache,r.v=t());return r.v+r.offset};return r.offset=0,t&&r},Rd={s:Cd,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:kd((function(t){return arguments.length?ad.scrollTo(t,Id.sc()):ad.pageXOffset||od[Cd]||ld[Cd]||hd[Cd]||0}))},Id={s:Ad,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Rd,sc:kd((function(t){return arguments.length?ad.scrollTo(Rd.sc(),t):ad.pageYOffset||od[Ad]||ld[Ad]||hd[Ad]||0}))},Ld=function(t,e){return(e&&e._ctx&&e._ctx.selector||nd.utils.toArray)(t)[0]||("string"==typeof t&&!1!==nd.config().nullTargetWarn?console.warn("Element not found:",t):null)},Fd=function(t,e){var r=e.s,i=e.sc;Td(t)&&(t=od.scrollingElement||ld);var n=_d.indexOf(t),s=i===Id.sc?1:2;!~n&&(n=_d.push(t)-1),_d[n+s]||Ed(t,"scroll",Dd);var a=_d[n+s],o=a||(_d[n+s]=kd(Md(t,r),!0)||(Td(t)?i:kd((function(e){return arguments.length?t[r]=e:t[r]}))));return o.target=t,a||(o.smooth="smooth"===nd.getProperty(t,"scrollBehavior")),o},Od=function(t,e,r){var i=t,n=t,s=wd(),a=s,o=e||50,l=Math.max(500,3*o),h=function(t,e){var l=wd();e||l-s>o?(n=i,i=t,a=s,s=l):r?i+=t:i=n+(t-n)/(l-a)*(s-a)};return{update:h,reset:function(){n=i=r?0:i,a=s=0},getVelocity:function(t){var e=a,o=n,u=wd();return(t||0===t)&&t!==i&&h(t),s===a||u-a>l?0:(i+(r?o:-o))/((r?u:s)-e)*1e3}}},zd=function(t,e){return e&&!t._gsapAllow&&t.preventDefault(),t.changedTouches?t.changedTouches[0]:t},Bd=function(t){var e=Math.max.apply(Math,t),r=Math.min.apply(Math,t);return Math.abs(e)>=Math.abs(r)?e:r},Vd=function(){(pd=nd.core.globals().ScrollTrigger)&&pd.core&&function(){var t=pd.core,e=t.bridge||{},r=t._scrollers,i=t._proxies;r.push.apply(r,_d),i.push.apply(i,bd),_d=r,bd=i,Sd=function(t,r){return e[t](r)}}()},Nd=function(t){return(nd=t||vd())&&"undefined"!=typeof document&&document.body&&(ad=window,od=document,ld=od.documentElement,hd=od.body,dd=[ad,od,ld,hd],nd.utils.clamp,gd=nd.core.context||function(){},cd="onpointerenter"in hd?"pointer":"mouse",ud=Gd.isTouch=ad.matchMedia&&ad.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in ad||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,md=Gd.eventTypes=("ontouchstart"in ld?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in ld?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout((function(){return yd=0}),500),Vd(),sd=1),sd};Rd.op=Id,_d.cache=0;var Gd=function(){function t(t){this.init(t)}var e,r,i;return t.prototype.init=function(t){sd||Nd(nd)||console.warn("Please gsap.registerPlugin(Observer)"),pd||Vd();var e=t.tolerance,r=t.dragMinimum,i=t.type,n=t.target,s=t.lineHeight,a=t.debounce,o=t.preventDefault,l=t.onStop,h=t.onStopDelay,u=t.ignore,c=t.wheelSpeed,p=t.event,d=t.onDragStart,f=t.onDragEnd,m=t.onDrag,g=t.onPress,v=t.onRelease,y=t.onRight,x=t.onLeft,_=t.onUp,b=t.onDown,w=t.onChangeX,S=t.onChangeY,M=t.onChange,T=t.onToggleX,E=t.onToggleY,P=t.onHover,C=t.onHoverEnd,A=t.onMove,D=t.ignoreCheck,k=t.isNormalizer,R=t.onGestureStart,I=t.onGestureEnd,L=t.onWheel,F=t.onEnable,O=t.onDisable,z=t.onClick,B=t.scrollSpeed,V=t.capture,N=t.allowClicks,G=t.lockAxis,W=t.onLockAxis;this.target=n=Ld(n)||ld,this.vars=t,u&&(u=nd.utils.toArray(u)),e=e||1e-9,r=r||0,c=c||1,B=B||1,i=i||"wheel,touch,pointer",a=!1!==a,s||(s=parseFloat(ad.getComputedStyle(hd).lineHeight)||22);var H,U,j,X,q,Y,Z,$=this,J=0,K=0,Q=Fd(n,Rd),tt=Fd(n,Id),et=Q(),rt=tt(),it=~i.indexOf("touch")&&!~i.indexOf("pointer")&&"pointerdown"===md[0],nt=Td(n),st=n.ownerDocument||od,at=[0,0,0],ot=[0,0,0],lt=0,ht=function(){return lt=wd()},ut=function(t,e){return($.event=t)&&u&&~u.indexOf(t.target)||e&&it&&"touch"!==t.pointerType||D&&D(t,e)},ct=function(){var t=$.deltaX=Bd(at),r=$.deltaY=Bd(ot),i=Math.abs(t)>=e,n=Math.abs(r)>=e;M&&(i||n)&&M($,t,r,at,ot),i&&(y&&$.deltaX>0&&y($),x&&$.deltaX<0&&x($),w&&w($),T&&$.deltaX<0!=J<0&&T($),J=$.deltaX,at[0]=at[1]=at[2]=0),n&&(b&&$.deltaY>0&&b($),_&&$.deltaY<0&&_($),S&&S($),E&&$.deltaY<0!=K<0&&E($),K=$.deltaY,ot[0]=ot[1]=ot[2]=0),(X||j)&&(A&&A($),j&&(m($),j=!1),X=!1),Y&&!(Y=!1)&&W&&W($),q&&(L($),q=!1),H=0},pt=function(t,e,r){at[r]+=t,ot[r]+=e,$._vx.update(t),$._vy.update(e),a?H||(H=requestAnimationFrame(ct)):ct()},dt=function(t,e){G&&!Z&&($.axis=Z=Math.abs(t)>Math.abs(e)?"x":"y",Y=!0),"y"!==Z&&(at[2]+=t,$._vx.update(t,!0)),"x"!==Z&&(ot[2]+=e,$._vy.update(e,!0)),a?H||(H=requestAnimationFrame(ct)):ct()},ft=function(t){if(!ut(t,1)){var e=(t=zd(t,o)).clientX,i=t.clientY,n=e-$.x,s=i-$.y,a=$.isDragging;$.x=e,$.y=i,(a||Math.abs($.startX-e)>=r||Math.abs($.startY-i)>=r)&&(m&&(j=!0),a||($.isDragging=!0),dt(n,s),a||d&&d($))}},mt=$.onPress=function(t){ut(t,1)||t&&t.button||($.axis=Z=null,U.pause(),$.isPressed=!0,t=zd(t),J=K=0,$.startX=$.x=t.clientX,$.startY=$.y=t.clientY,$._vx.reset(),$._vy.reset(),Ed(k?n:st,md[1],ft,o,!0),$.deltaX=$.deltaY=0,g&&g($))},gt=$.onRelease=function(t){if(!ut(t,1)){Pd(k?n:st,md[1],ft,!0);var e=!isNaN($.y-$.startY),r=$.isDragging&&(Math.abs($.x-$.startX)>3||Math.abs($.y-$.startY)>3),i=zd(t);!r&&e&&($._vx.reset(),$._vy.reset(),o&&N&&nd.delayedCall(.08,(function(){if(wd()-lt>300&&!t.defaultPrevented)if(t.target.click)t.target.click();else if(st.createEvent){var e=st.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,ad,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(e)}}))),$.isDragging=$.isGesturing=$.isPressed=!1,l&&!k&&U.restart(!0),f&&r&&f($),v&&v($,r)}},vt=function(t){return t.touches&&t.touches.length>1&&($.isGesturing=!0)&&R(t,$.isDragging)},yt=function(){return($.isGesturing=!1)||I($)},xt=function(t){if(!ut(t)){var e=Q(),r=tt();pt((e-et)*B,(r-rt)*B,1),et=e,rt=r,l&&U.restart(!0)}},_t=function(t){if(!ut(t)){t=zd(t,o),L&&(q=!0);var e=(1===t.deltaMode?s:2===t.deltaMode?ad.innerHeight:1)*c;pt(t.deltaX*e,t.deltaY*e,0),l&&!k&&U.restart(!0)}},bt=function(t){if(!ut(t)){var e=t.clientX,r=t.clientY,i=e-$.x,n=r-$.y;$.x=e,$.y=r,X=!0,(i||n)&&dt(i,n)}},wt=function(t){$.event=t,P($)},St=function(t){$.event=t,C($)},Mt=function(t){return ut(t)||zd(t,o)&&z($)};U=$._dc=nd.delayedCall(h||.25,(function(){$._vx.reset(),$._vy.reset(),U.pause(),l&&l($)})).pause(),$.deltaX=$.deltaY=0,$._vx=Od(0,50,!0),$._vy=Od(0,50,!0),$.scrollX=Q,$.scrollY=tt,$.isDragging=$.isGesturing=$.isPressed=!1,gd(this),$.enable=function(t){return $.isEnabled||(Ed(nt?st:n,"scroll",Dd),i.indexOf("scroll")>=0&&Ed(nt?st:n,"scroll",xt,o,V),i.indexOf("wheel")>=0&&Ed(n,"wheel",_t,o,V),(i.indexOf("touch")>=0&&ud||i.indexOf("pointer")>=0)&&(Ed(n,md[0],mt,o,V),Ed(st,md[2],gt),Ed(st,md[3],gt),N&&Ed(n,"click",ht,!1,!0),z&&Ed(n,"click",Mt),R&&Ed(st,"gesturestart",vt),I&&Ed(st,"gestureend",yt),P&&Ed(n,cd+"enter",wt),C&&Ed(n,cd+"leave",St),A&&Ed(n,cd+"move",bt)),$.isEnabled=!0,t&&t.type&&mt(t),F&&F($)),$},$.disable=function(){$.isEnabled&&(xd.filter((function(t){return t!==$&&Td(t.target)})).length||Pd(nt?st:n,"scroll",Dd),$.isPressed&&($._vx.reset(),$._vy.reset(),Pd(k?n:st,md[1],ft,!0)),Pd(nt?st:n,"scroll",xt,V),Pd(n,"wheel",_t,V),Pd(n,md[0],mt,V),Pd(st,md[2],gt),Pd(st,md[3],gt),Pd(n,"click",ht,!0),Pd(n,"click",Mt),Pd(st,"gesturestart",vt),Pd(st,"gestureend",yt),Pd(n,cd+"enter",wt),Pd(n,cd+"leave",St),Pd(n,cd+"move",bt),$.isEnabled=$.isPressed=$.isDragging=!1,O&&O($))},$.kill=$.revert=function(){$.disable();var t=xd.indexOf($);t>=0&&xd.splice(t,1),fd===$&&(fd=0)},xd.push($),k&&Td(n)&&(fd=$),$.enable(p)},e=t,(r=[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}])&&id(e.prototype,r),i&&id(e,i),t}();Gd.version="3.12.2",Gd.create=function(t){return new Gd(t)},Gd.register=Nd,Gd.getAll=function(){return xd.slice()},Gd.getById=function(t){return xd.filter((function(e){return e.vars.id===t}))[0]},vd()&&nd.registerPlugin(Gd);var Wd,Hd,Ud,jd,Xd,qd,Yd,Zd,$d,Jd,Kd,Qd,tf,ef,rf,nf,sf,af,of,lf,hf,uf,cf,pf,df,ff,mf,gf,vf,yf,xf,_f,bf,wf,Sf,Mf,Tf=1,Ef=Date.now,Pf=Ef(),Cf=0,Af=0,Df=function(t,e,r){var i=Uf(t)&&("clamp("===t.substr(0,6)||t.indexOf("max")>-1);return r["_"+e+"Clamp"]=i,i?t.substr(6,t.length-7):t},kf=function(t,e){return!e||Uf(t)&&"clamp("===t.substr(0,6)?t:"clamp("+t+")"},Rf=function t(){return Af&&requestAnimationFrame(t)},If=function(){return ef=1},Lf=function(){return ef=0},Ff=function(t){return t},Of=function(t){return Math.round(1e5*t)/1e5||0},zf=function(){return"undefined"!=typeof window},Bf=function(){return Wd||zf()&&(Wd=window.gsap)&&Wd.registerPlugin&&Wd},Vf=function(t){return!!~Yd.indexOf(t)},Nf=function(t){return("Height"===t?xf:Ud["inner"+t])||Xd["client"+t]||qd["client"+t]},Gf=function(t){return Md(t,"getBoundingClientRect")||(Vf(t)?function(){return Qm.width=Ud.innerWidth,Qm.height=xf,Qm}:function(){return dm(t)})},Wf=function(t,e){var r=e.s,i=e.d2,n=e.d,s=e.a;return Math.max(0,(r="scroll"+i)&&(s=Md(t,r))?s()-Gf(t)()[n]:Vf(t)?(Xd[r]||qd[r])-Nf(i):t[r]-t["offset"+i])},Hf=function(t,e){for(var r=0;r<of.length;r+=3)(!e||~e.indexOf(of[r+1]))&&t(of[r],of[r+1],of[r+2])},Uf=function(t){return"string"==typeof t},jf=function(t){return"function"==typeof t},Xf=function(t){return"number"==typeof t},qf=function(t){return"object"==typeof t},Yf=function(t,e,r){return t&&t.progress(e?0:1)&&r&&t.pause()},Zf=function(t,e){if(t.enabled){var r=e(t);r&&r.totalTime&&(t.callbackAnimation=r)}},$f=Math.abs,Jf="left",Kf="right",Qf="bottom",tm="width",em="height",rm="Right",im="Left",nm="Top",sm="Bottom",am="padding",om="margin",lm="Width",hm="Height",um="px",cm=function(t){return Ud.getComputedStyle(t)},pm=function(t,e){for(var r in e)r in t||(t[r]=e[r]);return t},dm=function(t,e){var r=e&&"matrix(1, 0, 0, 1, 0, 0)"!==cm(t)[rf]&&Wd.to(t,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),i=t.getBoundingClientRect();return r&&r.progress(0).kill(),i},fm=function(t,e){var r=e.d2;return t["offset"+r]||t["client"+r]||0},mm=function(t){var e,r=[],i=t.labels,n=t.duration();for(e in i)r.push(i[e]/n);return r},gm=function(t){var e=Wd.utils.snap(t),r=Array.isArray(t)&&t.slice(0).sort((function(t,e){return t-e}));return r?function(t,i,n){var s;if(void 0===n&&(n=.001),!i)return e(t);if(i>0){for(t-=n,s=0;s<r.length;s++)if(r[s]>=t)return r[s];return r[s-1]}for(s=r.length,t+=n;s--;)if(r[s]<=t)return r[s];return r[0]}:function(r,i,n){void 0===n&&(n=.001);var s=e(r);return!i||Math.abs(s-r)<n||s-r<0==i<0?s:e(i<0?r-t:r+t)}},vm=function(t,e,r,i){return r.split(",").forEach((function(r){return t(e,r,i)}))},ym=function(t,e,r,i,n){return t.addEventListener(e,r,{passive:!i,capture:!!n})},xm=function(t,e,r,i){return t.removeEventListener(e,r,!!i)},_m=function(t,e,r){(r=r&&r.wheelHandler)&&(t(e,"wheel",r),t(e,"touchmove",r))},bm={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},wm={toggleActions:"play",anticipatePin:0},Sm={top:0,left:0,center:.5,bottom:1,right:1},Mm=function(t,e){if(Uf(t)){var r=t.indexOf("="),i=~r?+(t.charAt(r-1)+1)*parseFloat(t.substr(r+1)):0;~r&&(t.indexOf("%")>r&&(i*=e/100),t=t.substr(0,r-1)),t=i+(t in Sm?Sm[t]*e:~t.indexOf("%")?parseFloat(t)*e/100:parseFloat(t)||0)}return t},Tm=function(t,e,r,i,n,s,a,o){var l=n.startColor,h=n.endColor,u=n.fontSize,c=n.indent,p=n.fontWeight,d=jd.createElement("div"),f=Vf(r)||"fixed"===Md(r,"pinType"),m=-1!==t.indexOf("scroller"),g=f?qd:r,v=-1!==t.indexOf("start"),y=v?l:h,x="border-color:"+y+";font-size:"+u+";color:"+y+";font-weight:"+p+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return x+="position:"+((m||o)&&f?"fixed;":"absolute;"),(m||o||!f)&&(x+=(i===Id?Kf:Qf)+":"+(s+parseFloat(c))+"px;"),a&&(x+="box-sizing:border-box;text-align:left;width:"+a.offsetWidth+"px;"),d._isStart=v,d.setAttribute("class","gsap-marker-"+t+(e?" marker-"+e:"")),d.style.cssText=x,d.innerText=e||0===e?t+"-"+e:t,g.children[0]?g.insertBefore(d,g.children[0]):g.appendChild(d),d._offset=d["offset"+i.op.d2],Em(d,0,i,v),d},Em=function(t,e,r,i){var n={display:"block"},s=r[i?"os2":"p2"],a=r[i?"p2":"os2"];t._isFlipped=i,n[r.a+"Percent"]=i?-100:0,n[r.a]=i?"1px":0,n["border"+s+lm]=1,n["border"+a+lm]=0,n[r.p]=e+"px",Wd.set(t,n)},Pm=[],Cm={},Am=function(){return Ef()-Cf>34&&(bf||(bf=requestAnimationFrame(Xm)))},Dm=function(){(!cf||!cf.isPressed||cf.startX>qd.clientWidth)&&(_d.cache++,cf?bf||(bf=requestAnimationFrame(Xm)):Xm(),Cf||Om("scrollStart"),Cf=Ef())},km=function(){ff=Ud.innerWidth,df=Ud.innerHeight},Rm=function(){_d.cache++,!tf&&!uf&&!jd.fullscreenElement&&!jd.webkitFullscreenElement&&(!pf||ff!==Ud.innerWidth||Math.abs(Ud.innerHeight-df)>.25*Ud.innerHeight)&&Zd.restart(!0)},Im={},Lm=[],Fm=function t(){return xm(ag,"scrollEnd",t)||Hm(!0)},Om=function(t){return Im[t]&&Im[t].map((function(t){return t()}))||Lm},zm=[],Bm=function(t){for(var e=0;e<zm.length;e+=5)(!t||zm[e+4]&&zm[e+4].query===t)&&(zm[e].style.cssText=zm[e+1],zm[e].getBBox&&zm[e].setAttribute("transform",zm[e+2]||""),zm[e+3].uncache=1)},Vm=function(t,e){var r;for(nf=0;nf<Pm.length;nf++)!(r=Pm[nf])||e&&r._ctx!==e||(t?r.kill(1):r.revert(!0,!0));e&&Bm(e),e||Om("revert")},Nm=function(t,e){_d.cache++,(e||!wf)&&_d.forEach((function(t){return jf(t)&&t.cacheID++&&(t.rec=0)})),Uf(t)&&(Ud.history.scrollRestoration=vf=t)},Gm=0,Wm=function(){qd.appendChild(yf),xf=yf.offsetHeight||Ud.innerHeight,qd.removeChild(yf)},Hm=function(t,e){if(!Cf||t){Wm(),wf=ag.isRefreshing=!0,_d.forEach((function(t){return jf(t)&&++t.cacheID&&(t.rec=t())}));var r=Om("refreshInit");lf&&ag.sort(),e||Vm(),_d.forEach((function(t){jf(t)&&(t.smooth&&(t.target.style.scrollBehavior="auto"),t(0))})),Pm.slice(0).forEach((function(t){return t.refresh()})),Pm.forEach((function(t,e){if(t._subPinOffset&&t.pin){var r=t.vars.horizontal?"offsetWidth":"offsetHeight",i=t.pin[r];t.revert(!0,1),t.adjustPinSpacing(t.pin[r]-i),t.refresh()}})),Pm.forEach((function(t){var e=Wf(t.scroller,t._dir);("max"===t.vars.end||t._endClamp&&t.end>e)&&t.setPositions(t.start,Math.max(t.start+1,e),!0)})),r.forEach((function(t){return t&&t.render&&t.render(-1)})),_d.forEach((function(t){jf(t)&&(t.smooth&&requestAnimationFrame((function(){return t.target.style.scrollBehavior="smooth"})),t.rec&&t(t.rec))})),Nm(vf,1),Zd.pause(),Gm++,wf=2,Xm(2),Pm.forEach((function(t){return jf(t.vars.onRefresh)&&t.vars.onRefresh(t)})),wf=ag.isRefreshing=!1,Om("refresh")}else ym(ag,"scrollEnd",Fm)},Um=0,jm=1,Xm=function(t){if(!wf||2===t){ag.isUpdating=!0,Mf&&Mf.update(0);var e=Pm.length,r=Ef(),i=r-Pf>=50,n=e&&Pm[0].scroll();if(jm=Um>n?-1:1,wf||(Um=n),i&&(Cf&&!ef&&r-Cf>200&&(Cf=0,Om("scrollEnd")),Kd=Pf,Pf=r),jm<0){for(nf=e;nf-- >0;)Pm[nf]&&Pm[nf].update(0,i);jm=1}else for(nf=0;nf<e;nf++)Pm[nf]&&Pm[nf].update(0,i);ag.isUpdating=!1}bf=0},qm=[Jf,"top",Qf,Kf,om+sm,om+rm,om+nm,om+im,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],Ym=qm.concat([tm,em,"boxSizing","max"+lm,"max"+hm,"position",om,am,am+nm,am+rm,am+sm,am+im]),Zm=function(t,e,r,i){if(!t._gsap.swappedIn){for(var n,s=qm.length,a=e.style,o=t.style;s--;)a[n=qm[s]]=r[n];a.position="absolute"===r.position?"absolute":"relative","inline"===r.display&&(a.display="inline-block"),o[Qf]=o[Kf]="auto",a.flexBasis=r.flexBasis||"auto",a.overflow="visible",a.boxSizing="border-box",a[tm]=fm(t,Rd)+um,a[em]=fm(t,Id)+um,a[am]=o[om]=o.top=o[Jf]="0",Jm(i),o[tm]=o["max"+lm]=r[tm],o[em]=o["max"+hm]=r[em],o[am]=r[am],t.parentNode!==e&&(t.parentNode.insertBefore(e,t),e.appendChild(t)),t._gsap.swappedIn=!0}},$m=/([A-Z])/g,Jm=function(t){if(t){var e,r,i=t.t.style,n=t.length,s=0;for((t.t._gsap||Wd.core.getCache(t.t)).uncache=1;s<n;s+=2)r=t[s+1],e=t[s],r?i[e]=r:i[e]&&i.removeProperty(e.replace($m,"-$1").toLowerCase())}},Km=function(t){for(var e=Ym.length,r=t.style,i=[],n=0;n<e;n++)i.push(Ym[n],r[Ym[n]]);return i.t=t,i},Qm={left:0,top:0},tg=function(t,e,r,i,n,s,a,o,l,h,u,c,p,d){jf(t)&&(t=t(o)),Uf(t)&&"max"===t.substr(0,3)&&(t=c+("="===t.charAt(4)?Mm("0"+t.substr(3),r):0));var f,m,g,v=p?p.time():0;if(p&&p.seek(0),isNaN(t)||(t=+t),Xf(t))p&&(t=Wd.utils.mapRange(p.scrollTrigger.start,p.scrollTrigger.end,0,c,t)),a&&Em(a,r,i,!0);else{jf(e)&&(e=e(o));var y,x,_,b,w=(t||"0").split(" ");g=Ld(e,o)||qd,(y=dm(g)||{})&&(y.left||y.top)||"none"!==cm(g).display||(b=g.style.display,g.style.display="block",y=dm(g),b?g.style.display=b:g.style.removeProperty("display")),x=Mm(w[0],y[i.d]),_=Mm(w[1]||"0",r),t=y[i.p]-l[i.p]-h+x+n-_,a&&Em(a,_,i,r-_<20||a._isStart&&_>20),r-=r-_}if(d&&(o[d]=t||-.001,t<0&&(t=0)),s){var S=t+r,M=s._isStart;f="scroll"+i.d2,Em(s,S,i,M&&S>20||!M&&(u?Math.max(qd[f],Xd[f]):s.parentNode[f])<=S+1),u&&(l=dm(a),u&&(s.style[i.op.p]=l[i.op.p]-i.op.m-s._offset+um))}return p&&g&&(f=dm(g),p.seek(c),m=dm(g),p._caScrollDist=f[i.p]-m[i.p],t=t/p._caScrollDist*c),p&&p.seek(v),p?t:Math.round(t)},eg=/(webkit|moz|length|cssText|inset)/i,rg=function(t,e,r,i){if(t.parentNode!==e){var n,s,a=t.style;if(e===qd){for(n in t._stOrig=a.cssText,s=cm(t))+n||eg.test(n)||!s[n]||"string"!=typeof a[n]||"0"===n||(a[n]=s[n]);a.top=r,a.left=i}else a.cssText=t._stOrig;Wd.core.getCache(t).uncache=1,e.appendChild(t)}},ig=function(t,e,r){var i=e,n=i;return function(e){var s=Math.round(t());return s!==i&&s!==n&&Math.abs(s-i)>3&&Math.abs(s-n)>3&&(e=s,r&&r()),n=i,i=e,e}},ng=function(t,e,r){var i={};i[e.p]="+="+r,Wd.set(t,i)},sg=function(t,e){var r=Fd(t,e),i="_scroll"+e.p2,n=function e(n,s,a,o,l){var h=e.tween,u=s.onComplete,c={};a=a||r();var p=ig(r,a,(function(){h.kill(),e.tween=0}));return l=o&&l||0,o=o||n-a,h&&h.kill(),s[i]=n,s.modifiers=c,c[i]=function(){return p(a+o*h.ratio+l*h.ratio*h.ratio)},s.onUpdate=function(){_d.cache++,Xm()},s.onComplete=function(){e.tween=0,u&&u.call(h)},h=e.tween=Wd.to(t,s)};return t[i]=r,r.wheelHandler=function(){return n.tween&&n.tween.kill()&&(n.tween=0)},ym(t,"wheel",r.wheelHandler),ag.isTouch&&ym(t,"touchmove",r.wheelHandler),n},ag=function(){function t(e,r){Hd||t.register(Wd)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),gf(this),this.init(e,r)}return t.prototype.init=function(e,r){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),Af){var i,n,s,a,o,l,h,u,c,p,d,f,m,g,v,y,x,_,b,w,S,M,T,E,P,C,A,D,k,R,I,L,F,O,z,B,V,N,G,W,H,U,j=e=pm(Uf(e)||Xf(e)||e.nodeType?{trigger:e}:e,wm),X=j.onUpdate,q=j.toggleClass,Y=j.id,Z=j.onToggle,$=j.onRefresh,J=j.scrub,K=j.trigger,Q=j.pin,tt=j.pinSpacing,et=j.invalidateOnRefresh,rt=j.anticipatePin,it=j.onScrubComplete,nt=j.onSnapComplete,st=j.once,at=j.snap,ot=j.pinReparent,lt=j.pinSpacer,ht=j.containerAnimation,ut=j.fastScrollEnd,ct=j.preventOverlaps,pt=e.horizontal||e.containerAnimation&&!1!==e.horizontal?Rd:Id,dt=!J&&0!==J,ft=Ld(e.scroller||Ud),mt=Wd.core.getCache(ft),gt=Vf(ft),vt="fixed"===("pinType"in e?e.pinType:Md(ft,"pinType")||gt&&"fixed"),yt=[e.onEnter,e.onLeave,e.onEnterBack,e.onLeaveBack],xt=dt&&e.toggleActions.split(" "),_t="markers"in e?e.markers:wm.markers,bt=gt?0:parseFloat(cm(ft)["border"+pt.p2+lm])||0,wt=this,St=e.onRefreshInit&&function(){return e.onRefreshInit(wt)},Mt=function(t,e,r){var i=r.d,n=r.d2,s=r.a;return(s=Md(t,"getBoundingClientRect"))?function(){return s()[i]}:function(){return(e?Nf(n):t["client"+n])||0}}(ft,gt,pt),Tt=function(t,e){return!e||~bd.indexOf(t)?Gf(t):function(){return Qm}}(ft,gt),Et=0,Pt=0,Ct=0,At=Fd(ft,pt);if(wt._startClamp=wt._endClamp=!1,wt._dir=pt,rt*=45,wt.scroller=ft,wt.scroll=ht?ht.time.bind(ht):At,a=At(),wt.vars=e,r=r||e.animation,"refreshPriority"in e&&(lf=1,-9999===e.refreshPriority&&(Mf=wt)),mt.tweenScroll=mt.tweenScroll||{top:sg(ft,Id),left:sg(ft,Rd)},wt.tweenTo=i=mt.tweenScroll[pt.p],wt.scrubDuration=function(t){(F=Xf(t)&&t)?L?L.duration(t):L=Wd.to(r,{ease:"expo",totalProgress:"+=0",duration:F,paused:!0,onComplete:function(){return it&&it(wt)}}):(L&&L.progress(1).kill(),L=0)},r&&(r.vars.lazy=!1,r._initted&&!wt.isReverted||!1!==r.vars.immediateRender&&!1!==e.immediateRender&&r.duration()&&r.render(0,!0,!0),wt.animation=r.pause(),r.scrollTrigger=wt,wt.scrubDuration(J),R=0,Y||(Y=r.vars.id)),at&&(qf(at)&&!at.push||(at={snapTo:at}),"scrollBehavior"in qd.style&&Wd.set(gt?[qd,Xd]:ft,{scrollBehavior:"auto"}),_d.forEach((function(t){return jf(t)&&t.target===(gt?jd.scrollingElement||Xd:ft)&&(t.smooth=!1)})),s=jf(at.snapTo)?at.snapTo:"labels"===at.snapTo?function(t){return function(e){return Wd.utils.snap(mm(t),e)}}(r):"labelsDirectional"===at.snapTo?(W=r,function(t,e){return gm(mm(W))(t,e.direction)}):!1!==at.directional?function(t,e){return gm(at.snapTo)(t,Ef()-Pt<500?0:e.direction)}:Wd.utils.snap(at.snapTo),O=at.duration||{min:.1,max:2},O=qf(O)?Jd(O.min,O.max):Jd(O,O),z=Wd.delayedCall(at.delay||F/2||.1,(function(){var t=At(),e=Ef()-Pt<500,n=i.tween;if(!(e||Math.abs(wt.getVelocity())<10)||n||ef||Et===t)wt.isActive&&Et!==t&&z.restart(!0);else{var a=(t-l)/g,o=r&&!dt?r.totalProgress():a,u=e?0:(o-I)/(Ef()-Kd)*1e3||0,c=Wd.utils.clamp(-a,1-a,$f(u/2)*u/.185),p=a+(!1===at.inertia?0:c),d=Jd(0,1,s(p,wt)),f=Math.round(l+d*g),m=at,v=m.onStart,y=m.onInterrupt,x=m.onComplete;if(t<=h&&t>=l&&f!==t){if(n&&!n._initted&&n.data<=$f(f-t))return;!1===at.inertia&&(c=d-a),i(f,{duration:O($f(.185*Math.max($f(p-o),$f(d-o))/u/.05||0)),ease:at.ease||"power3",data:$f(f-t),onInterrupt:function(){return z.restart(!0)&&y&&y(wt)},onComplete:function(){wt.update(),Et=At(),R=I=r&&!dt?r.totalProgress():wt.progress,nt&&nt(wt),x&&x(wt)}},t,c*g,f-t-c*g),v&&v(wt,i.tween)}}})).pause()),Y&&(Cm[Y]=wt),(G=(K=wt.trigger=Ld(K||!0!==Q&&Q))&&K._gsap&&K._gsap.stRevert)&&(G=G(wt)),Q=!0===Q?K:Ld(Q),Uf(q)&&(q={targets:K,className:q}),Q&&(!1===tt||tt===om||(tt=!(!tt&&Q.parentNode&&Q.parentNode.style&&"flex"===cm(Q.parentNode).display)&&am),wt.pin=Q,(n=Wd.core.getCache(Q)).spacer?v=n.pinState:(lt&&((lt=Ld(lt))&&!lt.nodeType&&(lt=lt.current||lt.nativeElement),n.spacerIsNative=!!lt,lt&&(n.spacerState=Km(lt))),n.spacer=_=lt||jd.createElement("div"),_.classList.add("pin-spacer"),Y&&_.classList.add("pin-spacer-"+Y),n.pinState=v=Km(Q)),!1!==e.force3D&&Wd.set(Q,{force3D:!0}),wt.spacer=_=n.spacer,k=cm(Q),E=k[tt+pt.os2],w=Wd.getProperty(Q),S=Wd.quickSetter(Q,pt.a,um),Zm(Q,_,k),x=Km(Q)),_t){f=qf(_t)?pm(_t,bm):bm,p=Tm("scroller-start",Y,ft,pt,f,0),d=Tm("scroller-end",Y,ft,pt,f,0,p),b=p["offset"+pt.op.d2];var Dt=Ld(Md(ft,"content")||ft);u=this.markerStart=Tm("start",Y,Dt,pt,f,b,0,ht),c=this.markerEnd=Tm("end",Y,Dt,pt,f,b,0,ht),ht&&(N=Wd.quickSetter([u,c],pt.a,um)),vt||bd.length&&!0===Md(ft,"fixedMarkers")||(U=cm(H=gt?qd:ft).position,H.style.position="absolute"===U||"fixed"===U?U:"relative",Wd.set([p,d],{force3D:!0}),C=Wd.quickSetter(p,pt.a,um),D=Wd.quickSetter(d,pt.a,um))}if(ht){var kt=ht.vars.onUpdate,Rt=ht.vars.onUpdateParams;ht.eventCallback("onUpdate",(function(){wt.update(0,0,1),kt&&kt.apply(ht,Rt||[])}))}if(wt.previous=function(){return Pm[Pm.indexOf(wt)-1]},wt.next=function(){return Pm[Pm.indexOf(wt)+1]},wt.revert=function(t,e){if(!e)return wt.kill(!0);var i=!1!==t||!wt.enabled,n=tf;i!==wt.isReverted&&(i&&(B=Math.max(At(),wt.scroll.rec||0),Ct=wt.progress,V=r&&r.progress()),u&&[u,c,p,d].forEach((function(t){return t.style.display=i?"none":"block"})),i&&(tf=wt,wt.update(i)),!Q||ot&&wt.isActive||(i?function(t,e,r){Jm(r);var i=t._gsap;if(i.spacerIsNative)Jm(i.spacerState);else if(t._gsap.swappedIn){var n=e.parentNode;n&&(n.insertBefore(t,e),n.removeChild(e))}t._gsap.swappedIn=!1}(Q,_,v):Zm(Q,_,cm(Q),P)),i||wt.update(i),tf=n,wt.isReverted=i)},wt.refresh=function(n,s,f,b){if(!tf&&wt.enabled||s)if(Q&&n&&Cf)ym(t,"scrollEnd",Fm);else{!wf&&St&&St(wt),tf=wt,i.tween&&!f&&(i.tween.kill(),i.tween=0),L&&L.pause(),et&&r&&r.revert({kill:!1}).invalidate(),wt.isReverted||wt.revert(!0,!0),wt._subPinOffset=!1;var S,E,C,D,k,R,I,F,O,N,G,W,H,U=Mt(),j=Tt(),X=ht?ht.duration():Wf(ft,pt),q=g<=.01,Y=0,Z=b||0,J=qf(f)?f.end:e.end,rt=e.endTrigger||K,it=qf(f)?f.start:e.start||(0!==e.start&&K?Q?"0 0":"0 100%":0),nt=wt.pinnedContainer=e.pinnedContainer&&Ld(e.pinnedContainer,wt),st=K&&Math.max(0,Pm.indexOf(wt))||0,at=st;for(_t&&qf(f)&&(W=Wd.getProperty(p,pt.p),H=Wd.getProperty(d,pt.p));at--;)(R=Pm[at]).end||R.refresh(0,1)||(tf=wt),!(I=R.pin)||I!==K&&I!==Q&&I!==nt||R.isReverted||(N||(N=[]),N.unshift(R),R.revert(!0,!0)),R!==Pm[at]&&(st--,at--);for(jf(it)&&(it=it(wt)),it=Df(it,"start",wt),l=tg(it,K,U,pt,At(),u,p,wt,j,bt,vt,X,ht,wt._startClamp&&"_startClamp")||(Q?-.001:0),jf(J)&&(J=J(wt)),Uf(J)&&!J.indexOf("+=")&&(~J.indexOf(" ")?J=(Uf(it)?it.split(" ")[0]:"")+J:(Y=Mm(J.substr(2),U),J=Uf(it)?it:(ht?Wd.utils.mapRange(0,ht.duration(),ht.scrollTrigger.start,ht.scrollTrigger.end,l):l)+Y,rt=K)),J=Df(J,"end",wt),h=Math.max(l,tg(J||(rt?"100% 0":X),rt,U,pt,At()+Y,c,d,wt,j,bt,vt,X,ht,wt._endClamp&&"_endClamp"))||-.001,Y=0,at=st;at--;)(I=(R=Pm[at]).pin)&&R.start-R._pinPush<=l&&!ht&&R.end>0&&(S=R.end-(wt._startClamp?Math.max(0,R.start):R.start),(I===K&&R.start-R._pinPush<l||I===nt)&&isNaN(it)&&(Y+=S*(1-R.progress)),I===Q&&(Z+=S));if(l+=Y,h+=Y,wt._startClamp&&(wt._startClamp+=Y),wt._endClamp&&!wf&&(wt._endClamp=h||-.001,h=Math.min(h,Wf(ft,pt))),g=h-l||(l-=.01)&&.001,q&&(Ct=Wd.utils.clamp(0,1,Wd.utils.normalize(l,h,B))),wt._pinPush=Z,u&&Y&&((S={})[pt.a]="+="+Y,nt&&(S[pt.p]="-="+At()),Wd.set([u,c],S)),Q)S=cm(Q),D=pt===Id,C=At(),M=parseFloat(w(pt.a))+Z,!X&&h>1&&(G={style:G=(gt?jd.scrollingElement||Xd:ft).style,value:G["overflow"+pt.a.toUpperCase()]},gt&&"scroll"!==cm(qd)["overflow"+pt.a.toUpperCase()]&&(G.style["overflow"+pt.a.toUpperCase()]="scroll")),Zm(Q,_,S),x=Km(Q),E=dm(Q,!0),F=vt&&Fd(ft,D?Rd:Id)(),tt&&((P=[tt+pt.os2,g+Z+um]).t=_,(at=tt===am?fm(Q,pt)+g+Z:0)&&P.push(pt.d,at+um),Jm(P),nt&&Pm.forEach((function(t){t.pin===nt&&!1!==t.vars.pinSpacing&&(t._subPinOffset=!0)})),vt&&At(B)),vt&&((k={top:E.top+(D?C-l:F)+um,left:E.left+(D?F:C-l)+um,boxSizing:"border-box",position:"fixed"})[tm]=k["max"+lm]=Math.ceil(E.width)+um,k[em]=k["max"+hm]=Math.ceil(E.height)+um,k[om]=k[om+nm]=k[om+rm]=k[om+sm]=k[om+im]="0",k[am]=S[am],k[am+nm]=S[am+nm],k[am+rm]=S[am+rm],k[am+sm]=S[am+sm],k[am+im]=S[am+im],y=function(t,e,r){for(var i,n=[],s=t.length,a=r?8:0;a<s;a+=2)i=t[a],n.push(i,i in e?e[i]:t[a+1]);return n.t=t.t,n}(v,k,ot),wf&&At(0)),r?(O=r._initted,hf(1),r.render(r.duration(),!0,!0),T=w(pt.a)-M+g+Z,A=Math.abs(g-T)>1,vt&&A&&y.splice(y.length-2,2),r.render(0,!0,!0),O||r.invalidate(!0),r.parent||r.totalTime(r.totalTime()),hf(0)):T=g,G&&(G.value?G.style["overflow"+pt.a.toUpperCase()]=G.value:G.style.removeProperty("overflow-"+pt.a));else if(K&&At()&&!ht)for(E=K.parentNode;E&&E!==qd;)E._pinOffset&&(l-=E._pinOffset,h-=E._pinOffset),E=E.parentNode;N&&N.forEach((function(t){return t.revert(!1,!0)})),wt.start=l,wt.end=h,a=o=wf?B:At(),ht||wf||(a<B&&At(B),wt.scroll.rec=0),wt.revert(!1,!0),Pt=Ef(),z&&(Et=-1,z.restart(!0)),tf=0,r&&dt&&(r._initted||V)&&r.progress()!==V&&r.progress(V||0,!0).render(r.time(),!0,!0),(q||Ct!==wt.progress||ht)&&(r&&!dt&&r.totalProgress(ht&&l<-.001&&!Ct?Wd.utils.normalize(l,h,0):Ct,!0),wt.progress=q||(a-l)/g===Ct?0:Ct),Q&&tt&&(_._pinOffset=Math.round(wt.progress*T)),L&&L.invalidate(),isNaN(W)||(W-=Wd.getProperty(p,pt.p),H-=Wd.getProperty(d,pt.p),ng(p,pt,W),ng(u,pt,W-(b||0)),ng(d,pt,H),ng(c,pt,H-(b||0))),q&&!wf&&wt.update(),!$||wf||m||(m=!0,$(wt),m=!1)}},wt.getVelocity=function(){return(At()-o)/(Ef()-Kd)*1e3||0},wt.endAnimation=function(){Yf(wt.callbackAnimation),r&&(L?L.progress(1):r.paused()?dt||Yf(r,wt.direction<0,1):Yf(r,r.reversed()))},wt.labelToScroll=function(t){return r&&r.labels&&(l||wt.refresh()||l)+r.labels[t]/r.duration()*g||0},wt.getTrailing=function(t){var e=Pm.indexOf(wt),r=wt.direction>0?Pm.slice(0,e).reverse():Pm.slice(e+1);return(Uf(t)?r.filter((function(e){return e.vars.preventOverlaps===t})):r).filter((function(t){return wt.direction>0?t.end<=l:t.start>=h}))},wt.update=function(t,e,n){if(!ht||n||t){var s,u,c,d,f,m,v,b=!0===wf?B:wt.scroll(),w=t?0:(b-l)/g,P=w<0?0:w>1?1:w||0,k=wt.progress;if(e&&(o=a,a=ht?At():b,at&&(I=R,R=r&&!dt?r.totalProgress():P)),rt&&!P&&Q&&!tf&&!Tf&&Cf&&l<b+(b-o)/(Ef()-Kd)*rt&&(P=1e-4),P!==k&&wt.enabled){if(d=(f=(s=wt.isActive=!!P&&P<1)!==(!!k&&k<1))||!!P!=!!k,wt.direction=P>k?1:-1,wt.progress=P,d&&!tf&&(u=P&&!k?0:1===P?1:1===k?2:3,dt&&(c=!f&&"none"!==xt[u+1]&&xt[u+1]||xt[u],v=r&&("complete"===c||"reset"===c||c in r))),ct&&(f||v)&&(v||J||!r)&&(jf(ct)?ct(wt):wt.getTrailing(ct).forEach((function(t){return t.endAnimation()}))),dt||(!L||tf||Tf?r&&r.totalProgress(P,!(!tf||!Pt&&!t)):(L._dp._time-L._start!==L._time&&L.render(L._dp._time-L._start),L.resetTo?L.resetTo("totalProgress",P,r._tTime/r._tDur):(L.vars.totalProgress=P,L.invalidate().restart()))),Q)if(t&&tt&&(_.style[tt+pt.os2]=E),vt){if(d){if(m=!t&&P>k&&h+1>b&&b+1>=Wf(ft,pt),ot)if(t||!s&&!m)rg(Q,_);else{var F=dm(Q,!0),O=b-l;rg(Q,qd,F.top+(pt===Id?O:0)+um,F.left+(pt===Id?0:O)+um)}Jm(s||m?y:x),A&&P<1&&s||S(M+(1!==P||m?0:T))}}else S(Of(M+T*P));at&&!i.tween&&!tf&&!Tf&&z.restart(!0),q&&(f||st&&P&&(P<1||!_f))&&$d(q.targets).forEach((function(t){return t.classList[s||st?"add":"remove"](q.className)})),X&&!dt&&!t&&X(wt),d&&!tf?(dt&&(v&&("complete"===c?r.pause().totalProgress(1):"reset"===c?r.restart(!0).pause():"restart"===c?r.restart(!0):r[c]()),X&&X(wt)),!f&&_f||(Z&&f&&Zf(wt,Z),yt[u]&&Zf(wt,yt[u]),st&&(1===P?wt.kill(!1,1):yt[u]=0),f||yt[u=1===P?1:3]&&Zf(wt,yt[u])),ut&&!s&&Math.abs(wt.getVelocity())>(Xf(ut)?ut:2500)&&(Yf(wt.callbackAnimation),L?L.progress(1):Yf(r,"reverse"===c?1:!P,1))):dt&&X&&!tf&&X(wt)}if(D){var V=ht?b/ht.duration()*(ht._caScrollDist||0):b;C(V+(p._isFlipped?1:0)),D(V)}N&&N(-b/ht.duration()*(ht._caScrollDist||0))}},wt.enable=function(e,r){wt.enabled||(wt.enabled=!0,ym(ft,"resize",Rm),gt||ym(ft,"scroll",Dm),St&&ym(t,"refreshInit",St),!1!==e&&(wt.progress=Ct=0,a=o=Et=At()),!1!==r&&wt.refresh())},wt.getTween=function(t){return t&&i?i.tween:L},wt.setPositions=function(t,e,r,i){if(ht){var n=ht.scrollTrigger,s=ht.duration(),a=n.end-n.start;t=n.start+a*t/s,e=n.start+a*e/s}wt.refresh(!1,!1,{start:kf(t,r&&!!wt._startClamp),end:kf(e,r&&!!wt._endClamp)},i),wt.update()},wt.adjustPinSpacing=function(t){if(P&&t){var e=P.indexOf(pt.d)+1;P[e]=parseFloat(P[e])+t+um,P[1]=parseFloat(P[1])+t+um,Jm(P)}},wt.disable=function(e,r){if(wt.enabled&&(!1!==e&&wt.revert(!0,!0),wt.enabled=wt.isActive=!1,r||L&&L.pause(),B=0,n&&(n.uncache=1),St&&xm(t,"refreshInit",St),z&&(z.pause(),i.tween&&i.tween.kill()&&(i.tween=0)),!gt)){for(var s=Pm.length;s--;)if(Pm[s].scroller===ft&&Pm[s]!==wt)return;xm(ft,"resize",Rm),gt||xm(ft,"scroll",Dm)}},wt.kill=function(t,i){wt.disable(t,i),L&&!i&&L.kill(),Y&&delete Cm[Y];var s=Pm.indexOf(wt);s>=0&&Pm.splice(s,1),s===nf&&jm>0&&nf--,s=0,Pm.forEach((function(t){return t.scroller===wt.scroller&&(s=1)})),s||wf||(wt.scroll.rec=0),r&&(r.scrollTrigger=null,t&&r.revert({kill:!1}),i||r.kill()),u&&[u,c,p,d].forEach((function(t){return t.parentNode&&t.parentNode.removeChild(t)})),Mf===wt&&(Mf=0),Q&&(n&&(n.uncache=1),s=0,Pm.forEach((function(t){return t.pin===Q&&s++})),s||(n.spacer=0)),e.onKill&&e.onKill(wt)},Pm.push(wt),wt.enable(!1,!1),G&&G(wt),r&&r.add&&!g){var It=wt.update;wt.update=function(){wt.update=It,l||h||wt.refresh()},Wd.delayedCall(.01,wt.update),g=.01,l=h=0}else wt.refresh();Q&&function(){if(Sf!==Gm){var t=Sf=Gm;requestAnimationFrame((function(){return t===Gm&&Hm(!0)}))}}()}else this.update=this.refresh=this.kill=Ff},t.register=function(e){return Hd||(Wd=e||Bf(),zf()&&window.document&&t.enable(),Hd=Af),Hd},t.defaults=function(t){if(t)for(var e in t)wm[e]=t[e];return wm},t.disable=function(t,e){Af=0,Pm.forEach((function(r){return r[e?"kill":"disable"](t)})),xm(Ud,"wheel",Dm),xm(jd,"scroll",Dm),clearInterval(Qd),xm(jd,"touchcancel",Ff),xm(qd,"touchstart",Ff),vm(xm,jd,"pointerdown,touchstart,mousedown",If),vm(xm,jd,"pointerup,touchend,mouseup",Lf),Zd.kill(),Hf(xm);for(var r=0;r<_d.length;r+=3)_m(xm,_d[r],_d[r+1]),_m(xm,_d[r],_d[r+2])},t.enable=function(){if(Ud=window,jd=document,Xd=jd.documentElement,qd=jd.body,Wd&&($d=Wd.utils.toArray,Jd=Wd.utils.clamp,gf=Wd.core.context||Ff,hf=Wd.core.suppressOverwrites||Ff,vf=Ud.history.scrollRestoration||"auto",Um=Ud.pageYOffset,Wd.core.globals("ScrollTrigger",t),qd)){Af=1,(yf=document.createElement("div")).style.height="100vh",yf.style.position="absolute",Wm(),Rf(),Gd.register(Wd),t.isTouch=Gd.isTouch,mf=Gd.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),ym(Ud,"wheel",Dm),Yd=[Ud,jd,Xd,qd],Wd.matchMedia?(t.matchMedia=function(t){var e,r=Wd.matchMedia();for(e in t)r.add(e,t[e]);return r},Wd.addEventListener("matchMediaInit",(function(){return Vm()})),Wd.addEventListener("matchMediaRevert",(function(){return Bm()})),Wd.addEventListener("matchMedia",(function(){Hm(0,1),Om("matchMedia")})),Wd.matchMedia("(orientation: portrait)",(function(){return km(),km}))):console.warn("Requires GSAP 3.11.0 or later"),km(),ym(jd,"scroll",Dm);var e,r,i=qd.style,n=i.borderTopStyle,s=Wd.core.Animation.prototype;for(s.revert||Object.defineProperty(s,"revert",{value:function(){return this.time(-.01,!0)}}),i.borderTopStyle="solid",e=dm(qd),Id.m=Math.round(e.top+Id.sc())||0,Rd.m=Math.round(e.left+Rd.sc())||0,n?i.borderTopStyle=n:i.removeProperty("border-top-style"),Qd=setInterval(Am,250),Wd.delayedCall(.5,(function(){return Tf=0})),ym(jd,"touchcancel",Ff),ym(qd,"touchstart",Ff),vm(ym,jd,"pointerdown,touchstart,mousedown",If),vm(ym,jd,"pointerup,touchend,mouseup",Lf),rf=Wd.utils.checkPrefix("transform"),Ym.push(rf),Hd=Ef(),Zd=Wd.delayedCall(.2,Hm).pause(),of=[jd,"visibilitychange",function(){var t=Ud.innerWidth,e=Ud.innerHeight;jd.hidden?(sf=t,af=e):sf===t&&af===e||Rm()},jd,"DOMContentLoaded",Hm,Ud,"load",Hm,Ud,"resize",Rm],Hf(ym),Pm.forEach((function(t){return t.enable(0,1)})),r=0;r<_d.length;r+=3)_m(xm,_d[r],_d[r+1]),_m(xm,_d[r],_d[r+2])}},t.config=function(e){"limitCallbacks"in e&&(_f=!!e.limitCallbacks);var r=e.syncInterval;r&&clearInterval(Qd)||(Qd=r)&&setInterval(Am,r),"ignoreMobileResize"in e&&(pf=1===t.isTouch&&e.ignoreMobileResize),"autoRefreshEvents"in e&&(Hf(xm)||Hf(ym,e.autoRefreshEvents||"none"),uf=-1===(e.autoRefreshEvents+"").indexOf("resize"))},t.scrollerProxy=function(t,e){var r=Ld(t),i=_d.indexOf(r),n=Vf(r);~i&&_d.splice(i,n?6:2),e&&(n?bd.unshift(Ud,e,qd,e,Xd,e):bd.unshift(r,e))},t.clearMatchMedia=function(t){Pm.forEach((function(e){return e._ctx&&e._ctx.query===t&&e._ctx.kill(!0,!0)}))},t.isInViewport=function(t,e,r){var i=(Uf(t)?Ld(t):t).getBoundingClientRect(),n=i[r?tm:em]*e||0;return r?i.right-n>0&&i.left+n<Ud.innerWidth:i.bottom-n>0&&i.top+n<Ud.innerHeight},t.positionInViewport=function(t,e,r){Uf(t)&&(t=Ld(t));var i=t.getBoundingClientRect(),n=i[r?tm:em],s=null==e?n/2:e in Sm?Sm[e]*n:~e.indexOf("%")?parseFloat(e)*n/100:parseFloat(e)||0;return r?(i.left+s)/Ud.innerWidth:(i.top+s)/Ud.innerHeight},t.killAll=function(t){if(Pm.slice(0).forEach((function(t){return"ScrollSmoother"!==t.vars.id&&t.kill()})),!0!==t){var e=Im.killAll||[];Im={},e.forEach((function(t){return t()}))}},t}();ag.version="3.12.2",ag.saveStyles=function(t){return t?$d(t).forEach((function(t){if(t&&t.style){var e=zm.indexOf(t);e>=0&&zm.splice(e,5),zm.push(t,t.style.cssText,t.getBBox&&t.getAttribute("transform"),Wd.core.getCache(t),gf())}})):zm},ag.revert=function(t,e){return Vm(!t,e)},ag.create=function(t,e){return new ag(t,e)},ag.refresh=function(t){return t?Rm():(Hd||ag.register())&&Hm(!0)},ag.update=function(t){return++_d.cache&&Xm(!0===t?2:0)},ag.clearScrollMemory=Nm,ag.maxScroll=function(t,e){return Wf(t,e?Rd:Id)},ag.getScrollFunc=function(t,e){return Fd(Ld(t),e?Rd:Id)},ag.getById=function(t){return Cm[t]},ag.getAll=function(){return Pm.filter((function(t){return"ScrollSmoother"!==t.vars.id}))},ag.isScrolling=function(){return!!Cf},ag.snapDirectional=gm,ag.addEventListener=function(t,e){var r=Im[t]||(Im[t]=[]);~r.indexOf(e)||r.push(e)},ag.removeEventListener=function(t,e){var r=Im[t],i=r&&r.indexOf(e);i>=0&&r.splice(i,1)},ag.batch=function(t,e){var r,i=[],n={},s=e.interval||.016,a=e.batchMax||1e9,o=function(t,e){var r=[],i=[],n=Wd.delayedCall(s,(function(){e(r,i),r=[],i=[]})).pause();return function(t){r.length||n.restart(!0),r.push(t.trigger),i.push(t),a<=r.length&&n.progress(1)}};for(r in e)n[r]="on"===r.substr(0,2)&&jf(e[r])&&"onRefreshInit"!==r?o(0,e[r]):e[r];return jf(a)&&(a=a(),ym(ag,"refresh",(function(){return a=e.batchMax()}))),$d(t).forEach((function(t){var e={};for(r in n)e[r]=n[r];e.trigger=t,i.push(ag.create(e))})),i};var og,lg=function(t,e,r,i){return e>i?t(i):e<0&&t(0),r>i?(i-e)/(r-e):r<0?e/(e-r):1},hg=function t(e,r){!0===r?e.style.removeProperty("touch-action"):e.style.touchAction=!0===r?"auto":r?"pan-"+r+(Gd.isTouch?" pinch-zoom":""):"none",e===Xd&&t(qd,r)},ug={auto:1,scroll:1},cg=function(t){var e,r=t.event,i=t.target,n=t.axis,s=(r.changedTouches?r.changedTouches[0]:r).target,a=s._gsap||Wd.core.getCache(s),o=Ef();if(!a._isScrollT||o-a._isScrollT>2e3){for(;s&&s!==qd&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!ug[(e=cm(s)).overflowY]&&!ug[e.overflowX]);)s=s.parentNode;a._isScroll=s&&s!==i&&!Vf(s)&&(ug[(e=cm(s)).overflowY]||ug[e.overflowX]),a._isScrollT=o}(a._isScroll||"x"===n)&&(r.stopPropagation(),r._gsapAllow=!0)},pg=function(t,e,r,i){return Gd.create({target:t,capture:!0,debounce:!1,lockAxis:!0,type:e,onWheel:i=i&&cg,onPress:i,onDrag:i,onScroll:i,onEnable:function(){return r&&ym(jd,Gd.eventTypes[0],fg,!1,!0)},onDisable:function(){return xm(jd,Gd.eventTypes[0],fg,!0)}})},dg=/(input|label|select|textarea)/i,fg=function(t){var e=dg.test(t.target.tagName);(e||og)&&(t._gsapAllow=!0,og=e)},mg=function(t){qf(t)||(t={}),t.preventDefault=t.isNormalizer=t.allowClicks=!0,t.type||(t.type="wheel,touch"),t.debounce=!!t.debounce,t.id=t.id||"normalizer";var e,r,i,n,s,a,o,l,h=t,u=h.normalizeScrollX,c=h.momentum,p=h.allowNestedScroll,d=h.onRelease,f=Ld(t.target)||Xd,m=Wd.core.globals().ScrollSmoother,g=m&&m.get(),v=mf&&(t.content&&Ld(t.content)||g&&!1!==t.content&&!g.smooth()&&g.content()),y=Fd(f,Id),x=Fd(f,Rd),_=1,b=(Gd.isTouch&&Ud.visualViewport?Ud.visualViewport.scale*Ud.visualViewport.width:Ud.outerWidth)/Ud.innerWidth,w=0,S=jf(c)?function(){return c(e)}:function(){return c||2.8},M=pg(f,t.type,!0,p),T=function(){return n=!1},E=Ff,P=Ff,C=function(){r=Wf(f,Id),P=Jd(mf?1:0,r),u&&(E=Jd(0,Wf(f,Rd))),i=Gm},A=function(){v._gsap.y=Of(parseFloat(v._gsap.y)+y.offset)+"px",v.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(v._gsap.y)+", 0, 1)",y.offset=y.cacheID=0},D=function(){C(),s.isActive()&&s.vars.scrollY>r&&(y()>r?s.progress(1)&&y(r):s.resetTo("scrollY",r))};return v&&Wd.set(v,{y:"+=0"}),t.ignoreCheck=function(t){return mf&&"touchmove"===t.type&&function(){if(n){requestAnimationFrame(T);var t=Of(e.deltaY/2),r=P(y.v-t);if(v&&r!==y.v+y.offset){y.offset=r-y.v;var i=Of((parseFloat(v&&v._gsap.y)||0)-y.offset);v.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+i+", 0, 1)",v._gsap.y=i+"px",y.cacheID=_d.cache,Xm()}return!0}y.offset&&A(),n=!0}()||_>1.05&&"touchstart"!==t.type||e.isGesturing||t.touches&&t.touches.length>1},t.onPress=function(){n=!1;var t=_;_=Of((Ud.visualViewport&&Ud.visualViewport.scale||1)/b),s.pause(),t!==_&&hg(f,_>1.01||!u&&"x"),a=x(),o=y(),C(),i=Gm},t.onRelease=t.onGestureStart=function(t,e){if(y.offset&&A(),e){_d.cache++;var i,n,a=S();u&&(n=(i=x())+.05*a*-t.velocityX/.227,a*=lg(x,i,n,Wf(f,Rd)),s.vars.scrollX=E(n)),n=(i=y())+.05*a*-t.velocityY/.227,a*=lg(y,i,n,Wf(f,Id)),s.vars.scrollY=P(n),s.invalidate().duration(a).play(.01),(mf&&s.vars.scrollY>=r||i>=r-1)&&Wd.to({},{onUpdate:D,duration:a})}else l.restart(!0);d&&d(t)},t.onWheel=function(){s._ts&&s.pause(),Ef()-w>1e3&&(i=0,w=Ef())},t.onChange=function(t,e,r,n,s){if(Gm!==i&&C(),e&&u&&x(E(n[2]===e?a+(t.startX-t.x):x()+e-n[1])),r){y.offset&&A();var l=s[2]===r,h=l?o+t.startY-t.y:y()+r-s[1],c=P(h);l&&h!==c&&(o+=c-h),y(c)}(r||e)&&Xm()},t.onEnable=function(){hg(f,!u&&"x"),ag.addEventListener("refresh",D),ym(Ud,"resize",D),y.smooth&&(y.target.style.scrollBehavior="auto",y.smooth=x.smooth=!1),M.enable()},t.onDisable=function(){hg(f,!0),xm(Ud,"resize",D),ag.removeEventListener("refresh",D),M.kill()},t.lockAxis=!1!==t.lockAxis,(e=new Gd(t)).iOS=mf,mf&&!y()&&y(1),mf&&Wd.ticker.add(Ff),l=e._dc,s=Wd.to(e,{ease:"power4",paused:!0,scrollX:u?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:ig(y,y(),(function(){return s.pause()}))},onUpdate:Xm,onComplete:l.vars.onComplete}),e};ag.sort=function(t){return Pm.sort(t||function(t,e){return-1e6*(t.vars.refreshPriority||0)+t.start-(e.start+-1e6*(e.vars.refreshPriority||0))})},ag.observe=function(t){return new Gd(t)},ag.normalizeScroll=function(t){if(void 0===t)return cf;if(!0===t&&cf)return cf.enable();if(!1===t)return cf&&cf.kill();var e=t instanceof Gd?t:mg(t);return cf&&cf.target===e.target&&cf.kill(),Vf(e.target)&&(cf=e),e},ag.core={_getVelocityProp:Od,_inputObserver:pg,_scrollers:_d,_proxies:bd,bridge:{ss:function(){Cf||Om("scrollStart"),Cf=Ef()},ref:function(){return tf}}},Bf()&&Wd.registerPlugin(ag);var gg,vg,yg,xg,_g,bg,wg,Sg,Mg=function(){return"undefined"!=typeof window},Tg=function(){return gg||Mg()&&(gg=window.gsap)&&gg.registerPlugin&&gg},Eg=function(t){return"string"==typeof t},Pg=function(t){return"function"==typeof t},Cg=function(t,e){var r="x"===e?"Width":"Height",i="scroll"+r,n="client"+r;return t===yg||t===xg||t===_g?Math.max(xg[i],_g[i])-(yg["inner"+r]||xg[n]||_g[n]):t[i]-t["offset"+r]},Ag=function(t,e){var r="scroll"+("x"===e?"Left":"Top");return t===yg&&(null!=t.pageXOffset?r="page"+e.toUpperCase()+"Offset":t=null!=xg[r]?xg:_g),function(){return t[r]}},Dg=function(t,e){if(!(t=bg(t)[0])||!t.getBoundingClientRect)return console.warn("scrollTo target doesn't exist. Using 0")||{x:0,y:0};var r=t.getBoundingClientRect(),i=!e||e===yg||e===_g,n=i?{top:xg.clientTop-(yg.pageYOffset||xg.scrollTop||_g.scrollTop||0),left:xg.clientLeft-(yg.pageXOffset||xg.scrollLeft||_g.scrollLeft||0)}:e.getBoundingClientRect(),s={x:r.left-n.left,y:r.top-n.top};return!i&&e&&(s.x+=Ag(e,"x")(),s.y+=Ag(e,"y")()),s},kg=function(t,e,r,i,n){return isNaN(t)||"object"==typeof t?Eg(t)&&"="===t.charAt(1)?parseFloat(t.substr(2))*("-"===t.charAt(0)?-1:1)+i-n:"max"===t?Cg(e,r)-n:Math.min(Cg(e,r),Dg(t,e)[r]-n):parseFloat(t)-n},Rg=function(){gg=Tg(),Mg()&&gg&&"undefined"!=typeof document&&document.body&&(yg=window,_g=document.body,xg=document.documentElement,bg=gg.utils.toArray,gg.config({autoKillThreshold:7}),wg=gg.config(),vg=1)},Ig={version:"3.12.2",name:"scrollTo",rawVars:1,register:function(t){gg=t,Rg()},init:function(t,e,r,i,n){vg||Rg();var s=this,a=gg.getProperty(t,"scrollSnapType");s.isWin=t===yg,s.target=t,s.tween=r,e=function(t,e,r,i){if(Pg(t)&&(t=t(e,r,i)),"object"!=typeof t)return Eg(t)&&"max"!==t&&"="!==t.charAt(1)?{x:t,y:t}:{y:t};if(t.nodeType)return{y:t,x:t};var n,s={};for(n in t)s[n]="onAutoKill"!==n&&Pg(t[n])?t[n](e,r,i):t[n];return s}(e,i,t,n),s.vars=e,s.autoKill=!!e.autoKill,s.getX=Ag(t,"x"),s.getY=Ag(t,"y"),s.x=s.xPrev=s.getX(),s.y=s.yPrev=s.getY(),Sg||(Sg=gg.core.globals().ScrollTrigger),"smooth"===gg.getProperty(t,"scrollBehavior")&&gg.set(t,{scrollBehavior:"auto"}),a&&"none"!==a&&(s.snap=1,s.snapInline=t.style.scrollSnapType,t.style.scrollSnapType="none"),null!=e.x?(s.add(s,"x",s.x,kg(e.x,t,"x",s.x,e.offsetX||0),i,n),s._props.push("scrollTo_x")):s.skipX=1,null!=e.y?(s.add(s,"y",s.y,kg(e.y,t,"y",s.y,e.offsetY||0),i,n),s._props.push("scrollTo_y")):s.skipY=1},render:function(t,e){for(var r,i,n,s,a,o=e._pt,l=e.target,h=e.tween,u=e.autoKill,c=e.xPrev,p=e.yPrev,d=e.isWin,f=e.snap,m=e.snapInline;o;)o.r(t,o.d),o=o._next;r=d||!e.skipX?e.getX():c,n=(i=d||!e.skipY?e.getY():p)-p,s=r-c,a=wg.autoKillThreshold,e.x<0&&(e.x=0),e.y<0&&(e.y=0),u&&(!e.skipX&&(s>a||s<-a)&&r<Cg(l,"x")&&(e.skipX=1),!e.skipY&&(n>a||n<-a)&&i<Cg(l,"y")&&(e.skipY=1),e.skipX&&e.skipY&&(h.kill(),e.vars.onAutoKill&&e.vars.onAutoKill.apply(h,e.vars.onAutoKillParams||[]))),d?yg.scrollTo(e.skipX?r:e.x,e.skipY?i:e.y):(e.skipY||(l.scrollTop=e.y),e.skipX||(l.scrollLeft=e.x)),!f||1!==t&&0!==t||(i=l.scrollTop,r=l.scrollLeft,m?l.style.scrollSnapType=m:l.style.removeProperty("scroll-snap-type"),l.scrollTop=i+1,l.scrollLeft=r+1,l.scrollTop=i,l.scrollLeft=r),e.xPrev=e.x,e.yPrev=e.y,Sg&&Sg.update()},kill:function(t){var e="scrollTo"===t;(e||"scrollTo_x"===t)&&(this.skipX=1),(e||"scrollTo_y"===t)&&(this.skipY=1)}};Ig.max=Cg,Ig.getOffset=Dg,Ig.buildGetter=Ag,Tg()&&gg.registerPlugin(Ig);let Lg=!1;if("undefined"!=typeof window){const t={get passive(){Lg=!0}};window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}const Fg="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1);let Og,zg,Bg,Vg,Ng=[],Gg=new Map,Wg=!1,Hg=-1;const Ug=t=>Ng.some((e=>!(!e.options.allowTouchMove||!e.options.allowTouchMove(t)))),jg=t=>{const e=t||window.event;return!!Ug(e.target)||(e.touches.length>1||(e.preventDefault&&e.preventDefault(),!1))},Xg=()=>{void 0!==Vg&&(document.body.style.paddingRight=Vg,Vg=void 0),void 0!==Og&&(document.body.style.overflow=Og,Og=void 0)},qg=()=>{if(void 0!==Bg){const t=-parseInt(document.body.style.top,10),e=-parseInt(document.body.style.left,10),r=document.documentElement,i=document.body;r.style.height=(null==zg?void 0:zg.height)||"",r.style.overflow=(null==zg?void 0:zg.overflow)||"",i.style.position=Bg.position||"",i.style.top=Bg.top||"",i.style.left=Bg.left||"",i.style.width=Bg.width||"",i.style.height=Bg.height||"",i.style.overflow=Bg.overflow||"",window.scrollTo(e,t),Bg=void 0}},Yg=(t,e)=>{if(!t)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(Gg.set(t,(null==Gg?void 0:Gg.get(t))?(null==Gg?void 0:Gg.get(t))+1:1),Ng.some((e=>e.targetElement===t)))return;const r={targetElement:t,options:e||{}};Ng=[...Ng,r],Fg?window.requestAnimationFrame((()=>{const t=document.documentElement,e=document.body;if(void 0===Bg){zg={...t.style},Bg={...e.style};const{scrollY:r,scrollX:i,innerHeight:n}=window;t.style.height="100%",t.style.overflow="hidden",e.style.position="fixed",e.style.top=-r+"px",e.style.left=-i+"px",e.style.width="100%",e.style.height="auto",e.style.overflow="hidden",setTimeout((()=>window.requestAnimationFrame((()=>{const t=n-window.innerHeight;t&&r>=n&&(e.style.top=-(r+t)+"px")}))),300)}})):(t=>{if(void 0===Vg){const e=!!t&&!0===t.reserveScrollBarGap,r=window.innerWidth-document.documentElement.clientWidth;if(e&&r>0){const t=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right"),10);Vg=document.body.style.paddingRight,document.body.style.paddingRight=`${t+r}px`}}void 0===Og&&(Og=document.body.style.overflow,document.body.style.overflow="hidden")})(e),Fg&&(t.ontouchstart=t=>{1===t.targetTouches.length&&(Hg=t.targetTouches[0].clientY)},t.ontouchmove=e=>{1===e.targetTouches.length&&((t,e)=>{const r=t.targetTouches[0].clientY-Hg;!Ug(t.target)&&(e&&0===e.scrollTop&&r>0||(t=>!!t&&t.scrollHeight-t.scrollTop<=t.clientHeight)(e)&&r<0?jg(t):t.stopPropagation())})(e,t)},Wg||(document.addEventListener("touchmove",jg,Lg?{passive:!1}:void 0),Wg=!0))},Zg=document.createElement("script"),$g=document.getElementsByTagName("script")[0];Zg.async=!0,Zg.src="//www.youtube.com/iframe_api",$g.parentNode.insertBefore(Zg,$g);class Jg extends rd.Component{static CLOSE_KEY_CODE=27;initialize(){this.open=this.open.bind(this),this.onClose=this.onClose.bind(this),this.onKeyup=this.onKeyup.bind(this),this.el.addEventListener("click",this.open)}get isYoutube(){return(this.el.href||"").match(/youtube/)}get isMp4(){return(this.el.href||"").match(/mp4$/)}get embedCode(){return this.el.dataset.embedCode}createMp4Content(){const t=document.createElement("video");return t.src=this.el.href,t.classList.add("popup-video"),t.autoplay=!0,t.controls=!0,t}createYoutubeContent(){const t=document.createElement("iframe");return t.classList.add("video-iframe"),t.src=this.youtubeVideoEmbedURL,t.allowFullscreen=!0,t.allow="autoplay",t.frameBorder="0",t}createModal(){this.modal=document.createElement("div"),this.modal.classList.add("video-modal");const t=document.createElement("button");t.classList.add("video-close-btn"),t.setAttribute("data-video-close","");const e=document.createElement("div");if(e.classList.add.apply(e.classList,["video-wrapper","container"]),this.embedCode)e.innerHTML=this.embedCode;else{const t=this.isYoutube?this.createYoutubeContent():this.isMp4?this.createMp4Content():null;e.appendChild(t)}e.appendChild(t),this.modal.appendChild(e)}open(t){t.preventDefault(),t.stopPropagation(),this.createModal(),document.body.appendChild(this.modal),Yg(this.modal),this.modal.addEventListener("click",this.onClose),window.addEventListener("keyup",this.onKeyup),ji.fromTo(this.modal,{opacity:0},{opacity:1,duration:.5}),document.body.classList.add("modal-open")}close(){Fg&&(Ng.forEach((t=>{t.targetElement.ontouchstart=null,t.targetElement.ontouchmove=null})),Wg&&(document.removeEventListener("touchmove",jg,Lg?{passive:!1}:void 0),Wg=!1),Hg=-1),Fg?qg():Xg(),Ng=[],Gg.clear(),this.modal.remove(),this.modal.removeEventListener("click",this.onClose),window.removeEventListener("keyup",this.onKeyup),document.body.classList.remove("modal-open")}onClose(t){t.target.hasAttribute("data-video-close")&&this.close()}get youtubeVideoEmbedURL(){return`//www.youtube.com/embed/${this.el.href.match(/v=(.+)/)[1]}?enablejsapi=1&autoplay=1&rel=0`}onKeyup(t){t.keyCode===this.constructor.CLOSE_KEY_CODE&&this.close()}}var Kg=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,Qg=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/gi,tv=Math.PI/180,ev=(Math.PI,Math.sin),rv=Math.cos,iv=Math.abs,nv=Math.sqrt,sv=(Math.atan2,function(t){return"number"==typeof t}),av=1e5,ov=function(t){return Math.round(t*av)/av||0};function lv(t,e,r,i,n,s,a,o,l){if(t!==o||e!==l){r=iv(r),i=iv(i);var h=n%360*tv,u=rv(h),c=ev(h),p=Math.PI,d=2*p,f=(t-o)/2,m=(e-l)/2,g=u*f+c*m,v=-c*f+u*m,y=g*g,x=v*v,_=y/(r*r)+x/(i*i);_>1&&(r=nv(_)*r,i=nv(_)*i);var b=r*r,w=i*i,S=(b*w-b*x-w*y)/(b*x+w*y);S<0&&(S=0);var M=(s===a?-1:1)*nv(S),T=M*(r*v/i),E=M*(-i*g/r),P=(t+o)/2+(u*T-c*E),C=(e+l)/2+(c*T+u*E),A=(g-T)/r,D=(v-E)/i,k=(-g-T)/r,R=(-v-E)/i,I=A*A+D*D,L=(D<0?-1:1)*Math.acos(A/nv(I)),F=(A*R-D*k<0?-1:1)*Math.acos((A*k+D*R)/nv(I*(k*k+R*R)));isNaN(F)&&(F=p),!a&&F>0?F-=d:a&&F<0&&(F+=d),L%=d,F%=d;var O,z=Math.ceil(iv(F)/(d/4)),B=[],V=F/z,N=4/3*ev(V/2)/(1+rv(V/2)),G=u*r,W=c*r,H=c*-i,U=u*i;for(O=0;O<z;O++)g=rv(n=L+O*V),v=ev(n),A=rv(n+=V),D=ev(n),B.push(g-N*v,v+N*g,A+N*D,D-N*A,A,D);for(O=0;O<B.length;O+=2)g=B[O],v=B[O+1],B[O]=g*G+v*H+P,B[O+1]=g*W+v*U+C;return B[O-2]=o,B[O-1]=l,B}}function hv(t){var e,r,i,n,s,a,o,l,h,u,c,p,d,f,m,g=(t+"").replace(Qg,(function(t){var e=+t;return e<1e-4&&e>-1e-4?0:e})).match(Kg)||[],v=[],y=0,x=0,_=2/3,b=g.length,w=0,S="ERROR: malformed path: "+t,M=function(t,e,r,i){u=(r-t)/3,c=(i-e)/3,o.push(t+u,e+c,r-u,i-c,r,i)};if(!t||!isNaN(g[0])||isNaN(g[1]))return console.log(S),v;for(e=0;e<b;e++)if(d=s,isNaN(g[e])?a=(s=g[e].toUpperCase())!==g[e]:e--,i=+g[e+1],n=+g[e+2],a&&(i+=y,n+=x),e||(l=i,h=n),"M"===s)o&&(o.length<8?v.length-=1:w+=o.length),y=l=i,x=h=n,o=[i,n],v.push(o),e+=2,s="L";else if("C"===s)o||(o=[0,0]),a||(y=x=0),o.push(i,n,y+1*g[e+3],x+1*g[e+4],y+=1*g[e+5],x+=1*g[e+6]),e+=6;else if("S"===s)u=y,c=x,"C"!==d&&"S"!==d||(u+=y-o[o.length-4],c+=x-o[o.length-3]),a||(y=x=0),o.push(u,c,i,n,y+=1*g[e+3],x+=1*g[e+4]),e+=4;else if("Q"===s)u=y+(i-y)*_,c=x+(n-x)*_,a||(y=x=0),y+=1*g[e+3],x+=1*g[e+4],o.push(u,c,y+(i-y)*_,x+(n-x)*_,y,x),e+=4;else if("T"===s)u=y-o[o.length-4],c=x-o[o.length-3],o.push(y+u,x+c,i+(y+1.5*u-i)*_,n+(x+1.5*c-n)*_,y=i,x=n),e+=2;else if("H"===s)M(y,x,y=i,x),e+=1;else if("V"===s)M(y,x,y,x=i+(a?x-y:0)),e+=1;else if("L"===s||"Z"===s)"Z"===s&&(i=l,n=h,o.closed=!0),("L"===s||iv(y-i)>.5||iv(x-n)>.5)&&(M(y,x,i,n),"L"===s&&(e+=2)),y=i,x=n;else if("A"===s){if(f=g[e+4],m=g[e+5],u=g[e+6],c=g[e+7],r=7,f.length>1&&(f.length<3?(c=u,u=m,r--):(c=m,u=f.substr(2),r-=2),m=f.charAt(1),f=f.charAt(0)),p=lv(y,x,+g[e+1],+g[e+2],+g[e+3],+f,+m,(a?y:0)+1*u,(a?x:0)+1*c),e+=r,p)for(r=0;r<p.length;r++)o.push(p[r]);y=o[o.length-2],x=o[o.length-1]}else console.log(S);return(e=o.length)<6?(v.pop(),e=0):o[0]===o[e-2]&&o[1]===o[e-1]&&(o.closed=!0),v.totalPoints=w+e,v}function uv(t){sv(t[0])&&(t=[t]);var e,r,i,n,s="",a=t.length;for(r=0;r<a;r++){for(n=t[r],s+="M"+ov(n[0])+","+ov(n[1])+" C",e=n.length,i=2;i<e;i++)s+=ov(n[i++])+","+ov(n[i++])+" "+ov(n[i++])+","+ov(n[i++])+" "+ov(n[i++])+","+ov(n[i])+" ";n.closed&&(s+="z")}return s}var cv,pv,dv=function(){return cv||"undefined"!=typeof window&&(cv=window.gsap)&&cv.registerPlugin&&cv},fv=function(){(cv=dv())?(cv.registerEase("_CE",xv.create),pv=1):console.warn("Please gsap.registerPlugin(CustomEase)")},mv=function(t){return~~(1e3*t+(t<0?-.5:.5))/1e3},gv=/[-+=\.]*\d+[\.e\-\+]*\d*[e\-\+]*\d*/gi,vv=/[cLlsSaAhHvVtTqQ]/g,yv=function t(e,r,i,n,s,a,o,l,h,u,c){var p,d=(e+i)/2,f=(r+n)/2,m=(i+s)/2,g=(n+a)/2,v=(s+o)/2,y=(a+l)/2,x=(d+m)/2,_=(f+g)/2,b=(m+v)/2,w=(g+y)/2,S=(x+b)/2,M=(_+w)/2,T=o-e,E=l-r,P=Math.abs((i-o)*E-(n-l)*T),C=Math.abs((s-o)*E-(a-l)*T);return u||(u=[{x:e,y:r},{x:o,y:l}],c=1),u.splice(c||u.length-1,0,{x:S,y:M}),(P+C)*(P+C)>h*(T*T+E*E)&&(p=u.length,t(e,r,d,f,x,_,S,M,h,u,c),t(S,M,b,w,v,y,o,l,h,u,c+1+(u.length-p))),u},xv=function(){function t(t,e,r){pv||fv(),this.id=t,this.setData(e,r)}var e=t.prototype;return e.setData=function(t,e){e=e||{};var r,i,n,s,a,o,l,h,u,c=(t=t||"0,0,1,1").match(gv),p=1,d=[],f=[],m=e.precision||1,g=m<=1;if(this.data=t,(vv.test(t)||~t.indexOf("M")&&t.indexOf("C")<0)&&(c=hv(t)[0]),4===(r=c.length))c.unshift(0,0),c.push(1,1),r=8;else if((r-2)%6)throw"Invalid CustomEase";for(0==+c[0]&&1==+c[r-2]||function(t,e,r){r||0===r||(r=Math.max(+t[t.length-1],+t[1]));var i,n=-1*+t[0],s=-r,a=t.length,o=1/(+t[a-2]+n),l=-e||(Math.abs(+t[a-1]-+t[1])<.01*(+t[a-2]-+t[0])?function(t){var e,r=t.length,i=1e20;for(e=1;e<r;e+=6)+t[e]<i&&(i=+t[e]);return i}(t)+s:+t[a-1]+s);for(l=l?1/l:-o,i=0;i<a;i+=2)t[i]=(+t[i]+n)*o,t[i+1]=(+t[i+1]+s)*l}(c,e.height,e.originY),this.segment=c,s=2;s<r;s+=6)i={x:+c[s-2],y:+c[s-1]},n={x:+c[s+4],y:+c[s+5]},d.push(i,n),yv(i.x,i.y,+c[s],+c[s+1],+c[s+2],+c[s+3],n.x,n.y,1/(2e5*m),d,d.length-1);for(r=d.length,s=0;s<r;s++)l=d[s],h=d[s-1]||l,(l.x>h.x||h.y!==l.y&&h.x===l.x||l===h)&&l.x<=1?(h.cx=l.x-h.x,h.cy=l.y-h.y,h.n=l,h.nx=l.x,g&&s>1&&Math.abs(h.cy/h.cx-d[s-2].cy/d[s-2].cx)>2&&(g=0),h.cx<p&&(h.cx?p=h.cx:(h.cx=.001,s===r-1&&(h.x-=.001,p=Math.min(p,.001),g=0)))):(d.splice(s--,1),r--);if(a=1/(r=1/p+1|0),o=0,l=d[0],g){for(s=0;s<r;s++)u=s*a,l.nx<u&&(l=d[++o]),i=l.y+(u-l.x)/l.cx*l.cy,f[s]={x:u,cx:a,y:i,cy:0,nx:9},s&&(f[s-1].cy=i-f[s-1].y);f[r-1].cy=d[d.length-1].y-i}else{for(s=0;s<r;s++)l.nx<s*a&&(l=d[++o]),f[s]=l;o<d.length-1&&(f[s-1]=d[d.length-2])}return this.ease=function(t){var e=f[t*r|0]||f[r-1];return e.nx<t&&(e=e.n),e.y+(t-e.x)/e.cx*e.cy},this.ease.custom=this,this.id&&cv&&cv.registerEase(this.id,this.ease),this},e.getSVGData=function(e){return t.getSVGData(this,e)},t.create=function(e,r,i){return new t(e,r,i).ease},t.register=function(t){cv=t,fv()},t.get=function(t){return cv.parseEase(t)},t.getSVGData=function(e,r){var i,n,s,a,o,l,h,u,c,p,d=(r=r||{}).width||100,f=r.height||100,m=r.x||0,g=(r.y||0)+f,v=cv.utils.toArray(r.path)[0];if(r.invert&&(f=-f,g=0),"string"==typeof e&&(e=cv.parseEase(e)),e.custom&&(e=e.custom),e instanceof t)i=uv(function(t,e,r,i,n,s,a){for(var o,l,h,u,c,p=t.length;--p>-1;)for(l=(o=t[p]).length,h=0;h<l;h+=2)u=o[h],c=o[h+1],o[h]=u*e+c*i+s,o[h+1]=u*r+c*n+a;return t._dirty=1,t}([e.segment],d,0,0,-f,m,g));else{for(i=[m,g],a=1/(h=Math.max(5,200*(r.precision||1))),u=5/(h+=2),c=mv(m+a*d),n=((p=mv(g+e(a)*-f))-g)/(c-m),s=2;s<h;s++)o=mv(m+s*a*d),l=mv(g+e(s*a)*-f),(Math.abs((l-p)/(o-c)-n)>u||s===h-1)&&(i.push(c,p),n=(l-p)/(o-c)),c=o,p=l;i="M"+i.join(",")}return v&&v.setAttribute("d",i),i},t}();dv()&&cv.registerPlugin(xv),xv.version="3.12.2";var _v=__webpack_require__(6030);ji.registerPlugin(xv);const bv=new ResizeObserver((t=>{for(const e of t){e.target.closest(".drawer").style.setProperty("--drawer-height",`${Math.round(e.borderBoxSize[0].blockSize)}`)}}));var wv=class extends rd.Component{onBubbleGumReady(){this.expanded=!1,this.toggleWrapper=this.el.querySelector(".drawer-toggle-wrapper"),this.toggleButton=this.el.querySelector(".drawer-toggle-wrapper button"),this.contentWrapper=this.el.querySelector(".drawer-content-wrapper"),this.content=this.el.querySelector(".drawer-content"),this.closeButton=this.el.querySelector(".drawer-close-btn"),this.#t(),this.#e(),this.#r(),Promise.all([new _v("Graphik",{weight:400}).load(),new _v("Graphik",{weight:700}).load()]).then((()=>{bv.observe(this.content),this.reducedMotion=!1,this.el.dataset.drawerOpen&&this.#i((()=>{this.#n()}))}))}#r(){const t=this.gum.getComponentOfType("CardGallery",this.el);this.on("drawer:close:end",(()=>{t.galleryDisabled(),t.animateToItem(0)})),this.on("drawer:open:end",(()=>{t.galleryEnabled()}))}#s(t){this.reducedMotion=t,document.documentElement.classList.toggle("reduced-motion",t)}#i(t){this.#s(!0),t(),this.#s(!1)}#t(){this.toggleButton.addEventListener("click",this.#n),this.closeButton.addEventListener("click",this.#a),this.contentWrapper.addEventListener("transitionend",(t=>{"height"===t.propertyName&&this.#o()}))}#e(){this.on("drawer:open:start",(()=>{if(this.reducedMotion)return;const t=this.pageMetrics.scrollY,e=this.#l(),r=this.toggleWrapper.getBoundingClientRect().bottom+t,i=parseInt(getComputedStyle(this.toggleWrapper).marginBottom),n=this.pageMetrics.lvh<this.content.offsetHeight+e?r+i-e+1:r+i-this.pageMetrics.lvh+this.#h()-1;ji.to(window,{scrollTo:{y:n,autoKill:!1},duration:1,ease:xv.create("custom","M0,0 C0.5,0.01 0.25,0.99 1,1")})})),this.on("drawer:close:start",(()=>{if(this.reducedMotion)return;const t=this.pageMetrics.scrollY,e=this.toggleWrapper.getBoundingClientRect().top+t-.5*this.pageMetrics.lvh;ji.to(window,{scrollTo:{y:e,autoKill:!1},duration:1,ease:xv.create("custom","M0,0 C0.5,0.01 0.25,0.99 1,1")})}))}#h(){return+this.el.style.getPropertyValue("--drawer-height")}#l(){return 0}#o=()=>{this.trigger("drawer:"+(this.expanded?"open:end":"close:end")),this.toggleButton.disabled=this.expanded,this.expanded?this.closeButton.focus():setTimeout((()=>this.toggleButton.focus()),0),ag.refresh()};#n=()=>{this.trigger("drawer:open:start"),this.expanded=!0,this.el.classList.toggle("expanded",this.expanded),this.reducedMotion&&this.#o()};#a=()=>{this.trigger("drawer:close:start"),this.expanded=!1,this.el.classList.toggle("expanded",this.expanded),this.reducedMotion&&this.#o()}},Sv=class extends rd.InlineMedia{onBubbleGumReady(){super.onBubbleGumReady(),this.gum.getComponentsOfType("Drawer").forEach((t=>{t.on("drawer:open:end",this.updatePosition),t.on("drawer:close:end",this.updatePosition)}))}};const Mv="ITEM_CHANGE_COMPLETED";class Tv extends rd.Component{setupScrollContainer(t){let{scrollContainer:e,itemContainer:r,prev:i,next:n}=t;return this.scrollContainer=e,this.itemContainer=r,this.items=[...this.itemContainer.children].map(((t,e)=>({el:t,index:e}))),this.navPrev=i,this.navNext=n,this.#u(),this.#t(),this.#c(),this.scrollContainerInitiated=!0,()=>{this.scrollContainerInitiated=!1,clearTimeout(this.scrollTimeout),this.scrollContainer.removeEventListener("scroll",this.#p),this.navPrev.removeEventListener("click",this.#d),this.tl&&this.tl.kill(),this.scrollContainer.scrollLeft=0}}get currentItem(){return this.items[this.currentIndex]}#t=()=>{this.navPrev.addEventListener("click",this.#d),this.navNext.addEventListener("click",this.#d),this.scrollContainer.addEventListener("scroll",this.#p),this.itemContainer.addEventListener("click",this.#f),this.on(Mv,this.#m)};#f=t=>{const e=this.items.find((e=>e.el.contains(t.target)));e&&e!==this.currentItem&&this.animateToItem(e.index)};#p=t=>{this.#g()};#g=()=>{clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(this.#c,100)};#c=()=>{const t=ji.utils.snap(this.itemOffsets,this.scrollContainer.scrollLeft),e=this.itemOffsets.indexOf(t);if(e===this.currentIndex)return;const r=this.currentIndex;this.currentIndex=e,this.trigger("ITEM_CHANGE_COMPLETED",{current:this.items[this.currentIndex],previous:this.items[r]})};animateToItem(t){if(this.tl)return;if(this.scrollContainer.scrollLeft===this.scrollWidth&&t>this.currentIndex)return;this.scrollContainer.removeEventListener("scroll",this.#p);const e=this.itemOffsets[t],r=this.currentIndex;this.currentIndex=t,this.tl=ji.to(this.scrollContainer,{scrollTo:{x:e,autoKill:!1},ease:"sine.inOut",duration:.5,onComplete:()=>{this.tl=null,this.scrollContainer.addEventListener("scroll",this.#p),this.trigger("ITEM_CHANGE_COMPLETED",{current:this.items[this.currentIndex],previous:this.items[r]})}})}#u=()=>{const t=window.getComputedStyle(this.itemContainer);this.snapAlign=getComputedStyle(this.items[0].el).scrollSnapAlign,"none"===this.snapAlign&&(this.snapAlign="center"),this.contentWidth=parseFloat(t.width),this.scrollWidth=this.scrollContainer.scrollWidth-this.scrollContainer.clientWidth,this.scrollContainerWidth=this.scrollContainer.offsetWidth;let e=0;this.itemOffsets=this.items.map(((t,r)=>(0===r&&(e=t.el.offsetLeft),"center"===this.snapAlign?Math.floor(t.el.offsetLeft-this.scrollContainerWidth/2+t.el.offsetWidth/2):Math.floor(t.el.offsetLeft-e))))};#m=()=>{[this.navPrev,this.navNext].forEach(((t,e)=>{t.disabled=0===e?0===this.currentIndex:this.currentIndex===this.items.length-1||this.scrollContainer.scrollLeft===this.scrollWidth}))};#d=t=>{let e=t.target.className.includes("prev")?-1:1;const r=this.currentIndex+1*e;this.animateToItem(r)};onResizeImmediate(){this.scrollContainerInitiated&&this.scrollContainer.removeEventListener("scroll",this.#p)}onLVChangeDebounced(){this.scrollContainerInitiated&&(this.#u(),this.scrollContainer.scrollLeft=this.itemOffsets[this.currentIndex],this.scrollContainer.addEventListener("scroll",this.#p),this.#m())}}var Ev=class extends rd.Component{initialize(){this.headline=this.el.querySelector(".vb-headline-text"),this.factDurationEl=this.el.querySelector(".vb-fact-duration"),this.popup=this.el.querySelector(".vb-popup"),this.factDurationEl&&(this.factsContainer=this.el.querySelector(".vb-facts"),this.facts=[...this.factsContainer.children]),this.#v()}#v(){const t=ji.timeline({paused:!0});t.fromTo(this.headline,{y:"100%",opacity:0},{y:"0%",opacity:1,duration:.5,ease:"power3.out"}),this.popup&&!this.factDurationEl&&t.fromTo(this.popup,{y:"100%",opacity:0},{y:"0%",opacity:1,duration:.5,ease:"power3.out"}),t.addLabel("headline-leave"),ag.create({trigger:this.el,start:"top 25%",onEnter:()=>{t.tweenTo("headline-leave")},onLeaveBack:()=>{t.tweenTo(0)}}),this.factDurationEl&&(t.to(this.headline,{y:"-100%",opacity:0,duration:.4,ease:"power3.out"}),t.fromTo([...this.facts,this.popup],{y:"100%",opacity:0},{y:"0%",opacity:1,duration:.5,ease:"power3.out",stagger:.1},"<0.2"),ag.create({trigger:this.factDurationEl,start:"top bottom",onEnter:()=>{t.tweenTo()},onLeaveBack:()=>{t.tweenTo("headline-leave")}})),ag.create({trigger:this.el,toggleClass:"active",onLeaveBack:()=>{t.pause(0)},onLeave:()=>{t.pause()}})}},Pv=class extends rd.Component{initialize(){}onBubbleGumReady=()=>{this.controllerElement=this.el,this.videoId=this.el.dataset.inlineMediaController,this.video=document.getElementById(this.videoId),this.inlineMediaElement=this.video.closest('\n      [data-component-list="InlineMedia"],\n      [data-component-list="CardInlineMedia"],\n      [data-component-list="InlineMediaPlayOnce"]'),this.inlineMedia=this.gum.getComponentOfType("InlineMedia",this.inlineMediaElement)||this.gum.getComponentOfType("InlineMediaPlayOnce",this.inlineMediaElement),this.button=this.el.querySelector(".inline-media-button"),this.circle=this.el.querySelector(".inline-media-progress-circle"),this.#y(),this.button.addEventListener("click",this.#f),this.video.addEventListener("durationchange",this.#x),this.video.addEventListener("pause",this.#_),this.video.addEventListener("play",this.#b),this.video.addEventListener("waiting",this.#w)};#y(){this.circleTotalLength=this.circle.getTotalLength(),this.circle.style.strokeDasharray=this.circleTotalLength}onLVChangeDebounced=()=>{this.#y()};#w=()=>{this.timeline&&(this.timeline.pause(),this.timeline.time(this.video.currentTime))};#f=async()=>{this.video.paused?await this.inlineMedia.play():await this.inlineMedia.pause()};#b=()=>{this.#S()};#_=()=>{this.#S(),this.timeline&&this.timeline.pause()};#x=()=>{this.video.removeEventListener("durationchange",this.#x),this.controllerElement.classList.add("loaded"),this.timeline=ji.timeline({onUpdate:this.#M,duration:this.video.duration,paused:!0}),this.#M(),this.video.addEventListener("timeupdate",this.#T),this.video.addEventListener("durationchange",(()=>{this.timeline.duration(this.video.duration)}))};#M=()=>{const t=this.timeline.progress();this.circle.style.strokeDashoffset=this.circleTotalLength*(1-t)};#T=()=>{const{currentTime:t}=this.video,e=this.timeline.time(),r=this.timeline.duration();this.video.paused?(this.timeline.pause(),this.timeline.time(t)):(e>t&&e!==r?this.timeline.timeScale(.9):this.timeline.timeScale(1),this.timeline.play(t))};#S=()=>{this.video.paused?this.controllerElement.classList.remove("playing"):this.controllerElement.classList.add("playing")}};ji.utils.clamp(0,1);var Cv=class extends rd.Component{initialize(){this.image=this.el.querySelector("figure"),this.progress=0,this.factor=.1,this.offset=-16.6,this.raf=new rd.RAF((0,rd.targetFPS)(this.#E,60)),this.scrollTrigger=ag.create({trigger:this.el,toggleClass:"active",onEnter:this.raf.start,onLeaveBack:this.raf.stop,onEnterBack:this.raf.start,onLeave:this.raf.stop})}#E=()=>{this.progress+=(this.scrollTrigger.progress-this.progress)*this.factor;const t=this.offset*this.progress;this.image.style.transform=`translateY(${t}%)`}},Av=class extends rd.Component{resetAnimationOnExit(t,e){ag.create({trigger:e,toggleClass:"active",onLeaveBack:()=>t.pause(0)})}};const Dv=function(t){function e(){return o||"undefined"!=typeof window&&(o=window.gsap)}function r(t){return f(t).id}function i(t){return m[r("string"==typeof t?h(t)[0]:t)]}function n(t){var e,r=c;if(.05<=t-d)for(d=t;r;)((e=r.g(r.t,r.p))!==r.v1||.2<t-r.t1)&&(r.v2=r.v1,r.v1=e,r.t2=r.t1,r.t1=t),r=r._next}function s(){(o=e())&&(h=o.utils.toArray,u=o.utils.getUnit,f=o.core.getCache,p=o.ticker,l=1)}function a(t,e,r,i){this.t=t,this.p=e,this.g=t._gsap.get,this.rCap=g[r||u(this.g(t,e))],this.v1=this.v2=0,this.t1=this.t2=p.time,i&&((this._next=i)._prev=this)}var o,l,h,u,c,p,d,f,m={},g={deg:360,rad:2*Math.PI},v=function(){function t(t,e){l||s(),this.target=h(t)[0],(m[r(this.target)]=this)._props={},e&&this.add(e)}t.register=function(t){o=t,s()};var e=t.prototype;return e.get=function(t,e){var r,i,n=this._props[t]||console.warn("Not tracking "+t+" velocity.");return r=parseFloat(e?n.v1:n.g(n.t,n.p))-parseFloat(n.v2),(i=n.rCap)&&(r%=i)!=r%(i/2)&&(r=r<0?r+i:r-i),function(t){return Math.round(1e4*t)/1e4}(r/((e?n.t1:p.time)-n.t2))},e.getAll=function(){var t,e={},r=this._props;for(t in r)e[t]=this.get(t);return e},e.isTracking=function(t){return t in this._props},e.add=function(t,e){t in this._props||(c||(p.add(n),d=p.time),c=this._props[t]=new a(this.target,t,e,c))},e.remove=function(t){var e,r,i=this._props[t];i&&(e=i._prev,r=i._next,e&&(e._next=r),r?r._prev=e:c===i&&(p.remove(n),c=0),delete this._props[t])},e.kill=function(t){for(var e in this._props)this.remove(e);t||delete m[r(this.target)]},t.track=function(e,r,n){l||s();for(var a,o,u=[],c=h(e),p=r.split(","),d=(n||"").split(","),f=c.length;f--;){for(a=i(c[f])||new t(c[f]),o=p.length;o--;)a.add(p[o],d[o]||d[0]);u.push(a)}return u},t.untrack=function(t,e){var r=(e||"").split(",");h(t).forEach((function(t){var e=i(t);e&&(r.length?r.forEach((function(t){return e.remove(t)})):e.kill(1))}))},t.isTracking=function(t,e){var r=i(t);return r&&r.isTracking(e)},t.getVelocity=function(t,e){var r=i(t);return r&&r.isTracking(e)?r.get(e):console.warn("Not tracking velocity of "+e)},t}();function y(){return I||"undefined"!=typeof window&&(I=window.gsap)&&I.registerPlugin&&I}function x(t){return"number"==typeof t}function _(t){return"object"==typeof t}function b(t){return"function"==typeof t}function w(t){return t}function S(t){return Math.round(1e4*t)/1e4}function M(t,e,r){for(var i in e)i in t||i===r||(t[i]=e[i]);return t}function T(t){var e,r,i={};for(e in t)i[e]=_(r=t[e])&&!Y(r)?T(r):r;return i}function E(t,e,r,i,n){var s,a,o,l,h=e.length,u=0,c=Z;if(_(t)){for(;h--;){for(o in s=e[h],a=0,t)a+=(l=s[o]-t[o])*l;a<c&&(u=h,c=a)}if((n||Z)<Z&&n<Math.sqrt(c))return t}else for(;h--;)(a=(s=e[h])-t)<0&&(a=-a),a<c&&i<=s&&s<=r&&(u=h,c=a);return e[u]}function P(t,e,r,i,n,s,a){if("auto"===t.end)return t;var o,l,h=t.end;if(r=isNaN(r)?Z:r,i=isNaN(i)?-Z:i,_(e)){if(o=e.calculated?e:(b(h)?h(e,a):E(e,h,r,i,s))||e,!e.calculated){for(l in o)e[l]=o[l];e.calculated=!0}o=o[n]}else o=b(h)?h(e,a):Y(h)?E(e,h,r,i,s):parseFloat(h);return r<o?o=r:o<i&&(o=i),{max:o,min:o,unitFactor:t.unitFactor}}function C(t,e,r){return isNaN(t[e])?r:+t[e]}function A(t,e){return.05*e*t/W}function D(t,e,r){return Math.abs((e-t)*W/r/.05)}function k(t,e,r,i){if(e.linkedProps){var n,s,a,o,l,h,u=e.linkedProps.split(","),c={};for(n=0;n<u.length;n++)(a=e[s=u[n]])&&(o=x(a.velocity)?a.velocity:(l=l||q(t))&&l.isTracking(s)?l.get(s):0,h=Math.abs(o/C(a,"resistance",i)),c[s]=parseFloat(r(t,s))+A(o,h));return c}}function R(){(I=y())&&(F=I.parseEase,O=I.utils.toArray,V=I.utils.getUnit,G=I.core.getCache,H=I.utils.clamp,j=I.core.getStyleSaver,X=I.core.reverting||function(){},z=F("power3"),W=z(.05),N=I.core.PropTween,I.config({resistance:100,unitFactors:{time:1e3,totalTime:1e3,progress:1e3,totalProgress:1e3}}),B=I.config(),I.registerPlugin(v),L=1)}v.getByTarget=i,e()&&o.registerPlugin(v);var I,L,F,O,z,B,V,N,G,W,H,U,j,X,q=v.getByTarget,Y=Array.isArray,Z=1e10,$={resistance:1,checkpoint:1,preventOvershoot:1,linkedProps:1,radius:1,duration:1},J={version:"3.12.3",name:"inertia",register:function(t){I=t,R()},init:function(t,e,r,i,n){L||R();var s=q(t);if("auto"===e){if(!s)return void console.warn("No inertia tracking on "+t+". InertiaPlugin.track(target) first.");e=s.getAll()}this.styles=j&&"object"==typeof t.style&&j(t),this.target=t,this.tween=r,U=e;var a,o,l,h,u,c,p,d,f,m=t._gsap,g=m.get,v=e.duration,y=_(v),S=e.preventOvershoot||y&&0===v.overshoot,E=C(e,"resistance",B.resistance),I=x(v)?v:function(t,e,r,i,n,s){if(void 0===r&&(r=10),void 0===i&&(i=.2),void 0===n&&(n=1),void 0===s&&(s=0),function(t){return"string"==typeof t}(t)&&(t=O(t)[0]),!t)return 0;var a,o,l,h,u,c,p,d,f,m,g=0,v=Z,y=e.inertia||e,b=G(t).get,w=C(y,"resistance",B.resistance);for(a in m=k(t,y,b,w),y)$[a]||(_(o=y[a])||((d=d||q(t))&&d.isTracking(a)?o=x(o)?{velocity:o}:{velocity:d.get(a)}:(h=+o||0,l=Math.abs(h/w))),_(o)&&(h=x(o.velocity)?o.velocity:(d=d||q(t))&&d.isTracking(a)?d.get(a):0,l=H(i,r,Math.abs(h/C(o,"resistance",w))),c=(u=parseFloat(b(t,a))||0)+A(h,l),"end"in o&&(o=P(o,m&&a in m?m:c,o.max,o.min,a,y.radius,h),s&&(U===e&&(U=y=T(e)),y[a]=M(o,y[a],"end"))),"max"in o&&c>+o.max+1e-10?(f=o.unitFactor||B.unitFactors[a]||1,(p=u>o.max&&o.min!==o.max||-15<h*f&&h*f<45?i+.1*(r-i):D(u,o.max,h))+n<v&&(v=p+n)):"min"in o&&c<o.min-1e-10&&(f=o.unitFactor||B.unitFactors[a]||1,(p=u<o.min&&o.min!==o.max||-45<h*f&&h*f<15?i+.1*(r-i):D(u,o.min,h))+n<v&&(v=p+n)),g<p&&(g=p)),g<l&&(g=l));return v<g&&(g=v),r<g?r:g<i?i:g}(t,e,y&&v.max||10,y&&v.min||.2,y&&"overshoot"in v?+v.overshoot:S?0:1,!0);for(a in e=U,U=0,f=k(t,e,g,E),e)$[a]||(b(o=e[a])&&(o=o(i,t,n)),x(o)?u=o:_(o)&&!isNaN(o.velocity)?u=+o.velocity:s&&s.isTracking(a)?u=s.get(a):console.warn("ERROR: No velocity was defined for "+t+" property: "+a),c=A(u,I),d=0,l=g(t,a),h=V(l),l=parseFloat(l),_(o)&&(p=l+c,"end"in o&&(o=P(o,f&&a in f?f:p,o.max,o.min,a,e.radius,u)),"max"in o&&+o.max<p?S||o.preventOvershoot?c=o.max-l:d=o.max-l-c:"min"in o&&+o.min>p&&(S||o.preventOvershoot?c=o.min-l:d=o.min-l-c)),this._props.push(a),this.styles&&this.styles.save(a),this._pt=new N(this._pt,t,a,l,0,w,0,m.set(t,a,this)),this._pt.u=h||0,this._pt.c1=c,this._pt.c2=d);return r.duration(I),()=>!1},render:function(t,e){var r=e._pt;if((t=z(e.tween._time/e.tween._dur))||!X())for(;r;)r.set(r.t,r.p,S(r.s+r.c1*t+r.c2*t*t)+r.u,r.d,t),r=r._next;else e.styles.revert()}};return"track,untrack,isTracking,getVelocity,getByTarget".split(",").forEach((function(t){return J[t]=v[t]})),y()&&I.registerPlugin(J),t.InertiaPlugin=J,t.VelocityTracker=v,t.default=J,t}({});var kv,Rv,Iv,Lv,Fv,Ov,zv,Bv,Vv,Nv=Dv.default,Gv="transform",Wv=Gv+"Origin",Hv=function(t){var e=t.ownerDocument||t;!(Gv in t.style)&&"msTransform"in t.style&&(Wv=(Gv="msTransform")+"Origin");for(;e.parentNode&&(e=e.parentNode););if(Rv=window,zv=new Jv,e){kv=e,Iv=e.documentElement,Lv=e.body,(Bv=kv.createElementNS("http://www.w3.org/2000/svg","g")).style.transform="none";var r=e.createElement("div"),i=e.createElement("div");Lv.appendChild(r),r.appendChild(i),r.style.position="static",r.style[Gv]="translate3d(0,0,1px)",Vv=i.offsetParent!==r,Lv.removeChild(r)}return e},Uv=[],jv=[],Xv=function(t){return t.ownerSVGElement||("svg"===(t.tagName+"").toLowerCase()?t:null)},qv=function t(e){return"fixed"===Rv.getComputedStyle(e).position||((e=e.parentNode)&&1===e.nodeType?t(e):void 0)},Yv=function t(e,r){if(e.parentNode&&(kv||Hv(e))){var i=Xv(e),n=i?i.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",s=i?r?"rect":"g":"div",a=2!==r?0:100,o=3===r?100:0,l="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",h=kv.createElementNS?kv.createElementNS(n.replace(/^https/,"http"),s):kv.createElement(s);return r&&(i?(Ov||(Ov=t(e)),h.setAttribute("width",.01),h.setAttribute("height",.01),h.setAttribute("transform","translate("+a+","+o+")"),Ov.appendChild(h)):(Fv||((Fv=t(e)).style.cssText=l),h.style.cssText=l+"width:0.1px;height:0.1px;top:"+o+"px;left:"+a+"px",Fv.appendChild(h))),h}throw"Need document and parent."},Zv=function(t,e){var r,i,n,s,a,o,l=Xv(t),h=t===l,u=l?Uv:jv,c=t.parentNode;if(t===Rv)return t;if(u.length||u.push(Yv(t,1),Yv(t,2),Yv(t,3)),r=l?Ov:Fv,l)h?(n=function(t){var e,r=t.getCTM();return r||(e=t.style[Gv],t.style[Gv]="none",t.appendChild(Bv),r=Bv.getCTM(),t.removeChild(Bv),e?t.style[Gv]=e:t.style.removeProperty(Gv.replace(/([A-Z])/g,"-$1").toLowerCase())),r||zv.clone()}(t),s=-n.e/n.a,a=-n.f/n.d,i=zv):t.getBBox?(n=t.getBBox(),i=(i=t.transform?t.transform.baseVal:{}).numberOfItems?i.numberOfItems>1?function(t){for(var e=new Jv,r=0;r<t.numberOfItems;r++)e.multiply(t.getItem(r).matrix);return e}(i):i.getItem(0).matrix:zv,s=i.a*n.x+i.c*n.y,a=i.b*n.x+i.d*n.y):(i=new Jv,s=a=0),e&&"g"===t.tagName.toLowerCase()&&(s=a=0),(h?l:c).appendChild(r),r.setAttribute("transform","matrix("+i.a+","+i.b+","+i.c+","+i.d+","+(i.e+s)+","+(i.f+a)+")");else{if(s=a=0,Vv)for(i=t.offsetParent,n=t;n&&(n=n.parentNode)&&n!==i&&n.parentNode;)(Rv.getComputedStyle(n)[Gv]+"").length>4&&(s=n.offsetLeft,a=n.offsetTop,n=0);if("absolute"!==(o=Rv.getComputedStyle(t)).position&&"fixed"!==o.position)for(i=t.offsetParent;c&&c!==i;)s+=c.scrollLeft||0,a+=c.scrollTop||0,c=c.parentNode;(n=r.style).top=t.offsetTop-a+"px",n.left=t.offsetLeft-s+"px",n[Gv]=o[Gv],n[Wv]=o[Wv],n.position="fixed"===o.position?"fixed":"absolute",t.parentNode.appendChild(r)}return r},$v=function(t,e,r,i,n,s,a){return t.a=e,t.b=r,t.c=i,t.d=n,t.e=s,t.f=a,t},Jv=function(){function t(t,e,r,i,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===s&&(s=0),$v(this,t,e,r,i,n,s)}var e=t.prototype;return e.inverse=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.e,s=this.f,a=t*i-e*r||1e-10;return $v(this,i/a,-e/a,-r/a,t/a,(r*s-i*n)/a,-(t*s-e*n)/a)},e.multiply=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,s=this.e,a=this.f,o=t.a,l=t.c,h=t.b,u=t.d,c=t.e,p=t.f;return $v(this,o*e+h*i,o*r+h*n,l*e+u*i,l*r+u*n,s+c*e+p*i,a+c*r+p*n)},e.clone=function(){return new t(this.a,this.b,this.c,this.d,this.e,this.f)},e.equals=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,s=this.e,a=this.f;return e===t.a&&r===t.b&&i===t.c&&n===t.d&&s===t.e&&a===t.f},e.apply=function(t,e){void 0===e&&(e={});var r=t.x,i=t.y,n=this.a,s=this.b,a=this.c,o=this.d,l=this.e,h=this.f;return e.x=r*n+i*a+l||0,e.y=r*s+i*o+h||0,e},t}();function Kv(t,e,r,i){if(!t||!t.parentNode||(kv||Hv(t)).documentElement===t)return new Jv;var n=function(t){for(var e,r;t&&t!==Lv;)(r=t._gsap)&&r.uncache&&r.get(t,"x"),r&&!r.scaleX&&!r.scaleY&&r.renderTransform&&(r.scaleX=r.scaleY=1e-4,r.renderTransform(1,r),e?e.push(r):e=[r]),t=t.parentNode;return e}(t),s=Xv(t)?Uv:jv,a=Zv(t,r),o=s[0].getBoundingClientRect(),l=s[1].getBoundingClientRect(),h=s[2].getBoundingClientRect(),u=a.parentNode,c=!i&&qv(t),p=new Jv((l.left-o.left)/100,(l.top-o.top)/100,(h.left-o.left)/100,(h.top-o.top)/100,o.left+(c?0:Rv.pageXOffset||kv.scrollLeft||Iv.scrollLeft||Lv.scrollLeft||0),o.top+(c?0:Rv.pageYOffset||kv.scrollTop||Iv.scrollTop||Lv.scrollTop||0));if(u.removeChild(a),n)for(o=n.length;o--;)(l=n[o]).scaleX=l.scaleY=0,l.renderTransform(1,l);return e?p.inverse():p}function Qv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var ty,ey,ry,iy,ny,sy,ay,oy,ly,hy,uy,cy,py,dy,fy,my,gy,vy,yy,xy,_y,by,wy=0,Sy=function(){return"undefined"!=typeof window},My=function(){return ty||Sy()&&(ty=window.gsap)&&ty.registerPlugin&&ty},Ty=function(t){return"function"==typeof t},Ey=function(t){return"object"==typeof t},Py=function(t){return void 0===t},Cy=function(){return!1},Ay="transform",Dy="transformOrigin",ky=function(t){return Math.round(1e4*t)/1e4},Ry=Array.isArray,Iy=function(t,e){var r=ry.createElementNS?ry.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):ry.createElement(t);return r.style?r:ry.createElement(t)},Ly=180/Math.PI,Fy=1e20,Oy=new Jv,zy=Date.now||function(){return(new Date).getTime()},By=[],Vy={},Ny=0,Gy=/^(?:a|input|textarea|button|select)$/i,Wy=0,Hy={},Uy={},jy=function(t,e){var r,i={};for(r in t)i[r]=e?t[r]*e:t[r];return i},Xy=function t(e,r){for(var i,n=e.length;n--;)r?e[n].style.touchAction=r:e[n].style.removeProperty("touch-action"),(i=e[n].children)&&i.length&&t(i,r)},qy=function(){return By.forEach((function(t){return t()}))},Yy=function(){return!By.length&&ty.ticker.remove(qy)},Zy=function(t){for(var e=By.length;e--;)By[e]===t&&By.splice(e,1);ty.to(Yy,{overwrite:!0,delay:15,duration:0,onComplete:Yy,data:"_draggable"})},$y=function(t,e,r,i){if(t.addEventListener){var n=py[e];i=i||(uy?{passive:!1}:null),t.addEventListener(n||e,r,i),n&&e!==n&&t.addEventListener(e,r,i)}},Jy=function(t,e,r,i){if(t.removeEventListener){var n=py[e];t.removeEventListener(n||e,r,i),n&&e!==n&&t.removeEventListener(e,r,i)}},Ky=function(t){t.preventDefault&&t.preventDefault(),t.preventManipulation&&t.preventManipulation()},Qy=function t(e){dy=e.touches&&wy<e.touches.length,Jy(e.target,"touchend",t)},tx=function(t){dy=t.touches&&wy<t.touches.length,$y(t.target,"touchend",Qy)},ex=function(t){return ey.pageYOffset||t.scrollTop||t.documentElement.scrollTop||t.body.scrollTop||0},rx=function(t){return ey.pageXOffset||t.scrollLeft||t.documentElement.scrollLeft||t.body.scrollLeft||0},ix=function t(e,r){$y(e,"scroll",r),sx(e.parentNode)||t(e.parentNode,r)},nx=function t(e,r){Jy(e,"scroll",r),sx(e.parentNode)||t(e.parentNode,r)},sx=function(t){return!(t&&t!==iy&&9!==t.nodeType&&t!==ry.body&&t!==ey&&t.nodeType&&t.parentNode)},ax=function(t,e){var r="x"===e?"Width":"Height",i="scroll"+r,n="client"+r;return Math.max(0,sx(t)?Math.max(iy[i],ny[i])-(ey["inner"+r]||iy[n]||ny[n]):t[i]-t[n])},ox=function t(e,r){var i=ax(e,"x"),n=ax(e,"y");sx(e)?e=Uy:t(e.parentNode,r),e._gsMaxScrollX=i,e._gsMaxScrollY=n,r||(e._gsScrollX=e.scrollLeft||0,e._gsScrollY=e.scrollTop||0)},lx=function(t,e,r){var i=t.style;i&&(Py(i[e])&&(e=ly(e,t)||e),null==r?i.removeProperty&&i.removeProperty(e.replace(/([A-Z])/g,"-$1").toLowerCase()):i[e]=r)},hx=function(t){return ey.getComputedStyle(t instanceof Element?t:t.host||(t.parentNode||{}).host||t)},ux={},cx=function(t){if(t===ey)return ux.left=ux.top=0,ux.width=ux.right=iy.clientWidth||t.innerWidth||ny.clientWidth||0,ux.height=ux.bottom=(t.innerHeight||0)-20<iy.clientHeight?iy.clientHeight:t.innerHeight||ny.clientHeight||0,ux;var e=t.ownerDocument||ry,r=Py(t.pageX)?t.nodeType||Py(t.left)||Py(t.top)?hy(t)[0].getBoundingClientRect():t:{left:t.pageX-rx(e),top:t.pageY-ex(e),right:t.pageX-rx(e)+1,bottom:t.pageY-ex(e)+1};return Py(r.right)&&!Py(r.width)?(r.right=r.left+r.width,r.bottom=r.top+r.height):Py(r.width)&&(r={width:r.right-r.left,height:r.bottom-r.top,right:r.right,left:r.left,bottom:r.bottom,top:r.top}),r},px=function(t,e,r){var i,n=t.vars,s=n[r],a=t._listeners[e];return Ty(s)&&(i=s.apply(n.callbackScope||t,n[r+"Params"]||[t.pointerEvent])),a&&!1===t.dispatchEvent(e)&&(i=!1),i},dx=function(t,e){var r,i,n,s=hy(t)[0];return s.nodeType||s===ey?mx(s,e):Py(t.left)?{left:i=t.min||t.minX||t.minRotation||0,top:r=t.min||t.minY||0,width:(t.max||t.maxX||t.maxRotation||0)-i,height:(t.max||t.maxY||0)-r}:(n={x:0,y:0},{left:t.left-n.x,top:t.top-n.y,width:t.width,height:t.height})},fx={},mx=function(t,e){e=hy(e)[0];var r,i,n,s,a,o,l,h,u,c,p,d,f,m=t.getBBox&&t.ownerSVGElement,g=t.ownerDocument||ry;if(t===ey)n=ex(g),i=(r=rx(g))+(g.documentElement.clientWidth||t.innerWidth||g.body.clientWidth||0),s=n+((t.innerHeight||0)-20<g.documentElement.clientHeight?g.documentElement.clientHeight:t.innerHeight||g.body.clientHeight||0);else{if(e===ey||Py(e))return t.getBoundingClientRect();r=n=0,m?(p=(c=t.getBBox()).width,d=c.height):(t.viewBox&&(c=t.viewBox.baseVal)&&(r=c.x||0,n=c.y||0,p=c.width,d=c.height),p||(c="border-box"===(f=hx(t)).boxSizing,p=(parseFloat(f.width)||t.clientWidth||0)+(c?0:parseFloat(f.borderLeftWidth)+parseFloat(f.borderRightWidth)),d=(parseFloat(f.height)||t.clientHeight||0)+(c?0:parseFloat(f.borderTopWidth)+parseFloat(f.borderBottomWidth)))),i=p,s=d}return t===e?{left:r,top:n,width:i-r,height:s-n}:(o=(a=Kv(e,!0).multiply(Kv(t))).apply({x:r,y:n}),l=a.apply({x:i,y:n}),h=a.apply({x:i,y:s}),u=a.apply({x:r,y:s}),{left:r=Math.min(o.x,l.x,h.x,u.x),top:n=Math.min(o.y,l.y,h.y,u.y),width:Math.max(o.x,l.x,h.x,u.x)-r,height:Math.max(o.y,l.y,h.y,u.y)-n})},gx=function(t,e,r,i,n,s){var a,o,l,h={};if(e)if(1!==n&&e instanceof Array){if(h.end=a=[],l=e.length,Ey(e[0]))for(o=0;o<l;o++)a[o]=jy(e[o],n);else for(o=0;o<l;o++)a[o]=e[o]*n;r+=1.1,i-=1.1}else Ty(e)?h.end=function(r){var i,s,a=e.call(t,r);if(1!==n)if(Ey(a)){for(s in i={},a)i[s]=a[s]*n;a=i}else a*=n;return a}:h.end=e;return(r||0===r)&&(h.max=r),(i||0===i)&&(h.min=i),s&&(h.velocity=0),h},vx=function t(e){var r;return!(!e||!e.getAttribute||e===ny)&&(!("true"!==(r=e.getAttribute("data-clickable"))&&("false"===r||!Gy.test(e.nodeName+"")&&"true"!==e.getAttribute("contentEditable")))||t(e.parentNode))},yx=function(t,e){for(var r,i=t.length;i--;)(r=t[i]).ondragstart=r.onselectstart=e?null:Cy,ty.set(r,{lazy:!0,userSelect:e?"text":"none"})},xx=function t(e){return"fixed"===hx(e).position||((e=e.parentNode)&&1===e.nodeType?t(e):void 0)},_x=function(t,e){t=ty.utils.toArray(t)[0],e=e||{};var r,i,n,s,a,o,l=document.createElement("div"),h=l.style,u=t.firstChild,c=0,p=0,d=t.scrollTop,f=t.scrollLeft,m=t.scrollWidth,g=t.scrollHeight,v=0,y=0,x=0;_y&&!1!==e.force3D?(a="translate3d(",o="px,0px)"):Ay&&(a="translate(",o="px)"),this.scrollTop=function(t,e){if(!arguments.length)return-this.top();this.top(-t,e)},this.scrollLeft=function(t,e){if(!arguments.length)return-this.left();this.left(-t,e)},this.left=function(r,i){if(!arguments.length)return-(t.scrollLeft+p);var n=t.scrollLeft-f,s=p;if((n>2||n<-2)&&!i)return f=t.scrollLeft,ty.killTweensOf(this,{left:1,scrollLeft:1}),this.left(-f),void(e.onKill&&e.onKill());(r=-r)<0?(p=r-.5|0,r=0):r>y?(p=r-y|0,r=y):p=0,(p||s)&&(this._skip||(h[Ay]=a+-p+"px,"+-c+o),p+v>=0&&(h.paddingRight=p+v+"px")),t.scrollLeft=0|r,f=t.scrollLeft},this.top=function(r,i){if(!arguments.length)return-(t.scrollTop+c);var n=t.scrollTop-d,s=c;if((n>2||n<-2)&&!i)return d=t.scrollTop,ty.killTweensOf(this,{top:1,scrollTop:1}),this.top(-d),void(e.onKill&&e.onKill());(r=-r)<0?(c=r-.5|0,r=0):r>x?(c=r-x|0,r=x):c=0,(c||s)&&(this._skip||(h[Ay]=a+-p+"px,"+-c+o)),t.scrollTop=0|r,d=t.scrollTop},this.maxScrollTop=function(){return x},this.maxScrollLeft=function(){return y},this.disable=function(){for(u=l.firstChild;u;)s=u.nextSibling,t.appendChild(u),u=s;t===l.parentNode&&t.removeChild(l)},this.enable=function(){if((u=t.firstChild)!==l){for(;u;)s=u.nextSibling,l.appendChild(u),u=s;t.appendChild(l),this.calibrate()}},this.calibrate=function(e){var s,a,o,u=t.clientWidth===r;d=t.scrollTop,f=t.scrollLeft,u&&t.clientHeight===i&&l.offsetHeight===n&&m===t.scrollWidth&&g===t.scrollHeight&&!e||((c||p)&&(a=this.left(),o=this.top(),this.left(-t.scrollLeft),this.top(-t.scrollTop)),s=hx(t),u&&!e||(h.display="block",h.width="auto",h.paddingRight="0px",(v=Math.max(0,t.scrollWidth-t.clientWidth))&&(v+=parseFloat(s.paddingLeft)+(by?parseFloat(s.paddingRight):0))),h.display="inline-block",h.position="relative",h.overflow="visible",h.verticalAlign="top",h.boxSizing="content-box",h.width="100%",h.paddingRight=v+"px",by&&(h.paddingBottom=s.paddingBottom),r=t.clientWidth,i=t.clientHeight,m=t.scrollWidth,g=t.scrollHeight,y=t.scrollWidth-r,x=t.scrollHeight-i,n=l.offsetHeight,h.display="block",(a||o)&&(this.left(a),this.top(o)))},this.content=l,this.element=t,this._skip=!1,this.enable()},bx=function(t){if(Sy()&&document.body){var e=window&&window.navigator;ey=window,ry=document,iy=ry.documentElement,ny=ry.body,sy=Iy("div"),vy=!!window.PointerEvent,(ay=Iy("div")).style.cssText="visibility:hidden;height:1px;top:-1px;pointer-events:none;position:relative;clear:both;cursor:grab",gy="grab"===ay.style.cursor?"grab":"move",fy=e&&-1!==e.userAgent.toLowerCase().indexOf("android"),cy="ontouchstart"in iy&&"orientation"in ey||e&&(e.MaxTouchPoints>0||e.msMaxTouchPoints>0),i=Iy("div"),n=Iy("div"),s=n.style,a=ny,s.display="inline-block",s.position="relative",i.style.cssText="width:90px;height:40px;padding:10px;overflow:auto;visibility:hidden",i.appendChild(n),a.appendChild(i),r=n.offsetHeight+18>i.scrollHeight,a.removeChild(i),by=r,py=function(t){for(var e=t.split(","),r=(("onpointerdown"in sy?"pointerdown,pointermove,pointerup,pointercancel":"onmspointerdown"in sy?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":t).split(",")),i={},n=4;--n>-1;)i[e[n]]=r[n],i[r[n]]=e[n];try{iy.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){uy=1}}))}catch(t){}return i}("touchstart,touchmove,touchend,touchcancel"),$y(ry,"touchcancel",Cy),$y(ey,"touchmove",Cy),ny&&ny.addEventListener("touchstart",Cy),$y(ry,"contextmenu",(function(){for(var t in Vy)Vy[t].isPressed&&Vy[t].endDrag()})),ty=oy=My()}var r,i,n,s,a;ty?(my=ty.plugins.inertia,yy=ty.core.context||function(){},ly=ty.utils.checkPrefix,Ay=ly(Ay),Dy=ly(Dy),hy=ty.utils.toArray,xy=ty.core.getStyleSaver,_y=!!ly("perspective")):t&&console.warn("Please gsap.registerPlugin(Draggable)")},wx=function(){function t(t){this._listeners={},this.target=t||this}var e=t.prototype;return e.addEventListener=function(t,e){var r=this._listeners[t]||(this._listeners[t]=[]);~r.indexOf(e)||r.push(e)},e.removeEventListener=function(t,e){var r=this._listeners[t],i=r&&r.indexOf(e);i>=0&&r.splice(i,1)},e.dispatchEvent=function(t){var e,r=this;return(this._listeners[t]||[]).forEach((function(i){return!1===i.call(r,{type:t,target:r.target})&&(e=!1)})),e},t}(),Sx=function(t){var e,r;function i(e,r){var n;n=t.call(this)||this,oy||bx(1),e=hy(e)[0],n.styles=xy&&xy(e,"transform,left,top"),my||(my=ty.plugins.inertia),n.vars=r=jy(r||{}),n.target=e,n.x=n.y=n.rotation=0,n.dragResistance=parseFloat(r.dragResistance)||0,n.edgeResistance=isNaN(r.edgeResistance)?1:parseFloat(r.edgeResistance)||0,n.lockAxis=r.lockAxis,n.autoScroll=r.autoScroll||0,n.lockedAxis=null,n.allowEventDefault=!!r.allowEventDefault,ty.getProperty(e,"x");var s,a,o,l,h,u,c,p,d,f,m,g,v,y,x,_,b,w,S,M,T,E,P,C,A,D,k,R,I,L,F,O,z,B=(r.type||"x,y").toLowerCase(),V=~B.indexOf("x")||~B.indexOf("y"),N=-1!==B.indexOf("rotation"),G=N?"rotation":V?"x":"left",W=V?"y":"top",H=!(!~B.indexOf("x")&&!~B.indexOf("left")&&"scroll"!==B),U=!(!~B.indexOf("y")&&!~B.indexOf("top")&&"scroll"!==B),j=r.minimumMovement||2,X=Qv(n),q=hy(r.trigger||r.handle||e),Y={},Z=0,$=!1,J=r.autoScrollMarginTop||40,K=r.autoScrollMarginRight||40,Q=r.autoScrollMarginBottom||40,tt=r.autoScrollMarginLeft||40,et=r.clickableTest||vx,rt=0,it=e._gsap||ty.core.getCache(e),nt=xx(e),st=function(t,r){return parseFloat(it.get(e,t,r))},at=e.ownerDocument||ry,ot=function(t){return Ky(t),t.stopImmediatePropagation&&t.stopImmediatePropagation(),!1},lt=function t(r){if(X.autoScroll&&X.isDragging&&($||b)){var i,n,s,o,l,h,u,c,d=e,f=15*X.autoScroll;for($=!1,Uy.scrollTop=null!=ey.pageYOffset?ey.pageYOffset:null!=at.documentElement.scrollTop?at.documentElement.scrollTop:at.body.scrollTop,Uy.scrollLeft=null!=ey.pageXOffset?ey.pageXOffset:null!=at.documentElement.scrollLeft?at.documentElement.scrollLeft:at.body.scrollLeft,o=X.pointerX-Uy.scrollLeft,l=X.pointerY-Uy.scrollTop;d&&!n;)i=(n=sx(d.parentNode))?Uy:d.parentNode,s=n?{bottom:Math.max(iy.clientHeight,ey.innerHeight||0),right:Math.max(iy.clientWidth,ey.innerWidth||0),left:0,top:0}:i.getBoundingClientRect(),h=u=0,U&&((c=i._gsMaxScrollY-i.scrollTop)<0?u=c:l>s.bottom-Q&&c?($=!0,u=Math.min(c,f*(1-Math.max(0,s.bottom-l)/Q)|0)):l<s.top+J&&i.scrollTop&&($=!0,u=-Math.min(i.scrollTop,f*(1-Math.max(0,l-s.top)/J)|0)),u&&(i.scrollTop+=u)),H&&((c=i._gsMaxScrollX-i.scrollLeft)<0?h=c:o>s.right-K&&c?($=!0,h=Math.min(c,f*(1-Math.max(0,s.right-o)/K)|0)):o<s.left+tt&&i.scrollLeft&&($=!0,h=-Math.min(i.scrollLeft,f*(1-Math.max(0,o-s.left)/tt)|0)),h&&(i.scrollLeft+=h)),n&&(h||u)&&(ey.scrollTo(i.scrollLeft,i.scrollTop),bt(X.pointerX+h,X.pointerY+u)),d=i}if(b){var m=X.x,g=X.y;N?(X.deltaX=m-parseFloat(it.rotation),X.rotation=m,it.rotation=m+"deg",it.renderTransform(1,it)):a?(U&&(X.deltaY=g-a.top(),a.top(g)),H&&(X.deltaX=m-a.left(),a.left(m))):V?(U&&(X.deltaY=g-parseFloat(it.y),it.y=g+"px"),H&&(X.deltaX=m-parseFloat(it.x),it.x=m+"px"),it.renderTransform(1,it)):(U&&(X.deltaY=g-parseFloat(e.style.top||0),e.style.top=g+"px"),H&&(X.deltaX=m-parseFloat(e.style.left||0),e.style.left=m+"px")),!p||r||R||(R=!0,!1===px(X,"drag","onDrag")&&(H&&(X.x-=X.deltaX),U&&(X.y-=X.deltaY),t(!0)),R=!1)}b=!1},ht=function(t,r){var i,n,s=X.x,o=X.y;e._gsap||(it=ty.core.getCache(e)),it.uncache&&ty.getProperty(e,"x"),V?(X.x=parseFloat(it.x),X.y=parseFloat(it.y)):N?X.x=X.rotation=parseFloat(it.rotation):a?(X.y=a.top(),X.x=a.left()):(X.y=parseFloat(e.style.top||(n=hx(e))&&n.top)||0,X.x=parseFloat(e.style.left||(n||{}).left)||0),(S||M||T)&&!r&&(X.isDragging||X.isThrowing)&&(T&&(Hy.x=X.x,Hy.y=X.y,(i=T(Hy)).x!==X.x&&(X.x=i.x,b=!0),i.y!==X.y&&(X.y=i.y,b=!0)),S&&(i=S(X.x))!==X.x&&(X.x=i,N&&(X.rotation=i),b=!0),M&&((i=M(X.y))!==X.y&&(X.y=i),b=!0)),b&&lt(!0),t||(X.deltaX=X.x-s,X.deltaY=X.y-o,px(X,"throwupdate","onThrowUpdate"))},ut=function(t,e,r,i){return null==e&&(e=-Fy),null==r&&(r=Fy),Ty(t)?function(n){var s=X.isPressed?1-X.edgeResistance:1;return t.call(X,(n>r?r+(n-r)*s:n<e?e+(n-e)*s:n)*i)*i}:Ry(t)?function(i){for(var n,s,a=t.length,o=0,l=Fy;--a>-1;)(s=(n=t[a])-i)<0&&(s=-s),s<l&&n>=e&&n<=r&&(o=a,l=s);return t[o]}:isNaN(t)?function(t){return t}:function(){return t*i}},ct=function(){var t,i,n,s;c=!1,a?(a.calibrate(),X.minX=m=-a.maxScrollLeft(),X.minY=v=-a.maxScrollTop(),X.maxX=f=X.maxY=g=0,c=!0):r.bounds&&(t=dx(r.bounds,e.parentNode),N?(X.minX=m=t.left,X.maxX=f=t.left+t.width,X.minY=v=X.maxY=g=0):Py(r.bounds.maxX)&&Py(r.bounds.maxY)?(i=dx(e,e.parentNode),X.minX=m=Math.round(st(G,"px")+t.left-i.left),X.minY=v=Math.round(st(W,"px")+t.top-i.top),X.maxX=f=Math.round(m+(t.width-i.width)),X.maxY=g=Math.round(v+(t.height-i.height))):(t=r.bounds,X.minX=m=t.minX,X.minY=v=t.minY,X.maxX=f=t.maxX,X.maxY=g=t.maxY),m>f&&(X.minX=f,X.maxX=f=m,m=X.minX),v>g&&(X.minY=g,X.maxY=g=v,v=X.minY),N&&(X.minRotation=m,X.maxRotation=f),c=!0),r.liveSnap&&(n=!0===r.liveSnap?r.snap||{}:r.liveSnap,s=Ry(n)||Ty(n),N?(S=ut(s?n:n.rotation,m,f,1),M=null):n.points?T=function(t,e,r,i,n,s,a){return s=s&&s<Fy?s*s:Fy,Ty(t)?function(o){var l,h,u,c=X.isPressed?1-X.edgeResistance:1,p=o.x,d=o.y;return o.x=p=p>r?r+(p-r)*c:p<e?e+(p-e)*c:p,o.y=d=d>n?n+(d-n)*c:d<i?i+(d-i)*c:d,(l=t.call(X,o))!==o&&(o.x=l.x,o.y=l.y),1!==a&&(o.x*=a,o.y*=a),s<Fy&&(h=o.x-p)*h+(u=o.y-d)*u>s&&(o.x=p,o.y=d),o}:Ry(t)?function(e){for(var r,i,n,a,o=t.length,l=0,h=Fy;--o>-1;)(a=(r=(n=t[o]).x-e.x)*r+(i=n.y-e.y)*i)<h&&(l=o,h=a);return h<=s?t[l]:e}:function(t){return t}}(s?n:n.points,m,f,v,g,n.radius,a?-1:1):(H&&(S=ut(s?n:n.x||n.left||n.scrollLeft,m,f,a?-1:1)),U&&(M=ut(s?n:n.y||n.top||n.scrollTop,v,g,a?-1:1))))},pt=function(){X.isThrowing=!1,px(X,"throwcomplete","onThrowComplete")},dt=function(){X.isThrowing=!1},ft=function(t,i){var n,s,o,l;t&&my?(!0===t&&(n=r.snap||r.liveSnap||{},s=Ry(n)||Ty(n),t={resistance:(r.throwResistance||r.resistance||1e3)/(N?10:1)},N?t.rotation=gx(X,s?n:n.rotation,f,m,1,i):(H&&(t[G]=gx(X,s?n:n.points||n.x||n.left,f,m,a?-1:1,i||"x"===X.lockedAxis)),U&&(t[W]=gx(X,s?n:n.points||n.y||n.top,g,v,a?-1:1,i||"y"===X.lockedAxis)),(n.points||Ry(n)&&Ey(n[0]))&&(t.linkedProps=G+","+W,t.radius=n.radius))),X.isThrowing=!0,l=isNaN(r.overshootTolerance)?1===r.edgeResistance?0:1-X.edgeResistance+.2:r.overshootTolerance,t.duration||(t.duration={max:Math.max(r.minDuration||0,"maxDuration"in r?r.maxDuration:2),min:isNaN(r.minDuration)?0===l||Ey(t)&&t.resistance>1e3?0:.5:r.minDuration,overshoot:l}),X.tween=o=ty.to(a||e,{inertia:t,data:"_draggable",onComplete:pt,onInterrupt:dt,onUpdate:r.fastMode?px:ht,onUpdateParams:r.fastMode?[X,"onthrowupdate","onThrowUpdate"]:n&&n.radius?[!1,!0]:[]}),r.fastMode||(a&&(a._skip=!0),o.render(1e9,!0,!0),ht(!0,!0),X.endX=X.x,X.endY=X.y,N&&(X.endRotation=X.x),o.play(0),ht(!0,!0),a&&(a._skip=!1))):c&&X.applyBounds()},mt=function(t){var r,i=C;C=Kv(e.parentNode,!0),t&&X.isPressed&&!C.equals(i||new Jv)&&(r=i.inverse().apply({x:o,y:l}),C.apply(r,r),o=r.x,l=r.y),C.equals(Oy)&&(C=null)},gt=function(){var t,r,i,n=1-X.edgeResistance,s=nt?rx(at):0,p=nt?ex(at):0;V&&(it.x=st(G,"px")+"px",it.y=st(W,"px")+"px",it.renderTransform()),mt(!1),fx.x=X.pointerX-s,fx.y=X.pointerY-p,C&&C.apply(fx,fx),o=fx.x,l=fx.y,b&&(bt(X.pointerX,X.pointerY),lt(!0)),O=Kv(e),a?(ct(),u=a.top(),h=a.left()):(vt()?(ht(!0,!0),ct()):X.applyBounds(),N?(t=e.ownerSVGElement?[it.xOrigin-e.getBBox().x,it.yOrigin-e.getBBox().y]:(hx(e)[Dy]||"0 0").split(" "),_=X.rotationOrigin=Kv(e).apply({x:parseFloat(t[0])||0,y:parseFloat(t[1])||0}),ht(!0,!0),r=X.pointerX-_.x-s,i=_.y-X.pointerY+p,h=X.x,u=X.y=Math.atan2(i,r)*Ly):(u=st(W,"px"),h=st(G,"px"))),c&&n&&(h>f?h=f+(h-f)/n:h<m&&(h=m-(m-h)/n),N||(u>g?u=g+(u-g)/n:u<v&&(u=v-(v-u)/n))),X.startX=h=ky(h),X.startY=u=ky(u)},vt=function(){return X.tween&&X.tween.isActive()},yt=function(){!ay.parentNode||vt()||X.isDragging||ay.parentNode.removeChild(ay)},xt=function(t,n){var h;if(!s||X.isPressed||!t||!("mousedown"!==t.type&&"pointerdown"!==t.type||n)&&zy()-rt<30&&py[X.pointerEvent.type])F&&t&&s&&Ky(t);else{if(A=vt(),z=!1,X.pointerEvent=t,py[t.type]?(P=~t.type.indexOf("touch")?t.currentTarget||t.target:at,$y(P,"touchend",wt),$y(P,"touchmove",_t),$y(P,"touchcancel",wt),$y(at,"touchstart",tx)):(P=null,$y(at,"mousemove",_t)),k=null,vy&&P||($y(at,"mouseup",wt),t&&t.target&&$y(t.target,"mouseup",wt)),E=et.call(X,t.target)&&!1===r.dragClickables&&!n)return $y(t.target,"change",wt),px(X,"pressInit","onPressInit"),px(X,"press","onPress"),yx(q,!0),void(F=!1);var u;if(D=!(!P||H===U||!1===X.vars.allowNativeTouchScrolling||X.vars.allowContextMenu&&t&&(t.ctrlKey||t.which>2))&&(H?"y":"x"),(F=!D&&!X.allowEventDefault)&&(Ky(t),$y(ey,"touchforcechange",Ky)),t.changedTouches?(t=y=t.changedTouches[0],x=t.identifier):t.pointerId?x=t.pointerId:y=x=null,wy++,u=lt,By.push(u),1===By.length&&ty.ticker.add(qy),l=X.pointerY=t.pageY,o=X.pointerX=t.pageX,px(X,"pressInit","onPressInit"),(D||X.autoScroll)&&ox(e.parentNode),!e.parentNode||!X.autoScroll||a||N||!e.parentNode._gsMaxScrollX||ay.parentNode||e.getBBox||(ay.style.width=e.parentNode.scrollWidth+"px",e.parentNode.appendChild(ay)),gt(),X.tween&&X.tween.kill(),X.isThrowing=!1,ty.killTweensOf(a||e,Y,!0),a&&ty.killTweensOf(e,{scrollTo:1},!0),X.tween=X.lockedAxis=null,(r.zIndexBoost||!N&&!a&&!1!==r.zIndexBoost)&&(e.style.zIndex=i.zIndex++),X.isPressed=!0,p=!(!r.onDrag&&!X._listeners.drag),d=!(!r.onMove&&!X._listeners.move),!1!==r.cursor||r.activeCursor)for(h=q.length;--h>-1;)ty.set(q[h],{cursor:r.activeCursor||r.cursor||("grab"===gy?"grabbing":gy)});px(X,"press","onPress")}},_t=function(t){var r,i,n,a,h,u,c=t;if(s&&!dy&&X.isPressed&&t){if(X.pointerEvent=t,r=t.changedTouches){if((t=r[0])!==y&&t.identifier!==x){for(a=r.length;--a>-1&&(t=r[a]).identifier!==x&&t.target!==e;);if(a<0)return}}else if(t.pointerId&&x&&t.pointerId!==x)return;P&&D&&!k&&(fx.x=t.pageX-(nt?rx(at):0),fx.y=t.pageY-(nt?ex(at):0),C&&C.apply(fx,fx),i=fx.x,n=fx.y,((h=Math.abs(i-o))!==(u=Math.abs(n-l))&&(h>j||u>j)||fy&&D===k)&&(k=h>u&&H?"x":"y",D&&k!==D&&$y(ey,"touchforcechange",Ky),!1!==X.vars.lockAxisOnTouchScroll&&H&&U&&(X.lockedAxis="x"===k?"y":"x",Ty(X.vars.onLockAxis)&&X.vars.onLockAxis.call(X,c)),fy&&D===k))?wt(c):(X.allowEventDefault||D&&(!k||D===k)||!1===c.cancelable?F&&(F=!1):(Ky(c),F=!0),X.autoScroll&&($=!0),bt(t.pageX,t.pageY,d))}else F&&t&&s&&Ky(t)},bt=function(t,e,r){var i,n,s,a,p,d,y=1-X.dragResistance,x=1-X.edgeResistance,w=X.pointerX,E=X.pointerY,P=u,A=X.x,D=X.y,k=X.endX,R=X.endY,I=X.endRotation,L=b;X.pointerX=t,X.pointerY=e,nt&&(t-=rx(at),e-=ex(at)),N?(a=Math.atan2(_.y-e,t-_.x)*Ly,(p=X.y-a)>180?(u-=360,X.y=a):p<-180&&(u+=360,X.y=a),X.x!==h||Math.abs(u-a)>j?(X.y=a,s=h+(u-a)*y):s=h):(C&&(d=t*C.a+e*C.c+C.e,e=t*C.b+e*C.d+C.f,t=d),(n=e-l)<j&&n>-j&&(n=0),(i=t-o)<j&&i>-j&&(i=0),(X.lockAxis||X.lockedAxis)&&(i||n)&&((d=X.lockedAxis)||(X.lockedAxis=d=H&&Math.abs(i)>Math.abs(n)?"y":U?"x":null,d&&Ty(X.vars.onLockAxis)&&X.vars.onLockAxis.call(X,X.pointerEvent)),"y"===d?n=0:"x"===d&&(i=0)),s=ky(h+i*y),a=ky(u+n*y)),(S||M||T)&&(X.x!==s||X.y!==a&&!N)&&(T&&(Hy.x=s,Hy.y=a,d=T(Hy),s=ky(d.x),a=ky(d.y)),S&&(s=ky(S(s))),M&&(a=ky(M(a)))),c&&(s>f?s=f+Math.round((s-f)*x):s<m&&(s=m+Math.round((s-m)*x)),N||(a>g?a=Math.round(g+(a-g)*x):a<v&&(a=Math.round(v+(a-v)*x)))),(X.x!==s||X.y!==a&&!N)&&(N?(X.endRotation=X.x=X.endX=s,b=!0):(U&&(X.y=X.endY=a,b=!0),H&&(X.x=X.endX=s,b=!0)),r&&!1===px(X,"move","onMove")?(X.pointerX=w,X.pointerY=E,u=P,X.x=A,X.y=D,X.endX=k,X.endY=R,X.endRotation=I,b=L):!X.isDragging&&X.isPressed&&(X.isDragging=z=!0,px(X,"dragstart","onDragStart")))},wt=function t(i,n){if(s&&X.isPressed&&(!i||null==x||n||!(i.pointerId&&i.pointerId!==x&&i.target!==e||i.changedTouches&&!function(t,e){for(var r=t.length;r--;)if(t[r].identifier===e)return!0}(i.changedTouches,x)))){X.isPressed=!1;var a,o,l,h,u,c=i,p=X.isDragging,d=X.vars.allowContextMenu&&i&&(i.ctrlKey||i.which>2),f=ty.delayedCall(.001,yt);if(P?(Jy(P,"touchend",t),Jy(P,"touchmove",_t),Jy(P,"touchcancel",t),Jy(at,"touchstart",tx)):Jy(at,"mousemove",_t),Jy(ey,"touchforcechange",Ky),vy&&P||(Jy(at,"mouseup",t),i&&i.target&&Jy(i.target,"mouseup",t)),b=!1,p&&(Z=Wy=zy(),X.isDragging=!1),Zy(lt),E&&!d)return i&&(Jy(i.target,"change",t),X.pointerEvent=c),yx(q,!1),px(X,"release","onRelease"),px(X,"click","onClick"),void(E=!1);for(o=q.length;--o>-1;)lx(q[o],"cursor",r.cursor||(!1!==r.cursor?gy:null));if(wy--,i){if((a=i.changedTouches)&&(i=a[0])!==y&&i.identifier!==x){for(o=a.length;--o>-1&&(i=a[o]).identifier!==x&&i.target!==e;);if(o<0&&!n)return}X.pointerEvent=c,X.pointerX=i.pageX,X.pointerY=i.pageY}return d&&c?(Ky(c),F=!0,px(X,"release","onRelease")):c&&!p?(F=!1,A&&(r.snap||r.bounds)&&ft(r.inertia||r.throwProps),px(X,"release","onRelease"),fy&&"touchmove"===c.type||-1!==c.type.indexOf("cancel")||(px(X,"click","onClick"),zy()-rt<300&&px(X,"doubleclick","onDoubleClick"),h=c.target||e,rt=zy(),u=function(){rt===I||!X.enabled()||X.isPressed||c.defaultPrevented||(h.click?h.click():at.createEvent&&((l=at.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,ey,1,X.pointerEvent.screenX,X.pointerEvent.screenY,X.pointerX,X.pointerY,!1,!1,!1,!1,0,null),h.dispatchEvent(l)))},fy||c.defaultPrevented||ty.delayedCall(.05,u))):(ft(r.inertia||r.throwProps),X.allowEventDefault||!c||!1===r.dragClickables&&et.call(X,c.target)||!p||D&&(!k||D!==k)||!1===c.cancelable?F=!1:(F=!0,Ky(c)),px(X,"release","onRelease")),vt()&&f.duration(X.tween.duration()),p&&px(X,"dragend","onDragEnd"),!0}F&&i&&s&&Ky(i)},St=function(t){if(t&&X.isDragging&&!a){var r=t.target||e.parentNode,i=r.scrollLeft-r._gsScrollX,n=r.scrollTop-r._gsScrollY;(i||n)&&(C?(o-=i*C.a+n*C.c,l-=n*C.d+i*C.b):(o-=i,l-=n),r._gsScrollX+=i,r._gsScrollY+=n,bt(X.pointerX,X.pointerY))}},Mt=function(t){var e=zy(),r=e-rt<100,i=e-Z<50,n=r&&I===rt,s=X.pointerEvent&&X.pointerEvent.defaultPrevented,a=r&&L===rt,o=t.isTrusted||null==t.isTrusted&&r&&n;if((n||i&&!1!==X.vars.suppressClickOnDrag)&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),r&&(!X.pointerEvent||!X.pointerEvent.defaultPrevented)&&(!n||o&&!a))return o&&n&&(L=rt),void(I=rt);(X.isPressed||i||r)&&(o&&t.detail&&r&&!s||Ky(t)),r||i||z||(t&&t.target&&(X.pointerEvent=t),px(X,"click","onClick"))},Tt=function(t){return C?{x:t.x*C.a+t.y*C.c+C.e,y:t.x*C.b+t.y*C.d+C.f}:{x:t.x,y:t.y}};return(w=i.get(e))&&w.kill(),n.startDrag=function(t,r){var i,n,s,a;xt(t||X.pointerEvent,!0),r&&!X.hitTest(t||X.pointerEvent)&&(i=cx(t||X.pointerEvent),n=cx(e),s=Tt({x:i.left+i.width/2,y:i.top+i.height/2}),a=Tt({x:n.left+n.width/2,y:n.top+n.height/2}),o-=s.x-a.x,l-=s.y-a.y),X.isDragging||(X.isDragging=z=!0,px(X,"dragstart","onDragStart"))},n.drag=_t,n.endDrag=function(t){return wt(t||X.pointerEvent,!0)},n.timeSinceDrag=function(){return X.isDragging?0:(zy()-Z)/1e3},n.timeSinceClick=function(){return(zy()-rt)/1e3},n.hitTest=function(t,e){return i.hitTest(X.target,t,e)},n.getDirection=function(t,r){var i,n,s,a,o,l,c="velocity"===t&&my?t:Ey(t)&&!N?"element":"start";return"element"===c&&(o=cx(X.target),l=cx(t)),i="start"===c?X.x-h:"velocity"===c?my.getVelocity(e,G):o.left+o.width/2-(l.left+l.width/2),N?i<0?"counter-clockwise":"clockwise":(r=r||2,n="start"===c?X.y-u:"velocity"===c?my.getVelocity(e,W):o.top+o.height/2-(l.top+l.height/2),a=(s=Math.abs(i/n))<1/r?"":i<0?"left":"right",s<r&&(""!==a&&(a+="-"),a+=n<0?"up":"down"),a)},n.applyBounds=function(t,i){var n,s,a,o,l,h;if(t&&r.bounds!==t)return r.bounds=t,X.update(!0,i);if(ht(!0),ct(),c&&!vt()){if(n=X.x,s=X.y,n>f?n=f:n<m&&(n=m),s>g?s=g:s<v&&(s=v),(X.x!==n||X.y!==s)&&(a=!0,X.x=X.endX=n,N?X.endRotation=n:X.y=X.endY=s,b=!0,lt(!0),X.autoScroll&&!X.isDragging))for(ox(e.parentNode),o=e,Uy.scrollTop=null!=ey.pageYOffset?ey.pageYOffset:null!=at.documentElement.scrollTop?at.documentElement.scrollTop:at.body.scrollTop,Uy.scrollLeft=null!=ey.pageXOffset?ey.pageXOffset:null!=at.documentElement.scrollLeft?at.documentElement.scrollLeft:at.body.scrollLeft;o&&!h;)l=(h=sx(o.parentNode))?Uy:o.parentNode,U&&l.scrollTop>l._gsMaxScrollY&&(l.scrollTop=l._gsMaxScrollY),H&&l.scrollLeft>l._gsMaxScrollX&&(l.scrollLeft=l._gsMaxScrollX),o=l;X.isThrowing&&(a||X.endX>f||X.endX<m||X.endY>g||X.endY<v)&&ft(r.inertia||r.throwProps,a)}return X},n.update=function(t,r,i){if(r&&X.isPressed){var n=Kv(e),s=O.apply({x:X.x-h,y:X.y-u}),a=Kv(e.parentNode,!0);a.apply({x:n.e-s.x,y:n.f-s.y},s),X.x-=s.x-a.e,X.y-=s.y-a.f,lt(!0),gt()}var o=X.x,l=X.y;return mt(!r),t?X.applyBounds():(b&&i&&lt(!0),ht(!0)),r&&(bt(X.pointerX,X.pointerY),b&&lt(!0)),X.isPressed&&!r&&(H&&Math.abs(o-X.x)>.01||U&&Math.abs(l-X.y)>.01&&!N)&&gt(),X.autoScroll&&(ox(e.parentNode,X.isDragging),$=X.isDragging,lt(!0),nx(e,St),ix(e,St)),X},n.enable=function(t){var i,n,o,l={lazy:!0};if(!1!==r.cursor&&(l.cursor=r.cursor||gy),ty.utils.checkPrefix("touchCallout")&&(l.touchCallout="none"),"soft"!==t){for(Xy(q,H===U?"none":r.allowNativeTouchScrolling&&e.scrollHeight===e.clientHeight==(e.scrollWidth===e.clientHeight)||r.allowEventDefault?"manipulation":H?"pan-y":"pan-x"),n=q.length;--n>-1;)o=q[n],vy||$y(o,"mousedown",xt),$y(o,"touchstart",xt),$y(o,"click",Mt,!0),ty.set(o,l),o.getBBox&&o.ownerSVGElement&&H!==U&&ty.set(o.ownerSVGElement,{touchAction:r.allowNativeTouchScrolling||r.allowEventDefault?"manipulation":H?"pan-y":"pan-x"}),r.allowContextMenu||$y(o,"contextmenu",ot);yx(q,!1)}return ix(e,St),s=!0,my&&"soft"!==t&&my.track(a||e,V?"x,y":N?"rotation":"top,left"),e._gsDragID=i="d"+Ny++,Vy[i]=X,a&&(a.enable(),a.element._gsDragID=i),(r.bounds||N)&&gt(),r.bounds&&X.applyBounds(),X},n.disable=function(t){for(var r,i=X.isDragging,n=q.length;--n>-1;)lx(q[n],"cursor",null);if("soft"!==t){for(Xy(q,null),n=q.length;--n>-1;)r=q[n],lx(r,"touchCallout",null),Jy(r,"mousedown",xt),Jy(r,"touchstart",xt),Jy(r,"click",Mt,!0),Jy(r,"contextmenu",ot);yx(q,!0),P&&(Jy(P,"touchcancel",wt),Jy(P,"touchend",wt),Jy(P,"touchmove",_t)),Jy(at,"mouseup",wt),Jy(at,"mousemove",_t)}return nx(e,St),s=!1,my&&"soft"!==t&&(my.untrack(a||e,V?"x,y":N?"rotation":"top,left"),X.tween&&X.tween.kill()),a&&a.disable(),Zy(lt),X.isDragging=X.isPressed=E=!1,i&&px(X,"dragend","onDragEnd"),X},n.enabled=function(t,e){return arguments.length?t?X.enable(e):X.disable(e):s},n.kill=function(){return X.isThrowing=!1,X.tween&&X.tween.kill(),X.disable(),ty.set(q,{clearProps:"userSelect"}),delete Vy[e._gsDragID],X},n.revert=function(){this.kill(),this.styles&&this.styles.revert()},~B.indexOf("scroll")&&(a=n.scrollProxy=new _x(e,function(t,e){for(var r in e)r in t||(t[r]=e[r]);return t}({onKill:function(){X.isPressed&&wt(null)}},r)),e.style.overflowY=U&&!cy?"auto":"hidden",e.style.overflowX=H&&!cy?"auto":"hidden",e=a.content),N?Y.rotation=1:(H&&(Y[G]=1),U&&(Y[W]=1)),it.force3D=!("force3D"in r)||r.force3D,yy(Qv(n)),n.enable(),n}return r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,i.register=function(t){ty=t,bx()},i.create=function(t,e){return oy||bx(!0),hy(t).map((function(t){return new i(t,e)}))},i.get=function(t){return Vy[(hy(t)[0]||{})._gsDragID]},i.timeSinceDrag=function(){return(zy()-Wy)/1e3},i.hitTest=function(t,e,r){if(t===e)return!1;var i,n,s,a=cx(t),o=cx(e),l=a.top,h=a.left,u=a.right,c=a.bottom,p=a.width,d=a.height,f=o.left>u||o.right<h||o.top>c||o.bottom<l;return f||!r?!f:(s=-1!==(r+"").indexOf("%"),r=parseFloat(r)||0,(i={left:Math.max(h,o.left),top:Math.max(l,o.top)}).width=Math.min(u,o.right)-i.left,i.height=Math.min(c,o.bottom)-i.top,!(i.width<0||i.height<0)&&(s?(r*=.01,(n=i.width*i.height)>=p*d*r||n>=o.width*o.height*r):i.width>r&&i.height>r))},i}(wx);!function(t,e){for(var r in e)r in t||(t[r]=e[r])}(Sx.prototype,{pointerX:0,pointerY:0,startX:0,startY:0,deltaX:0,deltaY:0,isDragging:!1,isPressed:!1}),Sx.zIndex=1e3,Sx.version="3.12.2",My()&&ty.registerPlugin(Sx),ji.registerPlugin(Sx),ji.registerPlugin(Nv);var Mx=class extends rd.Component{initialize(){this.current=0,this.dotContainer=this.el.querySelector(".ux-dots"),this.dots=[...this.el.querySelectorAll(".ux-dot")],this.scooter=this.el.querySelector(".image-hero-scooter"),this.logotype=this.el.querySelector(".image-hero-logo")}onBubbleGumReady=()=>{this.mm=ji.matchMedia(),this.mm.add({isMobile:"(max-width: 767px)",isDesktop:"(min-width: 768px)"},this.#P)};#f=t=>{const e=t.target.closest(".ux-dot");if(e){const t=this.dots.indexOf(e);t!==this.current&&this.#C(t)}};#P=t=>{const{isMobile:e,isDesktop:r}=t.conditions;if(e){this.proxy=document.createElement("div");const t=ji.timeline({paused:!0}).fromTo(this.scooter,{xPercent:-34},{xPercent:-64});this.maxX=-1*ji.getProperty(this.scooter,"width")*.3,this.snap=ji.utils.snap(this.maxX),this.map=ji.utils.mapRange(0,this.maxX,0,1),this.updateProgress=()=>{const e=ji.getProperty(this.proxy,"x"),r=this.map(this.snap(e));r!==this.current&&(this.current=r,this.#A()),t.progress(this.map(e))},this.draggable=new Sx(this.proxy,{type:"x",bounds:{minX:0,maxX:this.maxX},trigger:this.scooter,inertia:!0,onPress:()=>this.el.classList.add("active"),onRelease:()=>this.el.classList.remove("active"),onDrag:this.updateProgress,onThrowUpdate:this.updateProgress,onThrowComplete:this.updateProgress,snap:this.snap,zIndexBoost:!1}),this.dotContainer.addEventListener("click",this.#f)}return ji.to(this.logotype,{duration:1,opacity:1,delay:.5,ease:"power2.out"}),()=>{this.dotContainer.removeEventListener("click",this.#f),e&&(this.draggable.kill(),this.draggable=null)}};#A=()=>{this.dots.forEach(((t,e)=>t.classList.toggle("ux-dot--active",e===this.current)))};#C=t=>{this.navigateAnimation&&this.navigateAnimation.kill(),this.draggable.disable(),this.navigateAnimation=ji.to(this.proxy,{x:t*this.maxX,duration:.5,onUpdate:this.updateProgress,onComplete:()=>{this.draggable.enable()}})}},Tx=__webpack_require__(4028),Ex=class extends rd.Component{initialize(){this.#D()}#D(){this.motorSection=this.el.querySelector(".subsection-motor"),this.animationVars={currentFrame:0},this.content=this.motorSection.querySelector(".sticky-content"),this.motorDuration=this.motorSection.querySelector(".motor-duration"),this.canvas=this.motorSection.querySelector("canvas");const t=this.pageMetrics.lvh;ag.create({trigger:this.motorSection,start:`top-=${t} bottom`,once:!0,onEnter:this.#k})}#k=()=>{this.motorAnima=(t=>{let{from:e,to:r,template:i,canvas:n,seqAnimationOptions:s={}}=t;const a=e.length,o=+r-+e+1,l=Array.from({length:o},((t,r)=>{const n=(0,Tx.padStart)(+e+r,a,"0");return i.replace(":id",n)}));return new rd.SeqAnimation({canvas:n,sources:l,...s})})({from:"000",to:"80",canvas:this.canvas,template:"//cdn.gogoro.com/resources/pages/smartscooter/pulse/campaign/motor/motor-seq/img-motor-seq-:id.png?v=2"}),this.motorAnima.loadPromise.then((()=>{this.motorAnima.drawCover(this.animationVars.currentFrame)}));ji.matchMedia().add({isMobile:"(max-width: 767px)",isDesktop:"(min-width: 768px)"},(t=>{let{conditions:{isMobile:e}}=t;const r=ji.timeline({scrollTrigger:{trigger:this.motorDuration,start:"top bottom",end:"bottom bottom",scrub:!0}}).to(this.animationVars,{currentFrame:80,ease:"none",snap:"currentFrame",duration:10,onUpdate:()=>{this.motorAnima.drawCover(this.animationVars.currentFrame)}});e?r.to(this.canvas,{yPercent:-10,duration:10,scale:1.5,ease:"power2.in"},"<"):r.to(this.canvas,{yPercent:-10,duration:10,ease:"power2.in"},"<")}))}},Px=class extends rd.InlineMedia{initialize(){super.initialize(),this.#R(),this.#I()}#I(){[...this.el.querySelectorAll(".core-feature")].forEach((t=>{const e=t.querySelector(".core-feature-headline");ji.fromTo(e,{y:30,opacity:0},{y:0,opacity:1,scrollTrigger:{trigger:t,start:"bottom bottom",toggleActions:"play complete none reset"}})}))}#R=()=>{this._playOnEnter=!1,this._pauseOnExit=!1,this._resetOnExit=!1,this.canPlay=!0,ag.create({trigger:this.video,start:"top 75%",onEnter:()=>{this.canPlay&&(this.play(),this.canPlay=!1)}}),ag.create({trigger:this.video,onLeaveBack:()=>{this.video.currentTime=0,this.video.pause(),this.canPlay=!0}})}},Cx=__webpack_require__(7506),Ax=class extends rd.Component{initialize(){this.el.addEventListener("click",this.#f);[...this.el.querySelectorAll("audio")].forEach((t=>{t.addEventListener("ended",this.#L)})),ag.create({trigger:this.el,onEnter:this.#F,onLeave:this.#O,onEnterBack:this.#F,onLeaveBack:this.#O})}#f=t=>{const e=t.target.closest(".sound-item");e&&this.#z(e)};#z=t=>{const e=t.querySelector("audio");e.src||(e.src=e.dataset.src),t.classList.add("playing"),e.currentTime=0,e.play()};#L=t=>{const e=t.target.closest(".sound-item");e&&e.classList.remove("playing")};#F=()=>{this.loaded||(this.loaded=!0,this.animations=[...this.el.querySelectorAll(".sound-state__playing")].map((t=>Cx.loadAnimation({container:t,loop:!0,autoplay:!0,path:"//cdn.gogoro.com/resources/pages/smartscooter/pulse/customize/sound-track.json"})))),this.animations.forEach((t=>{t.play()}))};#O=()=>{this.animations.forEach((t=>{t.pause()}))}};ji.registerPlugin(ag),ji.registerPlugin(Ig),rd.BubbleGum.registerComponent("VideoBanner",Ev),rd.BubbleGum.registerComponent("ScrollImage",Cv),rd.BubbleGum.registerComponent("TextAnim",class extends Av{initialize(){this.#B()}#B(){const t=[...this.el.querySelectorAll("h2,h3,p")];this.el.nextElementSibling&&this.el.nextElementSibling.matches(".drawer")&&t.push(this.el.nextElementSibling.querySelector(".drawer-toggle-wrapper"));const e=this.el.dataset.start||"75%",r=ji.timeline({ease:"power2.out",scrollTrigger:{trigger:this.el,start:`top ${e}`}});r.from(t,{y:30,opacity:0,stagger:.1,duration:1}),this.resetAnimationOnExit(r,this.el.closest(".section, .subsection"))}}),rd.BubbleGum.registerComponent("Hero",Mx),rd.BubbleGum.registerComponent("Innovation",class extends Av{initialize(){this.copy=this.el.querySelector(".innovation-copy"),this.image=this.el.querySelector(".image-innovation-body"),this.mm=ji.matchMedia(),this.mm.add({isMobile:"(max-width: 767px)",isDesktop:"(min-width: 768px)"},(t=>{const{isMobile:e,isDesktop:r}=t.conditions;this.copyAnimation=e?ji.fromTo(this.copy,{y:64},{y:0,opacity:1,scrollTrigger:{trigger:this.el,start:"top 75%"}}):ji.fromTo(this.copy,{y:90,yPercent:-50},{y:0,opacity:1,scrollTrigger:{trigger:this.el,start:"center 75%"}}),this.resetAnimationOnExit(this.copyAnimation,this.el)}))}}),rd.BubbleGum.registerComponent("Performance",Ex),rd.BubbleGum.registerComponent("Colors",class extends Av{initialize(){this.imageContainer=this.el.querySelector(".color-images");const t=ji.timeline({scrollTrigger:{trigger:this.el,start:"top center"}}).to({},{duration:.1}).fromTo(this.imageContainer,{opacity:0,x:120},{x:0,opacity:1});this.resetAnimationOnExit(t,this.el)}}),rd.BubbleGum.registerComponent("Screen",class extends Av{initialize(){this.specs=this.el.querySelector(".screen-specs"),this.specsItems=[...this.specs.children];const t=ji.timeline({scrollTrigger:{trigger:this.specs,start:"center bottom"}});t.to({},{duration:.3}),t.fromTo(this.specsItems,{opacity:0,y:30},{opacity:1,y:0,stagger:.1,duration:.5}),this.resetAnimationOnExit(t,this.specs)}}),rd.BubbleGum.registerComponent("IQMode",class extends Tv{initialize(){this.currentDisplayIndex=0,this.radios=[...this.el.querySelectorAll(".iq-mode-radio")],this.introContainer=this.el.querySelector(".iq-mode-intro-list"),this.#y(),this.el.addEventListener("change",this.#V)}#y(){let t=0;[...this.introContainer.children].forEach((e=>{t=Math.max(t,e.offsetHeight)})),this.introContainer.style.height=`${t}px`}onLVChangeImmediate(){this.#y()}onBubbleGumReady(){this.displayItems=[...this.el.querySelectorAll(".iq-mode-display")].map(((t,e)=>{const r={el:t},i=t.querySelector("video");if(i){const e=this.gum.getComponentOfType("InlineMedia",t);r.video=i,r.inlineMedia=e,e._playOnEnter=!1}return r})),ag.create({trigger:this.el,onEnter:this.#F,onLeave:this.#N,onEnterBack:this.#F,onLeaveBack:this.#N});ji.matchMedia().add({isMobile:"(max-width: 767px)",isDesktop:"(min-width: 768px)"},(t=>{let{conditions:{isMobile:e}}=t;return e&&(Promise.all([new _v("Graphik",{weight:400}).load(),new _v("Graphik",{weight:700}).load()]).then((()=>{const t=document.createElement("div");this.destroyScrollContainer=this.setupScrollContainer({scrollContainer:this.el.querySelector(".iq-modes-container"),itemContainer:this.el.querySelector(".iq-modes"),prev:t,next:t})})),this.on("ITEM_CHANGE_COMPLETED",this.onItemChangeCallback)),()=>{this.destroyScrollContainer&&(this.destroyScrollContainer(),this.destroyScrollContainer=null,this.off("ITEM_CHANGE_COMPLETED",this.onItemChangeCallback))}}))}onItemChangeCallback=t=>{let{current:e}=t;const r=this.radios[e.index];r.checked||(this.radios[e.index].checked=!0,this.#G(r))};get currentDisplayItem(){return this.displayItems[this.currentDisplayIndex]}#V=t=>{const e=this.radios.find((e=>t.target===e));e&&this.#G(e)};#G(t){const e=this.currentDisplayItem;this.currentDisplayIndex=this.radios.indexOf(t),this.currentDisplayItem.video&&(this.currentDisplayItem.video.currentTime=0,this.currentDisplayItem.inlineMedia.play()),e.video&&e.inlineMedia.pause()}#F=()=>{this.currentDisplayItem.video&&this.currentDisplayItem.inlineMedia.play()};#N=()=>{this.currentDisplayItem.video&&(this.currentDisplayItem.inlineMedia.pause(),this.currentDisplayItem.video.currentTime=0)}}),rd.BubbleGum.registerComponent("Theme",class extends Tv{initialize(){this.radios=[...this.el.querySelectorAll(".theme-radio")];ji.matchMedia().add({isMobile:"(max-width: 767px)",isDesktop:"(min-width: 768px)"},(t=>{let{conditions:{isMobile:e}}=t;if(e){const t=document.createElement("div");this.destroyScrollContainer=this.setupScrollContainer({scrollContainer:this.el.querySelector(".theme-scroll-container"),itemContainer:this.el.querySelector(".themes"),prev:t,next:t}),this.on("ITEM_CHANGE_COMPLETED",(t=>{let{current:e}=t;this.radios[e.index].checked||(this.radios[e.index].checked=!0)})),this.el.addEventListener("change",this.#W)}return()=>{this.destroyScrollContainer&&(this.destroyScrollContainer(),this.destroyScrollContainer=null),this.el.removeEventListener("change",this.#W)}}))}#W=()=>{const t=this.radios.find((t=>t.checked)),e=this.radios.indexOf(t);this.animateToItem(e)}}),rd.BubbleGum.registerComponent("Sound",Ax),rd.BubbleGum.registerComponent("PopupVideo",Jg),rd.BubbleGum.registerComponent("Core",Px),rd.BubbleGum.registerComponent("InlineMedia",Sv),rd.BubbleGum.registerComponent("InlineMediaPlayOnce",class extends Sv{onScroll=async t=>{const e=t.scrollY+t.lvh,r=t.scrollY+.5*t.lvh;!this.currentLoadUrl&&e>this._top-1e3&&await this.load(),r>this._top&&!this.played&&(this.played=!0,await this.play())}}),rd.BubbleGum.registerComponent("PlayProgress",Pv),rd.BubbleGum.registerComponent("Drawer",wv),rd.BubbleGum.registerComponent("CardGallery",class extends Tv{initialize(){this.active=!1,this.scrollContainer=this.el.querySelector(".cg-scrolling-container"),this.info=this.el.querySelector(".cg-nav-info"),[this.prev,this.navNext]=[...this.el.querySelectorAll(".cg-nav-arrow--previous, .cg-nav-arrow--next")],this.setupScrollContainer({scrollContainer:this.scrollContainer,itemContainer:this.el.querySelector(".cg-item-container"),prev:this.prev,next:this.navNext}),this.setupScrollAnimation(),this.#H(),this.on(Mv,this.#U)}onBubbleGumReady(){this.setupInlineMedia(),ag.create({trigger:this.el,onEnter:this.onGalleryInView,onLeave:this.onGalleryOutOfView,onEnterBack:this.onGalleryInView,onLeaveBack:this.onGalleryOutOfView})}setupScrollAnimation(){const t=ji.timeline({paused:!0}),e=this.items.length;this.items.forEach(((r,i)=>{const n=r.el;0!==i?i!==e-1?(t.fromTo(n,{opacity:.3},{opacity:1}),t.to(n,{opacity:.3})):t.fromTo(n,{opacity:.3},{opacity:1}):t.to(n,{opacity:.3})})),this.scrollContainer.addEventListener("scroll",(()=>{const e=this.scrollContainer.scrollLeft/this.scrollWidth;t.progress(e)}))}galleryEnabled=async()=>{this.active=!0,await this.#j(this.currentItem.index)};galleryDisabled=async()=>{this.active=!1,await this.#X(this.currentItem.index)};onGalleryOutOfView=()=>{this.inview=!1,this.#X(this.currentItem.index,!1)};onGalleryInView=async()=>{this.inview=!0,this.active&&await this.#j(this.currentItem.index)};setupInlineMedia(){this.items.forEach((t=>{const e=t.el.querySelector("video");if(!e)return;const r=this.gum.getComponentOfType("CardInlineMedia",e.closest(".cg-media"));t.videoEl=e,t.inlineMedia=r}))}#U=async t=>{let{current:e,previous:r}=t;r&&this.#X(r.index),this.active&&await this.#j(e.index),this.#H()};#H=()=>{this.info.innerHTML=`${this.currentItem.index+1} of ${this.items.length}`};#j=async t=>{const e=this.items[t];e.videoEl&&await e.inlineMedia.play()};#X=(()=>{var t=this;return async function(e){let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=t.items[e];i.videoEl&&(await i.inlineMedia.pause(),r&&(i.videoEl.currentTime=0))}})()}),rd.BubbleGum.registerComponent("CardInlineMedia",class extends Sv{onBubbleGumReady(){}}),rd.BubbleGum.registerComponent("Specs",class extends Tv{initialize(){[this.prev,this.next]=[...this.el.querySelectorAll(".specs-arrow--prev, .specs-arrow--next")],this.setupScrollContainer({scrollContainer:this.el.querySelector(".specs-container"),itemContainer:this.el.querySelector(".specs-models"),prev:this.prev,next:this.next})}});const Dx=document.querySelector(".wave-bg"),kx=new rd.BubbleGum(document.body);kx.ready((()=>{setTimeout((()=>{Dx.style.visibility="visible"}),500),ag.batch(".progressive-image",{interval:.3,start:"top-=800 bottom",once:!0,onEnter:t=>{t.forEach((t=>{t.classList.remove("progressive-image"),kx.getComponentsForElement(t).forEach((t=>{t.trigger("image:load")}))}))}})}))}()})();
